/**
 * @license RequireJS domReady 2.0.1 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/domReady for details
 */

/**
 * @license RequireJS text 2.0.3 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

//     Underscore.js 1.4.3
//     http://underscorejs.org
//     (c) 2009-2012 Jeremy Ashkenas, DocumentCloud Inc.
//     Underscore may be freely distributed under the MIT license.

/*!
 * jQuery JavaScript Library v1.8.2
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: Thu Sep 20 2012 21:13:05 GMT-0400 (Eastern Daylight Time)
 */

/*!
 * Sizzle CSS Selector Engine
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://sizzlejs.com/
 */

//     (c) 2010-2012 Jeremy Ashkenas, DocumentCloud Inc.
//     Backbone may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://backbonejs.org

//! moment.js
//! version : 2.3.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com

/*

Copyright (C) 2011 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/

/**
 * @license RequireJS i18n 2.0.4 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/i18n for details
 */

/*!
 * backbone.layoutmanager.js v0.2.1
 * Copyright 2012, Tim Branyen (@tbranyen)
 * backbone.layoutmanager.js may be freely distributed under the MIT license.
 */

/*!
 * iScroll v4.2.2 ~ Copyright (c) 2012 Matteo Spinelli, http://cubiq.org
 * Released under MIT license, http://cubiq.org/license
 */

/*! http://mths.be/placeholder v2.0.7 by @mathias */

/*!
 * jQuery Cookie Plugin v1.4.0
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */

/*
    machina.js
    Author: Jim Cowart
    License: Dual licensed MIT (http://www.opensource.org/licenses/mit-license) & GPL (http://www.opensource.org/licenses/gpl-license)
    Version 0.1.0
*/

/********************************************************************
 *	Kalendae, a framework agnostic javascript date picker           *
 *	Copyright(c) 2013 Jarvis Badgley (chipersoft@gmail.com)         *
 *	http://github.com/ChiperSoft/Kalendae                           *
 *	Version 0.4.1                                                   *
 ********************************************************************/

/*!
* MinPubSub, modified for use on Kalendae
* Copyright(c) 2011 Daniel Lamb <daniellmb.com>
* https://github.com/daniellmb/MinPubSub
* MIT Licensed
*/

/*
 * Swipe 2.0
 *
 * Brad Birdsall
 * Copyright 2013, MIT License
 *
*/

/*
 *	jQuery dotdotdot 1.6.14
 *
 *	Copyright (c) Fred Heusschen
 *	www.frebsite.nl
 *
 *	Plugin website:
 *	dotdotdot.frebsite.nl
 *
 *	Dual licensed under the MIT and GPL licenses.
 *	http://en.wikipedia.org/wiki/MIT_License
 *	http://en.wikipedia.org/wiki/GNU_General_Public_License
 */

/*!
 * jQuery MobiScroll v2.0
 * http://mobiscroll.com
 *
 * Copyright 2010-2011, Acid Media
 * Licensed under the MIT license.
 *
 */

/** @license
 * RequireJS plugin for async dependency load like JSONP and Google Maps
 * Author: Miller Medeiros
 * Version: 0.1.1 (2011/11/17)
 * Released under the MIT license
 */

function Swipe(e,t){function c(){o=s.children,u=new Array(o.length),a=e.getBoundingClientRect().width||e.offsetWidth,s.style.width=o.length*a+"px";var t=o.length;while(t--){var n=o[t];n.style.width=a+"px",n.setAttribute("data-index",t),i.transitions&&(n.style.left=t*-a+"px",v(t,f>t?-a:f<t?a:0,0))}i.transitions||(s.style.left=f*-a+"px"),e.style.visibility="visible"}function h(){f?d(f-1):t.continuous&&d(o.length-1)}function p(){f<o.length-1?d(f+1):t.continuous&&d(0)}function d(e,n){if(f==e)return;if(i.transitions){var s=Math.abs(f-e)-1,u=Math.abs(f-e)/(f-e);while(s--)v((e>f?e:f)-s-1,a*u,0);v(f,a*u,n||l),v(e,0,n||l)}else g(f*-a,e*-a,n||l);f=e,r(t.callback&&t.callback(f,o[f]))}function v(e,t,n){m(e,t,n),u[e]=t}function m(e,t,n){var r=o[e],i=r&&r.style;if(!i)return;i.webkitTransitionDuration=i.MozTransitionDuration=i.msTransitionDuration=i.OTransitionDuration=i.transitionDuration=n+"ms",i.webkitTransform="translate("+t+"px,0)"+"translateZ(0)",i.msTransform=i.MozTransform=i.OTransform="translateX("+t+"px)"}function g(e,n,r){if(!r){s.style.left=n+"px";return}var i=+(new Date),u=setInterval(function(){var a=+(new Date)-i;if(a>r){s.style.left=n+"px",y&&w(),t.transitionEnd&&t.transitionEnd.call(event,f,o[f]),clearInterval(u);return}s.style.left=(n-e)*(Math.floor(a/r*100)/100)+e+"px"},4)}function w(){b=setTimeout(p,y)}function E(){y=0,clearTimeout(b)}var n=function(){},r=function(e){setTimeout(e||n,0)},i={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,transitions:function(e){var t=["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"];for(var n in t)if(e.style[t[n]]!==undefined)return!0;return!1}(document.createElement("swipe"))};if(!e)return;var s=e.children[0],o,u,a;t=t||{};var f=parseInt(t.startSlide,10)||0,l=t.speed||300,y=t.auto||0,b,S={},x={},T,N={handleEvent:function(e){switch(e.type){case"touchstart":this.start(e);break;case"touchmove":this.move(e);break;case"touchend":r(this.end(e));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":r(this.transitionEnd(e));break;case"resize":r(c.call())}t.stopPropagation&&e.stopPropagation()},start:function(e){var t=e.touches[0];S={x:t.pageX,y:t.pageY,time:+(new Date)},T=undefined,x={},s.addEventListener("touchmove",this,!1),s.addEventListener("touchend",this,!1)},move:function(e){if(e.touches.length>1||e.scale&&e.scale!==1)return;t.disableScroll&&e.preventDefault();var n=e.touches[0];x={x:n.pageX-S.x,y:n.pageY-S.y},typeof T=="undefined"&&(T=!!(T||Math.abs(x.x)<Math.abs(x.y))),T||(e.preventDefault(),E(),x.x=x.x/(!f&&x.x>0||f==o.length-1&&x.x<0?Math.abs(x.x)/a+1:1),m(f-1,x.x+u[f-1],0),m(f,x.x+u[f],0),m(f+1,x.x+u[f+1],0))},end:function(e){var n=+(new Date)-S.time,r=Number(n)<250&&Math.abs(x.x)>20||Math.abs(x.x)>a/2,i=!f&&x.x>0||f==o.length-1&&x.x<0,c=x.x<0;T||(r&&!i?(c?(v(f-1,-a,0),v(f,u[f]-a,l),v(f+1,u[f+1]-a,l),f+=1):(v(f+1,a,0),v(f,u[f]+a,l),v(f-1,u[f-1]+a,l),f+=-1),t.callback&&t.callback(f,o[f])):(v(f-1,-a,l),v(f,0,l),v(f+1,a,l))),s.removeEventListener("touchmove",N,!1),s.removeEventListener("touchend",N,!1)},transitionEnd:function(e){parseInt(e.target.getAttribute("data-index"),10)==f&&(y&&w(),t.transitionEnd&&t.transitionEnd.call(e,f,o[f]))}};return c(),y&&w(),i.addEventListener?(i.touch&&s.addEventListener("touchstart",N,!1),i.transitions&&(s.addEventListener("webkitTransitionEnd",N,!1),s.addEventListener("msTransitionEnd",N,!1),s.addEventListener("oTransitionEnd",N,!1),s.addEventListener("otransitionend",N,!1),s.addEventListener("transitionend",N,!1)),window.addEventListener("resize",N,!1)):window.onresize=function(){c()},{setup:function(){c()},slide:function(e,t){d(e,t)},prev:function(){E(),h()},next:function(){E(),p()},getPos:function(){return f},kill:function(){E(),s.style.width="auto",s.style.left=0;var e=o.length;while(e--){var t=o[e];t.style.width="100%",t.style.left=0,i.transitions&&m(e,0,0)}i.addEventListener?(s.removeEventListener("touchstart",N,!1),s.removeEventListener("webkitTransitionEnd",N,!1),s.removeEventListener("msTransitionEnd",N,!1),s.removeEventListener("oTransitionEnd",N,!1),s.removeEventListener("otransitionend",N,!1),s.removeEventListener("transitionend",N,!1),window.removeEventListener("resize",N,!1)):window.onresize=null}}}define("domReady",[],function(){function u(e){var t;for(t=0;t<e.length;t+=1)e[t](s)}function a(){var e=o;i&&e.length&&(o=[],u(e))}function f(){i||(i=!0,n&&clearInterval(n),a())}function c(e){return i?e(s):o.push(e),c}var e,t,n,r=typeof window!="undefined"&&window.document,i=!r,s=r?document:null,o=[];if(r){if(document.addEventListener)document.addEventListener("DOMContentLoaded",f,!1),window.addEventListener("load",f,!1);else if(window.attachEvent){window.attachEvent("onload",f),t=document.createElement("div");try{e=window.frameElement===null}catch(l){}t.doScroll&&e&&window.external&&(n=setInterval(function(){try{t.doScroll(),f()}catch(e){}},30))}document.readyState==="complete"&&f()}return c.version="2.0.1",c.load=function(e,t,n,r){r.isBuild?n(null):c(n)},c}),define("text",["module"],function(e){var t,n,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],i=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,s=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,o=typeof location!="undefined"&&location.href,u=o&&location.protocol&&location.protocol.replace(/\:/,""),a=o&&location.hostname,f=o&&(location.port||undefined),l=[],c=e.config&&e.config()||{};t={version:"2.0.3",strip:function(e){if(e){e=e.replace(i,"");var t=e.match(s);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:c.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=r[t];try{e=new ActiveXObject(n)}catch(i){}if(e){r=[n];break}}return e},parseName:function(e){var t=!1,n=e.indexOf("."),r=e.substring(0,n),i=e.substring(n+1,e.length);return n=i.indexOf("!"),n!==-1&&(t=i.substring(n+1,i.length),t=t==="strip",i=i.substring(0,n)),{moduleName:r,ext:i,strip:t}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,c.isBuild&&(l[e]=r),i(r)},load:function(e,n,r,i){if(i.isBuild&&!i.inlineText){r();return}c.isBuild=i.isBuild;var s=t.parseName(e),l=s.moduleName+"."+s.ext,h=n.toUrl(l),p=c.useXhr||t.useXhr;!o||p(h,u,a,f)?t.get(h,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([l],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(l.hasOwnProperty(n)){var s=t.jsEscape(l[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.moduleName+"."+o.ext,a=r.toUrl(o.moduleName+"."+o.ext)+".js";t.load(u,r,function(n){var r=function(e){return i(a,e)};r.asModule=function(e,t){return i.asModule(e,a,t)},t.write(e,u,r,s)},s)}};if(c.env==="node"||!c.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node)n=require.nodeRequire("fs"),t.get=function(e,t){var r=n.readFileSync(e,"utf8");r.indexOf("﻿")===0&&(r=r.substring(1)),t(r)};else if(c.env==="xhr"||!c.env&&t.createXhr())t.get=function(e,n,r){var i=t.createXhr();i.open("GET",e,!0),c.onXhr&&c.onXhr(i,e),i.onreadystatechange=function(t){var s,o;i.readyState===4&&(s=i.status,s>399&&s<600?(o=new Error(e+" HTTP status: "+s),o.xhr=i,r(o)):n(i.responseText))},i.send(null)};else if(c.env==="rhino"||!c.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};return t}),define("text!../config/environments/production.json",[],function(){return'{\n	"analyticsID": "UA-9927374-4",\n	"apiHost": "www.tripcase.com",\n	"apiProtocol": "https://",\n	"pushAppId": "E685E-CD991",\n	"pushAppProjectId": "881913951363",\n	"appName": "TripCase-Production",\n	"assetPath": null,\n	"platforms": null\n}'}),function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){if(e instanceof x)return e;if(!(this instanceof x))return new x(e);this._wrapped=e};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.4.3";var T=x.each=x.forEach=function(e,t,r){if(e==null)return;if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(t.call(r,e[i],i,e)===n)return}else for(var o in e)if(x.has(e,o)&&t.call(r,e[o],o,e)===n)return};x.map=x.collect=function(e,t,n){var r=[];return e==null?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)});if(!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},x.filter=x.select=function(e,t,n){var r=[];return e==null?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return e==null?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return e==null?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){if(i||(i=t.call(r,e,s,o)))return n}),!!i)};x.contains=x.include=function(e,t){return e==null?!1:y&&e.indexOf===y?e.indexOf(t)!=-1:C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2);return x.map(e,function(e){return(x.isFunction(t)?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,function(e){return e[t]})},x.where=function(e,t){return x.isEmpty(t)?[]:x.filter(e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&x.isEmpty(e))return-Infinity;var r={computed:-Infinity,value:-Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>=r.computed&&(r={value:e,computed:o})}),r.value},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&x.isEmpty(e))return Infinity;var r={computed:Infinity,value:Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o<r.computed&&(r={value:e,computed:o})}),r.value},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r};var k=function(e){return x.isFunction(e)?e:function(t){return t[e]}};x.sortBy=function(e,t,n){var r=k(t);return x.pluck(x.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index<t.index?-1:1}),"value")};var L=function(e,t,n,r){var i={},s=k(t||x.identity);return T(e,function(t,o){var u=s.call(n,t,o,e);r(i,u,t)}),i};x.groupBy=function(e,t,n){return L(e,t,n,function(e,t,n){(x.has(e,t)?e[t]:e[t]=[]).push(n)})},x.countBy=function(e,t,n){return L(e,t,n,function(e,t){x.has(e,t)||(e[t]=0),e[t]++})},x.sortedIndex=function(e,t,n,r){n=n==null?x.identity:k(n);var i=n.call(r,t),s=0,o=e.length;while(s<o){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return e==null?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return e==null?void 0:t!=null&&!n?u.call(e,0,t):e[0]},x.initial=function(e,t,n){return u.call(e,0,e.length-(t==null||n?1:t))},x.last=function(e,t,n){return e==null?void 0:t!=null&&!n?u.call(e,Math.max(e.length-t,0)):e[e.length-1]},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,t==null||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return T(e,function(e){x.isArray(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){if(t?!r||o[o.length-1]!==n:!x.contains(o,n))o.push(n),s.push(e[r])}),s},x.union=function(){return x.uniq(a.apply(r,arguments))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){var e=u.call(arguments),t=x.max(x.pluck(e,"length")),n=new Array(t);for(var r=0;r<t;r++)n[r]=x.pluck(e,""+r);return n},x.object=function(e,t){if(e==null)return{};var n={};for(var r=0,i=e.length;r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(e==null)return-1;var r=0,i=e.length;if(n){if(typeof n!="number")return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=n<0?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(e==null)return-1;var r=n!=null;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);var i=r?n:e.length;while(i--)if(e[i]===t)return i;return-1},x.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s};var O=function(){};x.bind=function(e,t){var n,r;if(e.bind===S&&S)return S.apply(e,u.call(arguments,1));if(!x.isFunction(e))throw new TypeError;return n=u.call(arguments,2),r=function(){if(this instanceof r){O.prototype=e.prototype;var i=new O;O.prototype=null;var s=e.apply(i,n.concat(u.call(arguments)));return Object(s)===s?s:i}return e.apply(t,n.concat(u.call(arguments)))}},x.bindAll=function(e){var t=u.call(arguments,1);return t.length==0&&(t=x.functions(e)),T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t){var n,r,i,s,o=0,u=function(){o=new Date,i=null,s=e.apply(n,r)};return function(){var a=new Date,f=t-(a-o);return n=this,r=arguments,f<=0?(clearTimeout(i),i=null,o=a,s=e.apply(n,r)):i||(i=setTimeout(u,f)),s}},x.debounce=function(e,t,n){var r,i;return function(){var s=this,o=arguments,u=function(){r=null,n||(i=e.apply(s,o))},a=n&&!r;return clearTimeout(r),r=setTimeout(u,t),a&&(i=e.apply(s,o)),i}},x.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},x.wrap=function(e,t){return function(){var n=[e];return o.apply(n,arguments),t.apply(this,n)}},x.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return e<=0?t():function(){if(--e<1)return t.apply(this,arguments)}},x.keys=E||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)x.has(e,n)&&(t[t.length]=n);return t},x.values=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push(e[n]);return t},x.pairs=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push([n,e[n]]);return t},x.invert=function(e){var t={};for(var n in e)x.has(e,n)&&(t[e[n]]=n);return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]==null&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var M=function(e,t,n,r){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var s=n.length;while(s--)if(n[s]==e)return r[s]==t;n.push(e),r.push(t);var o=0,u=!0;if(i=="[object Array]"){o=e.length,u=o==t.length;if(u)while(o--)if(!(u=M(e[o],t[o],n,r)))break}else{var a=e.constructor,l=t.constructor;if(a!==l&&!(x.isFunction(a)&&a instanceof a&&x.isFunction(l)&&l instanceof l))return!1;for(var c in e)if(x.has(e,c)){o++;if(!(u=x.has(t,c)&&M(e[c],t[c],n,r)))break}if(u){for(c in t)if(x.has(t,c)&&!(o--))break;u=!o}}return n.pop(),r.pop(),u};x.isEqual=function(e,t){return M(e,t,[],[])},x.isEmpty=function(e){if(e==null)return!0;if(x.isArray(e)||x.isString(e))return e.length===0;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&e.nodeType===1},x.isArray=w||function(e){return f.call(e)=="[object Array]"},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),typeof /./!="function"&&(x.isFunction=function(e){return typeof e=="function"}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||f.call(e)=="[object Boolean]"},x.isNull=function(e){return e===null},x.isUndefined=function(e){return e===void 0},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.times=function(e,t,n){var r=Array(e);for(var i=0;i<e;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return t==null&&(t=e,e=0),e+(0|Math.random()*(t-e+1))};var _={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};_.unescape=x.invert(_.escape);var D={escape:new RegExp("["+x.keys(_.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(_.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return t==null?"":(""+t).replace(D[e],function(t){return _[e][t]})}}),x.result=function(e,t){if(e==null)return null;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),F.call(this,n.apply(x,e))}})};var P=0;x.uniqueId=function(e){var t=""+ ++P;return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){n=x.defaults({},n,x.templateSettings);var r=new RegExp([(n.escape||H).source,(n.interpolate||H).source,(n.evaluate||H).source].join("|")+"|$","g"),i=0,s="__p+='";e.replace(r,function(t,n,r,o,u){return s+=e.slice(i,u).replace(j,function(e){return"\\"+B[e]}),n&&(s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(s+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),o&&(s+="';\n"+o+"\n__p+='"),i=u+t.length,t}),s+="';\n",n.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var o=new Function(n.variable||"obj","_",s)}catch(u){throw u.source=s,u}if(t)return o(t,x);var a=function(e){return o.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+s+"}",a},x.chain=function(e){return x(e).chain()};var F=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),(e=="shift"||e=="splice")&&n.length===0&&delete n[0],F.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return F.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),define("underscore",function(e){return function(){var t,n;return t||e._}}(this)),define("helpers/url_helpers",["underscore"],function(e){var t={getApiURL:function(t,n){var r,i;return e.isEmpty(t)?i="":(i=t,r=e.isEmpty(n)?"http://":n,r.match(/:\/\//)||(r+="://"),i=r+i),i}};return t}),define("config",["text!../config/environments/production.json","helpers/url_helpers"],function(e,t){var n=JSON.parse(e),r={debug:n.debug,timingSampleRate:n.timingSampleRate,analyticsID:n.analyticsID,apiHost:n.apiHost,apiURL:t.getApiURL(n.apiHost,n.apiProtocol),assetPath:n.assetPath,version:"3.3.2",platforms:n.platforms,facebookAuthURL:n.apiProtocol+n.apiHost+"/auth/facebook"};return window.cordova?r.assetPath="mobile/":r.assetPath="/touch2/mobile/",r.platforms={Android:{deviceType:"3",appId:n.pushAppId,appName:n.appName,registerDeviceParams:{projectid:n.pushAppProjectId,appid:n.pushAppId}},iOS:{deviceType:"1",appId:n.pushAppId,appName:n.appName,registerDeviceParams:{alert:!0,badge:!0,sound:!0,pw_appid:n.pushAppId,appname:n.appName}}},r}),define("namespace",["underscore"],function(e){var t={session:null,user:null,router:null,layouts:{},collections:{},models:{},controllers:{},proxies:{},parsers:{}};return t}),function(e,t){function _(e){var t=M[e]={};return v.each(e.split(y),function(e,n){t[n]=!0}),t}function H(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(P,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:+r+""===r?+r:D.test(r)?v.parseJSON(r):r}catch(s){}v.data(e,n,r)}else r=t}return r}function B(e){var t;for(t in e){if(t==="data"&&v.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function et(){return!1}function tt(){return!0}function ut(e){return!e||!e.parentNode||e.parentNode.nodeType===11}function at(e,t){do e=e[t];while(e&&e.nodeType!==1);return e}function ft(e,t,n){t=t||0;if(v.isFunction(t))return v.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return v.grep(e,function(e,r){return e===t===n});if(typeof t=="string"){var r=v.grep(e,function(e){return e.nodeType===1});if(it.test(t))return v.filter(t,r,!n);t=v.filter(t,r)}return v.grep(e,function(e,r){return v.inArray(e,t)>=0===n})}function lt(e){var t=ct.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function Lt(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function At(e,t){if(t.nodeType!==1||!v.hasData(e))return;var n,r,i,s=v._data(e),o=v._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;r<i;r++)v.event.add(t,n,u[n][r])}o.data&&(o.data=v.extend({},o.data))}function Ot(e,t){var n;if(t.nodeType!==1)return;t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase(),n==="object"?(t.parentNode&&(t.outerHTML=e.outerHTML),v.support.html5Clone&&e.innerHTML&&!v.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):n==="input"&&Et.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):n==="option"?t.selected=e.defaultSelected:n==="input"||n==="textarea"?t.defaultValue=e.defaultValue:n==="script"&&t.text!==e.text&&(t.text=e.text),t.removeAttribute(v.expando)}function Mt(e){return typeof e.getElementsByTagName!="undefined"?e.getElementsByTagName("*"):typeof e.querySelectorAll!="undefined"?e.querySelectorAll("*"):[]}function _t(e){Et.test(e.type)&&(e.defaultChecked=e.checked)}function Qt(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=Jt.length;while(i--){t=Jt[i]+n;if(t in e)return t}return r}function Gt(e,t){return e=t||e,v.css(e,"display")==="none"||!v.contains(e.ownerDocument,e)}function Yt(e,t){var n,r,i=[],s=0,o=e.length;for(;s<o;s++){n=e[s];if(!n.style)continue;i[s]=v._data(n,"olddisplay"),t?(!i[s]&&n.style.display==="none"&&(n.style.display=""),n.style.display===""&&Gt(n)&&(i[s]=v._data(n,"olddisplay",nn(n.nodeName)))):(r=Dt(n,"display"),!i[s]&&r!=="none"&&v._data(n,"olddisplay",r))}for(s=0;s<o;s++){n=e[s];if(!n.style)continue;if(!t||n.style.display==="none"||n.style.display==="")n.style.display=t?i[s]||"":"none"}return e}function Zt(e,t,n){var r=Rt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function en(e,t,n,r){var i=n===(r?"border":"content")?4:t==="width"?1:0,s=0;for(;i<4;i+=2)n==="margin"&&(s+=v.css(e,n+$t[i],!0)),r?(n==="content"&&(s-=parseFloat(Dt(e,"padding"+$t[i]))||0),n!=="margin"&&(s-=parseFloat(Dt(e,"border"+$t[i]+"Width"))||0)):(s+=parseFloat(Dt(e,"padding"+$t[i]))||0,n!=="padding"&&(s+=parseFloat(Dt(e,"border"+$t[i]+"Width"))||0));return s}function tn(e,t,n){var r=t==="width"?e.offsetWidth:e.offsetHeight,i=!0,s=v.support.boxSizing&&v.css(e,"boxSizing")==="border-box";if(r<=0||r==null){r=Dt(e,t);if(r<0||r==null)r=e.style[t];if(Ut.test(r))return r;i=s&&(v.support.boxSizingReliable||r===e.style[t]),r=parseFloat(r)||0}return r+en(e,t,n||(s?"border":"content"),i)+"px"}function nn(e){if(Wt[e])return Wt[e];var t=v("<"+e+">").appendTo(i.body),n=t.css("display");t.remove();if(n==="none"||n===""){Pt=i.body.appendChild(Pt||v.extend(i.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!Ht||!Pt.createElement)Ht=(Pt.contentWindow||Pt.contentDocument).document,Ht.write("<!doctype html><html><body>"),Ht.close();t=Ht.body.appendChild(Ht.createElement(e)),n=Dt(t,"display"),i.body.removeChild(Pt)}return Wt[e]=n,n}function fn(e,t,n,r){var i;if(v.isArray(t))v.each(t,function(t,i){n||sn.test(e)?r(e,i):fn(e+"["+(typeof i=="object"?t:"")+"]",i,n,r)});else if(!n&&v.type(t)==="object")for(i in t)fn(e+"["+i+"]",t[i],n,r);else r(e,t)}function Cn(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var r,i,s,o=t.toLowerCase().split(y),u=0,a=o.length;if(v.isFunction(n))for(;u<a;u++)r=o[u],s=/^\+/.test(r),s&&(r=r.substr(1)||"*"),i=e[r]=e[r]||[],i[s?"unshift":"push"](n)}}function kn(e,n,r,i,s,o){s=s||n.dataTypes[0],o=o||{},o[s]=!0;var u,a=e[s],f=0,l=a?a.length:0,c=e===Sn;for(;f<l&&(c||!u);f++)u=a[f](n,r,i),typeof u=="string"&&(!c||o[u]?u=t:(n.dataTypes.unshift(u),u=kn(e,n,r,i,u,o)));return(c||!u)&&!o["*"]&&(u=kn(e,n,r,i,"*",o)),u}function Ln(e,n){var r,i,s=v.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((s[r]?e:i||(i={}))[r]=n[r]);i&&v.extend(!0,e,i)}function An(e,n,r){var i,s,o,u,a=e.contents,f=e.dataTypes,l=e.responseFields;for(s in l)s in r&&(n[l[s]]=r[s]);while(f[0]==="*")f.shift(),i===t&&(i=e.mimeType||n.getResponseHeader("content-type"));if(i)for(s in a)if(a[s]&&a[s].test(i)){f.unshift(s);break}if(f[0]in r)o=f[0];else{for(s in r){if(!f[0]||e.converters[s+" "+f[0]]){o=s;break}u||(u=s)}o=o||u}if(o)return o!==f[0]&&f.unshift(o),r[o]}function On(e,t){var n,r,i,s,o=e.dataTypes.slice(),u=o[0],a={},f=0;e.dataFilter&&(t=e.dataFilter(t,e.dataType));if(o[1])for(n in e.converters)a[n.toLowerCase()]=e.converters[n];for(;i=o[++f];)if(i!=="*"){if(u!=="*"&&u!==i){n=a[u+" "+i]||a["* "+i];if(!n)for(r in a){s=r.split(" ");if(s[1]===i){n=a[u+" "+s[0]]||a["* "+s[0]];if(n){n===!0?n=a[r]:a[r]!==!0&&(i=s[0],o.splice(f--,0,i));break}}}if(n!==!0)if(n&&e["throws"])t=n(t);else try{t=n(t)}catch(l){return{state:"parsererror",error:n?l:"No conversion from "+u+" to "+i}}}u=i}return{state:"success",data:t}}function Fn(){try{return new e.XMLHttpRequest}catch(t){}}function In(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function $n(){return setTimeout(function(){qn=t},0),qn=v.now()}function Jn(e,t){v.each(t,function(t,n){var r=(Vn[t]||[]).concat(Vn["*"]),i=0,s=r.length;for(;i<s;i++)if(r[i].call(e,t,n))return})}function Kn(e,t,n){var r,i=0,s=0,o=Xn.length,u=v.Deferred().always(function(){delete a.elem}),a=function(){var t=qn||$n(),n=Math.max(0,f.startTime+f.duration-t),r=1-(n/f.duration||0),i=0,s=f.tweens.length;for(;i<s;i++)f.tweens[i].run(r);return u.notifyWith(e,[f,r,n]),r<1&&s?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:v.extend({},t),opts:v.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:qn||$n(),duration:n.duration,tweens:[],createTween:function(t,n,r){var i=v.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(i),i},stop:function(t){var n=0,r=t?f.tweens.length:0;for(;n<r;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;Qn(l,f.opts.specialEasing);for(;i<o;i++){r=Xn[i].call(f,e,l,f.opts);if(r)return r}return Jn(f,l),v.isFunction(f.opts.start)&&f.opts.start.call(e,f),v.fx.timer(v.extend(a,{anim:f,queue:f.opts.queue,elem:e})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function Qn(e,t){var n,r,i,s,o;for(n in e){r=v.camelCase(n),i=t[r],s=e[n],v.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=v.cssHooks[r];if(o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}}function Gn(e,t,n){var r,i,s,o,u,a,f,l,c=this,h=e.style,p={},d=[],m=e.nodeType&&Gt(e);n.queue||(f=v._queueHooks(e,"fx"),f.unqueued==null&&(f.unqueued=0,l=f.empty.fire,f.empty.fire=function(){f.unqueued||l()}),f.unqueued++,c.always(function(){c.always(function(){f.unqueued--,v.queue(e,"fx").length||f.empty.fire()})})),e.nodeType===1&&("height"in t||"width"in t)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],v.css(e,"display")==="inline"&&v.css(e,"float")==="none"&&(!v.support.inlineBlockNeedsLayout||nn(e.nodeName)==="inline"?h.display="inline-block":h.zoom=1)),n.overflow&&(h.overflow="hidden",v.support.shrinkWrapBlocks||c.done(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}));for(r in t){s=t[r];if(Un.exec(s)){delete t[r];if(s===(m?"hide":"show"))continue;d.push(r)}}o=d.length;if(o){u=v._data(e,"fxshow")||v._data(e,"fxshow",{}),m?v(e).show():c.done(function(){v(e).hide()}),c.done(function(){var t;v.removeData(e,"fxshow",!0);for(t in p)v.style(e,t,p[t])});for(r=0;r<o;r++)i=d[r],a=c.createTween(i,m?u[i]:0),p[i]=u[i]||v.style(e,i),i in u||(u[i]=a.start,m&&(a.end=a.start,a.start=i==="width"||i==="height"?1:0))}}function Yn(e,t,n,r,i){return new Yn.prototype.init(e,t,n,r,i)}function Zn(e,t){var n,r={height:e},i=0;t=t?1:0;for(;i<4;i+=2-t)n=$t[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function tr(e){return v.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var n,r,i=e.document,s=e.location,o=e.navigator,u=e.jQuery,a=e.$,f=Array.prototype.push,l=Array.prototype.slice,c=Array.prototype.indexOf,h=Object.prototype.toString,p=Object.prototype.hasOwnProperty,d=String.prototype.trim,v=function(e,t){return new v.fn.init(e,t,n)},m=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,g=/\S/,y=/\s+/,b=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,w=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,E=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,S=/^[\],:{}\s]*$/,x=/(?:^|:|,)(?:\s*\[)+/g,T=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,N=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,C=/^-ms-/,k=/-([\da-z])/gi,L=function(e,t){return(t+"").toUpperCase()},A=function(){i.addEventListener?(i.removeEventListener("DOMContentLoaded",A,!1),v.ready()):i.readyState==="complete"&&(i.detachEvent("onreadystatechange",A),v.ready())},O={};v.fn=v.prototype={constructor:v,init:function(e,n,r){var s,o,u,a;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?s=[null,e,null]:s=w.exec(e);if(s&&(s[1]||!n)){if(s[1])return n=n instanceof v?n[0]:n,a=n&&n.nodeType?n.ownerDocument||n:i,e=v.parseHTML(s[1],a,!0),E.test(s[1])&&v.isPlainObject(n)&&this.attr.call(e,n,!0),v.merge(this,e);o=i.getElementById(s[2]);if(o&&o.parentNode){if(o.id!==s[2])return r.find(e);this.length=1,this[0]=o}return this.context=i,this.selector=e,this}return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e)}return v.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),v.makeArray(e,this))},selector:"",jquery:"1.8.2",length:0,size:function(){return this.length},toArray:function(){return l.call(this)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,n){var r=v.merge(this.constructor(),e);return r.prevObject=this,r.context=this.context,t==="find"?r.selector=this.selector+(this.selector?" ":"")+n:t&&(r.selector=this.selector+"."+t+"("+n+")"),r},each:function(e,t){return v.each(this,e,t)},ready:function(e){return v.ready.promise().done(e),this},eq:function(e){return e=+e,e===-1?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(l.apply(this,arguments),"slice",l.call(arguments).join(","))},map:function(e){return this.pushStack(v.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:[].sort,splice:[].splice},v.fn.init.prototype=v.fn,v.extend=v.fn.extend=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;typeof u=="boolean"&&(l=u,u=arguments[1]||{},a=2),typeof u!="object"&&!v.isFunction(u)&&(u={}),f===a&&(u=this,--a);for(;a<f;a++)if((e=arguments[a])!=null)for(n in e){r=u[n],i=e[n];if(u===i)continue;l&&i&&(v.isPlainObject(i)||(s=v.isArray(i)))?(s?(s=!1,o=r&&v.isArray(r)?r:[]):o=r&&v.isPlainObject(r)?r:{},u[n]=v.extend(l,o,i)):i!==t&&(u[n]=i)}return u},v.extend({noConflict:function(t){return e.$===v&&(e.$=a),t&&e.jQuery===v&&(e.jQuery=u),v},isReady:!1,readyWait:1,holdReady:function(e){e?v.readyWait++:v.ready(!0)},ready:function(e){if(e===!0?--v.readyWait:v.isReady)return;if(!i.body)return setTimeout(v.ready,1);v.isReady=!0;if(e!==!0&&--v.readyWait>0)return;r.resolveWith(i,[v]),v.fn.trigger&&v(i).trigger("ready").off("ready")},isFunction:function(e){return v.type(e)==="function"},isArray:Array.isArray||function(e){return v.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):O[h.call(e)]||"object"},isPlainObject:function(e){if(!e||v.type(e)!=="object"||e.nodeType||v.isWindow(e))return!1;try{if(e.constructor&&!p.call(e,"constructor")&&!p.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||p.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){var r;return!e||typeof e!="string"?null:(typeof t=="boolean"&&(n=t,t=0),t=t||i,(r=E.exec(e))?[t.createElement(r[1])]:(r=v.buildFragment([e],t,n?null:[]),v.merge([],(r.cacheable?v.clone(r.fragment):r.fragment).childNodes)))},parseJSON:function(t){if(!t||typeof t!="string")return null;t=v.trim(t);if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(S.test(t.replace(T,"@").replace(N,"]").replace(x,"")))return(new Function("return "+t))();v.error("Invalid JSON: "+t)},parseXML:function(n){var r,i;if(!n||typeof n!="string")return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(s){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&v.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&g.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(C,"ms-").replace(k,L)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,n,r){var i,s=0,o=e.length,u=o===t||v.isFunction(e);if(r){if(u){for(i in e)if(n.apply(e[i],r)===!1)break}else for(;s<o;)if(n.apply(e[s++],r)===!1)break}else if(u){for(i in e)if(n.call(e[i],i,e[i])===!1)break}else for(;s<o;)if(n.call(e[s],s,e[s++])===!1)break;return e},trim:d&&!d.call("﻿ ")?function(e){return e==null?"":d.call(e)}:function(e){return e==null?"":(e+"").replace(b,"")},makeArray:function(e,t){var n,r=t||[];return e!=null&&(n=v.type(e),e.length==null||n==="string"||n==="function"||n==="regexp"||v.isWindow(e)?f.call(r,e):v.merge(r,e)),r},inArray:function(e,t,n){var r;if(t){if(c)return c.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,s=0;if(typeof r=="number")for(;s<r;s++)e[i++]=n[s];else while(n[s]!==t)e[i++]=n[s++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;n=!!n;for(;s<o;s++)r=!!t(e[s],s),n!==r&&i.push(e[s]);return i},map:function(e,n,r){var i,s,o=[],u=0,a=e.length,f=e instanceof v||a!==t&&typeof a=="number"&&(a>0&&e[0]&&e[a-1]||a===0||v.isArray(e));if(f)for(;u<a;u++)i=n(e[u],u,r),i!=null&&(o[o.length]=i);else for(s in e)i=n(e[s],s,r),i!=null&&(o[o.length]=i);return o.concat.apply([],o)},guid:1,proxy:function(e,n){var r,i,s;return typeof n=="string"&&(r=e[n],n=e,e=r),v.isFunction(e)?(i=l.call(arguments,2),s=function(){return e.apply(n,i.concat(l.call(arguments)))},s.guid=e.guid=e.guid||v.guid++,s):t},access:function(e,n,r,i,s,o,u){var a,f=r==null,l=0,c=e.length;if(r&&typeof r=="object"){for(l in r)v.access(e,n,l,r[l],1,o,i);s=1}else if(i!==t){a=u===t&&v.isFunction(i),f&&(a?(a=n,n=function(e,t,n){return a.call(v(e),n)}):(n.call(e,i),n=null));if(n)for(;l<c;l++)n(e[l],r,a?i.call(e[l],l,n(e[l],r)):i,u);s=1}return s?e:f?n.call(e):c?n(e[0],r):o},now:function(){return(new Date).getTime()}}),v.ready.promise=function(t){if(!r){r=v.Deferred();if(i.readyState==="complete")setTimeout(v.ready,1);else if(i.addEventListener)i.addEventListener("DOMContentLoaded",A,!1),e.addEventListener("load",v.ready,!1);else{i.attachEvent("onreadystatechange",A),e.attachEvent("onload",v.ready);var n=!1;try{n=e.frameElement==null&&i.documentElement}catch(s){}n&&n.doScroll&&function o(){if(!v.isReady){try{n.doScroll("left")}catch(e){return setTimeout(o,50)}v.ready()}}()}}return r.promise(t)},v.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){O["[object "+t+"]"]=t.toLowerCase()}),n=v(i);var M={};v.Callbacks=function(e){e=typeof e=="string"?M[e]||_(e):v.extend({},e);var n,r,i,s,o,u,a=[],f=!e.once&&[],l=function(t){n=e.memory&&t,r=!0,u=s||0,s=0,o=a.length,i=!0;for(;a&&u<o;u++)if(a[u].apply(t[0],t[1])===!1&&e.stopOnFalse){n=!1;break}i=!1,a&&(f?f.length&&l(f.shift()):n?a=[]:c.disable())},c={add:function(){if(a){var t=a.length;(function r(t){v.each(t,function(t,n){var i=v.type(n);i==="function"&&(!e.unique||!c.has(n))?a.push(n):n&&n.length&&i!=="string"&&r(n)})})(arguments),i?o=a.length:n&&(s=t,l(n))}return this},remove:function(){return a&&v.each(arguments,function(e,t){var n;while((n=v.inArray(t,a,n))>-1)a.splice(n,1),i&&(n<=o&&o--,n<=u&&u--)}),this},has:function(e){return v.inArray(e,a)>-1},empty:function(){return a=[],this},disable:function(){return a=f=n=t,this},disabled:function(){return!a},lock:function(){return f=t,n||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],a&&(!r||f)&&(i?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},v.extend({Deferred:function(e){var t=[["resolve","done",v.Callbacks("once memory"),"resolved"],["reject","fail",v.Callbacks("once memory"),"rejected"],["notify","progress",v.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return v.Deferred(function(n){v.each(t,function(t,r){var s=r[0],o=e[t];i[r[1]](v.isFunction(o)?function(){var e=o.apply(this,arguments);e&&v.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===i?n:this,[e])}:n[s])}),e=null}).promise()},promise:function(e){return e!=null?v.extend(e,r):r}},i={};return r.pipe=r.then,v.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[e^1][2].disable,t[2][2].lock),i[s[0]]=o.fire,i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=l.call(arguments),r=n.length,i=r!==1||e&&v.isFunction(e.promise)?r:0,s=i===1?e:v.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?l.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1){u=new Array(r),a=new Array(r),f=new Array(r);for(;t<r;t++)n[t]&&v.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i}return i||s.resolveWith(f,n),s.promise()}}),v.support=function(){var t,n,r,s,o,u,a,f,l,c,h,p=i.createElement("div");p.setAttribute("className","t"),p.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=p.getElementsByTagName("*"),r=p.getElementsByTagName("a")[0],r.style.cssText="top:1px;float:left;opacity:.5";if(!n||!n.length)return{};s=i.createElement("select"),o=s.appendChild(i.createElement("option")),u=p.getElementsByTagName("input")[0],t={leadingWhitespace:p.firstChild.nodeType===3,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:r.getAttribute("href")==="/a",opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:u.value==="on",optSelected:o.selected,getSetAttribute:p.className!=="t",enctype:!!i.createElement("form").enctype,html5Clone:i.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",boxModel:i.compatMode==="CSS1Compat",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},u.checked=!0,t.noCloneChecked=u.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!o.disabled;try{delete p.test}catch(d){t.deleteExpando=!1}!p.addEventListener&&p.attachEvent&&p.fireEvent&&(p.attachEvent("onclick",h=function(){t.noCloneEvent=!1}),p.cloneNode(!0).fireEvent("onclick"),p.detachEvent("onclick",h)),u=i.createElement("input"),u.value="t",u.setAttribute("type","radio"),t.radioValue=u.value==="t",u.setAttribute("checked","checked"),u.setAttribute("name","t"),p.appendChild(u),a=i.createDocumentFragment(),a.appendChild(p.lastChild),t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=u.checked,a.removeChild(u),a.appendChild(p);if(p.attachEvent)for(l in{submit:!0,change:!0,focusin:!0})f="on"+l,c=f in p,c||(p.setAttribute(f,"return;"),c=typeof p[f]=="function"),t[l+"Bubbles"]=c;return v(function(){var n,r,s,o,u="padding:0;margin:0;border:0;display:block;overflow:hidden;",a=i.getElementsByTagName("body")[0];if(!a)return;n=i.createElement("div"),n.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",a.insertBefore(n,a.firstChild),r=i.createElement("div"),n.appendChild(r),r.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=r.getElementsByTagName("td"),s[0].style.cssText="padding:0;margin:0;border:0;display:none",c=s[0].offsetHeight===0,s[0].style.display="",s[1].style.display="none",t.reliableHiddenOffsets=c&&s[0].offsetHeight===0,r.innerHTML="",r.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=r.offsetWidth===4,t.doesNotIncludeMarginInBodyOffset=a.offsetTop!==1,e.getComputedStyle&&(t.pixelPosition=(e.getComputedStyle(r,null)||{}).top!=="1%",t.boxSizingReliable=(e.getComputedStyle(r,null)||{width:"4px"}).width==="4px",o=i.createElement("div"),o.style.cssText=r.style.cssText=u,o.style.marginRight=o.style.width="0",r.style.width="1px",r.appendChild(o),t.reliableMarginRight=!parseFloat((e.getComputedStyle(o,null)||{}).marginRight)),typeof r.style.zoom!="undefined"&&(r.innerHTML="",r.style.cssText=u+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=r.offsetWidth===3,r.style.display="block",r.style.overflow="visible",r.innerHTML="<div></div>",r.firstChild.style.width="5px",t.shrinkWrapBlocks=r.offsetWidth!==3,n.style.zoom=1),a.removeChild(n),n=r=s=o=null}),a.removeChild(p),n=r=s=o=u=a=p=null,t}();var D=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,P=/([A-Z])/g;v.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(v.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?v.cache[e[v.expando]]:e[v.expando],!!e&&!B(e)},data:function(e,n,r,i){if(!v.acceptData(e))return;var s,o,u=v.expando,a=typeof n=="string",f=e.nodeType,l=f?v.cache:e,c=f?e[u]:e[u]&&u;if((!c||!l[c]||!i&&!l[c].data)&&a&&r===t)return;c||(f?e[u]=c=v.deletedIds.pop()||v.guid++:c=u),l[c]||(l[c]={},f||(l[c].toJSON=v.noop));if(typeof n=="object"||typeof n=="function")i?l[c]=v.extend(l[c],n):l[c].data=v.extend(l[c].data,n);return s=l[c],i||(s.data||(s.data={}),s=s.data),r!==t&&(s[v.camelCase(n)]=r),a?(o=s[n],o==null&&(o=s[v.camelCase(n)])):o=s,o},removeData:function(e,t,n){if(!v.acceptData(e))return;var r,i,s,o=e.nodeType,u=o?v.cache:e,a=o?e[v.expando]:v.expando;if(!u[a])return;if(t){r=n?u[a]:u[a].data;if(r){v.isArray(t)||(t in r?t=[t]:(t=v.camelCase(t),t in r?t=[t]:t=t.split(" ")));for(i=0,s=t.length;i<s;i++)delete r[t[i]];if(!(n?B:v.isEmptyObject)(r))return}}if(!n){delete u[a].data;if(!B(u[a]))return}o?v.cleanData([e],!0):v.support.deleteExpando||u!=u.window?delete u[a]:u[a]=null},_data:function(e,t,n){return v.data(e,t,n,!0)},acceptData:function(e){var t=e.nodeName&&v.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),v.fn.extend({data:function(e,n){var r,i,s,o,u,a=this[0],f=0,l=null;if(e===t){if(this.length){l=v.data(a);if(a.nodeType===1&&!v._data(a,"parsedAttrs")){s=a.attributes;for(u=s.length;f<u;f++)o=s[f].name,o.indexOf("data-")||(o=v.camelCase(o.substring(5)),H(a,o,l[o]));v._data(a,"parsedAttrs",!0)}}return l}return typeof e=="object"?this.each(function(){v.data(this,e)}):(r=e.split(".",2),r[1]=r[1]?"."+r[1]:"",i=r[1]+"!",v.access(this,function(n){if(n===t)return l=this.triggerHandler("getData"+i,[r[0]]),l===t&&a&&(l=v.data(a,e),l=H(a,e,l)),l===t&&r[1]?this.data(r[0]):l;r[1]=n,this.each(function(){var t=v(this);t.triggerHandler("setData"+i,r),v.data(this,e,n),t.triggerHandler("changeData"+i,r)})},null,n,arguments.length>1,null,!1))},removeData:function(e){return this.each(function(){v.removeData(this,e)})}}),v.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=v._data(e,t),n&&(!r||v.isArray(n)?r=v._data(e,t,v.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=v.queue(e,t),r=n.length,i=n.shift(),s=v._queueHooks(e,t),o=function(){v.dequeue(e,t)};i==="inprogress"&&(i=n.shift(),r--),i&&(t==="fx"&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return v._data(e,n)||v._data(e,n,{empty:v.Callbacks("once memory").add(function(){v.removeData(e,t+"queue",!0),v.removeData(e,n,!0)})})}}),v.fn.extend({queue:function(e,n){var r=2;return typeof e!="string"&&(n=e,e="fx",r--),arguments.length<r?v.queue(this[0],e):n===t?this:this.each(function(){var t=v.queue(this,e,n);v._queueHooks(this,e),e==="fx"&&t[0]!=="inprogress"&&v.dequeue(this,e)})},dequeue:function(e){return this.each(function(){v.dequeue(this,e)})},delay:function(e,t){return e=v.fx?v.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,s=v.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};typeof e!="string"&&(n=e,e=t),e=e||"fx";while(u--)r=v._data(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(n)}});var j,F,I,q=/[\t\r\n]/g,R=/\r/g,U=/^(?:button|input)$/i,z=/^(?:button|input|object|select|textarea)$/i,W=/^a(?:rea|)$/i,X=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,V=v.support.getSetAttribute;v.fn.extend({attr:function(e,t){return v.access(this,v.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){v.removeAttr(this,e)})},prop:function(e,t){return v.access(this,v.prop,e,t,arguments.length>1)},removeProp:function(e){return e=v.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o,u;if(v.isFunction(e))return this.each(function(t){v(this).addClass(e.call(this,t,this.className))});if(e&&typeof e=="string"){t=e.split(y);for(n=0,r=this.length;n<r;n++){i=this[n];if(i.nodeType===1)if(!i.className&&t.length===1)i.className=e;else{s=" "+i.className+" ";for(o=0,u=t.length;o<u;o++)s.indexOf(" "+t[o]+" ")<0&&(s+=t[o]+" ");i.className=v.trim(s)}}}return this},removeClass:function(e){var n,r,i,s,o,u,a;if(v.isFunction(e))return this.each(function(t){v(this).removeClass(e.call(this,t,this.className))});if(e&&typeof e=="string"||e===t){n=(e||"").split(y);for(u=0,a=this.length;u<a;u++){i=this[u];if(i.nodeType===1&&i.className){r=(" "+i.className+" ").replace(q," ");for(s=0,o=n.length;s<o;s++)while(r.indexOf(" "+n[s]+" ")>=0)r=r.replace(" "+n[s]+" "," ");i.className=e?v.trim(r):""}}}return this},toggleClass:function(e,t){var n=typeof e,r=typeof t=="boolean";return v.isFunction(e)?this.each(function(n){v(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var i,s=0,o=v(this),u=t,a=e.split(y);while(i=a[s++])u=r?u:!o.hasClass(i),o[u?"addClass":"removeClass"](i)}else if(n==="undefined"||n==="boolean")this.className&&v._data(this,"__className__",this.className),this.className=this.className||e===!1?"":v._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(q," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(!arguments.length){if(s)return n=v.valHooks[s.type]||v.valHooks[s.nodeName.toLowerCase()],n&&"get"in n&&(r=n.get(s,"value"))!==t?r:(r=s.value,typeof r=="string"?r.replace(R,""):r==null?"":r);return}return i=v.isFunction(e),this.each(function(r){var s,o=v(this);if(this.nodeType!==1)return;i?s=e.call(this,r,o.val()):s=e,s==null?s="":typeof s=="number"?s+="":v.isArray(s)&&(s=v.map(s,function(e){return e==null?"":e+""})),n=v.valHooks[this.type]||v.valHooks[this.nodeName.toLowerCase()];if(!n||!("set"in n)||n.set(this,s,"value")===t)this.value=s})}}),v.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r,i,s=e.selectedIndex,o=[],u=e.options,a=e.type==="select-one";if(s<0)return null;n=a?s:0,r=a?s+1:u.length;for(;n<r;n++){i=u[n];if(i.selected&&(v.support.optDisabled?!i.disabled:i.getAttribute("disabled")===null)&&(!i.parentNode.disabled||!v.nodeName(i.parentNode,"optgroup"))){t=v(i).val();if(a)return t;o.push(t)}}return a&&!o.length&&u.length?v(u[s]).val():o},set:function(e,t){var n=v.makeArray(t);return v(e).find("option").each(function(){this.selected=v.inArray(v(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{},attr:function(e,n,r,i){var s,o,u,a=e.nodeType;if(!e||a===3||a===8||a===2)return;if(i&&v.isFunction(v.fn[n]))return v(e)[n](r);if(typeof e.getAttribute=="undefined")return v.prop(e,n,r);u=a!==1||!v.isXMLDoc(e),u&&(n=n.toLowerCase(),o=v.attrHooks[n]||(X.test(n)?F:j));if(r!==t){if(r===null){v.removeAttr(e,n);return}return o&&"set"in o&&u&&(s=o.set(e,r,n))!==t?s:(e.setAttribute(n,r+""),r)}return o&&"get"in o&&u&&(s=o.get(e,n))!==null?s:(s=e.getAttribute(n),s===null?t:s)},removeAttr:function(e,t){var n,r,i,s,o=0;if(t&&e.nodeType===1){r=t.split(y);for(;o<r.length;o++)i=r[o],i&&(n=v.propFix[i]||i,s=X.test(i),s||v.attr(e,i,""),e.removeAttribute(V?i:n),s&&n in e&&(e[n]=!1))}},attrHooks:{type:{set:function(e,t){if(U.test(e.nodeName)&&e.parentNode)v.error("type property can't be changed");else if(!v.support.radioValue&&t==="radio"&&v.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return j&&v.nodeName(e,"button")?j.get(e,t):t in e?e.value:null},set:function(e,t,n){if(j&&v.nodeName(e,"button"))return j.set(e,t,n);e.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(!e||u===3||u===8||u===2)return;return o=u!==1||!v.isXMLDoc(e),o&&(n=v.propFix[n]||n,s=v.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&(i=s.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):z.test(e.nodeName)||W.test(e.nodeName)&&e.href?0:t}}}}),F={get:function(e,n){var r,i=v.prop(e,n);return i===!0||typeof i!="boolean"&&(r=e.getAttributeNode(n))&&r.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var r;return t===!1?v.removeAttr(e,n):(r=v.propFix[n]||n,r in e&&(e[r]=!0),e.setAttribute(n,n.toLowerCase())),n}},V||(I={name:!0,id:!0,coords:!0},j=v.valHooks.button={get:function(e,n){var r;return r=e.getAttributeNode(n),r&&(I[n]?r.value!=="":r.specified)?r.value:t},set:function(e,t,n){var r=e.getAttributeNode(n);return r||(r=i.createAttribute(n),e.setAttributeNode(r)),r.value=t+""}},v.each(["width","height"],function(e,t){v.attrHooks[t]=v.extend(v.attrHooks[t],{set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}})}),v.attrHooks.contenteditable={get:j.get,set:function(e,t,n){t===""&&(t="false"),j.set(e,t,n)}}),v.support.hrefNormalized||v.each(["href","src","width","height"],function(e,n){v.attrHooks[n]=v.extend(v.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return r===null?t:r}})}),v.support.style||(v.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=t+""}}),v.support.optSelected||(v.propHooks.selected=v.extend(v.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),v.support.enctype||(v.propFix.enctype="encoding"),v.support.checkOn||v.each(["radio","checkbox"],function(){v.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}}),v.each(["radio","checkbox"],function(){v.valHooks[this]=v.extend(v.valHooks[this],{set:function(e,t){if(v.isArray(t))return e.checked=v.inArray(v(e).val(),t)>=0}})});var $=/^(?:textarea|input|select)$/i,J=/^([^\.]*|)(?:\.(.+)|)$/,K=/(?:^|\s)hover(\.\S+|)\b/,Q=/^key/,G=/^(?:mouse|contextmenu)|click/,Y=/^(?:focusinfocus|focusoutblur)$/,Z=function(e){return v.event.special.hover?e:e.replace(K,"mouseenter$1 mouseleave$1")};v.event={add:function(e,n,r,i,s){var o,u,a,f,l,c,h,p,d,m,g;if(e.nodeType===3||e.nodeType===8||!n||!r||!(o=v._data(e)))return;r.handler&&(d=r,r=d.handler,s=d.selector),r.guid||(r.guid=v.guid++),a=o.events,a||(o.events=a={}),u=o.handle,u||(o.handle=u=function(e){return typeof v=="undefined"||!!e&&v.event.triggered===e.type?t:v.event.dispatch.apply(u.elem,arguments)},u.elem=e),n=v.trim(Z(n)).split(" ");for(f=0;f<n.length;f++){l=J.exec(n[f])||[],c=l[1],h=(l[2]||"").split(".").sort(),g=v.event.special[c]||{},c=(s?g.delegateType:g.bindType)||c,g=v.event.special[c]||{},p=v.extend({type:c,origType:l[1],data:i,handler:r,guid:r.guid,selector:s,needsContext:s&&v.expr.match.needsContext.test(s),namespace:h.join(".")},d),m=a[c];if(!m){m=a[c]=[],m.delegateCount=0;if(!g.setup||g.setup.call(e,i,h,u)===!1)e.addEventListener?e.addEventListener(c,u,!1):e.attachEvent&&e.attachEvent("on"+c,u)}g.add&&(g.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),s?m.splice(m.delegateCount++,0,p):m.push(p),v.event.global[c]=!0}e=null},global:{},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,m,g=v.hasData(e)&&v._data(e);if(!g||!(h=g.events))return;t=v.trim(Z(t||"")).split(" ");for(s=0;s<t.length;s++){o=J.exec(t[s])||[],u=a=o[1],f=o[2];if(!u){for(u in h)v.event.remove(e,u+t[s],n,r,!0);continue}p=v.event.special[u]||{},u=(r?p.delegateType:p.bindType)||u,d=h[u]||[],l=d.length,f=f?new RegExp("(^|\\.)"+f.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(c=0;c<d.length;c++)m=d[c],(i||a===m.origType)&&(!n||n.guid===m.guid)&&(!f||f.test(m.namespace))&&(!r||r===m.selector||r==="**"&&m.selector)&&(d.splice(c--,1),m.selector&&d.delegateCount--,p.remove&&p.remove.call(e,m));d.length===0&&l!==d.length&&((!p.teardown||p.teardown.call(e,f,g.handle)===!1)&&v.removeEvent(e,u,g.handle),delete h[u])}v.isEmptyObject(h)&&(delete g.handle,v.removeData(e,"events",!0))},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,r,s,o){if(!s||s.nodeType!==3&&s.nodeType!==8){var u,a,f,l,c,h,p,d,m,g,y=n.type||n,b=[];if(Y.test(y+v.event.triggered))return;y.indexOf("!")>=0&&(y=y.slice(0,-1),a=!0),y.indexOf(".")>=0&&(b=y.split("."),y=b.shift(),b.sort());if((!s||v.event.customEvent[y])&&!v.event.global[y])return;n=typeof n=="object"?n[v.expando]?n:new v.Event(y,n):new v.Event(y),n.type=y,n.isTrigger=!0,n.exclusive=a,n.namespace=b.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,h=y.indexOf(":")<0?"on"+y:"";if(!s){u=v.cache;for(f in u)u[f].events&&u[f].events[y]&&v.event.trigger(n,r,u[f].handle.elem,!0);return}n.result=t,n.target||(n.target=s),r=r!=null?v.makeArray(r):[],r.unshift(n),p=v.event.special[y]||{};if(p.trigger&&p.trigger.apply(s,r)===!1)return;m=[[s,p.bindType||y]];if(!o&&!p.noBubble&&!v.isWindow(s)){g=p.delegateType||y,l=Y.test(g+y)?s:s.parentNode;for(c=s;l;l=l.parentNode)m.push([l,g]),c=l;c===(s.ownerDocument||i)&&m.push([c.defaultView||c.parentWindow||e,g])}for(f=0;f<m.length&&!n.isPropagationStopped();f++)l=m[f][0],n.type=m[f][1],d=(v._data(l,"events")||{})[n.type]&&v._data(l,"handle"),d&&d.apply(l,r),d=h&&l[h],d&&v.acceptData(l)&&d.apply&&d.apply(l,r)===!1&&n.preventDefault();return n.type=y,!o&&!n.isDefaultPrevented()&&(!p._default||p._default.apply(s.ownerDocument,r)===!1)&&(y!=="click"||!v.nodeName(s,"a"))&&v.acceptData(s)&&h&&s[y]&&(y!=="focus"&&y!=="blur"||n.target.offsetWidth!==0)&&!v.isWindow(s)&&(c=s[h],c&&(s[h]=null),v.event.triggered=y,s[y](),v.event.triggered=t,c&&(s[h]=c)),n.result}return},dispatch:function(n){n=v.event.fix(n||e.event);var r,i,s,o,u,a,f,c,h,p,d=(v._data(this,"events")||{})[n.type]||[],m=d.delegateCount,g=l.call(arguments),y=!n.exclusive&&!n.namespace,b=v.event.special[n.type]||{},w=[];g[0]=n,n.delegateTarget=this;if(b.preDispatch&&b.preDispatch.call(this,n)===!1)return;if(m&&(!n.button||n.type!=="click"))for(s=n.target;s!=this;s=s.parentNode||this)if(s.disabled!==!0||n.type!=="click"){u={},f=[];for(r=0;r<m;r++)c=d[r],h=c.selector,u[h]===t&&(u[h]=c.needsContext?v(h,this).index(s)>=0:v.find(h,this,null,[s]).length),u[h]&&f.push(c);f.length&&w.push({elem:s,matches:f})}d.length>m&&w.push({elem:this,matches:d.slice(m)});for(r=0;r<w.length&&!n.isPropagationStopped();r++){a=w[r],n.currentTarget=a.elem;for(i=0;i<a.matches.length&&!n.isImmediatePropagationStopped();i++){c=a.matches[i];if(y||!n.namespace&&!c.namespace||n.namespace_re&&n.namespace_re.test(c.namespace))n.data=c.data,n.handleObj=c,o=((v.event.special[c.origType]||{}).handle||c.handler).apply(a.elem,g),o!==t&&(n.result=o,o===!1&&(n.preventDefault(),n.stopPropagation()))}}return b.postDispatch&&b.postDispatch.call(this,n),n.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,s,o,u=n.button,a=n.fromElement;return e.pageX==null&&n.clientX!=null&&(r=e.target.ownerDocument||i,s=r.documentElement,o=r.body,e.pageX=n.clientX+(s&&s.scrollLeft||o&&o.scrollLeft||0)-(s&&s.clientLeft||o&&o.clientLeft||0),e.pageY=n.clientY+(s&&s.scrollTop||o&&o.scrollTop||0)-(s&&s.clientTop||o&&o.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),!e.which&&u!==t&&(e.which=u&1?1:u&2?3:u&4?2:0),e}},fix:function(e){if(e[v.expando])return e;var t,n,r=e,s=v.event.fixHooks[e.type]||{},o=s.props?this.props.concat(s.props):this.props;e=v.Event(r);for(t=o.length;t;)n=o[--t],e[n]=r[n];return e.target||(e.target=r.srcElement||i),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,r):e},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){v.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,r){var i=v.extend(new v.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?v.event.trigger(i,null,t):v.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},v.event.handle=v.event.dispatch,v.removeEvent=i.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]=="undefined"&&(e[r]=null),e.detachEvent(r,n))},v.Event=function(e,t){if(!(this instanceof v.Event))return new v.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?tt:et):this.type=e,t&&v.extend(this,t),this.timeStamp=e&&e.timeStamp||v.now(),this[v.expando]=!0},v.Event.prototype={preventDefault:function(){this.isDefaultPrevented=tt;var e=this.originalEvent;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=tt;var e=this.originalEvent;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=tt,this.stopPropagation()},isDefaultPrevented:et,isPropagationStopped:et,isImmediatePropagationStopped:et},v.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){v.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj,o=s.selector;if(!i||i!==r&&!v.contains(r,i))e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t;return n}}}),v.support.submitBubbles||(v.event.special.submit={setup:function(){if(v.nodeName(this,"form"))return!1;v.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=v.nodeName(n,"input")||v.nodeName(n,"button")?n.form:t;r&&!v._data(r,"_submit_attached")&&(v.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),v._data(r,"_submit_attached",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&v.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(v.nodeName(this,"form"))return!1;v.event.remove(this,"._submit")}}),v.support.changeBubbles||(v.event.special.change={setup:function(){if($.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")v.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),v.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),v.event.simulate("change",this,e,!0)});return!1}v.event.add(this,"beforeactivate._change",function(e){var t=e.target;$.test(t.nodeName)&&!v._data(t,"_change_attached")&&(v.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&v.event.simulate("change",this.parentNode,e,!0)}),v._data(t,"_change_attached",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return v.event.remove(this,"._change"),!$.test(this.nodeName)}}),v.support.focusinBubbles||v.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){v.event.simulate(t,e.target,v.event.fix(e),!0)};v.event.special[t]={setup:function(){n++===0&&i.addEventListener(e,r,!0)},teardown:function(){--n===0&&i.removeEventListener(e,r,!0)}}}),v.fn.extend({on:function(e,n,r,i,s){var o,u;if(typeof e=="object"){typeof n!="string"&&(r=r||n,n=t);for(u in e)this.on(u,n,r,e[u],s);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=et;else if(!i)return this;return s===1&&(o=i,i=function(e){return v().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=v.guid++)),this.each(function(){v.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,v(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if(typeof e=="object"){for(s in e)this.off(s,n,e[s]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=et),this.each(function(){v.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return v(this.context).on(e,this.selector,t,n),this},die:function(e,t){return v(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){v.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0])return v.event.trigger(e,t,this[0],!0)},toggle:function(e){var t=arguments,n=e.guid||v.guid++,r=0,i=function(n){var i=(v._data(this,"lastToggle"+e.guid)||0)%r;return v._data(this,"lastToggle"+e.guid,i+1),n.preventDefault(),t[i].apply(this,arguments)||!1};i.guid=n;while(r<t.length)t[r++].guid=n;return this.click(i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),v.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){v.fn[t]=function(e,n){return n==null&&(n=e,e=null),arguments.length>0?this.on(t,null,e,n):this.trigger(t)},Q.test(t)&&(v.event.fixHooks[t]=v.event.keyHooks),G.test(t)&&(v.event.fixHooks[t]=v.event.mouseHooks)}),function(e,t){function nt(e,t,n,r){n=n||[],t=t||g;var i,s,a,f,l=t.nodeType;if(!e||typeof e!="string")return n;if(l!==1&&l!==9)return[];a=o(t);if(!a&&!r)if(i=R.exec(e))if(f=i[1]){if(l===9){s=t.getElementById(f);if(!s||!s.parentNode)return n;if(s.id===f)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(f))&&u(t,s)&&s.id===f)return n.push(s),n}else{if(i[2])return S.apply(n,x.call(t.getElementsByTagName(e),0)),n;if((f=i[3])&&Z&&t.getElementsByClassName)return S.apply(n,x.call(t.getElementsByClassName(f),0)),n}return vt(e.replace(j,"$1"),t,n,r,a)}function rt(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function it(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function st(e){return N(function(t){return t=+t,N(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function ot(e,t,n){if(e===t)return n;var r=e.nextSibling;while(r){if(r===t)return-1;r=r.nextSibling}return 1}function ut(e,t){var n,r,s,o,u,a,f,l=L[d][e];if(l)return t?0:l.slice(0);u=e,a=[],f=i.preFilter;while(u){if(!n||(r=F.exec(u)))r&&(u=u.slice(r[0].length)),a.push(s=[]);n=!1;if(r=I.exec(u))s.push(n=new m(r.shift())),u=u.slice(n.length),n.type=r[0].replace(j," ");for(o in i.filter)(r=J[o].exec(u))&&(!f[o]||(r=f[o](r,g,!0)))&&(s.push(n=new m(r.shift())),u=u.slice(n.length),n.type=o,n.matches=r);if(!n)break}return t?u.length:u?nt.error(e):L(e,a).slice(0)}function at(e,t,r){var i=t.dir,s=r&&t.dir==="parentNode",o=w++;return t.first?function(t,n,r){while(t=t[i])if(s||t.nodeType===1)return e(t,n,r)}:function(t,r,u){if(!u){var a,f=b+" "+o+" ",l=f+n;while(t=t[i])if(s||t.nodeType===1){if((a=t[d])===l)return t.sizset;if(typeof a=="string"&&a.indexOf(f)===0){if(t.sizset)return t}else{t[d]=l;if(e(t,r,u))return t.sizset=!0,t;t.sizset=!1}}}else while(t=t[i])if(s||t.nodeType===1)if(e(t,r,u))return t}}function ft(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function lt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=t!=null;for(;u<a;u++)if(s=e[u])if(!n||n(s,r,i))o.push(s),f&&t.push(u);return o}function ct(e,t,n,r,i,s){return r&&!r[d]&&(r=ct(r)),i&&!i[d]&&(i=ct(i,s)),N(function(s,o,u,a){if(s&&i)return;var f,l,c,h=[],p=[],d=o.length,v=s||dt(t||"*",u.nodeType?[u]:u,[],s),m=e&&(s||!t)?lt(v,h,e,u,a):v,g=n?i||(s?e:d||r)?[]:o:m;n&&n(m,g,u,a);if(r){c=lt(g,p),r(c,[],u,a),f=c.length;while(f--)if(l=c[f])g[p[f]]=!(m[p[f]]=l)}if(s){f=e&&g.length;while(f--)if(l=g[f])s[h[f]]=!(o[h[f]]=l)}else g=lt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):S.apply(o,g)})}function ht(e){var t,n,r,s=e.length,o=i.relative[e[0].type],u=o||i.relative[" "],a=o?1:0,f=at(function(e){return e===t},u,!0),l=at(function(e){return T.call(t,e)>-1},u,!0),h=[function(e,n,r){return!o&&(r||n!==c)||((t=n).nodeType?f(e,n,r):l(e,n,r))}];for(;a<s;a++)if(n=i.relative[e[a].type])h=[at(ft(h),n)];else{n=i.filter[e[a].type].apply(null,e[a].matches);if(n[d]){r=++a;for(;r<s;r++)if(i.relative[e[r].type])break;return ct(a>1&&ft(h),a>1&&e.slice(0,a-1).join("").replace(j,"$1"),n,a<r&&ht(e.slice(a,r)),r<s&&ht(e=e.slice(r)),r<s&&e.join(""))}h.push(n)}return ft(h)}function pt(e,t){var r=t.length>0,s=e.length>0,o=function(u,a,f,l,h){var p,d,v,m=[],y=0,w="0",x=u&&[],T=h!=null,N=c,C=u||s&&i.find.TAG("*",h&&a.parentNode||a),k=b+=N==null?1:Math.E;T&&(c=a!==g&&a,n=o.el);for(;(p=C[w])!=null;w++){if(s&&p){for(d=0;v=e[d];d++)if(v(p,a,f)){l.push(p);break}T&&(b=k,n=++o.el)}r&&((p=!v&&p)&&y--,u&&x.push(p))}y+=w;if(r&&w!==y){for(d=0;v=t[d];d++)v(x,m,a,f);if(u){if(y>0)while(w--)!x[w]&&!m[w]&&(m[w]=E.call(l));m=lt(m)}S.apply(l,m),T&&!u&&m.length>0&&y+t.length>1&&nt.uniqueSort(l)}return T&&(b=k,c=N),x};return o.el=0,r?N(o):o}function dt(e,t,n,r){var i=0,s=t.length;for(;i<s;i++)nt(e,t[i],n,r);return n}function vt(e,t,n,r,s){var o,u,f,l,c,h=ut(e),p=h.length;if(!r&&h.length===1){u=h[0]=h[0].slice(0);if(u.length>2&&(f=u[0]).type==="ID"&&t.nodeType===9&&!s&&i.relative[u[1].type]){t=i.find.ID(f.matches[0].replace($,""),t,s)[0];if(!t)return n;e=e.slice(u.shift().length)}for(o=J.POS.test(e)?-1:u.length-1;o>=0;o--){f=u[o];if(i.relative[l=f.type])break;if(c=i.find[l])if(r=c(f.matches[0].replace($,""),z.test(u[0].type)&&t.parentNode||t,s)){u.splice(o,1),e=r.length&&u.join("");if(!e)return S.apply(n,x.call(r,0)),n;break}}}return a(e,h)(r,t,s,n,z.test(e)),n}function mt(){}var n,r,i,s,o,u,a,f,l,c,h=!0,p="undefined",d=("sizcache"+Math.random()).replace(".",""),m=String,g=e.document,y=g.documentElement,b=0,w=0,E=[].pop,S=[].push,x=[].slice,T=[].indexOf||function(e){var t=0,n=this.length;for(;t<n;t++)if(this[t]===e)return t;return-1},N=function(e,t){return e[d]=t==null||t,e},C=function(){var e={},t=[];return N(function(n,r){return t.push(n)>i.cacheLength&&delete e[t.shift()],e[n]=r},e)},k=C(),L=C(),A=C(),O="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",_=M.replace("w","w#"),D="([*^$|!~]?=)",P="\\["+O+"*("+M+")"+O+"*(?:"+D+O+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+_+")|)|)"+O+"*\\]",H=":("+M+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+P+")|[^:]|\\\\.)*|.*))\\)|)",B=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+O+"*((?:-\\d)?\\d*)"+O+"*\\)|)(?=[^-]|$)",j=new RegExp("^"+O+"+|((?:^|[^\\\\])(?:\\\\.)*)"+O+"+$","g"),F=new RegExp("^"+O+"*,"+O+"*"),I=new RegExp("^"+O+"*([\\x20\\t\\r\\n\\f>+~])"+O+"*"),q=new RegExp(H),R=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,U=/^:not/,z=/[\x20\t\r\n\f]*[+~]/,W=/:not\($/,X=/h\d/i,V=/input|select|textarea|button/i,$=/\\(?!\\)/g,J={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),NAME:new RegExp("^\\[name=['\"]?("+M+")['\"]?\\]"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+P),PSEUDO:new RegExp("^"+H),POS:new RegExp(B,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+O+"*(even|odd|(([+-]|)(\\d*)n|)"+O+"*(?:([+-]|)"+O+"*(\\d+)|))"+O+"*\\)|)","i"),needsContext:new RegExp("^"+O+"*[>+~]|"+B,"i")},K=function(e){var t=g.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}},Q=K(function(e){return e.appendChild(g.createComment("")),!e.getElementsByTagName("*").length}),G=K(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==p&&e.firstChild.getAttribute("href")==="#"}),Y=K(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return t!=="boolean"&&t!=="string"}),Z=K(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!e.getElementsByClassName||!e.getElementsByClassName("e").length?!1:(e.lastChild.className="e",e.getElementsByClassName("e").length===2)}),et=K(function(e){e.id=d+0,e.innerHTML="<a name='"+d+"'></a><div name='"+d+"'></div>",y.insertBefore(e,y.firstChild);var t=g.getElementsByName&&g.getElementsByName(d).length===2+g.getElementsByName(d+0).length;return r=!g.getElementById(d),y.removeChild(e),t});try{x.call(y.childNodes,0)[0].nodeType}catch(tt){x=function(e){var t,n=[];for(;t=this[e];e++)n.push(t);return n}}nt.matches=function(e,t){return nt(e,null,null,t)},nt.matchesSelector=function(e,t){return nt(t,null,null,[e]).length>0},s=nt.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(i===1||i===9||i===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=s(e)}else if(i===3||i===4)return e.nodeValue}else for(;t=e[r];r++)n+=s(t);return n},o=nt.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},u=nt.contains=y.contains?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!(r&&r.nodeType===1&&n.contains&&n.contains(r))}:y.compareDocumentPosition?function(e,t){return t&&!!(e.compareDocumentPosition(t)&16)}:function(e,t){while(t=t.parentNode)if(t===e)return!0;return!1},nt.attr=function(e,t){var n,r=o(e);return r||(t=t.toLowerCase()),(n=i.attrHandle[t])?n(e):r||Y?e.getAttribute(t):(n=e.getAttributeNode(t),n?typeof e[t]=="boolean"?e[t]?t:null:n.specified?n.value:null:null)},i=nt.selectors={cacheLength:50,createPseudo:N,match:J,attrHandle:G?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},find:{ID:r?function(e,t,n){if(typeof t.getElementById!==p&&!n){var r=t.getElementById(e);return r&&r.parentNode?[r]:[]}}:function(e,n,r){if(typeof n.getElementById!==p&&!r){var i=n.getElementById(e);return i?i.id===e||typeof i.getAttributeNode!==p&&i.getAttributeNode("id").value===e?[i]:t:[]}},TAG:Q?function(e,t){if(typeof t.getElementsByTagName!==p)return t.getElementsByTagName(e)}:function(e,t){var n=t.getElementsByTagName(e);if(e==="*"){var r,i=[],s=0;for(;r=n[s];s++)r.nodeType===1&&i.push(r);return i}return n},NAME:et&&function(e,t){if(typeof t.getElementsByName!==p)return t.getElementsByName(name)},CLASS:Z&&function(e,t,n){if(typeof t.getElementsByClassName!==p&&!n)return t.getElementsByClassName(e)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace($,""),e[3]=(e[4]||e[5]||"").replace($,""),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1]==="nth"?(e[2]||nt.error(e[0]),e[3]=+(e[3]?e[4]+(e[5]||1):2*(e[2]==="even"||e[2]==="odd")),e[4]=+(e[6]+e[7]||e[2]==="odd")):e[2]&&nt.error(e[0]),e},PSEUDO:function(e){var t,n;if(J.CHILD.test(e[0]))return null;if(e[3])e[2]=e[3];else if(t=e[4])q.test(t)&&(n=ut(t,!0))&&(n=t.indexOf(")",t.length-n)-t.length)&&(t=t.slice(0,n),e[0]=e[0].slice(0,n)),e[2]=t;return e.slice(0,3)}},filter:{ID:r?function(e){return e=e.replace($,""),function(t){return t.getAttribute("id")===e}}:function(e){return e=e.replace($,""),function(t){var n=typeof t.getAttributeNode!==p&&t.getAttributeNode("id");return n&&n.value===e}},TAG:function(e){return e==="*"?function(){return!0}:(e=e.replace($,"").toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=k[d][e];return t||(t=k(e,new RegExp("(^|"+O+")"+e+"("+O+"|$)"))),function(e){return t.test(e.className||typeof e.getAttribute!==p&&e.getAttribute("class")||"")}},ATTR:function(e,t,n){return function(r,i){var s=nt.attr(r,e);return s==null?t==="!=":t?(s+="",t==="="?s===n:t==="!="?s!==n:t==="^="?n&&s.indexOf(n)===0:t==="*="?n&&s.indexOf(n)>-1:t==="$="?n&&s.substr(s.length-n.length)===n:t==="~="?(" "+s+" ").indexOf(n)>-1:t==="|="?s===n||s.substr(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r){return e==="nth"?function(e){var t,i,s=e.parentNode;if(n===1&&r===0)return!0;if(s){i=0;for(t=s.firstChild;t;t=t.nextSibling)if(t.nodeType===1){i++;if(e===t)break}}return i-=r,i===n||i%n===0&&i/n>=0}:function(t){var n=t;switch(e){case"only":case"first":while(n=n.previousSibling)if(n.nodeType===1)return!1;if(e==="first")return!0;n=t;case"last":while(n=n.nextSibling)if(n.nodeType===1)return!1;return!0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||nt.error("unsupported pseudo: "+e);return r[d]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?N(function(e,n){var i,s=r(e,t),o=s.length;while(o--)i=T.call(e,s[o]),e[i]=!(n[i]=s[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:N(function(e){var t=[],n=[],r=a(e.replace(j,"$1"));return r[d]?N(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)if(s=o[u])e[u]=!(t[u]=s)}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:N(function(e){return function(t){return nt(e,t).length>0}}),contains:N(function(e){return function(t){return(t.textContent||t.innerText||s(t)).indexOf(e)>-1}}),enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!i.pseudos.empty(e)},empty:function(e){var t;e=e.firstChild;while(e){if(e.nodeName>"@"||(t=e.nodeType)===3||t===4)return!1;e=e.nextSibling}return!0},header:function(e){return X.test(e.nodeName)},text:function(e){var t,n;return e.nodeName.toLowerCase()==="input"&&(t=e.type)==="text"&&((n=e.getAttribute("type"))==null||n.toLowerCase()===t)},radio:rt("radio"),checkbox:rt("checkbox"),file:rt("file"),password:rt("password"),image:rt("image"),submit:it("submit"),reset:it("reset"),button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},input:function(e){return V.test(e.nodeName)},focus:function(e){var t=e.ownerDocument;return e===t.activeElement&&(!t.hasFocus||t.hasFocus())&&(!!e.type||!!e.href)},active:function(e){return e===e.ownerDocument.activeElement},first:st(function(e,t,n){return[0]}),last:st(function(e,t,n){return[t-1]}),eq:st(function(e,t,n){return[n<0?n+t:n]}),even:st(function(e,t,n){for(var r=0;r<t;r+=2)e.push(r);return e}),odd:st(function(e,t,n){for(var r=1;r<t;r+=2)e.push(r);return e}),lt:st(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:st(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}},f=y.compareDocumentPosition?function(e,t){return e===t?(l=!0,0):(!e.compareDocumentPosition||!t.compareDocumentPosition?e.compareDocumentPosition:e.compareDocumentPosition(t)&4)?-1:1}:function(e,t){if(e===t)return l=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,r,i=[],s=[],o=e.parentNode,u=t.parentNode,a=o;if(o===u)return ot(e,t);if(!o)return-1;if(!u)return 1;while(a)i.unshift(a),a=a.parentNode;a=u;while(a)s.unshift(a),a=a.parentNode;n=i.length,r=s.length;for(var f=0;f<n&&f<r;f++)if(i[f]!==s[f])return ot(i[f],s[f]);return f===n?ot(e,s[f],-1):ot(i[f],t,1)},[0,0].sort(f),h=!l,nt.uniqueSort=function(e){var t,n=1;l=h,e.sort(f);if(l)for(;t=e[n];n++)t===e[n-1]&&e.splice(n--,1);return e},nt.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},a=nt.compile=function(e,t){var n,r=[],i=[],s=A[d][e];if(!s){t||(t=ut(e)),n=t.length;while(n--)s=ht(t[n]),s[d]?r.push(s):i.push(s);s=A(e,pt(i,r))}return s},g.querySelectorAll&&function(){var e,t=vt,n=/'|\\/g,r=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,i=[":focus"],s=[":active",":focus"],u=y.matchesSelector||y.mozMatchesSelector||y.webkitMatchesSelector||y.oMatchesSelector||y.msMatchesSelector;K(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||i.push("\\["+O+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||i.push(":checked")}),K(function(e){e.innerHTML="<p test=''></p>",e.querySelectorAll("[test^='']").length&&i.push("[*^$]="+O+"*(?:\"\"|'')"),e.innerHTML="<input type='hidden'/>",e.querySelectorAll(":enabled").length||i.push(":enabled",":disabled")}),i=new RegExp(i.join("|")),vt=function(e,r,s,o,u){if(!o&&!u&&(!i||!i.test(e))){var a,f,l=!0,c=d,h=r,p=r.nodeType===9&&e;if(r.nodeType===1&&r.nodeName.toLowerCase()!=="object"){a=ut(e),(l=r.getAttribute("id"))?c=l.replace(n,"\\$&"):r.setAttribute("id",c),c="[id='"+c+"'] ",f=a.length;while(f--)a[f]=c+a[f].join("");h=z.test(e)&&r.parentNode||r,p=a.join(",")}if(p)try{return S.apply(s,x.call(h.querySelectorAll(p),0)),s}catch(v){}finally{l||r.removeAttribute("id")}}return t(e,r,s,o,u)},u&&(K(function(t){e=u.call(t,"div");try{u.call(t,"[test!='']:sizzle"),s.push("!=",H)}catch(n){}}),s=new RegExp(s.join("|")),nt.matchesSelector=function(t,n){n=n.replace(r,"='$1']");if(!o(t)&&!s.test(n)&&(!i||!i.test(n)))try{var a=u.call(t,n);if(a||e||t.document&&t.document.nodeType!==11)return a}catch(f){}return nt(n,null,null,[t]).length>0})}(),i.pseudos.nth=i.pseudos.eq,i.filters=mt.prototype=i.pseudos,i.setFilters=new mt,nt.attr=v.attr,v.find=nt,v.expr=nt.selectors,v.expr[":"]=v.expr.pseudos,v.unique=nt.uniqueSort,v.text=nt.getText,v.isXMLDoc=nt.isXML,v.contains=nt.contains}(e);var nt=/Until$/,rt=/^(?:parents|prev(?:Until|All))/,it=/^.[^:#\[\.,]*$/,st=v.expr.match.needsContext,ot={children:!0,contents:!0,next:!0,prev:!0};v.fn.extend({find:function(e){var t,n,r,i,s,o,u=this;if(typeof e!="string")return v(e).filter(function(){for(t=0,n=u.length;t<n;t++)if(v.contains(u[t],this))return!0});o=this.pushStack("","find",e);for(t=0,n=this.length;t<n;t++){r=o.length,v.find(e,this[t],o);if(t>0)for(i=r;i<o.length;i++)for(s=0;s<r;s++)if(o[s]===o[i]){o.splice(i--,1);break}}return o},has:function(e){var t,n=v(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(v.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ft(this,e,!1),"not",e)},filter:function(e){return this.pushStack(ft(this,e,!0),"filter",e)},is:function(e){return!!e&&(typeof e=="string"?st.test(e)?v(e,this.context).index(this[0])>=0:v.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,s=[],o=st.test(e)||typeof e!="string"?v(e,t||this.context):0;for(;r<i;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&n.nodeType!==11){if(o?o.index(n)>-1:v.find.matchesSelector(n,e)){s.push(n);break}n=n.parentNode}}return s=s.length>1?v.unique(s):s,this.pushStack(s,"closest",e)},index:function(e){return e?typeof e=="string"?v.inArray(this[0],v(e)):v.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?v(e,t):v.makeArray(e&&e.nodeType?[e]:e),r=v.merge(this.get(),n);return this.pushStack(ut(n[0])||ut(r[0])?r:v.unique(r))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}),v.fn.andSelf=v.fn.addBack,v.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return v.dir(e,"parentNode")},parentsUntil:function(e,t,n){return v.dir(e,"parentNode",n)},next:function(e){return at(e,"nextSibling")},prev:function(e){return at(e,"previousSibling")},nextAll:function(e){return v.dir(e,"nextSibling")},prevAll:function(e){return v.dir(e,"previousSibling")},nextUntil:function(e,t,n){return v.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return v.dir(e,"previousSibling",n)},siblings:function(e){return v.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return v.sibling(e.firstChild)},contents:function(e){return v.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:v.merge([],e.childNodes)}},function(e,t){v.fn[e]=function(n,r){var i=v.map(this,t,n);return nt.test(e)||(r=n),r&&typeof r=="string"&&(i=v.filter(r,i)),i=this.length>1&&!ot[e]?v.unique(i):i,this.length>1&&rt.test(e)&&(i=i.reverse()),this.pushStack(i,e,l.call(arguments).join(","))}}),v.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),t.length===1?v.find.matchesSelector(t[0],e)?[t[0]]:[]:v.find.matches(e,t)},dir:function(e,n,r){var i=[],s=e[n];while(s&&s.nodeType!==9&&(r===t||s.nodeType!==1||!v(s).is(r)))s.nodeType===1&&i.push(s),s=s[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var ct="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",ht=/ jQuery\d+="(?:null|\d+)"/g,pt=/^\s+/,dt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,vt=/<([\w:]+)/,mt=/<tbody/i,gt=/<|&#?\w+;/,yt=/<(?:script|style|link)/i,bt=/<(?:script|object|embed|option|style)/i,wt=new RegExp("<(?:"+ct+")[\\s/>]","i"),Et=/^(?:checkbox|radio)$/,St=/checked\s*(?:[^=]|=\s*.checked.)/i,xt=/\/(java|ecma)script/i,Tt=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,Nt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},Ct=lt(i),kt=Ct.appendChild(i.createElement("div"));Nt.optgroup=Nt.option,Nt.tbody=Nt.tfoot=Nt.colgroup=Nt.caption=Nt.thead,Nt.th=Nt.td,v.support.htmlSerialize||(Nt._default=[1,"X<div>","</div>"]),v.fn.extend({text:function(e){return v.access(this,function(e){return e===t?v.text(this):this.empty().append((this[0]&&this[0].ownerDocument||i).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(v.isFunction(e))return this.each(function(t){v(this).wrapAll(e.call(this,t))});if(this[0]){var t=v(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return v.isFunction(e)?this.each(function(t){v(this).wrapInner(e.call(this,t))}):this.each(function(){var t=v(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=v.isFunction(e);return this.each(function(n){v(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){v.nodeName(this,"body")||v(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11)&&this.insertBefore(e,this.firstChild)})},before:function(){if(!ut(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=v.clean(arguments);return this.pushStack(v.merge(e,this),"before",this.selector)}},after:function(){if(!ut(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=v.clean(arguments);return this.pushStack(v.merge(this,e),"after",this.selector)}},remove:function(e,t){var n,r=0;for(;(n=this[r])!=null;r++)if(!e||v.filter(e,[n]).length)!t&&n.nodeType===1&&(v.cleanData(n.getElementsByTagName("*")),v.cleanData([n])),n.parentNode&&n.parentNode.removeChild(n);return this},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){e.nodeType===1&&v.cleanData(e.getElementsByTagName("*"));while(e.firstChild)e.removeChild(e.firstChild)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return v.clone(this,e,t)})},html:function(e){return v.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return n.nodeType===1?n.innerHTML.replace(ht,""):t;if(typeof e=="string"&&!yt.test(e)&&(v.support.htmlSerialize||!wt.test(e))&&(v.support.leadingWhitespace||!pt.test(e))&&!Nt[(vt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(dt,"<$1></$2>");try{for(;r<i;r++)n=this[r]||{},n.nodeType===1&&(v.cleanData(n.getElementsByTagName("*")),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){return ut(this[0])?this.length?this.pushStack(v(v.isFunction(e)?e():e),"replaceWith",e):this:v.isFunction(e)?this.each(function(t){var n=v(this),r=n.html();n.replaceWith(e.call(this,t,r))}):(typeof e!="string"&&(e=v(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;v(this).remove(),t?v(t).before(e):v(n).append(e)}))},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=[].concat.apply([],e);var i,s,o,u,a=0,f=e[0],l=[],c=this.length;if(!v.support.checkClone&&c>1&&typeof f=="string"&&St.test(f))return this.each(function(){v(this).domManip(e,n,r)});if(v.isFunction(f))return this.each(function(i){var s=v(this);e[0]=f.call(this,i,n?s.html():t),s.domManip(e,n,r)});if(this[0]){i=v.buildFragment(e,this,l),o=i.fragment,s=o.firstChild,o.childNodes.length===1&&(o=s);if(s){n=n&&v.nodeName(s,"tr");for(u=i.cacheable||c-1;a<c;a++)r.call(n&&v.nodeName(this[a],"table")?Lt(this[a],"tbody"):this[a],a===u?o:v.clone(o,!0,!0))}o=s=null,l.length&&v.each(l,function(e,t){t.src?v.ajax?v.ajax({url:t.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):v.error("no ajax"):v.globalEval((t.text||t.textContent||t.innerHTML||"").replace(Tt,"")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),v.buildFragment=function(e,n,r){var s,o,u,a=e[0];return n=n||i,n=!n.nodeType&&n[0]||n,n=n.ownerDocument||n,e.length===1&&typeof a=="string"&&a.length<512&&n===i&&a.charAt(0)==="<"&&!bt.test(a)&&(v.support.checkClone||!St.test(a))&&(v.support.html5Clone||!wt.test(a))&&(o=!0,s=v.fragments[a],u=s!==t),s||(s=n.createDocumentFragment(),v.clean(e,n,s,r),o&&(v.fragments[a]=u&&s)),{fragment:s,cacheable:o}},v.fragments={},v.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){v.fn[e]=function(n){var r,i=0,s=[],o=v(n),u=o.length,a=this.length===1&&this[0].parentNode;if((a==null||a&&a.nodeType===11&&a.childNodes.length===1)&&u===1)return o[t](this[0]),this;for(;i<u;i++)r=(i>0?this.clone(!0):this).get(),v(o[i])[t](r),s=s.concat(r);return this.pushStack(s,e,o.selector)}}),v.extend({clone:function(e,t,n){var r,i,s,o;v.support.html5Clone||v.isXMLDoc(e)||!wt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(kt.innerHTML=e.outerHTML,kt.removeChild(o=kt.firstChild));if((!v.support.noCloneEvent||!v.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!v.isXMLDoc(e)){Ot(e,o),r=Mt(e),i=Mt(o);for(s=0;r[s];++s)i[s]&&Ot(r[s],i[s])}if(t){At(e,o);if(n){r=Mt(e),i=Mt(o);for(s=0;r[s];++s)At(r[s],i[s])}}return r=i=null,o},clean:function(e,t,n,r){var s,o,u,a,f,l,c,h,p,d,m,g,y=t===i&&Ct,b=[];if(!t||typeof t.createDocumentFragment=="undefined")t=i;for(s=0;(u=e[s])!=null;s++){typeof u=="number"&&(u+="");if(!u)continue;if(typeof u=="string")if(!gt.test(u))u=t.createTextNode(u);else{y=y||lt(t),c=t.createElement("div"),y.appendChild(c),u=u.replace(dt,"<$1></$2>"),a=(vt.exec(u)||["",""])[1].toLowerCase(),f=Nt[a]||Nt._default,l=f[0],c.innerHTML=f[1]+u+f[2];while(l--)c=c.lastChild;if(!v.support.tbody){h=mt.test(u),p=a==="table"&&!h?c.firstChild&&c.firstChild.childNodes:f[1]==="<table>"&&!h?c.childNodes:[];for(o=p.length-1;o>=0;--o)v.nodeName(p[o],"tbody")&&!p[o].childNodes.length&&p[o].parentNode.removeChild(p[o])}!v.support.leadingWhitespace&&pt.test(u)&&c.insertBefore(t.createTextNode(pt.exec(u)[0]),c.firstChild),u=c.childNodes,c.parentNode.removeChild(c)}u.nodeType?b.push(u):v.merge(b,u)}c&&(u=c=y=null);if(!v.support.appendChecked)for(s=0;(u=b[s])!=null;s++)v.nodeName(u,"input")?_t(u):typeof u.getElementsByTagName!="undefined"&&v.grep(u.getElementsByTagName("input"),_t);if(n){m=function(e){if(!e.type||xt.test(e.type))return r?r.push(e.parentNode?e.parentNode.removeChild(e):e):n.appendChild(e)};for(s=0;(u=b[s])!=null;s++)if(!v.nodeName(u,"script")||!m(u))n.appendChild(u),typeof u.getElementsByTagName!="undefined"&&(g=v.grep(v.merge([],u.getElementsByTagName("script")),m),b.splice.apply(b,[s+1,0].concat(g)),s+=g.length)}return b},cleanData:function(e,t){var n,r,i,s,o=0,u=v.expando,a=v.cache,f=v.support.deleteExpando,l=v.event.special;for(;(i=e[o])!=null;o++)if(t||v.acceptData(i)){r=i[u],n=r&&a[r];if(n){if(n.events)for(s in n.events)l[s]?v.event.remove(i,s):v.removeEvent(i,s,n.handle);a[r]&&(delete a[r],f?delete i[u]:i.removeAttribute?i.removeAttribute(u):i[u]=null,v.deletedIds.push(r))}}}}),function(){var e,t;v.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e=v.uaMatch(o.userAgent),t={},e.browser&&(t[e.browser]=!0,t.version=e.version),t.chrome?t.webkit=!0:t.webkit&&(t.safari=!0),v.browser=t,v.sub=function(){function e(t,n){return new e.fn.init(t,n)}v.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(r,i){return i&&i instanceof v&&!(i instanceof e)&&(i=e(i)),v.fn.init.call(this,r,i,t)},e.fn.init.prototype=e.fn;var t=e(i);return e}}();var Dt,Pt,Ht,Bt=/alpha\([^)]*\)/i,jt=/opacity=([^)]*)/,Ft=/^(top|right|bottom|left)$/,It=/^(none|table(?!-c[ea]).+)/,qt=/^margin/,Rt=new RegExp("^("+m+")(.*)$","i"),Ut=new RegExp("^("+m+")(?!px)[a-z%]+$","i"),zt=new RegExp("^([-+])=("+m+")","i"),Wt={},Xt={position:"absolute",visibility:"hidden",display:"block"},Vt={letterSpacing:0,fontWeight:400},$t=["Top","Right","Bottom","Left"],Jt=["Webkit","O","Moz","ms"],Kt=v.fn.toggle;v.fn.extend({css:function(e,n){return v.access(this,function(e,n,r){return r!==t?v.style(e,n,r):v.css(e,n)},e,n,arguments.length>1)},show:function(){return Yt(this,!0)},hide:function(){return Yt(this)},toggle:function(e,t){var n=typeof e=="boolean";return v.isFunction(e)&&v.isFunction(t)?Kt.apply(this,arguments):this.each(function(){(n?e:Gt(this))?v(this).show():v(this).hide()})}}),v.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Dt(e,"opacity");return n===""?"1":n}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":v.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var s,o,u,a=v.camelCase(n),f=e.style;n=v.cssProps[a]||(v.cssProps[a]=Qt(f,a)),u=v.cssHooks[n]||v.cssHooks[a];if(r===t)return u&&"get"in u&&(s=u.get(e,!1,i))!==t?s:f[n];o=typeof r,o==="string"&&(s=zt.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(v.css(e,n)),o="number");if(r==null||o==="number"&&isNaN(r))return;o==="number"&&!v.cssNumber[a]&&(r+="px");if(!u||!("set"in u)||(r=u.set(e,r,i))!==t)try{f[n]=r}catch(l){}},css:function(e,n,r,i){var s,o,u,a=v.camelCase(n);return n=v.cssProps[a]||(v.cssProps[a]=Qt(e.style,a)),u=v.cssHooks[n]||v.cssHooks[a],u&&"get"in u&&(s=u.get(e,!0,i)),s===t&&(s=Dt(e,n)),s==="normal"&&n in Vt&&(s=Vt[n]),r||i!==t?(o=parseFloat(s),r||v.isNumeric(o)?o||0:s):s},swap:function(e,t,n){var r,i,s={};for(i in t)s[i]=e.style[i],e.style[i]=t[i];r=n.call(e);for(i in t)e.style[i]=s[i];return r}}),e.getComputedStyle?Dt=function(t,n){var r,i,s,o,u=e.getComputedStyle(t,null),a=t.style;return u&&(r=u[n],r===""&&!v.contains(t.ownerDocument,t)&&(r=v.style(t,n)),Ut.test(r)&&qt.test(n)&&(i=a.width,s=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=r,r=u.width,a.width=i,a.minWidth=s,a.maxWidth=o)),r}:i.documentElement.currentStyle&&(Dt=function(e,t){var n,r,i=e.currentStyle&&e.currentStyle[t],s=e.style;return i==null&&s&&s[t]&&(i=s[t]),Ut.test(i)&&!Ft.test(t)&&(n=s.left,r=e.runtimeStyle&&e.runtimeStyle.left,r&&(e.runtimeStyle.left=e.currentStyle.left),s.left=t==="fontSize"?"1em":i,i=s.pixelLeft+"px",s.left=n,r&&(e.runtimeStyle.left=r)),i===""?"auto":i}),v.each(["height","width"],function(e,t){v.cssHooks[t]={get:function(e,n,r){if(n)return e.offsetWidth===0&&It.test(Dt(e,"display"))?v.swap(e,Xt,function(){return tn(e,t,r)}):tn(e,t,r)},set:function(e,n,r){return Zt(e,n,r?en(e,t,r,v.support.boxSizing&&v.css(e,"boxSizing")==="border-box"):0)}}}),v.support.opacity||(v.cssHooks.opacity={get:function(e,t){return jt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=v.isNumeric(t)?"alpha(opacity="+t*100+")":"",s=r&&r.filter||n.filter||"";n.zoom=1;if(t>=1&&v.trim(s.replace(Bt,""))===""&&n.removeAttribute){n.removeAttribute("filter");if(r&&!r.filter)return}n.filter=Bt.test(s)?s.replace(Bt,i):s+" "+i}}),v(function(){v.support.reliableMarginRight||(v.cssHooks.marginRight={get:function(e,t){return v.swap(e,{display:"inline-block"},function(){if(t)return Dt(e,"marginRight")})}}),!v.support.pixelPosition&&v.fn.position&&v.each(["top","left"],function(e,t){v.cssHooks[t]={get:function(e,n){if(n){var r=Dt(e,t);return Ut.test(r)?v(e).position()[t]+"px":r}}}})}),v.expr&&v.expr.filters&&(v.expr.filters.hidden=function(e){return e.offsetWidth===0&&e.offsetHeight===0||!v.support.reliableHiddenOffsets&&(e.style&&e.style.display||Dt(e,"display"))==="none"},v.expr.filters.visible=function(e){return!v.expr.filters.hidden(e)}),v.each({margin:"",padding:"",border:"Width"},function(e,t){v.cssHooks[e+t]={expand:function(n){var r,i=typeof n=="string"?n.split(" "):[n],s={};for(r=0;r<4;r++)s[e+$t[r]+t]=i[r]||i[r-2]||i[0];return s}},qt.test(e)||(v.cssHooks[e+t].set=Zt)});var rn=/%20/g,sn=/\[\]$/,on=/\r?\n/g,un=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,an=/^(?:select|textarea)/i;v.fn.extend({serialize:function(){return v.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?v.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||an.test(this.nodeName)||un.test(this.type))}).map(function(e,t){var n=v(this).val();return n==null?null:v.isArray(n)?v.map(n,function(e,n){return{name:t.name,value:e.replace(on,"\r\n")}}):{name:t.name,value:n.replace(on,"\r\n")}}).get()}}),v.param=function(e,n){var r,i=[],s=function(e,t){t=v.isFunction(t)?t():t==null?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=v.ajaxSettings&&v.ajaxSettings.traditional);if(v.isArray(e)||e.jquery&&!v.isPlainObject(e))v.each(e,function(){s(this.name,this.value)});else for(r in e)fn(r,e[r],n,s);return i.join("&").replace(rn,"+")};var ln,cn,hn=/#.*$/,pn=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,dn=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,vn=/^(?:GET|HEAD)$/,mn=/^\/\//,gn=/\?/,yn=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bn=/([?&])_=[^&]*/,wn=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,En=v.fn.load,Sn={},xn={},Tn=["*/"]+["*"];try{cn=s.href}catch(Nn){cn=i.createElement("a"),cn.href="",cn=cn.href}ln=wn.exec(cn.toLowerCase())||[],v.fn.load=function(e,n,r){if(typeof e!="string"&&En)return En.apply(this,arguments);if(!this.length)return this;var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=e.slice(a,e.length),e=e.slice(0,a)),v.isFunction(n)?(r=n,n=t):n&&typeof n=="object"&&(s="POST"),v.ajax({url:e,type:s,dataType:"html",data:n,complete:function(e,t){r&&u.each(r,o||[e.responseText,t,e])}}).done(function(e){o=arguments,u.html(i?v("<div>").append(e.replace(yn,"")).find(i):e)}),this},v.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){v.fn[t]=function(e){return this.on(t,e)}}),v.each(["get","post"],function(e,n){v[n]=function(e,r,i,s){return v.isFunction(r)&&(s=s||i,i=r,r=t),v.ajax({type:n,url:e,data:r,success:i,dataType:s})}}),v.extend({getScript:function(e,n){return v.get(e,t,n,"script")},getJSON:function(e,t,n){return v.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?Ln(e,v.ajaxSettings):(t=e,e=v.ajaxSettings),Ln(e,t),e},ajaxSettings:{url:cn,isLocal:dn.test(ln[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Tn},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":v.parseJSON,"text xml":v.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:Cn(Sn),ajaxTransport:Cn(xn),ajax:function(e,n){function T(e,n,s,a){var l,y,b,w,S,T=n;if(E===2)return;E=2,u&&clearTimeout(u),o=t,i=a||"",x.readyState=e>0?4:0,s&&(w=An(c,x,s));if(e>=200&&e<300||e===304)c.ifModified&&(S=x.getResponseHeader("Last-Modified"),S&&(v.lastModified[r]=S),S=x.getResponseHeader("Etag"),S&&(v.etag[r]=S)),e===304?(T="notmodified",l=!0):(l=On(c,w),T=l.state,y=l.data,b=l.error,l=!b);else{b=T;if(!T||e)T="error",e<0&&(e=0)}x.status=e,x.statusText=(n||T)+"",l?d.resolveWith(h,[y,T,x]):d.rejectWith(h,[x,T,b]),x.statusCode(g),g=t,f&&p.trigger("ajax"+(l?"Success":"Error"),[x,c,l?y:b]),m.fireWith(h,[x,T]),f&&(p.trigger("ajaxComplete",[x,c]),--v.active||v.event.trigger("ajaxStop"))}typeof e=="object"&&(n=e,e=t),n=n||{};var r,i,s,o,u,a,f,l,c=v.ajaxSetup({},n),h=c.context||c,p=h!==c&&(h.nodeType||h instanceof v)?v(h):v.event,d=v.Deferred(),m=v.Callbacks("once memory"),g=c.statusCode||{},b={},w={},E=0,S="canceled",x={readyState:0,setRequestHeader:function(e,t){if(!E){var n=e.toLowerCase();e=w[n]=w[n]||e,b[e]=t}return this},getAllResponseHeaders:function(){return E===2?i:null},getResponseHeader:function(e){var n;if(E===2){if(!s){s={};while(n=pn.exec(i))s[n[1].toLowerCase()]=n[2]}n=s[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return E||(c.mimeType=e),this},abort:function(e){return e=e||S,o&&o.abort(e),T(0,e),this}};d.promise(x),x.success=x.done,x.error=x.fail,x.complete=m.add,x.statusCode=function(e){if(e){var t;if(E<2)for(t in e)g[t]=[g[t],e[t]];else t=e[x.status],x.always(t)}return this},c.url=((e||c.url)+"").replace(hn,"").replace(mn,ln[1]+"//"),c.dataTypes=v.trim(c.dataType||"*").toLowerCase().split(y),c.crossDomain==null&&(a=wn.exec(c.url.toLowerCase())||!1,c.crossDomain=a&&a.join(":")+(a[3]?"":a[1]==="http:"?80:443)!==ln.join(":")+(ln[3]?"":ln[1]==="http:"?80:443)),c.data&&c.processData&&typeof c.data!="string"&&(c.data=v.param(c.data,c.traditional)),kn(Sn,c,n,x);if(E===2)return x;f=c.global,c.type=c.type.toUpperCase(),c.hasContent=!vn.test(c.type),f&&v.active++===0&&v.event.trigger("ajaxStart");if(!c.hasContent){c.data&&(c.url+=(gn.test(c.url)?"&":"?")+c.data,delete c.data),r=c.url;if(c.cache===!1){var N=v.now(),C=c.url.replace(bn,"$1_="+N);c.url=C+(C===c.url?(gn.test(c.url)?"&":"?")+"_="+N:"")}}(c.data&&c.hasContent&&c.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",c.contentType),c.ifModified&&(r=r||c.url,v.lastModified[r]&&x.setRequestHeader("If-Modified-Since",v.lastModified[r]),v.etag[r]&&x.setRequestHeader("If-None-Match",v.etag[r])),x.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+(c.dataTypes[0]!=="*"?", "+Tn+"; q=0.01":""):c.accepts["*"]);for(l in c.headers)x.setRequestHeader(l,c.headers[l]);if(!c.beforeSend||c.beforeSend.call(h,x,c)!==!1&&E!==2){S="abort";for(l in{success:1,error:1,complete:1})x[l](c[l]);o=kn(xn,c,n,x);if(!o)T(-1,"No Transport");else{x.readyState=1,f&&p.trigger("ajaxSend",[x,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){x.abort("timeout")},c.timeout));try{E=1,o.send(b,T)}catch(k){if(!(E<2))throw k;T(-1,k)}}return x}return x.abort()},active:0,lastModified:{},etag:{}});var Mn=[],_n=/\?/,Dn=/(=)\?(?=&|$)|\?\?/,Pn=v.now();v.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Mn.pop()||v.expando+"_"+Pn++;return this[e]=!0,e}}),v.ajaxPrefilter("json jsonp",function(n,r,i){var s,o,u,a=n.data,f=n.url,l=n.jsonp!==!1,c=l&&Dn.test(f),h=l&&!c&&typeof a=="string"&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Dn.test(a);if(n.dataTypes[0]==="jsonp"||c||h)return s=n.jsonpCallback=v.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,o=e[s],c?n.url=f.replace(Dn,"$1"+s):h?n.data=a.replace(Dn,"$1"+s):l&&(n.url+=(_n.test(f)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return u||v.error(s+" was not called"),u[0]},n.dataTypes[0]="json",e[s]=function(){u=arguments},i.always(function(){e[s]=o,n[s]&&(n.jsonpCallback=r.jsonpCallback,Mn.push(s)),u&&v.isFunction(o)&&o(u[0]),u=o=t}),"script"}),v.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return v.globalEval(e),e}}}),v.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),v.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=i.head||i.getElementsByTagName("head")[0]||i.documentElement;return{send:function(s,o){n=i.createElement("script"),n.async="async",e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,i){if(i||!n.readyState||/loaded|complete/.test(n.readyState))n.onload=n.onreadystatechange=null,r&&n.parentNode&&r.removeChild(n),n=t,i||o(200,"success")},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(0,1)}}}});var Hn,Bn=e.ActiveXObject?function(){for(var e in Hn)Hn[e](0,1)}:!1,jn=0;v.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&Fn()||In()}:Fn,function(e){v.extend(v.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(v.ajaxSettings.xhr()),v.support.ajax&&v.ajaxTransport(function(n){if(!n.crossDomain||v.support.cors){var r;return{send:function(i,s){var o,u,a=n.xhr();n.username?a.open(n.type,n.url,n.async,n.username,n.password):a.open(n.type,n.url,n.async);if(n.xhrFields)for(u in n.xhrFields)a[u]=n.xhrFields[u];n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(u in i)a.setRequestHeader(u,i[u])}catch(f){}a.send(n.hasContent&&n.data||null),r=function(e,i){var u,f,l,c,h;try{if(r&&(i||a.readyState===4)){r=t,o&&(a.onreadystatechange=v.noop,Bn&&delete Hn[o]);if(i)a.readyState!==4&&a.abort();else{u=a.status,l=a.getAllResponseHeaders(),c={},h=a.responseXML,h&&h.documentElement&&(c.xml=h);try{c.text=a.responseText}catch(e){}try{f=a.statusText}catch(p){f=""}!u&&n.isLocal&&!n.crossDomain?u=c.text?200:404:u===1223&&(u=204)}}}catch(d){i||s(-1,d)}c&&s(u,f,c,l)},n.async?a.readyState===4?setTimeout(r,0):(o=++jn,Bn&&(Hn||(Hn={},v(e).unload(Bn)),Hn[o]=r),a.onreadystatechange=r):r()},abort:function(){r&&r(0,1)}}}});var qn,Rn,Un=/^(?:toggle|show|hide)$/,zn=new RegExp("^(?:([-+])=|)("+m+")([a-z%]*)$","i"),Wn=/queueHooks$/,Xn=[Gn],Vn={"*":[function(e,t){var n,r,i=this.createTween(e,t),s=zn.exec(t),o=i.cur(),u=+o||0,a=1,f=20;if(s){n=+s[2],r=s[3]||(v.cssNumber[e]?"":"px");if(r!=="px"&&u){u=v.css(i.elem,e,!0)||n||1;do a=a||".5",u/=a,v.style(i.elem,e,u+r);while(a!==(a=i.cur()/o)&&a!==1&&--f)}i.unit=r,i.start=u,i.end=s[1]?u+(s[1]+1)*n:n}return i}]};v.Animation=v.extend(Kn,{tweener:function(e,t){v.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;r<i;r++)n=e[r],Vn[n]=Vn[n]||[],Vn[n].unshift(t)},prefilter:function(e,t){t?Xn.unshift(e):Xn.push(e)}}),v.Tween=Yn,Yn.prototype={constructor:Yn,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(v.cssNumber[n]?"":"px")},cur:function(){var e=Yn.propHooks[this.prop];return e&&e.get?e.get(this):Yn.propHooks._default.get(this)},run:function(e){var t,n=Yn.propHooks[this.prop];return this.options.duration?this.pos=t=v.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Yn.propHooks._default.set(this),this}},Yn.prototype.init.prototype=Yn.prototype,Yn.propHooks={_default:{get:function(e){var t;return e.elem[e.prop]==null||!!e.elem.style&&e.elem.style[e.prop]!=null?(t=v.css(e.elem,e.prop,!1,""),!t||t==="auto"?0:t):e.elem[e.prop]},set:function(e){v.fx.step[e.prop]?v.fx.step[e.prop](e):e.elem.style&&(e.elem.style[v.cssProps[e.prop]]!=null||v.cssHooks[e.prop])?v.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Yn.propHooks.scrollTop=Yn.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},v.each(["toggle","show","hide"],function(e,t){var n=v.fn[t];v.fn[t]=function(r,i,s){return r==null||typeof r=="boolean"||!e&&v.isFunction(r)&&v.isFunction(i)?n.apply(this,arguments):this.animate(Zn(t,!0),r,i,s)}}),v.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Gt).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=v.isEmptyObject(e),s=v.speed(t,n,r),o=function(){var t=Kn(this,v.extend({},e),s);i&&t.stop(!0)};return i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=e!=null&&e+"queueHooks",s=v.timers,o=v._data(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&Wn.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem===this&&(e==null||s[n].queue===e)&&(s[n].anim.stop(r),t=!1,s.splice(n,1));(t||!r)&&v.dequeue(this,e)})}}),v.each({slideDown:Zn("show"),slideUp:Zn("hide"),slideToggle:Zn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){v.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),v.speed=function(e,t,n){var r=e&&typeof e=="object"?v.extend({},e):{complete:n||!n&&t||v.isFunction(e)&&e,duration:e,easing:n&&t||t&&!v.isFunction(t)&&t};r.duration=v.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in v.fx.speeds?v.fx.speeds[r.duration]:v.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(){v.isFunction(r.old)&&r.old.call(this),r.queue&&v.dequeue(this,r.queue)},r},v.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},v.timers=[],v.fx=Yn.prototype.init,v.fx.tick=function(){var e,t=v.timers,n=0;for(;n<t.length;n++)e=t[n],!e()&&t[n]===e&&t.splice(n--,1);t.length||v.fx.stop()},v.fx.timer=function(e){e()&&v.timers.push(e)&&!Rn&&(Rn=setInterval(v.fx.tick,v.fx.interval))},v.fx.interval=13,v.fx.stop=function(){clearInterval(Rn),Rn=null},v.fx.speeds={slow:600,fast:200,_default:400},v.fx.step={},v.expr&&v.expr.filters&&(v.expr.filters.animated=function(e){return v.grep(v.timers,function(t){return e===t.elem}).length});var er=/^(?:body|html)$/i;v.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){v.offset.setOffset(this,e,t)});var n,r,i,s,o,u,a,f={top:0,left:0},l=this[0],c=l&&l.ownerDocument;if(!c)return;return(r=c.body)===l?v.offset.bodyOffset(l):(n=c.documentElement,v.contains(n,l)?(typeof l.getBoundingClientRect!="undefined"&&(f=l.getBoundingClientRect()),i=tr(c),s=n.clientTop||r.clientTop||0,o=n.clientLeft||r.clientLeft||0,u=i.pageYOffset||n.scrollTop,a=i.pageXOffset||n.scrollLeft,{top:f.top+u-s,left:f.left+a-o}):f)},v.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return v.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(v.css(e,"marginTop"))||0,n+=parseFloat(v.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var r=v.css(e,"position");r==="static"&&(e.style.position="relative");var i=v(e),s=i.offset(),o=v.css(e,"top"),u=v.css(e,"left"),a=(r==="absolute"||r==="fixed")&&v.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),v.isFunction(t)&&(t=t.call(e,n,s)),t.top!=null&&(f.top=t.top-s.top+c),t.left!=null&&(f.left=t.left-s.left+h),"using"in t?t.using.call(e,f):i.css(f)}},v.fn.extend({position:function(){if(!this[0])return;var e=this[0],t=this.offsetParent(),n=this.offset(),r=er.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(v.css(e,"marginTop"))||0,n.left-=parseFloat(v.css(e,"marginLeft"))||0,r.top+=parseFloat(v.css(t[0],"borderTopWidth"))||0,r.left+=parseFloat(v.css(t[0],"borderLeftWidth"))||0,{top:n.top-r.top,left:n.left-r.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||i.body;while(e&&!er.test(e.nodeName)&&v.css(e,"position")==="static")e=e.offsetParent;return e||i.body})}}),v.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);v.fn[e]=function(i){return v.access(this,function(e,i,s){var o=tr(e);if(s===t)return o?n in o?o[n]:o.document.documentElement[i]:e[i];o?o.scrollTo(r?v(o).scrollLeft():s,r?s:v(o).scrollTop()):e[i]=s},e,i,arguments.length,null)}}),v.each({Height:"height",Width:"width"},function(e,n){v.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){v.fn[i]=function(i,s){var o=arguments.length&&(r||typeof i!="boolean"),u=r||(i===!0||s===!0?"margin":"border");return v.access(this,function(n,r,i){var s;return v.isWindow(n)?n.document.documentElement["client"+e]:n.nodeType===9?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):i===t?v.css(n,r,i,u):v.style(n,r,i,u)},n,o?i:t,o,null)}})}),e.jQuery=e.$=v,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return v})}(window),function(){var e=this,t=e.Backbone,n=Array.prototype.slice,r=Array.prototype.splice,i;typeof exports!="undefined"?i=exports:i=e.Backbone={},i.VERSION="0.9.2";var s=e._;!s&&typeof require!="undefined"&&(s=require("underscore"));var o=e.jQuery||e.Zepto||e.ender;i.setDomLibrary=function(e){o=e},i.noConflict=function(){return e.Backbone=t,this},i.emulateHTTP=!1,i.emulateJSON=!1;var u=/\s+/,a=i.Events={on:function(e,t,n){var r,i,s,o,a;if(!t)return this;e=e.split(u),r=this._callbacks||(this._callbacks={});while(i=e.shift())a=r[i],s=a?a.tail:{},s.next=o={},s.context=n,s.callback=t,r[i]={tail:o,next:a?a.next:s};return this},off:function(e,t,n){var r,i,o,a,f,l;if(!(i=this._callbacks))return;if(!(e||t||n))return delete this._callbacks,this;e=e?e.split(u):s.keys(i);while(r=e.shift()){o=i[r],delete i[r];if(!o||!t&&!n)continue;a=o.tail;while((o=o.next)!==a)f=o.callback,l=o.context,(t&&f!==t||n&&l!==n)&&this.on(r,f,l)}return this},trigger:function(e){var t,r,i,s,o,a,f;if(!(i=this._callbacks))return this;a=i.all,e=e.split(u),f=n.call(arguments,1);while(t=e.shift()){if(r=i[t]){s=r.tail;while((r=r.next)!==s)r.callback.apply(r.context||this,f)}if(r=a){s=r.tail,o=[t].concat(f);while((r=r.next)!==s)r.callback.apply(r.context||this,o)}}return this}};a.bind=a.on,a.unbind=a.off;var f=i.Model=function(e,t){var n;e||(e={}),t&&t.parse&&(e=this.parse(e));if(n=C(this,"defaults"))e=s.extend({},n,e);t&&t.collection&&(this.collection=t.collection),this.attributes={},this._escapedAttributes={},this.cid=s.uniqueId("c"),this.changed={},this._silent={},this._pending={},this.set(e,{silent:!0}),this.changed={},this._silent={},this._pending={},this._previousAttributes=s.clone(this.attributes),this.initialize.apply(this,arguments)};s.extend(f.prototype,a,{changed:null,_silent:null,_pending:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return s.clone(this.attributes)},get:function(e){return this.attributes[e]},escape:function(e){var t;if(t=this._escapedAttributes[e])return t;var n=this.get(e);return this._escapedAttributes[e]=s.escape(n==null?"":""+n)},has:function(e){return this.get(e)!=null},set:function(e,t,n){var r,i,o;s.isObject(e)||e==null?(r=e,n=t):(r={},r[e]=t),n||(n={});if(!r)return this;r instanceof f&&(r=r.attributes);if(n.unset)for(i in r)r[i]=void 0;if(!this._validate(r,n))return!1;this.idAttribute in r&&(this.id=r[this.idAttribute]);var u=n.changes={},a=this.attributes,l=this._escapedAttributes,c=this._previousAttributes||{};for(i in r){o=r[i];if(!s.isEqual(a[i],o)||n.unset&&s.has(a,i))delete l[i],(n.silent?this._silent:u)[i]=!0;n.unset?delete a[i]:a[i]=o,!s.isEqual(c[i],o)||s.has(a,i)!=s.has(c,i)?(this.changed[i]=o,n.silent||(this._pending[i]=!0)):(delete this.changed[i],delete this._pending[i])}return n.silent||this.change(n),this},unset:function(e,t){return(t||(t={})).unset=!0,this.set(e,null,t)},clear:function(e){return(e||(e={})).unset=!0,this.set(s.clone(this.attributes),e)},fetch:function(e){e=e?s.clone(e):{};var t=this,n=e.success;return e.success=function(r,i,s){if(!t.set(t.parse(r,s),e))return!1;n&&n(t,r)},e.error=i.wrapError(e.error,t,e),(this.sync||i.sync).call(this,"read",this,e)},save:function(e,t,n){var r,o;s.isObject(e)||e==null?(r=e,n=t):(r={},r[e]=t),n=n?s.clone(n):{};if(n.wait){if(!this._validate(r,n))return!1;o=s.clone(this.attributes)}var u=s.extend({},n,{silent:!0});if(r&&!this.set(r,n.wait?u:n))return!1;var a=this,f=n.success;n.success=function(e,t,i){var o=a.parse(e,i);n.wait&&(delete n.wait,o=s.extend(r||{},o));if(!a.set(o,n))return!1;f?f(a,e):a.trigger("sync",a,e,n)},n.error=i.wrapError(n.error,a,n);var l=this.isNew()?"create":"update",c=(this.sync||i.sync).call(this,l,this,n);return n.wait&&this.set(o,u),c},destroy:function(e){e=e?s.clone(e):{};var t=this,n=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};if(this.isNew())return r(),!1;e.success=function(i){e.wait&&r(),n?n(t,i):t.trigger("sync",t,i,e)},e.error=i.wrapError(e.error,t,e);var o=(this.sync||i.sync).call(this,"delete",this,e);return e.wait||r(),o},url:function(){var e=C(this,"urlRoot")||C(this.collection,"url")||k();return this.isNew()?e:e+(e.charAt(e.length-1)=="/"?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},change:function(e){e||(e={});var t=this._changing;this._changing=!0;for(var n in this._silent)this._pending[n]=!0;var r=s.extend({},e.changes,this._silent);this._silent={};for(var n in r)this.trigger("change:"+n,this,this.get(n),e);if(t)return this;while(!s.isEmpty(this._pending)){this._pending={},this.trigger("change",this,e);for(var n in this.changed){if(this._pending[n]||this._silent[n])continue;delete this.changed[n]}this._previousAttributes=s.clone(this.attributes)}return this._changing=!1,this},hasChanged:function(e){return arguments.length?s.has(this.changed,e):!s.isEmpty(this.changed)},changedAttributes:function(e){if(!e)return this.hasChanged()?s.clone(this.changed):!1;var t,n=!1,r=this._previousAttributes;for(var i in e){if(s.isEqual(r[i],t=e[i]))continue;(n||(n={}))[i]=t}return n},previous:function(e){return!arguments.length||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return s.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},_validate:function(e,t){if(t.silent||!this.validate)return!0;e=s.extend({},this.attributes,e);var n=this.validate(e,t);return n?(t&&t.error?t.error(this,n,t):this.trigger("error",this,n,t),!1):!0}});var l=i.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,{silent:!0,parse:t.parse})};s.extend(l.prototype,a,{model:f,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},add:function(e,t){var n,i,o,u,a,f,l={},c={},h=[];t||(t={}),e=s.isArray(e)?e.slice():[e];for(n=0,o=e.length;n<o;n++){if(!(u=e[n]=this._prepareModel(e[n],t)))throw new Error("Can't add an invalid model to a collection");a=u.cid,f=u.id;if(l[a]||this._byCid[a]||f!=null&&(c[f]||this._byId[f])){h.push(n);continue}l[a]=c[f]=u}n=h.length;while(n--)e.splice(h[n],1);for(n=0,o=e.length;n<o;n++)(u=e[n]).on("all",this._onModelEvent,this),this._byCid[u.cid]=u,u.id!=null&&(this._byId[u.id]=u);this.length+=o,i=t.at!=null?t.at:this.models.length,r.apply(this.models,[i,0].concat(e)),this.comparator&&this.sort({silent:!0});if(t.silent)return this;for(n=0,o=this.models.length;n<o;n++){if(!l[(u=this.models[n]).cid])continue;t.index=n,u.trigger("add",u,this,t)}return this},remove:function(e,t){var n,r,i,o;t||(t={}),e=s.isArray(e)?e.slice():[e];for(n=0,r=e.length;n<r;n++){o=this.getByCid(e[n])||this.get(e[n]);if(!o)continue;delete this._byId[o.id],delete this._byCid[o.cid],i=this.indexOf(o),this.models.splice(i,1),this.length--,t.silent||(t.index=i,o.trigger("remove",o,this,t)),this._removeReference(o)}return this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,t),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,s.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},get:function(e){return e==null?void 0:this._byId[e.id!=null?e.id:e]},getByCid:function(e){return e&&this._byCid[e.cid||e]},at:function(e){return this.models[e]},where:function(e){return s.isEmpty(e)?[]:this.filter(function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},sort:function(e){e||(e={});if(!this.comparator)throw new Error("Cannot sort a set without a comparator");var t=s.bind(this.comparator,this);return this.comparator.length==1?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("reset",this,e),this},pluck:function(e){return s.map(this.models,function(t){return t.get(e)})},reset:function(e,t){e||(e=[]),t||(t={});for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n]);return this._reset(),this.add(e,s.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},fetch:function(e){e=e?s.clone(e):{},e.parse===undefined&&(e.parse=!0);var t=this,n=e.success;return e.success=function(r,i,s){t[e.add?"add":"reset"](t.parse(r,s),e),n&&n(t,r)},e.error=i.wrapError(e.error,t,e),(this.sync||i.sync).call(this,"read",this,e)},create:function(e,t){var n=this;t=t?s.clone(t):{},e=this._prepareModel(e,t);if(!e)return!1;t.wait||n.add(e,t);var r=t.success;return t.success=function(i,s,o){t.wait&&n.add(i,t),r?r(i,s):i.trigger("sync",e,s,t)},e.save(null,t),e},parse:function(e,t){return e},chain:function(){return s(this.models).chain()},_reset:function(e){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(e,t){t||(t={});if(e instanceof f)e.collection||(e.collection=this);else{var n=e;t.collection=this,e=new this.model(n,t),e._validate(e.attributes,t)||(e=!1)}return e},_removeReference:function(e){this==e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e=="add"||e=="remove")&&n!=this)return;e=="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],this._byId[t.id]=t),this.trigger.apply(this,arguments)}});var c=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","initial","rest","last","without","indexOf","shuffle","lastIndexOf","isEmpty","groupBy"];s.each(c,function(e){l.prototype[e]=function(){return s[e].apply(s,[this.models].concat(s.toArray(arguments)))}});var h=i.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},p=/:\w+/g,d=/\*\w+/g,v=/[-[\]{}()+?.,\\^$|#\s]/g;s.extend(h.prototype,a,{initialize:function(){},route:function(e,t,n){return i.history||(i.history=new m),s.isRegExp(e)||(e=this._routeToRegExp(e)),n||(n=this[t]),i.history.route(e,s.bind(function(r){var s=this._extractParameters(e,r);n&&n.apply(this,s),this.trigger.apply(this,["route:"+t].concat(s)),i.history.trigger("route",this,t,s)},this)),this},navigate:function(e,t){i.history.navigate(e,t)},_bindRoutes:function(){if(!this.routes)return;var e=[];for(var t in this.routes)e.unshift([t,this.routes[t]]);for(var n=0,r=e.length;n<r;n++)this.route(e[n][0],e[n][1],this[e[n][1]])},_routeToRegExp:function(e){return e=e.replace(v,"\\$&").replace(p,"([^/]+)").replace(d,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){return e.exec(t).slice(1)}});var m=i.History=function(){this.handlers=[],s.bindAll(this,"checkUrl")},g=/^[#\/]/,y=/msie [\w.]+/;m.started=!1,s.extend(m.prototype,a,{interval:50,getHash:function(e){var t=e?e.location:window.location,n=t.href.match(/#(.*)$/);return n?n[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||t){e=window.location.pathname;var n=window.location.search;n&&(e+=n)}else e=this.getHash();return e.indexOf(this.options.root)||(e=e.substr(this.options.root.length)),e.replace(g,"")},start:function(e){if(m.started)throw new Error("Backbone.history has already been started");m.started=!0,this.options=s.extend({},{root:"/"},this.options,e),this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var t=this.getFragment(),n=document.documentMode,r=y.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);r&&(this.iframe=o('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?o(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?o(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t;var i=window.location,u=i.pathname==this.options.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!u)return this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&u&&i.hash&&(this.fragment=this.getHash().replace(g,""),window.history.replaceState({},document.title,i.protocol+"//"+i.host+this.options.root+this.fragment));if(!this.options.silent)return this.loadUrl()},stop:function(){o(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),m.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t==this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t==this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=s.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0});return n},navigate:function(e,t){if(!m.started)return!1;if(!t||t===!0)t={trigger:t};var n=(e||"").replace(g,"");if(this.fragment==n)return;this._hasPushState?(n.indexOf(this.options.root)!=0&&(n=this.options.root+n),this.fragment=n,window.history[t.replace?"replaceState":"pushState"]({},document.title,n)):this._wantsHashChange?(this.fragment=n,this._updateHash(window.location,n,t.replace),this.iframe&&n!=this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,n,t.replace))):window.location.assign(this.options.root+e),t.trigger&&this.loadUrl(e)},_updateHash:function(e,t,n){n?e.replace(e.toString().replace(/(javascript:|#).*$/,"")+"#"+t):e.hash=t}});var b=i.View=function(e){this.cid=s.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,E=["model","collection","el","id","attributes","className","tagName"];s.extend(b.prototype,a,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this},make:function(e,t,n){var r=document.createElement(e);return t&&o(r).attr(t),n&&o(r).html(n),r},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof o?e:o(e),this.el=this.$el[0],t!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=C(this,"events")))return;this.undelegateEvents();for(var t in e){var n=e[t];s.isFunction(n)||(n=this[e[t]]);if(!n)throw new Error('Method "'+e[t]+'" does not exist');var r=t.match(w),i=r[1],o=r[2];n=s.bind(n,this),i+=".delegateEvents"+this.cid,o===""?this.$el.bind(i,n):this.$el.delegate(o,i,n)}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(e){this.options&&(e=s.extend({},this.options,e));for(var t=0,n=E.length;t<n;t++){var r=E[t];e[r]&&(this[r]=e[r])}this.options=e},_ensureElement:function(){if(!this.el){var e=C(this,"attributes")||{};this.id&&(e.id=this.id),this.className&&(e["class"]=this.className),this.setElement(this.make(this.tagName,e),!1)}else this.setElement(this.el,!1)}});var S=function(e,t){var n=N(this,e,t);return n.extend=this.extend,n};f.extend=l.extend=h.extend=b.extend=S;var x={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};i.sync=function(e,t,n){var r=x[e];n||(n={});var u={type:r,dataType:"json"};return n.url||(u.url=C(t,"url")||k()),!n.data&&t&&(e=="create"||e=="update")&&(u.contentType="application/json",u.data=JSON.stringify(t.toJSON())),i.emulateJSON&&(u.contentType="application/x-www-form-urlencoded",u.data=u.data?{model:u.data}:{}),i.emulateHTTP&&(r==="PUT"||r==="DELETE")&&(i.emulateJSON&&(u.data._method=r),u.type="POST",u.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",r)}),u.type!=="GET"&&!i.emulateJSON&&(u.processData=!1),o.ajax(s.extend(u,n))},i.wrapError=function(e,t,n){return function(r,i){i=r===t?i:r,e?e(t,i,n):t.trigger("error",t,i,n)}};var T=function(){},N=function(e,t,n){var r;return t&&t.hasOwnProperty("constructor")?r=t.constructor:r=function(){e.apply(this,arguments)},s.extend(r,e),T.prototype=e.prototype,r.prototype=new T,t&&s.extend(r.prototype,t),n&&s.extend(r,n),r.prototype.constructor=r,r.__super__=e.prototype,r},C=function(e,t){return!e||!e[t]?null:s.isFunction(e[t])?e[t]():e[t]},k=function(){throw new Error('A "url" property or function must be specified')}}.call(this),define("backbone",["jquery","underscore"],function(e){return function(){var t,n;return t||e.Backbone}}(this)),function(e){function U(e,t){return function(n){return K(e.call(this,n),t)}}function z(e,t){return function(n){return this.lang().ordinal(e.call(this,n),t)}}function W(){}function X(e){ut(e),$(this,e)}function V(e){var t=tt(e),n=t.year||0,r=t.month||0,i=t.week||0,s=t.day||0,o=t.hour||0,u=t.minute||0,a=t.second||0,f=t.millisecond||0;this._input=e,this._milliseconds=+f+a*1e3+u*6e4+o*36e5,this._days=+s+i*7,this._months=+r+n*12,this._data={},this._bubble()}function $(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return t.hasOwnProperty("toString")&&(e.toString=t.toString),t.hasOwnProperty("valueOf")&&(e.valueOf=t.valueOf),e}function J(e){return e<0?Math.ceil(e):Math.floor(e)}function K(e,t){var n=e+"";while(n.length<t)n="0"+n;return n}function Q(e,n,r,i){var s=n._milliseconds,o=n._days,u=n._months,a,f;s&&e._d.setTime(+e._d+s*r);if(o||u)a=e.minute(),f=e.hour();o&&e.date(e.date()+o*r),u&&e.month(e.month()+u*r),s&&!i&&t.updateOffset(e);if(o||u)e.minute(a),e.hour(f)}function G(e){return Object.prototype.toString.call(e)==="[object Array]"}function Y(e){return Object.prototype.toString.call(e)==="[object Date]"}function Z(e,t,n){var r=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),s=0,o;for(o=0;o<r;o++)(n&&e[o]!==t[o]||!n&&rt(e[o])!==rt(t[o]))&&s++;return s+i}function et(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=H[e]||B[t]||t}return e}function tt(e){var t={},n,r,i;for(r in e)e.hasOwnProperty(r)&&(n=et(r),n&&(t[n]=e[r]));return t}function nt(n){var r,i;if(n.indexOf("week")===0)r=7,i="day";else{if(n.indexOf("month")!==0)return;r=12,i="month"}t[n]=function(s,o){var u,a,f=t.fn._lang[n],l=[];typeof s=="number"&&(o=s,s=e),a=function(e){var n=t().utc().set(i,e);return f.call(t.fn._lang,n,s||"")};if(o!=null)return a(o);for(u=0;u<r;u++)l.push(a(u));return l}}function rt(e){var t=+e,n=0;return t!==0&&isFinite(t)&&(t>=0?n=Math.floor(t):n=Math.ceil(t)),n}function it(e,t){return(new Date(Date.UTC(e,t+1,0))).getUTCDate()}function st(e){return ot(e)?366:365}function ot(e){return e%4===0&&e%100!==0||e%400===0}function ut(e){var t;e._a&&e._pf.overflow===-2&&(t=e._a[o]<0||e._a[o]>11?o:e._a[u]<1||e._a[u]>it(e._a[s],e._a[o])?u:e._a[a]<0||e._a[a]>23?a:e._a[f]<0||e._a[f]>59?f:e._a[l]<0||e._a[l]>59?l:e._a[c]<0||e._a[c]>999?c:-1,e._pf._overflowDayOfYear&&(t<s||t>u)&&(t=u),e._pf.overflow=t)}function at(e){e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function ft(e){return e._isValid==null&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&e._pf.charsLeftOver===0&&e._pf.unusedTokens.length===0)),e._isValid}function lt(e){return e?e.toLowerCase().replace("_","-"):e}function ct(e,t){return t.abbr=e,h[e]||(h[e]=new W),h[e].set(t),h[e]}function ht(e){delete h[e]}function pt(e){var n=0,r,i,s,o,u=function(e){if(!h[e]&&p)try{require("./lang/"+e)}catch(t){}return h[e]};if(!e)return t.fn._lang;if(!G(e)){i=u(e);if(i)return i;e=[e]}while(n<e.length){o=lt(e[n]).split("-"),r=o.length,s=lt(e[n+1]),s=s?s.split("-"):null;while(r>0){i=u(o.slice(0,r).join("-"));if(i)return i;if(s&&s.length>=r&&Z(o,s,!0)>=r-1)break;r--}n++}return t.fn._lang}function dt(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function vt(e){var t=e.match(g),n,r;for(n=0,r=t.length;n<r;n++)q[t[n]]?t[n]=q[t[n]]:t[n]=dt(t[n]);return function(i){var s="";for(n=0;n<r;n++)s+=t[n]instanceof Function?t[n].call(i,e):t[n];return s}}function mt(e,t){return e.isValid()?(t=gt(t,e.lang()),j[t]||(j[t]=vt(t)),j[t](e)):e.lang().invalidDate()}function gt(e,t){function r(e){return t.longDateFormat(e)||e}var n=5;y.lastIndex=0;while(n>=0&&y.test(e))e=e.replace(y,r),y.lastIndex=0,n-=1;return e}function yt(e,t){var n;switch(e){case"DDDD":return E;case"YYYY":case"GGGG":case"gggg":return S;case"YYYYY":case"GGGGG":case"ggggg":return x;case"S":case"SS":case"SSS":case"DDD":return w;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return T;case"a":case"A":return pt(t._l)._meridiemParse;case"X":return k;case"Z":case"ZZ":return N;case"T":return C;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"ww":case"W":case"WW":case"e":case"E":return b;default:return n=new RegExp(Ct(Nt(e.replace("\\","")),"i")),n}}function bt(e){var t=(N.exec(e)||[])[0],n=(t+"").match(_)||["-",0,0],r=+(n[1]*60)+rt(n[2]);return n[0]==="+"?-r:r}function wt(e,t,n){var r,i=n._a;switch(e){case"M":case"MM":t!=null&&(i[o]=rt(t)-1);break;case"MMM":case"MMMM":r=pt(n._l).monthsParse(t),r!=null?i[o]=r:n._pf.invalidMonth=t;break;case"D":case"DD":t!=null&&(i[u]=rt(t));break;case"DDD":case"DDDD":t!=null&&(n._dayOfYear=rt(t));break;case"YY":i[s]=rt(t)+(rt(t)>68?1900:2e3);break;case"YYYY":case"YYYYY":i[s]=rt(t);break;case"a":case"A":n._isPm=pt(n._l).isPM(t);break;case"H":case"HH":case"h":case"hh":i[a]=rt(t);break;case"m":case"mm":i[f]=rt(t);break;case"s":case"ss":i[l]=rt(t);break;case"S":case"SS":case"SSS":i[c]=rt(("0."+t)*1e3);break;case"X":n._d=new Date(parseFloat(t)*1e3);break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=bt(t);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":e=e.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(n._w=n._w||{},n._w[e]=t)}}function Et(e){var n,r,i=[],l,c,h,p,d,v,m,g;if(e._d)return;l=xt(e),e._w&&e._a[u]==null&&e._a[o]==null&&(h=function(n){return n?n.length<3?parseInt(n,10)>68?"19"+n:"20"+n:n:e._a[s]==null?t().weekYear():e._a[s]},p=e._w,p.GG!=null||p.W!=null||p.E!=null?d=Bt(h(p.GG),p.W||1,p.E,4,1):(v=pt(e._l),m=p.d!=null?_t(p.d,v):p.e!=null?parseInt(p.e,10)+v._week.dow:0,g=parseInt(p.w,10)||1,p.d!=null&&m<v._week.dow&&g++,d=Bt(h(p.gg),g,m,v._week.doy,v._week.dow)),e._a[s]=d.year,e._dayOfYear=d.dayOfYear),e._dayOfYear&&(c=e._a[s]==null?l[s]:e._a[s],e._dayOfYear>st(c)&&(e._pf._overflowDayOfYear=!0),r=Mt(c,0,e._dayOfYear),e._a[o]=r.getUTCMonth(),e._a[u]=r.getUTCDate());for(n=0;n<3&&e._a[n]==null;++n)e._a[n]=i[n]=l[n];for(;n<7;n++)e._a[n]=i[n]=e._a[n]==null?n===2?1:0:e._a[n];i[a]+=rt((e._tzm||0)/60),i[f]+=rt((e._tzm||0)%60),e._d=(e._useUTC?Mt:Ot).apply(null,i)}function St(e){var t;if(e._d)return;t=tt(e._i),e._a=[t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond],Et(e)}function xt(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Tt(e){e._a=[],e._pf.empty=!0;var t=pt(e._l),n=""+e._i,r,i,s,o,u,f=n.length,l=0;s=gt(e._f,t).match(g)||[];for(r=0;r<s.length;r++)o=s[r],i=(yt(o,e).exec(n)||[])[0],i&&(u=n.substr(0,n.indexOf(i)),u.length>0&&e._pf.unusedInput.push(u),n=n.slice(n.indexOf(i)+i.length),l+=i.length),q[o]?(i?e._pf.empty=!1:e._pf.unusedTokens.push(o),wt(o,i,e)):e._strict&&!i&&e._pf.unusedTokens.push(o);e._pf.charsLeftOver=f-l,n.length>0&&e._pf.unusedInput.push(n),e._isPm&&e._a[a]<12&&(e._a[a]+=12),e._isPm===!1&&e._a[a]===12&&(e._a[a]=0),Et(e),ut(e)}function Nt(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i})}function Ct(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function kt(e){var t,n,r,i,s;if(e._f.length===0){e._pf.invalidFormat=!0,e._d=new Date(NaN);return}for(i=0;i<e._f.length;i++){s=0,t=$({},e),at(t),t._f=e._f[i],Tt(t);if(!ft(t))continue;s+=t._pf.charsLeftOver,s+=t._pf.unusedTokens.length*10,t._pf.score=s;if(r==null||s<r)r=s,n=t}$(e,n||t)}function Lt(e){var t,n=e._i,r=L.exec(n);if(r){e._pf.iso=!0;for(t=4;t>0;t--)if(r[t]){e._f=O[t-1]+(r[6]||" ");break}for(t=0;t<4;t++)if(M[t][1].exec(n)){e._f+=M[t][0];break}N.exec(n)&&(e._f+="Z"),Tt(e)}else e._d=new Date(n)}function At(t){var n=t._i,r=d.exec(n);n===e?t._d=new Date:r?t._d=new Date(+r[1]):typeof n=="string"?Lt(t):G(n)?(t._a=n.slice(0),Et(t)):Y(n)?t._d=new Date(+n):typeof n=="object"?St(t):t._d=new Date(n)}function Ot(e,t,n,r,i,s,o){var u=new Date(e,t,n,r,i,s,o);return e<1970&&u.setFullYear(e),u}function Mt(e){var t=new Date(Date.UTC.apply(null,arguments));return e<1970&&t.setUTCFullYear(e),t}function _t(e,t){if(typeof e=="string")if(!isNaN(e))e=parseInt(e,10);else{e=t.weekdaysParse(e);if(typeof e!="number")return null}return e}function Dt(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function Pt(e,t,n){var i=r(Math.abs(e)/1e3),s=r(i/60),o=r(s/60),u=r(o/24),a=r(u/365),f=i<45&&["s",i]||s===1&&["m"]||s<45&&["mm",s]||o===1&&["h"]||o<22&&["hh",o]||u===1&&["d"]||u<=25&&["dd",u]||u<=45&&["M"]||u<345&&["MM",r(u/30)]||a===1&&["y"]||["yy",a];return f[2]=t,f[3]=e>0,f[4]=n,Dt.apply({},f)}function Ht(e,n,r){var i=r-n,s=r-e.day(),o;return s>i&&(s-=7),s<i-7&&(s+=7),o=t(e).add("d",s),{week:Math.ceil(o.dayOfYear()/7),year:o.year()}}function Bt(e,t,n,r,i){var s=(new Date(Date.UTC(e,0))).getUTCDay(),o,u;return n=n!=null?n:i,o=i-s+(s>r?7:0),u=7*(t-1)+(n-i)+o+1,{year:u>0?e:e-1,dayOfYear:u>0?u:st(e-1)+u}}function jt(e){var n=e._i,r=e._f;return typeof e._pf=="undefined"&&at(e),n===null?t.invalid({nullInput:!0}):(typeof n=="string"&&(e._i=n=pt().preparse(n)),t.isMoment(n)?(e=$({},n),e._d=new Date(+n._d)):r?G(r)?kt(e):Tt(e):At(e),new X(e))}function Ft(e,n){t.fn[e]=t.fn[e+"s"]=function(e){var r=this._isUTC?"UTC":"";return e!=null?(this._d["set"+r+n](e),t.updateOffset(this),this):this._d["get"+r+n]()}}function It(e){t.duration.fn[e]=function(){return this._data[e]}}function qt(e,n){t.duration.fn["as"+e]=function(){return+this/n}}function Rt(){typeof ender=="undefined"&&(this.moment=t)}var t,n="2.3.1",r=Math.round,i,s=0,o=1,u=2,a=3,f=4,l=5,c=6,h={},p=typeof module!="undefined"&&module.exports,d=/^\/?Date\((\-?\d+)/i,v=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,m=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,g=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,y=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,b=/\d\d?/,w=/\d{1,3}/,E=/\d{3}/,S=/\d{1,4}/,x=/[+\-]?\d{1,6}/,T=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,N=/Z|[\+\-]\d\d:?\d\d/i,C=/T/i,k=/[\+\-]?\d+(\.\d{1,3})?/,L=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d|Z)?)?$/,A="YYYY-MM-DDTHH:mm:ssZ",O=["YYYY-MM-DD","GGGG-[W]WW","GGGG-[W]WW-E","YYYY-DDD"],M=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],_=/([\+\-]|\d\d)/gi,D="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),P={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},H={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},B={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},j={},F="DDD w W M D d".split(" "),I="M D H h m s w W".split(" "),q={M:function(){return this.month()+1},MMM:function(e){return this.lang().monthsShort(this,e)},MMMM:function(e){return this.lang().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.lang().weekdaysMin(this,e)},ddd:function(e){return this.lang().weekdaysShort(this,e)},dddd:function(e){return this.lang().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return K(this.year()%100,2)},YYYY:function(){return K(this.year(),4)},YYYYY:function(){return K(this.year(),5)},gg:function(){return K(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return K(this.weekYear(),5)},GG:function(){return K(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},GGGGG:function(){return K(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return rt(this.milliseconds()/100)},SS:function(){return K(rt(this.milliseconds()/10),2)},SSS:function(){return K(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return e<0&&(e=-e,t="-"),t+K(rt(e/60),2)+":"+K(rt(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";return e<0&&(e=-e,t="-"),t+K(rt(10*e/6),4)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()}},R=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];while(F.length)i=F.pop(),q[i+"o"]=z(q[i],i);while(I.length)i=I.pop(),q[i+i]=U(q[i],2);q.DDDD=U(q.DDD,3),$(W.prototype,{set:function(e){var t,n;for(n in e)t=e[n],typeof t=="function"?this[n]=t:this["_"+n]=t},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var n,r,i;this._monthsParse||(this._monthsParse=[]);for(n=0;n<12;n++){this._monthsParse[n]||(r=t.utc([2e3,n]),i="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[n]=new RegExp(i.replace(".",""),"i"));if(this._monthsParse[n].test(e))return n}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var n,r,i;this._weekdaysParse||(this._weekdaysParse=[]);for(n=0;n<7;n++){this._weekdaysParse[n]||(r=t([2e3,1]).day(n),i="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[n]=new RegExp(i.replace(".",""),"i"));if(this._weekdaysParse[n].test(e))return n}},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return(e+"").toLowerCase().charAt(0)==="p"},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){var n=this._calendar[e];return typeof n=="function"?n.apply(t):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,r){var i=this._relativeTime[n];return typeof i=="function"?i(e,t,n,r):i.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return typeof n=="function"?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postformat:function(e){return e},week:function(e){return Ht(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),t=function(t,n,r,i){return typeof r=="boolean"&&(i=r,r=e),jt({_i:t,_f:n,_l:r,_strict:i,_isUTC:!1})},t.utc=function(t,n,r,i){var s;return typeof r=="boolean"&&(i=r,r=e),s=jt({_useUTC:!0,_isUTC:!0,_l:r,_i:t,_f:n,_strict:i}).utc(),s},t.unix=function(e){return t(e*1e3)},t.duration=function(e,n){var r=t.isDuration(e),i=typeof e=="number",s=r?e._input:i?{}:e,o=null,h,p,d,g,y;return i?n?s[n]=e:s.milliseconds=e:(o=v.exec(e))?(h=o[1]==="-"?-1:1,s={y:0,d:rt(o[u])*h,h:rt(o[a])*h,m:rt(o[f])*h,s:rt(o[l])*h,ms:rt(o[c])*h}):!(o=m.exec(e))||(h=o[1]==="-"?-1:1,d=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*h},s={y:d(o[2]),M:d(o[3]),d:d(o[4]),h:d(o[5]),m:d(o[6]),s:d(o[7]),w:d(o[8])}),p=new V(s),r&&e.hasOwnProperty("_lang")&&(p._lang=e._lang),p},t.version=n,t.defaultFormat=A,t.updateOffset=function(){},t.lang=function(e,n){var r;return e?(n?ct(lt(e),n):n===null?(ht(e),e="en"):h[e]||pt(e),r=t.duration.fn._lang=t.fn._lang=pt(e),r._abbr):t.fn._lang._abbr},t.langData=function(e){return e&&e._lang&&e._lang._abbr&&(e=e._lang._abbr),pt(e)},t.isMoment=function(e){return e instanceof X},t.isDuration=function(e){return e instanceof V};for(i=R.length-1;i>=0;--i)nt(R[i]);t.normalizeUnits=function(e){return et(e)},t.invalid=function(e){var n=t.utc(NaN);return e!=null?$(n._pf,e):n._pf.userInvalidated=!0,n},t.parseZone=function(e){return t(e).parseZone()},$(t.fn=X.prototype,{clone:function(){return t(this)},valueOf:function(){return+this._d+(this._offset||0)*6e4},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){return mt(t(this).utc(),"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return ft(this)},isDSTShifted:function(){return this._a?this.isValid()&&Z(this._a,(this._isUTC?t.utc(this._a):t(this._a)).toArray())>0:!1},parsingFlags:function(){return $({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(e){var n=mt(this,e||t.defaultFormat);return this.lang().postformat(n)},add:function(e,n){var r;return typeof e=="string"?r=t.duration(+n,e):r=t.duration(e,n),Q(this,r,1),this},subtract:function(e,n){var r;return typeof e=="string"?r=t.duration(+n,e):r=t.duration(e,n),Q(this,r,-1),this},diff:function(e,n,r){var i=this._isUTC?t(e).zone(this._offset||0):t(e).local(),s=(this.zone()-i.zone())*6e4,o,u;return n=et(n),n==="year"||n==="month"?(o=(this.daysInMonth()+i.daysInMonth())*432e5,u=(this.year()-i.year())*12+(this.month()-i.month()),u+=(this-t(this).startOf("month")-(i-t(i).startOf("month")))/o,u-=(this.zone()-t(this).startOf("month").zone()-(i.zone()-t(i).startOf("month").zone()))*6e4/o,n==="year"&&(u/=12)):(o=this-i,u=n==="second"?o/1e3:n==="minute"?o/6e4:n==="hour"?o/36e5:n==="day"?(o-s)/864e5:n==="week"?(o-s)/6048e5:o),r?u:J(u)},from:function(e,n){return t.duration(this.diff(e)).lang(this.lang()._abbr).humanize(!n)},fromNow:function(e){return this.from(t(),e)},calendar:function(){var e=this.diff(t().zone(this.zone()).startOf("day"),"days",!0),n=e<-6?"sameElse":e<-1?"lastWeek":e<0?"lastDay":e<1?"sameDay":e<2?"nextDay":e<7?"nextWeek":"sameElse";return this.format(this.lang().calendar(n,this))},isLeapYear:function(){return ot(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return e!=null?(e=_t(e,this.lang()),this.add({d:e-t})):t},month:function(e){var n=this._isUTC?"UTC":"",r;if(e!=null){if(typeof e=="string"){e=this.lang().monthsParse(e);if(typeof e!="number")return this}return r=this.date(),this.date(1),this._d["set"+n+"Month"](e),this.date(Math.min(r,this.daysInMonth())),t.updateOffset(this),this}return this._d["get"+n+"Month"]()},startOf:function(e){e=et(e);switch(e){case"year":this.month(0);case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return e==="week"?this.weekday(0):e==="isoWeek"&&this.isoWeekday(1),this},endOf:function(e){return e=et(e),this.startOf(e).add(e==="isoWeek"?"week":e,1).subtract("ms",1)},isAfter:function(e,n){return n=typeof n!="undefined"?n:"millisecond",+this.clone().startOf(n)>+t(e).startOf(n)},isBefore:function(e,n){return n=typeof n!="undefined"?n:"millisecond",+this.clone().startOf(n)<+t(e).startOf(n)},isSame:function(e,n){return n=typeof n!="undefined"?n:"millisecond",+this.clone().startOf(n)===+t(e).startOf(n)},min:function(e){return e=t.apply(null,arguments),e<this?this:e},max:function(e){return e=t.apply(null,arguments),e>this?this:e},zone:function(e){var n=this._offset||0;return e==null?this._isUTC?n:this._d.getTimezoneOffset():(typeof e=="string"&&(e=bt(e)),Math.abs(e)<16&&(e*=60),this._offset=e,this._isUTC=!0,n!==e&&Q(this,t.duration(n-e,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return typeof this._i=="string"&&this.zone(this._i),this},hasAlignedHourOffset:function(e){return e?e=t(e).zone():e=0,(this.zone()-e)%60===0},daysInMonth:function(){return it(this.year(),this.month())},dayOfYear:function(e){var n=r((t(this).startOf("day")-t(this).startOf("year"))/864e5)+1;return e==null?n:this.add("d",e-n)},weekYear:function(e){var t=Ht(this,this.lang()._week.dow,this.lang()._week.doy).year;return e==null?t:this.add("y",e-t)},isoWeekYear:function(e){var t=Ht(this,1,4).year;return e==null?t:this.add("y",e-t)},week:function(e){var t=this.lang().week(this);return e==null?t:this.add("d",(e-t)*7)},isoWeek:function(e){var t=Ht(this,1,4).week;return e==null?t:this.add("d",(e-t)*7)},weekday:function(e){var t=(this.day()+7-this.lang()._week.dow)%7;return e==null?t:this.add("d",e-t)},isoWeekday:function(e){return e==null?this.day()||7:this.day(this.day()%7?e:e-7)},get:function(e){return e=et(e),this[e]()},set:function(e,t){return e=et(e),typeof this[e]=="function"&&this[e](t),this},lang:function(t){return t===e?this._lang:(this._lang=pt(t),this)}});for(i=0;i<D.length;i++)Ft(D[i].toLowerCase().replace(/s$/,""),D[i]);Ft("year","FullYear"),t.fn.days=t.fn.day,t.fn.months=t.fn.month,t.fn.weeks=t.fn.week,t.fn.isoWeeks=t.fn.isoWeek,t.fn.toJSON=t.fn.toISOString,$(t.duration.fn=V.prototype,{_bubble:function(){var e=this._milliseconds,t=this._days,n=this._months,r=this._data,i,s,o,u;r.milliseconds=e%1e3,i=J(e/1e3),r.seconds=i%60,s=J(i/60),r.minutes=s%60,o=J(s/60),r.hours=o%24,t+=J(o/24),r.days=t%30,n+=J(t/30),r.months=n%12,u=J(n/12),r.years=u},weeks:function(){return J(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*864e5+this._months%12*2592e6+rt(this._months/12)*31536e6},humanize:function(e){var t=+this,n=Pt(t,!e,this.lang());return e&&(n=this.lang().pastFuture(t,n)),this.lang().postformat(n)},add:function(e,n){var r=t.duration(e,n);return this._milliseconds+=r._milliseconds,this._days+=r._days,this._months+=r._months,this._bubble(),this},subtract:function(e,n){var r=t.duration(e,n);return this._milliseconds-=r._milliseconds,this._days-=r._days,this._months-=r._months,this._bubble(),this},get:function(e){return e=et(e),this[e.toLowerCase()+"s"]()},as:function(e){return e=et(e),this["as"+e.charAt(0).toUpperCase()+e.slice(1)+"s"]()},lang:t.fn.lang,toIsoString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),r=Math.abs(this.hours()),i=Math.abs(this.minutes()),s=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(r||i||s?"T":"")+(r?r+"H":"")+(i?i+"M":"")+(s?s+"S":""):"P0D"}});for(i in P)P.hasOwnProperty(i)&&(qt(i,P[i]),It(i.toLowerCase()));qt("Weeks",6048e5),t.duration.fn.asMonths=function(){return(+this-this.years()*31536e6)/2592e6+this.years()*12},t.lang("en",{ordinal:function(e){var t=e%10,n=rt(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}}),p?(module.exports=t,Rt()):typeof define=="function"&&define.amd?(Rt(),define("moment",["require","exports","module"],function(e,n,r){return r.config().noGlobal!==!0&&Rt(),t})):Rt()}.call(this);var Handlebars={};(function(e,t){e.VERSION="1.0.0",e.COMPILER_REVISION=4,e.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"},e.helpers={},e.partials={};var n=Object.prototype.toString,r="[object Function]",i="[object Object]";e.registerHelper=function(t,r,s){if(n.call(t)===i){if(s||r)throw new e.Exception("Arg not supported with multiple helpers");e.Utils.extend(this.helpers,t)}else s&&(r.not=s),this.helpers[t]=r},e.registerPartial=function(t,r){n.call(t)===i?e.Utils.extend(this.partials,t):this.partials[t]=r},e.registerHelper("helperMissing",function(e){if(arguments.length===2)return t;throw new Error("Missing helper: '"+e+"'")}),e.registerHelper("blockHelperMissing",function(t,i){var s=i.inverse||function(){},o=i.fn,u=n.call(t);return u===r&&(t=t.call(this)),t===!0?o(this):t===!1||t==null?s(this):u==="[object Array]"?t.length>0?e.helpers.each(t,i):s(this):o(t)}),e.K=function(){},e.createFrame=Object.create||function(t){e.K.prototype=t;var n=new e.K;return e.K.prototype=null,n},e.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(t,n){if(e.logger.level<=t){var r=e.logger.methodMap[t];typeof console!="undefined"&&console[r]&&console[r].call(console,n)}}},e.log=function(t,n){e.logger.log(t,n)},e.registerHelper("each",function(t,i){var s=i.fn,o=i.inverse,u=0,a="",f,l=n.call(t);l===r&&(t=t.call(this)),i.data&&(f=e.createFrame(i.data));if(t&&typeof t=="object")if(t instanceof Array)for(var c=t.length;u<c;u++)f&&(f.index=u),a+=s(t[u],{data:f});else for(var h in t)t.hasOwnProperty(h)&&(f&&(f.key=h),a+=s(t[h],{data:f}),u++);return u===0&&(a=o(this)),a}),e.registerHelper("if",function(t,i){var s=n.call(t);return s===r&&(t=t.call(this)),!t||e.Utils.isEmpty(t)?i.inverse(this):i.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn})}),e.registerHelper("with",function(t,i){var s=n.call(t);s===r&&(t=t.call(this));if(!e.Utils.isEmpty(t))return i.fn(t)}),e.registerHelper("log",function(t,n){var r=n.data&&n.data.level!=null?parseInt(n.data.level,10):1;e.log(r,t)});var s=function(){function n(){this.yy={}}var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,simpleInverse:6,statements:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,params:27,hash:28,dataName:29,param:30,STRING:31,INTEGER:32,BOOLEAN:33,hashSegments:34,hashSegment:35,ID:36,EQUALS:37,DATA:38,pathSegments:39,SEP:40,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",31:"STRING",32:"INTEGER",33:"BOOLEAN",36:"ID",37:"EQUALS",38:"DATA",40:"SEP"},productions_:[0,[3,2],[4,2],[4,3],[4,2],[4,1],[4,1],[4,0],[7,1],[7,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[6,2],[17,3],[17,2],[17,2],[17,1],[17,1],[27,2],[27,1],[30,1],[30,1],[30,1],[30,1],[30,1],[28,1],[34,2],[34,1],[35,3],[35,3],[35,3],[35,3],[35,3],[26,1],[26,1],[26,1],[29,2],[21,1],[39,3],[39,1]],performAction:function(t,n,r,i,s,o,u){var a=o.length-1;switch(s){case 1:return o[a-1];case 2:this.$=new i.ProgramNode([],o[a]);break;case 3:this.$=new i.ProgramNode(o[a-2],o[a]);break;case 4:this.$=new i.ProgramNode(o[a-1],[]);break;case 5:this.$=new i.ProgramNode(o[a]);break;case 6:this.$=new i.ProgramNode([],[]);break;case 7:this.$=new i.ProgramNode([]);break;case 8:this.$=[o[a]];break;case 9:o[a-1].push(o[a]),this.$=o[a-1];break;case 10:this.$=new i.BlockNode(o[a-2],o[a-1].inverse,o[a-1],o[a]);break;case 11:this.$=new i.BlockNode(o[a-2],o[a-1],o[a-1].inverse,o[a]);break;case 12:this.$=o[a];break;case 13:this.$=o[a];break;case 14:this.$=new i.ContentNode(o[a]);break;case 15:this.$=new i.CommentNode(o[a]);break;case 16:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1]);break;case 17:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1]);break;case 18:this.$=o[a-1];break;case 19:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1],o[a-2][2]==="&");break;case 20:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1],!0);break;case 21:this.$=new i.PartialNode(o[a-1]);break;case 22:this.$=new i.PartialNode(o[a-2],o[a-1]);break;case 23:break;case 24:this.$=[[o[a-2]].concat(o[a-1]),o[a]];break;case 25:this.$=[[o[a-1]].concat(o[a]),null];break;case 26:this.$=[[o[a-1]],o[a]];break;case 27:this.$=[[o[a]],null];break;case 28:this.$=[[o[a]],null];break;case 29:o[a-1].push(o[a]),this.$=o[a-1];break;case 30:this.$=[o[a]];break;case 31:this.$=o[a];break;case 32:this.$=new i.StringNode(o[a]);break;case 33:this.$=new i.IntegerNode(o[a]);break;case 34:this.$=new i.BooleanNode(o[a]);break;case 35:this.$=o[a];break;case 36:this.$=new i.HashNode(o[a]);break;case 37:o[a-1].push(o[a]),this.$=o[a-1];break;case 38:this.$=[o[a]];break;case 39:this.$=[o[a-2],o[a]];break;case 40:this.$=[o[a-2],new i.StringNode(o[a])];break;case 41:this.$=[o[a-2],new i.IntegerNode(o[a])];break;case 42:this.$=[o[a-2],new i.BooleanNode(o[a])];break;case 43:this.$=[o[a-2],o[a]];break;case 44:this.$=new i.PartialNameNode(o[a]);break;case 45:this.$=new i.PartialNameNode(new i.StringNode(o[a]));break;case 46:this.$=new i.PartialNameNode(new i.IntegerNode(o[a]));break;case 47:this.$=new i.DataNode(o[a]);break;case 48:this.$=new i.IdNode(o[a]);break;case 49:o[a-2].push({part:o[a],separator:o[a-1]}),this.$=o[a-2];break;case 50:this.$=[{part:o[a]}]}},table:[{3:1,4:2,5:[2,7],6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],22:[1,14],23:[1,15],25:[1,16]},{1:[3]},{5:[1,17]},{5:[2,6],7:18,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,6],22:[1,14],23:[1,15],25:[1,16]},{5:[2,5],6:20,8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,5],22:[1,14],23:[1,15],25:[1,16]},{17:23,18:[1,22],21:24,29:25,36:[1,28],38:[1,27],39:26},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],25:[2,8]},{4:29,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],25:[1,16]},{4:30,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],25:[1,16]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{17:31,21:24,29:25,36:[1,28],38:[1,27],39:26},{17:32,21:24,29:25,36:[1,28],38:[1,27],39:26},{17:33,21:24,29:25,36:[1,28],38:[1,27],39:26},{21:35,26:34,31:[1,36],32:[1,37],36:[1,28],39:26},{1:[2,1]},{5:[2,2],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,2],22:[1,14],23:[1,15],25:[1,16]},{17:23,21:24,29:25,36:[1,28],38:[1,27],39:26},{5:[2,4],7:38,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,4],22:[1,14],23:[1,15],25:[1,16]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{5:[2,23],14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{18:[1,39]},{18:[2,27],21:44,24:[2,27],27:40,28:41,29:48,30:42,31:[1,45],32:[1,46],33:[1,47],34:43,35:49,36:[1,50],38:[1,27],39:26},{18:[2,28],24:[2,28]},{18:[2,48],24:[2,48],31:[2,48],32:[2,48],33:[2,48],36:[2,48],38:[2,48],40:[1,51]},{21:52,36:[1,28],39:26},{18:[2,50],24:[2,50],31:[2,50],32:[2,50],33:[2,50],36:[2,50],38:[2,50],40:[2,50]},{10:53,20:[1,54]},{10:55,20:[1,54]},{18:[1,56]},{18:[1,57]},{24:[1,58]},{18:[1,59],21:60,36:[1,28],39:26},{18:[2,44],36:[2,44]},{18:[2,45],36:[2,45]},{18:[2,46],36:[2,46]},{5:[2,3],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,3],22:[1,14],23:[1,15],25:[1,16]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{18:[2,25],21:44,24:[2,25],28:61,29:48,30:62,31:[1,45],32:[1,46],33:[1,47],34:43,35:49,36:[1,50],38:[1,27],39:26},{18:[2,26],24:[2,26]},{18:[2,30],24:[2,30],31:[2,30],32:[2,30],33:[2,30],36:[2,30],38:[2,30]},{18:[2,36],24:[2,36],35:63,36:[1,64]},{18:[2,31],24:[2,31],31:[2,31],32:[2,31],33:[2,31],36:[2,31],38:[2,31]},{18:[2,32],24:[2,32],31:[2,32],32:[2,32],33:[2,32],36:[2,32],38:[2,32]},{18:[2,33],24:[2,33],31:[2,33],32:[2,33],33:[2,33],36:[2,33],38:[2,33]},{18:[2,34],24:[2,34],31:[2,34],32:[2,34],33:[2,34],36:[2,34],38:[2,34]},{18:[2,35],24:[2,35],31:[2,35],32:[2,35],33:[2,35],36:[2,35],38:[2,35]},{18:[2,38],24:[2,38],36:[2,38]},{18:[2,50],24:[2,50],31:[2,50],32:[2,50],33:[2,50],36:[2,50],37:[1,65],38:[2,50],40:[2,50]},{36:[1,66]},{18:[2,47],24:[2,47],31:[2,47],32:[2,47],33:[2,47],36:[2,47],38:[2,47]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{21:67,36:[1,28],39:26},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,68]},{18:[2,24],24:[2,24]},{18:[2,29],24:[2,29],31:[2,29],32:[2,29],33:[2,29],36:[2,29],38:[2,29]},{18:[2,37],24:[2,37],36:[2,37]},{37:[1,65]},{21:69,29:73,31:[1,70],32:[1,71],33:[1,72],36:[1,28],38:[1,27],39:26},{18:[2,49],24:[2,49],31:[2,49],32:[2,49],33:[2,49],36:[2,49],38:[2,49],40:[2,49]},{18:[1,74]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{18:[2,39],24:[2,39],36:[2,39]},{18:[2,40],24:[2,40],36:[2,40]},{18:[2,41],24:[2,41],36:[2,41]},{18:[2,42],24:[2,42],36:[2,42]},{18:[2,43],24:[2,43],36:[2,43]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]}],defaultActions:{17:[2,1]},parseError:function(t,n){throw new Error(t)},parse:function(t){function v(e){r.length=r.length-2*e,i.length=i.length-e,s.length=s.length-e}function m(){var e;return e=n.lexer.lex()||1,typeof e!="number"&&(e=n.symbols_[e]||e),e}var n=this,r=[0],i=[null],s=[],o=this.table,u="",a=0,f=0,l=0,c=2,h=1;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,typeof this.lexer.yylloc=="undefined"&&(this.lexer.yylloc={});var p=this.lexer.yylloc;s.push(p);var d=this.lexer.options&&this.lexer.options.ranges;typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);var g,y,b,w,E,S,x={},T,N,C,k;for(;;){b=r[r.length-1];if(this.defaultActions[b])w=this.defaultActions[b];else{if(g===null||typeof g=="undefined")g=m();w=o[b]&&o[b][g]}if(typeof w=="undefined"||!w.length||!w[0]){var L="";if(!l){k=[];for(T in o[b])this.terminals_[T]&&T>2&&k.push("'"+this.terminals_[T]+"'");this.lexer.showPosition?L="Parse error on line "+(a+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+k.join(", ")+", got '"+(this.terminals_[g]||g)+"'":L="Parse error on line "+(a+1)+": Unexpected "+(g==1?"end of input":"'"+(this.terminals_[g]||g)+"'"),this.parseError(L,{text:this.lexer.match,token:this.terminals_[g]||g,line:this.lexer.yylineno,loc:p,expected:k})}}if(w[0]instanceof Array&&w.length>1)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+g);switch(w[0]){case 1:r.push(g),i.push(this.lexer.yytext),s.push(this.lexer.yylloc),r.push(w[1]),g=null,y?(g=y,y=null):(f=this.lexer.yyleng,u=this.lexer.yytext,a=this.lexer.yylineno,p=this.lexer.yylloc,l>0&&l--);break;case 2:N=this.productions_[w[1]][1],x.$=i[i.length-N],x._$={first_line:s[s.length-(N||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(N||1)].first_column,last_column:s[s.length-1].last_column},d&&(x._$.range=[s[s.length-(N||1)].range[0],s[s.length-1].range[1]]),S=this.performAction.call(x,u,f,a,this.yy,w[1],i,s);if(typeof S!="undefined")return S;N&&(r=r.slice(0,-1*N*2),i=i.slice(0,-1*N),s=s.slice(0,-1*N)),r.push(this.productions_[w[1]][0]),i.push(x.$),s.push(x._$),C=o[r[r.length-2]][r[r.length-1]],r.push(C);break;case 3:return!0}}return!0}},t=function(){var e={EOF:1,parseError:function(t,n){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,n)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=(new Array(e.length+1)).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,r,i,s;this._more||(this.yytext="",this.match="");var o=this._currentRules();for(var u=0;u<o.length;u++){n=this._input.match(this.rules[o[u]]);if(n&&(!t||n[0].length>t[0].length)){t=n,r=u;if(!this.options.flex)break}}if(t){s=t[0].match(/(?:\r\n?|\n).*/g),s&&(this.yylineno+=s.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:s?s[s.length-1].length-s[s.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,o[r],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1);if(e)return e;return}return this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return typeof t!="undefined"?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return e.options={},e.performAction=function(t,n,r,i){var s=i;switch(r){case 0:return n.yytext="\\",14;case 1:n.yytext.slice(-1)!=="\\"&&this.begin("mu"),n.yytext.slice(-1)==="\\"&&(n.yytext=n.yytext.substr(0,n.yyleng-1),this.begin("emu"));if(n.yytext)return 14;break;case 2:return 14;case 3:return n.yytext.slice(-1)!=="\\"&&this.popState(),n.yytext.slice(-1)==="\\"&&(n.yytext=n.yytext.substr(0,n.yyleng-1)),14;case 4:return n.yytext=n.yytext.substr(0,n.yyleng-4),this.popState(),15;case 5:return 25;case 6:return 16;case 7:return 20;case 8:return 19;case 9:return 19;case 10:return 23;case 11:return 22;case 12:this.popState(),this.begin("com");break;case 13:return n.yytext=n.yytext.substr(3,n.yyleng-5),this.popState(),15;case 14:return 22;case 15:return 37;case 16:return 36;case 17:return 36;case 18:return 40;case 19:break;case 20:return this.popState(),24;case 21:return this.popState(),18;case 22:return n.yytext=n.yytext.substr(1,n.yyleng-2).replace(/\\"/g,'"'),31;case 23:return n.yytext=n.yytext.substr(1,n.yyleng-2).replace(/\\'/g,"'"),31;case 24:return 38;case 25:return 33;case 26:return 33;case 27:return 32;case 28:return 36;case 29:return n.yytext=n.yytext.substr(1,n.yyleng-2),36;case 30:return"INVALID";case 31:return 5}},e.rules=[/^(?:\\\\(?=(\{\{)))/,/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\{\{>)/,/^(?:\{\{#)/,/^(?:\{\{\/)/,/^(?:\{\{\^)/,/^(?:\{\{\s*else\b)/,/^(?:\{\{\{)/,/^(?:\{\{&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{)/,/^(?:=)/,/^(?:\.(?=[}\/ ]))/,/^(?:\.\.)/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}\}\})/,/^(?:\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=[}\s]))/,/^(?:false(?=[}\s]))/,/^(?:-?[0-9]+(?=[}\s]))/,/^(?:[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.]))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],e.conditions={mu:{rules:[5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],inclusive:!1},emu:{rules:[3],inclusive:!1},com:{rules:[4],inclusive:!1},INITIAL:{rules:[0,1,2,31],inclusive:!0}},e}();return e.lexer=t,n.prototype=e,e.Parser=n,new n}();e.Parser=s,e.parse=function(t){return t.constructor===e.AST.ProgramNode?t:(e.Parser.yy=e.AST,e.Parser.parse(t))},e.AST={},e.AST.ProgramNode=function(t,n){this.type="program",this.statements=t,n&&(this.inverse=new e.AST.ProgramNode(n))},e.AST.MustacheNode=function(e,t,n){this.type="mustache",this.escaped=!n,this.hash=t;var r=this.id=e[0],i=this.params=e.slice(1),s=this.eligibleHelper=r.isSimple;this.isHelper=s&&(i.length||t)},e.AST.PartialNode=function(e,t){this.type="partial",this.partialName=e,this.context=t},e.AST.BlockNode=function(t,n,r,i){var s=function(t,n){if(t.original!==n.original)throw new e.Exception(t.original+" doesn't match "+n.original)};s(t.id,i),this.type="block",this.mustache=t,this.program=n,this.inverse=r,this.inverse&&!this.program&&(this.isInverse=!0)},e.AST.ContentNode=function(e){this.type="content",this.string=e},e.AST.HashNode=function(e){this.type="hash",this.pairs=e},e.AST.IdNode=function(t){this.type="ID";var n="",r=[],i=0;for(var s=0,o=t.length;s<o;s++){var u=t[s].part;n+=(t[s].separator||"")+u;if(u===".."||u==="."||u==="this"){if(r.length>0)throw new e.Exception("Invalid path: "+n);u===".."?i++:this.isScoped=!0}else r.push(u)}this.original=n,this.parts=r,this.string=r.join("."),this.depth=i,this.isSimple=t.length===1&&!this.isScoped&&i===0,this.stringModeValue=this.string},e.AST.PartialNameNode=function(e){this.type="PARTIAL_NAME",this.name=e.original},e.AST.DataNode=function(e){this.type="DATA",this.id=e},e.AST.StringNode=function(e){this.type="STRING",this.original=this.string=this.stringModeValue=e},e.AST.IntegerNode=function(e){this.type="INTEGER",this.original=this.integer=e,this.stringModeValue=Number(e)},e.AST.BooleanNode=function(e){this.type="BOOLEAN",this.bool=e,this.stringModeValue=e==="true"},e.AST.CommentNode=function(e){this.type="comment",this.comment=e};var o=["description","fileName","lineNumber","message","name","number","stack"];e.Exception=function(e){var t=Error.prototype.constructor.apply(this,arguments);for(var n=0;n<o.length;n++)this[o[n]]=t[o[n]]},e.Exception.prototype=new Error,e.SafeString=function(e){this.string=e},e.SafeString.prototype.toString=function(){return this.string.toString()};var u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},a=/[&<>"'`]/g,f=/[&<>"'`]/,l=function(e){return u[e]||"&amp;"};e.Utils={extend:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},escapeExpression:function(t){return t instanceof e.SafeString?t.toString():t==null||t===!1?"":(t=t.toString(),f.test(t)?t.replace(a,l):t)},isEmpty:function(e){return!e&&e!==0?!0:n.call(e)==="[object Array]"&&e.length===0?!0:!1}};var c=e.Compiler=function(){},h=e.JavaScriptCompiler=function(){};c.prototype={compiler:c,disassemble:function(){var e=this.opcodes,t,n=[],r,i;for(var s=0,o=e.length;s<o;s++){t=e[s];if(t.opcode==="DECLARE")n.push("DECLARE "+t.name+"="+t.value);else{r=[];for(var u=0;u<t.args.length;u++)i=t.args[u],typeof i=="string"&&(i='"'+i.replace("\n","\\n")+'"'),r.push(i);n.push(t.opcode+" "+r.join(" "))}}return n.join("\n")},equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var n=0;n<t;n++){var r=this.opcodes[n],i=e.opcodes[n];if(r.opcode!==i.opcode||r.args.length!==i.args.length)return!1;for(var s=0;s<r.args.length;s++)if(r.args[s]!==i.args[s])return!1}t=this.children.length;if(e.children.length!==t)return!1;for(n=0;n<t;n++)if(!this.children[n].equals(e.children[n]))return!1;return!0},guid:0,compile:function(e,t){this.children=[],this.depths={list:[]},this.options=t;var n=this.options.knownHelpers;this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0};if(n)for(var r in n)this.options.knownHelpers[r]=n[r];return this.program(e)},accept:function(e){return this[e.type](e)},program:function(e){var t=e.statements,n;this.opcodes=[];for(var r=0,i=t.length;r<i;r++)n=t[r],this[n.type](n);return this.isSimple=i===1,this.depths.list=this.depths.list.sort(function(e,t){return e-t}),this},compileProgram:function(e){var t=(new this.compiler).compile(e,this.options),n=this.guid++,r;this.usePartial=this.usePartial||t.usePartial,this.children[n]=t;for(var i=0,s=t.depths.list.length;i<s;i++){r=t.depths.list[i];if(r<2)continue;this.addDepth(r-1)}return n},block:function(e){var t=e.mustache,n=e.program,r=e.inverse;n&&(n=this.compileProgram(n)),r&&(r=this.compileProgram(r));var i=this.classifyMustache(t);i==="helper"?this.helperMustache(t,n,r):i==="simple"?(this.simpleMustache(t),this.opcode("pushProgram",n),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousMustache(t,n,r),this.opcode("pushProgram",n),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(e){var t=e.pairs,n,r;this.opcode("pushHash");for(var i=0,s=t.length;i<s;i++)n=t[i],r=n[1],this.options.stringParams?(r.depth&&this.addDepth(r.depth),this.opcode("getContext",r.depth||0),this.opcode("pushStringParam",r.stringModeValue,r.type)):this.accept(r),this.opcode("assignToHash",n[0]);this.opcode("popHash")},partial:function(e){var t=e.partialName;this.usePartial=!0,e.context?this.ID(e.context):this.opcode("push","depth0"),this.opcode("invokePartial",t.name),this.opcode("append")},content:function(e){this.opcode("appendContent",e.string)},mustache:function(e){var t=this.options,n=this.classifyMustache(e);n==="simple"?this.simpleMustache(e):n==="helper"?this.helperMustache(e):this.ambiguousMustache(e),e.escaped&&!t.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousMustache:function(e,t,n){var r=e.id,i=r.parts[0],s=t!=null||n!=null;this.opcode("getContext",r.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("invokeAmbiguous",i,s)},simpleMustache:function(e){var t=e.id;t.type==="DATA"?this.DATA(t):t.parts.length?this.ID(t):(this.addDepth(t.depth),this.opcode("getContext",t.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperMustache:function(e,t,n){var r=this.setupFullMustacheParams(e,t,n),i=e.id.parts[0];if(this.options.knownHelpers[i])this.opcode("invokeKnownHelper",r.length,i);else{if(this.options.knownHelpersOnly)throw new Error("You specified knownHelpersOnly, but used the unknown helper "+i);this.opcode("invokeHelper",r.length,i)}},ID:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0];t?this.opcode("lookupOnContext",e.parts[0]):this.opcode("pushContext");for(var n=1,r=e.parts.length;n<r;n++)this.opcode("lookup",e.parts[n])},DATA:function(t){this.options.data=!0;if(t.id.isScoped||t.id.depth)throw new e.Exception("Scoped data references are not supported: "+t.original);this.opcode("lookupData");var n=t.id.parts;for(var r=0,i=n.length;r<i;r++)this.opcode("lookup",n[r])},STRING:function(e){this.opcode("pushString",e.string)},INTEGER:function(e){this.opcode("pushLiteral",e.integer)},BOOLEAN:function(e){this.opcode("pushLiteral",e.bool)},comment:function(){},opcode:function(e){this.opcodes.push({opcode:e,args:[].slice.call(arguments,1)})},declare:function(e,t){this.opcodes.push({opcode:"DECLARE",name:e,value:t})},addDepth:function(e){if(isNaN(e))throw new Error("EWOT");if(e===0)return;this.depths[e]||(this.depths[e]=!0,this.depths.list.push(e))},classifyMustache:function(e){var t=e.isHelper,n=e.eligibleHelper,r=this.options;if(n&&!t){var i=e.id.parts[0];r.knownHelpers[i]?t=!0:r.knownHelpersOnly&&(n=!1)}return t?"helper":n?"ambiguous":"simple"},pushParams:function(e){var t=e.length,n;while(t--)n=e[t],this.options.stringParams?(n.depth&&this.addDepth(n.depth),this.opcode("getContext",n.depth||0),this.opcode("pushStringParam",n.stringModeValue,n.type)):this[n.type](n)},setupMustacheParams:function(e){var t=e.params;return this.pushParams(t),e.hash?this.hash(e.hash):this.opcode("emptyHash"),t},setupFullMustacheParams:function(e,t,n){var r=e.params;return this.pushParams(r),this.opcode("pushProgram",t),this.opcode("pushProgram",n),e.hash?this.hash(e.hash):this.opcode("emptyHash"),r}};var p=function(e){this.value=e};h.prototype={nameLookup:function(e,t){return/^[0-9]+$/.test(t)?e+"["+t+"]":h.isValidJavaScriptVariableName(t)?e+"."+t:e+"['"+t+"']"},appendToBuffer:function(e){return this.environment.isSimple?"return "+e+";":{appendToBuffer:!0,content:e,toString:function(){return"buffer += "+e+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(t,n,r,i){this.environment=t,this.options=n||{},e.log(e.logger.DEBUG,this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!r,this.context=r||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.compileStack=[],this.inlineStack=[],this.compileChildren(t,n);var s=t.opcodes,o;this.i=0;for(g=s.length;this.i<g;this.i++)o=s[this.i],o.opcode==="DECLARE"?this[o.name]=o.value:this[o.opcode].apply(this,o.args);return this.createFunctionContext(i)},nextOpcode:function(){var e=this.environment.opcodes;return e[this.i+1]},eat:function(){this.i=this.i+1},preamble:function(){var e=[];if(!this.isChild){var t=this.namespace,n="helpers = this.merge(helpers, "+t+".helpers);";this.environment.usePartial&&(n=n+" partials = this.merge(partials, "+t+".partials);"),this.options.data&&(n+=" data = data || {};"),e.push(n)}else e.push("");this.environment.isSimple?e.push(""):e.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=e},createFunctionContext:function(t){var n=this.stackVars.concat(this.registers.list);n.length>0&&(this.source[1]=this.source[1]+", "+n.join(", "));if(!this.isChild)for(var r in this.context.aliases)this.context.aliases.hasOwnProperty(r)&&(this.source[1]=this.source[1]+", "+r+"="+this.context.aliases[r]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.source.push("return buffer;");var i=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];for(var s=0,o=this.environment.depths.list.length;s<o;s++)i.push("depth"+this.environment.depths.list[s]);var u=this.mergeSource();if(!this.isChild){var a=e.COMPILER_REVISION,f=e.REVISION_CHANGES[a];u="this.compilerInfo = ["+a+",'"+f+"'];\n"+u}if(t)return i.push(u),Function.apply(this,i);var l="function "+(this.name||"")+"("+i.join(",")+") {\n  "+u+"}";return e.log(e.logger.DEBUG,l+"\n\n"),l},mergeSource:function(){var e="",n;for(var r=0,i=this.source.length;r<i;r++){var s=this.source[r];s.appendToBuffer?n?n=n+"\n    + "+s.content:n=s.content:(n&&(e+="buffer += "+n+";\n  ",n=t),e+=s+"\n  ")}return e},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e),this.replaceStack(function(t){return e.splice(1,0,t),"blockHelperMissing.call("+e.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e);var t=this.topStack();e.splice(1,0,t),e[e.length-1]="options",this.source.push("if (!"+this.lastHelper+") { "+t+" = blockHelperMissing.call("+e.join(", ")+"); }")},appendContent:function(e){this.source.push(this.appendToBuffer(this.quotedString(e)))},append:function(){this.flushInline();var e=this.popStack();this.source.push("if("+e+" || "+e+" === 0) { "+this.appendToBuffer(e)+" }"),this.environment.isSimple&&this.source.push("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(e){this.lastContext!==e&&(this.lastContext=e)},lookupOnContext:function(e){this.push(this.nameLookup("depth"+this.lastContext,e,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(e){return"typeof "+e+" === functionType ? "+e+".apply(depth0) : "+e})},lookup:function(e){this.replaceStack(function(t){return t+" == null || "+t+" === false ? "+t+" : "+this.nameLookup(t,e,"context")})},lookupData:function(e){this.push("data")},pushStringParam:function(e,t){this.pushStackLiteral("depth"+this.lastContext),this.pushString(t),typeof e=="string"?this.pushString(e):this.pushStackLiteral(e)},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.register("hashTypes","{}"),this.register("hashContexts","{}"))},pushHash:function(){this.hash={values:[],types:[],contexts:[]}},popHash:function(){var e=this.hash;this.hash=t,this.options.stringParams&&(this.register("hashContexts","{"+e.contexts.join(",")+"}"),this.register("hashTypes","{"+e.types.join(",")+"}")),this.push("{\n    "+e.values.join(",\n    ")+"\n  }")},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},push:function(e){return this.inlineStack.push(e),e},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){e!=null?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},invokeHelper:function(e,t){this.context.aliases.helperMissing="helpers.helperMissing";var n=this.lastHelper=this.setupHelper(e,t,!0),r=this.nameLookup("depth"+this.lastContext,t,"context");this.push(n.name+" || "+r),this.replaceStack(function(e){return e+" ? "+e+".call("+n.callParams+") "+": helperMissing.call("+n.helperMissingParams+")"})},invokeKnownHelper:function(e,t){var n=this.setupHelper(e,t);this.push(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(e,t){this.context.aliases.functionType='"function"',this.pushStackLiteral("{}");var n=this.setupHelper(0,e,t),r=this.lastHelper=this.nameLookup("helpers",e,"helper"),i=this.nameLookup("depth"+this.lastContext,e,"context"),s=this.nextStack();this.source.push("if ("+s+" = "+r+") { "+s+" = "+s+".call("+n.callParams+"); }"),this.source.push("else { "+s+" = "+i+"; "+s+" = typeof "+s+" === functionType ? "+s+".apply(depth0) : "+s+"; }")},invokePartial:function(e){var t=[this.nameLookup("partials",e,"partial"),"'"+e+"'",this.popStack(),"helpers","partials"];this.options.data&&t.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+t.join(", ")+")")},assignToHash:function(e){var t=this.popStack(),n,r;this.options.stringParams&&(r=this.popStack(),n=this.popStack());var i=this.hash;n&&i.contexts.push("'"+e+"': "+n),r&&i.types.push("'"+e+"': "+r),i.values.push("'"+e+"': ("+t+")")},compiler:h,compileChildren:function(e,t){var n=e.children,r,i;for(var s=0,o=n.length;s<o;s++){r=n[s],i=new this.compiler;var u=this.matchExistingProgram(r);u==null?(this.context.programs.push(""),u=this.context.programs.length,r.index=u,r.name="program"+u,this.context.programs[u]=i.compile(r,t,this.context),this.context.environments[u]=r):(r.index=u,r.name="program"+u)}},matchExistingProgram:function(e){for(var t=0,n=this.context.environments.length;t<n;t++){var r=this.context.environments[t];if(r&&r.equals(e))return t}},programExpression:function(e){this.context.aliases.self="this";if(e==null)return"self.noop";var t=this.environment.children[e],n=t.depths.list,r,i=[t.index,t.name,"data"];for(var s=0,o=n.length;s<o;s++)r=n[s],r===1?i.push("depth0"):i.push("depth"+(r-1));return(n.length===0?"self.program(":"self.programWithDepth(")+i.join(", ")+")"},register:function(e,t){this.useRegister(e),this.source.push(e+" = "+t+";")},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},pushStackLiteral:function(e){return this.push(new p(e))},pushStack:function(e){this.flushInline();var t=this.incrStack();return e&&this.source.push(t+" = "+e+";"),this.compileStack.push(t),t},replaceStack:function(e){var t="",n=this.isInline(),r;if(n){var i=this.popStack(!0);if(i instanceof p)r=i.value;else{var s=this.stackSlot?this.topStackName():this.incrStack();t="("+this.push(s)+" = "+i+"),",r=this.topStack()}}else r=this.topStack();var o=e.call(this,r);return n?((this.inlineStack.length||this.compileStack.length)&&this.popStack(),this.push("("+t+o+")")):(/^stack/.test(r)||(r=this.nextStack()),this.source.push(r+" = ("+t+o+");")),r},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;if(e.length){this.inlineStack=[];for(var t=0,n=e.length;t<n;t++){var r=e[t];r instanceof p?this.compileStack.push(r):this.pushStack(r)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),n=(t?this.inlineStack:this.compileStack).pop();return!e&&n instanceof p?n.value:(t||this.stackSlot--,n)},topStack:function(e){var t=this.isInline()?this.inlineStack:this.compileStack,n=t[t.length-1];return!e&&n instanceof p?n.value:n},quotedString:function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(e,t,n){var r=[];this.setupParams(e,r,n);var i=this.nameLookup("helpers",t,"helper");return{params:r,name:i,callParams:["depth0"].concat(r).join(", "),helperMissingParams:n&&["depth0",this.quotedString(t)].concat(r).join(", ")}},setupParams:function(e,t,n){var r=[],i=[],s=[],o,u,a;r.push("hash:"+this.popStack()),u=this.popStack(),a=this.popStack();if(a||u)a||(this.context.aliases.self="this",a="self.noop"),u||(this.context.aliases.self="this",u="self.noop"),r.push("inverse:"+u),r.push("fn:"+a);for(var f=0;f<e;f++)o=this.popStack(),t.push(o),this.options.stringParams&&(s.push(this.popStack()),i.push(this.popStack()));return this.options.stringParams&&(r.push("contexts:["+i.join(",")+"]"),r.push("types:["+s.join(",")+"]"),r.push("hashContexts:hashContexts"),r.push("hashTypes:hashTypes")),this.options.data&&r.push("data:data"),r="{"+r.join(",")+"}",n?(this.register("options",r),t.push("options")):t.push(r),t.join(", ")}};var d="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),v=h.RESERVED_WORDS={};for(var m=0,g=d.length;m<g;m++)v[d[m]]=!0;h.isValidJavaScriptVariableName=function(e){return!h.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(e)?!0:!1},e.precompile=function(t,n){if(t==null||typeof t!="string"&&t.constructor!==e.AST.ProgramNode)throw new e.Exception("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+t);n=n||{},"data"in n||(n.data=!0);var r=e.parse(t),i=(new c).compile(r,n);return(new h).compile(i,n)},e.compile=function(n,r){function s(){var i=e.parse(n),s=(new c).compile(i,r),o=(new h).compile(s,r,t,!0);return e.template(o)}if(n==null||typeof n!="string"&&n.constructor!==e.AST.ProgramNode)throw new e.Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+n);r=r||{},"data"in r||(r.data=!0);var i;return function(e,t){return i||(i=s()),i.call(this,e,t)}},e.VM={template:function(t){var n={escapeExpression:e.Utils.escapeExpression,invokePartial:e.VM.invokePartial,programs:[],program:function(t,n,r){var i=this.programs[t];return r?i=e.VM.program(t,n,r):i||(i=this.programs[t]=e.VM.program(t,n)),i},merge:function(t,n){var r=t||n;return t&&n&&(r={},e.Utils.extend(r,n),e.Utils.extend(r,t)),r},programWithDepth:e.VM.programWithDepth,noop:e.VM.noop,compilerInfo:null};return function(r,i){i=i||{};var s=t.call(n,e,r,i.helpers,i.partials,i.data),o=n.compilerInfo||[],u=o[0]||1,a=e.COMPILER_REVISION;if(u!==a){if(u<a){var f=e.REVISION_CHANGES[a],l=e.REVISION_CHANGES[u];throw"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+f+") or downgrade your runtime to an older version ("+l+")."}throw"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+o[1]+")."}return s}},programWithDepth:function(e,t,n){var r=Array.prototype.slice.call(arguments,3),i=function(e,i){return i=i||{},t.apply(this,[e,i.data||n].concat(r))};return i.program=e,i.depth=r.length,i},program:function(e,t,n){var r=function(e,r){return r=r||{},t(e,r.data||n)};return r.program=e,r.depth=0,r},noop:function(){return""},invokePartial:function(n,r,i,s,o,u){var a={helpers:s,partials:o,data:u};if(n===t)throw new e.Exception("The partial "+r+" could not be found");if(n instanceof Function)return n(i,a);if(!e.compile)throw new e.Exception("The partial "+r+" could not be compiled when running in runtime-only mode");return o[r]=e.compile(n,{data:u!==t}),o[r](i,a)}},e.template=e.VM.template})(Handlebars),define("handlebars",function(e){return function(){var t,n;return t||e.Handlebars}}(this)),function(){function t(e,t,n,r,i,s){t[e]&&(n.push(e),(t[e]===!0||t[e]===1)&&r.push(i+e+"/"+s))}function n(e,t,n,r,i){var s=r+t+"/"+i;require._fileExists(e.toUrl(s+".js"))&&n.push(s)}function r(e,t,n){var i;for(i in t)t.hasOwnProperty(i)&&(!e.hasOwnProperty(i)||n)?e[i]=t[i]:typeof t[i]=="object"&&(!e[i]&&t[i]&&(e[i]={}),r(e[i],t[i],n))}var e=/(^.*(^|\/)nls(\/|$))([^\/]*)\/?([^\/]*)/;define("i18n",["module"],function(i){var s=i.config?i.config():{};return{version:"2.0.4",load:function(i,o,u,a){a=a||{},a.locale&&(s.locale=a.locale);var f,l=e.exec(i),c=l[1],h=l[4],p=l[5],d=h.split("-"),v=[],m={},g,y,b="";l[5]?(c=l[1],f=c+p):(f=i,p=l[4],h=s.locale,h||(h=s.locale=typeof navigator=="undefined"?"root":(navigator.language||navigator.userLanguage||"root").toLowerCase()),d=h.split("-"));if(a.isBuild){v.push(f),n(o,"root",v,c,p);for(g=0;g<d.length;g++)y=d[g],b+=(b?"-":"")+y,n(o,b,v,c,p);o(v,function(){u()})}else o([f],function(e){var n=[],i;t("root",e,n,v,c,p);for(g=0;g<d.length;g++)i=d[g],b+=(b?"-":"")+i,t(b,e,n,v,c,p);o(v,function(){var t,i,s;for(t=n.length-1;t>-1&&n[t];t--){s=n[t],i=e[s];if(i===!0||i===1)i=o(c+s+"/"+p);r(m,i)}u(m)})})}}})}(),define("../nls/strings",{root:!0}),define("../nls/root/strings",{TripCase:"TripCase",SignIn:"Sign In",SignInWithFacebook:"Sign In with Facebook",SignUpWithFacebook:"Sign Up with Facebook",AlreadyHaveAccount:"Already have an account?",RememberMe:"Remember Me",LogoutConfirm:"Are you sure you want to log out?",Loading:"Loading...",UpgradeAvailableTitle:"Upgrade Available",ViewFullSite:"View Full Site",ForgotPassword:"Forgot Your Password?",ForgotPasswordComplete:"Forgot Password Complete",ResetPassword:"Reset Password",ResetPrompt:"To reset your password, enter your email address and we'll send password reset instructions.",ResetSent:"A password reset link has been sent to",ResetInstruction:'Check your email for the reset link and follow the instructions in the message. Note: please be sure to check your "spam" file if you don\'t receive our email in the next few minutes.',Continue:"Continue",OK:"OK",Save:"Save",Yes:"Yes",No:"No",Add:"Add",Select:"Select",Cancel:"Cancel",Accept:"Agree",Deny:"Disagree",or:"or",Dismiss:"Dismiss",ON:"ON",OFF:"OFF",OverlayCreateTripAuto1:"Create Trips Automatically",OverlayCreateTripAuto2:"Simply forward your booking",OverlayCreateTripAuto3:"confirmation emails to",OverlayCreateTripManual1:"or Continue",OverlayCreateTripManual2:"to manually create your trip",OverlayActionViewMainHeader:"Main Menu",OverlayActionViewMainContent:"Everything is a tap away",OverlayActionViewDetailsHeader:"Details",OverlayActionViewDetailsContent:"Tap cards for more details",OverlayActionViewItemsHeader:"Trip Items",OverlayActionViewItemsContent:"Swipe to see all your items",OverlayActionViewMessagesHeader:"Trip Messages",OverlayActionViewMessagesContent:"Scroll to see older messages",Collapse:"collapse",ReadMore:"read more",BackToYourTrip:"Back to Your Trip",Email:"Email",Password:"Password",FirstName:"First Name",LastName:"Last Name",ConfirmPassword:"Confirm Password",Name:"Name",SignUp:"Sign Up",SignUpComplete:"Registration Complete",AlmostThere:"Almost There!",SignUpCompleteConfirmation:"You have a verification email from no-reply@tripcase.com. It's the last step to verify your account. Don't forget to add us as a contact so you're sure to hear from us again.",GetNewsAndOffers:"Get News & Offers",SignUpTerms:"By tapping Sign Up you confirm that you accept the ",LegalNotices:"Legal Notices",TermsConditions:"Terms of Use",PrivacyPolicy:"Privacy Policy",CookiesPolicy:"Cookies Policy",Weather:"Weather",Locations:"Locations",WeatherNotAvail:"Weather not available for this trip event. Please choose another trip event or a location.",Now:"Now",Updated:"updated",Humidity:"Humidity",Visibility:"Visibility",Wind:"Wind",At:"at",PhoneNumbers:"Phone Numbers",Main:"Main",SwitchToItinerary:"Timeline View",SwitchToTripFeed:"Action View",AddItem:"Add Item",EditTrip:"Edit Trip",RenameTrip:"Rename Trip",Itinerary:"Itinerary",Timeline:"Timeline",ShareItinerary:"Share Itinerary",Share:"Share",AltFlights:"Alternate Flights",AltFlightsShort:"Alt Flights",SeatMap:"Seat Map",SeatMaps:"Seat Maps",Maps:"Maps",SeeMoreTools:"See More Tools",Tools:"Tools",Trips:"Trips",CreateATrip:"Create a Trip",NewTrip:"New Trip",Settings:"Settings",Logout:"Logout",Help:"Help",Map:"Map",Directions:"Directions",StartPoint:"Start Point",EndPoint:"End Point",GetDirections:"Get Directions",MyCurrentLocation:"My Current Location",Call:"Call",ViewDetails:"View Details",Benefits:"Amex Benefits",UnfollowTrip:"Unfollow Trip",UnfollowTripConfirmTitle:"Unfollow Trip?",UnfollowTripConfirmDescription1:"Are you sure you want to unfollow ",UnfollowTripConfirmDescription2:"'s trip,",FollowerTimeLineEmptyTitle:"This trip is empty",FollowerTimeLineEmptyDescription:"Oops! Your friend’s trip is empty! Encourage them to add some items so you can stay in the loop.",ManuallyFollowedTimelineEmptyDescription:"Oops! This trip is empty! You can add items to this trip on our website at tripcase.com.",Unfollow:"Unfollow",Business:"Business",ForBusiness:"For Business",ConnectTo:"Connect to",ConnectedWith:"Connected with",BusinessHelp:'About "For Business"',BusinessHelp1:'We are pleased to announce that your corporation has decided to join our TripCase Corporate family, meaning any travel plans you mark "For Business" will now be shared with them. With this, your company will be able to negotiate better rates with suppliers, and make more informed decisions about the travel policies you follow. Who knew you could be such an asset to your company just by using TripCase?',BusinessHelp2:'Yes, providing your company with golden nuggets of travel data is pretty cool, but we also want you to know that we are always looking out for your privacy. Rest assured, TripCase will never share notes you add to travel items, or any information about items you do not designate "For Business". Shared items will always be indicated with a blue "Business" marker on Timeline View inside your TripCase account.',BusinessHelp3:"In the future, if you no longer work for your current company, or want to disconnect your account from them, you can do this through your profile on the TripCase website.",BusinessHelp4:"Thanks for being a TripCase user, you’re in good company.",Import:"Link",ImportBooking:"Link a Booking",ImportBookingHelp:"Link Booking Help",ImportBookingInstruct1:"To import a booking into TripCase:",ImportBookingInstruct2:"1. Send your travel confirmation emails to trips@tripcase.com. We'll add the details for you.",ImportBookingInstruct3:"OR",ImportBookingInstruct4:"2. Link items you booked with a TripCase-connected travel partner by providing your last name and Reservation Code (six alpha characters) or Trip ID (12 numeric characters).",RecordLocatorOrTripId:"Reservation Code or Trip ID",TravelerLastName:"Traveler Last Name",TripName:"Trip Name",CreateTripInstruct1:"Note: Create trips in minutes by forwarding confirmation emails to ",CreateTripInstruct2:"trips@tripcase.com.",CreateTripBlankInstruct1:"You haven't added any trips yet.",CreateTripBlankInstruct2:"Get started by creating a trip below.",NoTripsInstruct:"Create trips automatically by forwarding your confirmation emails to",TripsEmail:"trips@tripcase.com",ActiveTrips:"Active",PastTrips:"Past",FollowingTrips:"Following",NoActiveTrips:"You have no active trips",NoPastTrips:"You have no past trips",NoFollowingTrips:"You have not followed any trips",NotFollowingAnyTrips:"You are not currently following any trips",EncourageFriendsToShare:"Encourage friends to share their TripCase itinerary with you. It’s the next best thing to being on their adventure too!",ShowPastFollowingTrips:"Load past trips you have followed",CreateANewTrip:"Create a New Trip",Delete:"Delete",DeleteQuestion:"Delete?",DeleteTrip:"Delete Trip",DeleteContact:"Delete contact",DeleteTripWarning:"Are you sure you want to delete this entire trip?",DeleteContactWarning:"This contact will be removed from your contact list and any trips they are currently following.",DeleteAreYouSureYouWant:"Are you sure you want to delete:",DeleteEmailAddr:"Delete email address?",DeleteEmailAddrWarning:"Are you sure you want to delete the following email address?",CombineTrip:"Combine",ManageTrips:"Manage Trips",ConfirmAndContinue:"Confirm and Continue",NameCombinedTrip:"Name Your Combined Trip",CombineAreYouSure:"Are you sure you want to permanently combine these trips and all of their details?",ConfirmAndDelete:"Confirm and Delete",DeleteInstruct:"Are you sure you want to permanently delete?",DeleteLinkedWarning:"All items imported with this identifier will be deleted from your trip:",Flight:"Flight",From:"from",Departs:"Departs",Depart:"Depart",On:"on",Of:"of",End:"End",Start:"Start",Starts:"Starts",StartsAt:"Starts at",CheckInAt:"Check-in at",CheckIn:"Check-in",CheckOut:"Check-out",PickUpAt:"Pick-up at",PickUp:"Pick-up",DropOff:"Drop-off",Date:"Date",Time:"Time",ConfNum:"Conf #",ConfirmNum:"Confirm. #",ConfirmationNumber:"Confirmation Number",Phone:"Phone",Notes:"Notes",Note:"Note",NotEntered:"Not Entered",Search:"Search",Optional:"optional",HotelNameContains:"Hotel name contains",SearchResultsZero:"Your search returned 0 results",MilesAway:"mi away",HotelManualPrompt:"Don't see the lodging you want? Add it on your own.",StartLocation:"Start Location",EndLocation:"End Location",AddLodging:"Add Lodging",TBD:"TBD",Location:"Location",LocalTime:"Local Time",To:"to",Departure:"Departure",Arrival:"Arrival",DepartureStation:"Departure Station",ArrivalStation:"Arrival Station",Delayed:"delayed",OnTime:"On time",Early:"early",HotelCheckOut:"Hotel Check-Out",GroundTransportation:"Ground Transportation",Activity:"Activity",Attraction:"Attraction",Cruise:"Cruise",Ferry:"Ferry",Restaurant:"Restaurant",Meeting:"Meeting",Rail:"Rail",Event:"Event",Lodging:"Lodging",RentalCompanyInformation:"Rental Company Information",HotelInformation:"Hotel Information",Information:"Information",Rooms:"rooms",Floors:"floors",RoomAmenities:"Room Amenities",PropertyAmenities:"Property Amenities",EditLodging:"Edit Lodging",EditLinkedBooking:"You are editing a linked item. Editing capabilities are limited, ensuring your travel details stay in sync.",AddFlight:"Add Flight",SelectAirline:"Select Airline",ConfirmFlight:"Confirm Flight",Airline:"Airline",FlightNum:"Flight #",Arrive:"Arrive",Arrives:"Arrives",ArrivesNextDay:"Arrives Next Day",AirlineNameOrCode:"Airline name or code",OriginalAirline:"Original Airline",AllAirlines:"All Airlines",RecentlySelected:"Recently Selected",AirlineSearch:"Search by airline name or code",Nonstop:"Nonstop",Stop:"stop",Stops:"stops",SoldOut:"Sold Out",Seats:"Seats",Seat:"Seat",SeatsAvailable:"Seats Available",SeatAvailUnknown:"Seat availability is unknown",NoSeatMap:"No seat map information is available.",SeatMapUnavailable:"Seat map unavailable.",NoSeatMaps:"No seat maps available at this time.",TravelTime:"Travel Time",Layover:"Layover",ChangePlanes:"Change Planes",Duration:"Duration",FlightCanceled:"FLIGHT CANCELED",Canceled:"CANCELED",FindAltFlight:"Find an alternate flight",AlternateFlightsFutureOnly:"Alternate flights are only available for future flights.",NoAlternateFlights:"No alternate flights available at this time.",OperatedBy:"Operated By",Scheduled:"Scheduled",Actual:"Actual",TermGate:"Term/Gate",Baggage:"Baggage",Aircraft:"Aircraft",MultipleCarriers:"Multiple Carriers",NA:"N/A",SelectFlight:"Select a Flight",EditFlight:"Edit Flight",LodgingLocation:"Lodging location",Untitled:"Untitled",AddCarRental:"Add Car Rental",AddCruise:"Add Cruise",AddRestaurant:"Add Restaurant",AddAttraction:"Add Attraction",AddActivity:"Add Activity",AddFerry:"Add Ferry",AddGroundTransportation:"Add Ground Transportation",AddMeeting:"Add Meeting",AddRail:"Add Rail",AddAnItem:"Add an Item",AddToTrip:"Add to Trip",EditCarRental:"Edit Car Rental",Hotel:"Hotel",Car:"Car",CarRental:"Car Rental",RailwayName:"Railway Name",FerryLine:"Ferry Line",StartingPort:"Starting Port",EndingPort:"Ending Port",SameAsStartingLocation:"Same as starting location?",SameAsStartingPort:"Same as starting port?",SameAsPickUpLocation:"Same as pick-up location?",CruiseLine:"Cruise Line",RentalCompanyNameContains:"Rental company name contains",VehicleManualPrompt:"Don't see the ground transportation you want? Add it manually.",MyCurrentGPSLocation:"(my current GPS location)",ChooseLocation:"Choose a Location",EnterStreetLocation:"(enter street, location)",SearchNearTripItem:"Search near an item in my trip",WeatherNearTripItem:"Weather near an item in my trip",StartAtLocation:"Start from location",EndAtLocation:"End at location",YouHaventAddedAnItem:"You haven't added an item yet",SearchForLocation:"Search for Location",SelectCountry:"Select Country",Street:"Street",City:"City",State:"State",Postal:"Postal",Code:"Code",Country:"Country",DidYouMean:"Did you mean...",CountryNameOrCode:"Country name or code",Venue:"Venue",AddedNoItemsYet:"You haven't added any items yet.",GetStartedAddingAnItem:"Get started by adding an item below.",ImportedTripItems:"Linked Trip Items",ManuallyAddedTripItems:"Trip Items I added on my own",ManualTripListEmpty:"This trip has no items I added on my own.",LinkedItemListEmpty:"This trip has no linked items.",EmptyLinkedBooking:"This booking has no trip items.",ViewItems:"View Items",HideItems:"Hide Items",HoursOfOperation:"Hours of Operation",GeneralInformation:"General Information",AirportShuttleInformation:"Airport Shuttle Information",Closed:"Closed",NoDescriptionAvailable:"No description available",PhoneCheckInHotel:"Check-in at 3:00pm on",ViewAltFlightSchedules:"View alternate flight schedules.",PhoneContacts:"Phone Contacts",ShareContactSearch:"Add a contact or email",EditShare:"The following contacts will receive updates. Select an email below to dive into the details.",CurrentlyNotifying:"Currently Notifying",AddEmail:"Add Email",NoContacts:"Keeping to yourself? Looks like no contacts will be receiving your trip updates.",ShareItineraryDetails:"Email Itinerary and send updates as itinerary changes occur.",ArrivalUpdates:"Arrival Updates",ShareUpdates:"Select the arrival airports to send updates.",OnlyAvailableForFutureFlights:"Arrival updates are only available for flights departing today or in the future.",Day:"Day",Days:"Days",Hour:"Hour",Hours:"Hours",Month:"Month",Months:"Months",Year:"Year",Years:"Years",TripStartsIn:"Trip Starts in",TripHasEnded:"Your Trip has Ended",TripHasStarted:"Your Trip has Started",TripStartsSoon:"Your Trip Starts Soon",Congrats:"Congrats",SwipeToLearnMore:"Swipe to Learn More",MovingIn:"Moving In",GettingAround:"Getting Around",StayingConnected:"Staying Connected",WalkThroughPage0Caption1:"You've found a home for",WalkThroughPage0Caption2:"all your travel details",WalkThroughPage1Caption1:"Get busy collecting by forwarding",WalkThroughPage1Caption2:"info to trips@tripcase.com",WalkThroughPage2Caption1:"Prep for each trip using tools from",WalkThroughPage2Caption2:"the main menu",WalkThroughPage3Caption1:"View info and updates unique",WalkThroughPage3Caption2:"to your trips",NoPhone:"There are no phone numbers for this trip event",NoPhoneTrip:"There are no phone numbers for this trip",Contact:"Contact",ContactDetails:"Contact Details",Contacts:"Contacts",ContactsEmptyTitle:"Your contact list is lonely.",ContactsEmptyDescription:"Tap here to add your first contact.",EditContact:"Edit Contact",AddContact:"Add Contact",DeleteThisContact:"Delete this contact",ImportContact:"Import",ImportContacts:"Import Contacts",ContactsListFilterText:"Filter Contacts",ImportContactsEmpty:"Yikes! We didn't find any contacts with an email.",ImportContactsErrorTitle:"You're So Close!",ImportContactsError:"Go to phone settings and give TripCase permission to access your contact list.",ImportContactsTooManyTitle:"You're Just Too Popular",ImportContactsTooMany:"You can only import 25 contacts at once.",ImportContactsNoneTitle:"Oops!",ImportContactsNone:"Select at least 1 person to import.",ImportContactsSuccess1:"Success!",ImportContactsSuccess2:"contact",ImportContactsSuccess3:"ready for your trip updates.",ImportContactsMaxLimitTitle:"You're Just Too Popular",ImportContactsMaxLimit:"200 is the max number of contacts allowed.",OverlayImportContactMain:"Add Contacts",OverlayImportContactMainContent:"from your phone",AlwaysShare:"Always Share",AlwaysShareHelp:"Always Share Help",AlwaysShareHelp1:"Always Share lets you automatically share your trips with a trusted member of your Contact List.  By checking this option, the contact will receive email itinerary updates on any active trips already in your account as well as any new trips you add in the future.",AlwaysShareHelp2:"Always Share contacts do not automatically receive flight updates.",AlwaysShareHelp3:"You can turn off Always Share at any time.",Error:"Error",ErrorFirstNameBlank:"First Name cannot be blank",ErrorLastNameBlank:"Last Name cannot be blank",ErrorLastNameInvalid:"Last name must be letters, numbers, special characters",ErrorEmailBlank:"Email cannot be blank",ErrorEmailInvalid:"Please enter a valid email address",ErrorPasswordBlank:"Password cannot be blank",ErrorConfirmPasswordBlank:"Password confirmation cannot be blank",ErrorPasswordLength:"Password is too short (minimum is 6 characters)",ErrorConfirmPasswordMatch:"Password confirmation must match password",ErrorFacebookLoginFailed:"There was a problem logging you in with Facebook.",ErrorSomethingWrong:"Something went wrong",ErrorChooseDestination:"Please choose a destination",ErrorPNRBlank:"Reservation Code or Trip ID cannot be blank",ErrorPNRFormat:"Reservation Code or Trip ID must be 6-character alphabetic (e.g. ABHGFW) or 12-digit numeric.",ErrorPNRInvalid:"Reservation Code or Trip ID must be letters, numbers, special characters",ErrorTripNameBlank:"Trip name cannot be blank",ErrorTripNameTooLong:"Trip name too long",ErrorTripNameInvalid:"Trip name must be letters, numbers, special characters",ErrorCombineTripsNeedActive:"Please select active trips to combine.",ErrorCombineTripsNeedMore:"Please select 2 or more trips to combine.",ErrorDeleteTripsNeedMore:"Please select at least 1 trip to delete.",ErrorLodgingBlank:"Lodging location can't be blank",ErrorCantBeBlank:" can't be blank",ErrorStartDateBlank:"Start date can't be blank",ErrorStartTimeBlank:"Start time can't be blank",ErrorEndDateBlank:"End date can't be blank",ErrorEndTimeBlank:"End time can't be blank",ErrorEndTimeBeforeStartTime:"End time cannot be before the start time",ErrorLocationAllBlank:"Cannot look up the location with no fields entered",ErrorPostalCountryBlank:"Cannot have a postal code without a country",ErrorAirlineBlank:"Airline can't be blank",ErrorFlightNumNumeric:"Flight number should be numeric",ErrorDepartDateBlank:"Departure date can't be blank",ErrorNoFlightsFound:"No flights found.",ErrorCheckinDateBlank:"Check-in date can't be blank",ErrorCheckinTimeBlank:"Check-in time can't be blank",ErrorCheckOutDateBlank:"Check-out date can't be blank",ErrorCheckOutTimeBlank:"Check-out time can't be blank",ErrorCheckOutTimeBeforeCheckInTime:"Check-out time cannot be before the check-in time",ErrorPickUpDateBlank:"Pick-up date can't be blank",ErrorPickUpTimeBlank:"Pick-up time can't be blank",ErrorDropOffDateBlank:"Drop-off date can't be blank",ErrorDropOffTimeBlank:"Drop-off time can't be blank",ErrorDropOffTimeBeforePickUpTime:"Drop-off time cannot be before the pick-up time",ErrorPickUpLocationBlank:"Pick-up location can't be blank",ErrorDropOffLocationBlank:"Drop-off location can't be blank",ErrorLocationServicesOff:"Location Services must be turned on to access this feature.",ErrorLocationServicesUnable:"Location Services cannot retrieve this position.",ErrorLocationServicesTimeout:"Location Services timed-out unexpectedly.",ErrorEmailAlreadyShared:"Looks like this contact is already receiving your trip updates: ",ErrorOffline:"This action requires an active network connection",ErrorNotFound:"The item you requested couldn't be found.",ErrorUnavailable:"This service is unavailable",ErrorServiceBlocked:"This service has been blocked",ErrorRequestTimeout:"Your request has timed out",ErrorInternalError:"An internal error occurred while processing your request",ErrorServiceUnavailable:"Service is currently unavailable",ErrorUnknown:"Sorry, an unknown error has occurred",ErrorAborted:"Connection aborted.",ErrorJSONRequestFailed:"Requested failed.",DateShortDayMonthDate:"ddd MMM D",DateTime:"h:mma",DateLongDate:"ddd, MMMM D, YYYY",DateMediumLongDate:"ddd, MMM D, YYYY",DateDayMonthDateYear:"dddd, MMMM DD, YYYY",DateShortDayMonthDateYear:"ddd, MMM D, YYYY",DateItinTime:"h:mm",DateTimePeriod:"a",DateMonthDay:"MMM D",DateStartEndDate:"MMM D, YYYY",DateMinutes:"mm",DateDateYear:"D, YYYY",DateCommaYear:", YYYY",Hrs:"hrs",Hr:"hr",Mins:"mins",Min:"min",Jan:"Jan",Feb:"Feb",Mar:"Mar",Apr:"Apr",May:"May",Jun:"Jun",Jul:"Jul",Aug:"Aug",Sep:"Sep",Oct:"Oct",Nov:"Nov",Dec:"Dec"}),define("strings",["i18n!../nls/strings"],function(e){return e}),window.Modernizr=function(e,t,n){function r(e){m.cssText=e}function i(e,t){return r(b.join(e+";")+(t||""))}function s(e,t){return typeof e===t}function o(e,t){return!!~(""+e).indexOf(t)}function u(e,t){for(var r in e){var i=e[r];if(!o(i,"-")&&m[i]!==n)return t=="pfx"?i:!0}return!1}function a(e,t,r){for(var i in e){var o=t[e[i]];if(o!==n)return r===!1?e[i]:s(o,"function")?o.bind(r||t):o}return!1}function f(e,t,n){var r=e.charAt(0).toUpperCase()+e.slice(1),i=(e+" "+E.join(r+" ")+r).split(" ");return s(t,"string")||s(t,"undefined")?u(i,t):(i=(e+" "+S.join(r+" ")+r).split(" "),a(i,t,n))}var l="2.6.2",c={},h=!0,p=t.documentElement,d="modernizr",v=t.createElement(d),m=v.style,g,y={}.toString,b=" -webkit- -moz- -o- -ms- ".split(" "),w="Webkit Moz O ms",E=w.split(" "),S=w.toLowerCase().split(" "),x={},T={},N={},C=[],k=C.slice,L,A=function(e,n,r,i){var s,o,u,a,f=t.createElement("div"),l=t.body,c=l||t.createElement("body");if(parseInt(r,10))while(r--)u=t.createElement("div"),u.id=i?i[r]:d+(r+1),f.appendChild(u);return s=["&#173;",'<style id="s',d,'">',e,"</style>"].join(""),f.id=d,(l?f:c).innerHTML+=s,c.appendChild(f),l||(c.style.background="",c.style.overflow="hidden",a=p.style.overflow,p.style.overflow="hidden",p.appendChild(c)),o=n(f,e),l?f.parentNode.removeChild(f):(c.parentNode.removeChild(c),p.style.overflow=a),!!o},O={}.hasOwnProperty,M;!s(O,"undefined")&&!s(O.call,"undefined")?M=function(e,t){return O.call(e,t)}:M=function(e,t){return t in e&&s(e.constructor.prototype[t],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if(typeof t!="function")throw new TypeError;var n=k.call(arguments,1),r=function(){if(this instanceof r){var i=function(){};i.prototype=t.prototype;var s=new i,o=t.apply(s,n.concat(k.call(arguments)));return Object(o)===o?o:s}return t.apply(e,n.concat(k.call(arguments)))};return r}),x.csstransforms3d=function(){var e=!!f("perspective");return e&&"webkitPerspective"in p.style&&A("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(t,n){e=t.offsetLeft===9&&t.offsetHeight===3}),e};for(var _ in x)M(x,_)&&(L=_.toLowerCase(),c[L]=x[_](),C.push((c[L]?"":"no-")+L));return c.addTest=function(e,t){if(typeof e=="object")for(var r in e)M(e,r)&&c.addTest(r,e[r]);else{e=e.toLowerCase();if(c[e]!==n)return c;t=typeof t=="function"?t():t,typeof h!="undefined"&&h&&(p.className+=" "+(t?"":"no-")+e),c[e]=t}return c},r(""),v=g=null,function(e,t){function n(e,t){var n=e.createElement("p"),r=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",r.insertBefore(n.lastChild,r.firstChild)}function r(){var e=g.elements;return typeof e=="string"?e.split(" "):e}function i(e){var t=v[e[p]];return t||(t={},d++,e[p]=d,v[d]=t),t}function s(e,n,r){n||(n=t);if(m)return n.createElement(e);r||(r=i(n));var s;return r.cache[e]?s=r.cache[e].cloneNode():c.test(e)?s=(r.cache[e]=r.createElem(e)).cloneNode():s=r.createElem(e),s.canHaveChildren&&!l.test(e)?r.frag.appendChild(s):s}function o(e,n){e||(e=t);if(m)return e.createDocumentFragment();n=n||i(e);var s=n.frag.cloneNode(),o=0,u=r(),a=u.length;for(;o<a;o++)s.createElement(u[o]);return s}function u(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return g.shivMethods?s(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+r().join().replace(/\w+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(g,t.frag)}function a(e){e||(e=t);var r=i(e);return g.shivCSS&&!h&&!r.hasCSS&&(r.hasCSS=!!n(e,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),m||u(e,r),e}var f=e.html5||{},l=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,c=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,h,p="_html5shiv",d=0,v={},m;(function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",h="hidden"in e,m=e.childNodes.length==1||function(){t.createElement("a");var e=t.createDocumentFragment();return typeof e.cloneNode=="undefined"||typeof e.createDocumentFragment=="undefined"||typeof e.createElement=="undefined"}()}catch(n){h=!0,m=!0}})();var g={elements:f.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:f.shivCSS!==!1,supportsUnknownElements:m,shivMethods:f.shivMethods!==!1,type:"default",shivDocument:a,createElement:s,createDocumentFragment:o};e.html5=g,a(t)}(this,t),c._version=l,c._prefixes=b,c._domPrefixes=S,c._cssomPrefixes=E,c.testProp=function(e){return u([e])},c.testAllProps=f,c.testStyles=A,p.className=p.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(h?" js "+C.join(" "):""),c}(this,this.document),function(e,t,n){function r(e){return"[object Function]"==d.call(e)}function i(e){return"string"==typeof e}function s(){}function o(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function u(){var e=v.shift();m=1,e?e.t?h(function(){("c"==e.t?k.injectCss:k.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),u()):m=0}function a(e,n,r,i,s,a,f){function l(t){if(!d&&o(c.readyState)&&(w.r=d=1,!m&&u(),c.onload=c.onreadystatechange=null,t)){"img"!=e&&h(function(){b.removeChild(c)},50);for(var r in T[n])T[n].hasOwnProperty(r)&&T[n][r].onload()}}var f=f||k.errorTimeout,c=t.createElement(e),d=0,g=0,w={t:r,s:n,e:s,a:a,x:f};1===T[n]&&(g=1,T[n]=[]),"object"==e?c.data=n:(c.src=n,c.type=e),c.width=c.height="0",c.onerror=c.onload=c.onreadystatechange=function(){l.call(this,g)},v.splice(i,0,w),"img"!=e&&(g||2===T[n]?(b.insertBefore(c,y?null:p),h(l,f)):T[n].push(c))}function f(e,t,n,r,s){return m=0,t=t||"j",i(e)?a("c"==t?E:w,e,t,this.i++,n,r,s):(v.splice(this.i++,0,e),1==v.length&&u()),this}function l(){var e=k;return e.loader={load:f,i:0},e}var c=t.documentElement,h=e.setTimeout,p=t.getElementsByTagName("script")[0],d={}.toString,v=[],m=0,g="MozAppearance"in c.style,y=g&&!!t.createRange().compareNode,b=y?c:p.parentNode,c=e.opera&&"[object Opera]"==d.call(e.opera),c=!!t.attachEvent&&!c,w=g?"object":c?"script":"img",E=c?"script":w,S=Array.isArray||function(e){return"[object Array]"==d.call(e)},x=[],T={},N={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}},C,k;k=function(e){function t(e){var e=e.split("!"),t=x.length,n=e.pop(),r=e.length,n={url:n,origUrl:n,prefixes:e},i,s,o;for(s=0;s<r;s++)o=e[s].split("="),(i=N[o.shift()])&&(n=i(n,o));for(s=0;s<t;s++)n=x[s](n);return n}function o(e,i,s,o,u){var a=t(e),f=a.autoCallback;a.url.split(".").pop().split("?").shift(),a.bypass||(i&&(i=r(i)?i:i[e]||i[o]||i[e.split("/").pop().split("?")[0]]),a.instead?a.instead(e,i,s,o,u):(T[a.url]?a.noexec=!0:T[a.url]=1,s.load(a.url,a.forceCSS||!a.forceJS&&"css"==a.url.split(".").pop().split("?").shift()?"c":n,a.noexec,a.attrs,a.timeout),(r(i)||r(f))&&s.load(function(){l(),i&&i(a.origUrl,u,o),f&&f(a.origUrl,u,o),T[a.url]=2})))}function u(e,t){function n(e,n){if(e){if(i(e))n||(f=function(){var e=[].slice.call(arguments);l.apply(this,e),c()}),o(e,f,t,0,u);else if(Object(e)===e)for(p in h=function(){var t=0,n;for(n in e)e.hasOwnProperty(n)&&t++;return t}(),e)e.hasOwnProperty(p)&&(!n&&!--h&&(r(f)?f=function(){var e=[].slice.call(arguments);l.apply(this,e),c()}:f[p]=function(e){return function(){var t=[].slice.call(arguments);e&&e.apply(this,t),c()}}(l[p])),o(e[p],f,t,p,u))}else!n&&c()}var u=!!e.test,a=e.load||e.both,f=e.callback||s,l=f,c=e.complete||s,h,p;n(u?e.yep:e.nope,!!a),a&&n(a)}var a,f,c=this.yepnope.loader;if(i(e))o(e,0,c,0);else if(S(e))for(a=0;a<e.length;a++)f=e[a],i(f)?o(f,0,c,0):S(f)?k(f):Object(f)===f&&u(f,c);else Object(e)===e&&u(e,c)},k.addPrefix=function(e,t){N[e]=t},k.addFilter=function(e){x.push(e)},k.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",C=function(){t.removeEventListener("DOMContentLoaded",C,0),t.readyState="complete"},0)),e.yepnope=l(),e.yepnope.executeStack=u,e.yepnope.injectJs=function(e,n,r,i,a,f){var l=t.createElement("script"),c,d,i=i||k.errorTimeout;l.src=e;for(d in r)l.setAttribute(d,r[d]);n=f?u:n||s,l.onreadystatechange=l.onload=function(){!c&&o(l.readyState)&&(c=1,n(),l.onload=l.onreadystatechange=null)},h(function(){c||(c=1,n(1))},i),a?l.onload():p.parentNode.insertBefore(l,p)},e.yepnope.injectCss=function(e,n,r,i,o,a){var i=t.createElement("link"),f,n=a?u:n||s;i.href=e,i.rel="stylesheet",i.type="text/css";for(f in r)i.setAttribute(f,r[f]);o||(p.parentNode.insertBefore(i,p),h(n,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},Modernizr.addTest("overflowscrolling",function(){return Modernizr.testAllProps("overflowScrolling")}),define("modernizr",["jquery"],function(e){return function(){var t,n;return t||e.Modernizr}}(this)),define("helpers/date_helpers",["underscore","strings","moment","handlebars"],function(e,t,n,r){var i={year:function(e){return e?n(e,"YYYY-MM-DD").format(t.DateShortDayMonthDate)||"":""},yearFull:function(e){return e?(new Date(e)).getFullYear()||"":""},time:function(e){return e?n(e,"H:m").format(t.DateTime)||null:null},longDate:function(e){return e?n(e,"YYYY-MM-DD").format(t.DateLongDate)||"":""},mediumLongDate:function(e){return e?n(e,"YYYY-MM-DD").format(t.DateMediumLongDate)||"":""},fromLongDateTime:function(e){return e?n(e,"ddd, MMMM DD, YYYYh:mma").format()||"":""},combineDateAndTime:function(e,t){var n=e.startOf("day");return n.hours(t.hours()).minutes(t.minutes()),n},formattedCombineDateAndTime:function(e,t,r){if(!e||!t)return"";var s=n(e,"ddd, MMMM DD, YYYY"),o=n(t,"h:mma");return i.combineDateAndTime(s,o).format(r)},dayMonthDateYear:function(e){return e?n(e,"YYYY-MM-DD").format(t.DateDayMonthDateYear)||null:null},"itin-time":function(e){return e?n(e,"YYYY-MM-DDTH:m:s").format(t.DateItinTime)||null:null},itinTimeAmPm:function(e){return e?n(e,"YYYY-MM-DDTH:m:s").format(t.DateTime)||null:null},itinDayMonthAndDate:function(e){return e?n(e,"YYYY-MM-DDTH:m:s").format(t.DateShortDayMonthDate)||null:null},"time-period":function(e){return e?n(e,"YYYY-MM-DDTH:m:s").format(t.DateTimePeriod)||null:null},startEndDate:function(e,r){var i="";return e&&r&&(i=n(e,"YYYY-MM-DDTH:m:s").format(t.DateMonthDay),i+=" - ",i+=n(r,"YYYY-MM-DDTH:m:s").format(t.DateStartEndDate)),i},startEndDateWithDayMonthDate:function(e,r){var i="";return e&&r&&(i=n(e,"YYYY-MM-DDTH:m:s").format(t.DateShortDayMonthDate),i+=" - ",i+=n(r,"YYYY-MM-DDTH:m:s").format(t.DateShortDayMonthDate)),i},tripDateRange:function(e,r){var i="";if(e&&r){var s=n(e,"YYYY-MM-DDTH:m:s"),o=n(r,"YYYY-MM-DDTH:m:s");i=s.format(t.DateMonthDay),s.month()===o.month()?s.day()===o.day()?i+=o.format(t.DateCommaYear):i+="-"+o.format(t.DateDateYear):s.year()!==o.year()?i+=s.format(t.DateCommaYear)+" - "+o.format(t.DateStartEndDate):i+=" - "+o.format(t.DateStartEndDate)}return i},tripStart:function(e){return n().year()===n(e).year()?n(e).format("MMM D"):n(e).format("MMM D, YYYY")},timeFromDateTime:function(e){return e?n.utc(e,"YYYY-MM-DDTH:m:s").format(t.DateTime)||"":""},dateMonth:function(e){return e?n(e,"YYYY-MM-DDTH:m:s").format(t.DateMonthDay)||"":""},mediumDate:function(e){return e?n(e,"YYYY-MM-DDTH:m:s").format(t.DateShortDayMonthDate)||"":""},pluralize:function(e,n){var r=e.toString()+" "+t[n];return e>1&&(r+="s"),r},hoursMinutesFromMinutes:function(e){var t=Math.floor(e/60),n=e%60,r=t+"h "+n+"m";return r},hoursMinutesFromMinutesHumanize:function(e){var r=n.duration(e,"minutes"),i=r.hours(),s=r.minutes(),o=i===1?t.Hr:t.Hrs,u=s===1?t.Min:t.Mins,a="";return s>0&&(a+=s+" "+u),s>0&&i>0&&(a=" "+a),i>0&&(a=i+" "+o+a),a},delayed_by:function(e,t){var r=n(e).diff(n(t),"minutes");return r<0?"(delayed "+Math.abs(r)+"m)":r>0?"(early "+Math.abs(r)+"m)":""},display_address_for:function(t,n){var r=e(n.hash).reject(function(e){return!!n.hash[e]}).join(", ");return r},hoursDaysSinceNow:function(e){var r=n(e),i=n(),s=i-r,o;return s<0?o=i.format(t.DateStartEndDate):o=r.from(i),o},hoursUntil:function(e){var t=n(),r=n(e);return r.diff(t,"hours")},hours:function(e,t,n,r){return e+" - "+t+": "+i.time(n)+" - "+i.time(r)},monDayYear:function(e){return e?n(e,"YYYY-MM-DDTH:m:s").format(t.DateStartEndDate):""},dayAbbreviated:function(e){return e.substr(0,3)}};return r.registerHelper("year",i.year),r.registerHelper("monDayYear",i.monDayYear),r.registerHelper("yearFull",i.yearFull),r.registerHelper("time",i.time),r.registerHelper("longDate",i.longDate),r.registerHelper("dayMonthDateYear",i.dayMonthDateYear),r.registerHelper("itin-time",i["itin-time"]),r.registerHelper("time-period",i["time-period"]),r.registerHelper("startEndDate",i.startEndDate),r.registerHelper("tripDateRange",i.tripDateRange),r.registerHelper("tripStart",i.tripStart),r.registerHelper("timeFromDateTime",i.timeFromDateTime),r.registerHelper("mediumDate",i.mediumDate),r.registerHelper("mediumLongDate",i.mediumLongDate),r.registerHelper("dateMonth",i.dateMonth),r.registerHelper("pluralize",i.pluralize),r.registerHelper("hoursMinutesFromMinutes",i.hoursMinutesFromMinutes),r.registerHelper("delayed_by",i.delayed_by),r.registerHelper("display_address_for",i.display_address_for),r.registerHelper("combineDateAndTime",i.combineDateAndTime),r.registerHelper("hoursDaysSinceNow",i.hoursDaysSinceNow),r.registerHelper("hoursUntil",i.hoursUntil),r.registerHelper("hours",i.hours),r.registerHelper("dayAbbreviated",i.dayAbbreviated),i}),define("helpers/flight_helpers",["underscore","strings","moment","handlebars"],function(e,t,n,r){var i={nextDayArrivalText:function(e,r){var i=n(e),s=n(r);if(i.day()!==s.day()){var o=s.day()-i.day();return o===1?t.ArrivesNextDay:t.Arrives+" "+s.format("dddd")}return""}};return r.registerHelper("nextDayArrivalText",i.nextDayArrivalText),i}),define("helpers/validation_helpers",["underscore","strings","moment","handlebars"],function(e,t,n,r){var i={isEmailFormat:function(e){var t=/^(([^<>()\[\]\\.,;:\s@\"]+(\.[^<>()\[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)},isSpacesOnly:function(e){var t=/^[ ]*$/;return t.test(e)}};return i}),define("helpers",["namespace","jquery","underscore","moment","handlebars","strings","modernizr","config","helpers/date_helpers","helpers/flight_helpers","helpers/validation_helpers"],function(e,t,n,r,i,s,o,u,a,f,l){var c,h=window.innerWidth;i.registerHelper("nextDayArriveNotifier",function(e,t){var n=r(e),i=r(t);if(n.day()!==i.day()){var s=f.nextDayArrivalText(e,t);return'<dd class="special-note">'+s+"</dd>"}return""}),i.registerHelper("if_has_nextDayArrivalAlert",function(e,t,n){var i=r(e),s=r(t),o=n.fn,u=n.inverse;return i.day()!==s.day()?o(this):u(this)}),i.registerHelper("each_with_index",function(e,t){var n="";for(var r=0,i=e.length;r<i;r++){var s=e[r];s.index=r+1,n+=t.fn(s)}return n}),i.registerHelper("each_additional_flight_segment",function(e,t){var n="";for(var r=1,i=e.length;r<i;r++){var s=e[r];s.previousSegment=e[r-1],s.index=r+1,n+=t.fn(s)}return n}),i.registerHelper("has_change_of_planes",function(e,t,n,r){var i=e===n&&t===r?"No Change of Plane":"Change Planes";return i}),i.registerHelper("if_is_delayed",function(e,t,n){if(e!==t)return n.fn(this)}),i.registerHelper("unless_equal",function(e,t,n){if(e!==t)return n.fn(this)}),i.registerHelper("if_equal",function(e,t,n){return e===t?n.fn(this):n.inverse(this)}),i.registerHelper("count",function(e){return e.length}),i.registerHelper("if_not_blank",function(e,t){return n.isEmpty(e)?typeof t=="string"?p.translate(t):"N/A":e}),i.registerHelper("if_not_both_blank",function(e,t,r){return n.isEmpty(e)&&n.isEmpty(t)?typeof r=="string"?r:"N/A":e+t}),i.registerHelper("get_terminal_and_gate",function(e,t){var r="";return!n.isEmpty(e)&&!n.isEmpty(t)?r=e+"/"+t:n.isEmpty(e)?n.isEmpty(t)?r="TBD":r=t:r=e,r}),i.registerHelper("debug",function(e){console.log("Current Context"),console.log("===================="),console.log(this),e&&(console.log("Value"),console.log("===================="),console.log(e))}),i.registerHelper("stopAirportCodes",function(e){var t="",n,r=e.length;for(n=1;n<r;n+=1)t+=e[n],n+1<r&&(t+=", ");return t}),i.registerHelper("flightStops",function(e){return!e||e==="0"?"Nonstop":e>1?e+" Stops":"1 Stop"}),i.registerHelper("flightDetailShowDateBlockReset",function(e,t,n){c=undefined}),i.registerHelper("showDateBlock",function(e,t){if(c===undefined)return c=r(e).startOf("day").valueOf(),t.fn(this);if(r(e).startOf("day").valueOf()!==c)return c=r(e).startOf("day").valueOf(),t.fn(this)}),i.registerHelper("phone",function(e,t){return e+" ("+(t||"Main")+")"}),i.registerHelper("hotelLocationPreviewUrl",function(){var e="";return window.devicePixelRatio>=1.5?e=this.thumbnail_xlarge||this.thumbnail_medium||u.assetPath+"assets/images/hotel_default_tn_2x.png":e=this.thumbnail_medium||u.assetPath+"assets/images/hotel_default_tn.png",e}),i.registerHelper("isHotelCheckOut",function(e,t,n){return e!=="Hotel"&&e!=="Lodging"||t!=="end"?n.inverse(this):n.fn(this)}),i.registerHelper("isCarOrHotel",function(e,t){return e==="hotel"||e==="vehicle"?t.fn(this):t.inverse(this)}),i.registerHelper("locationSubtitle",function(e){return e.label||e.general_location}),i.registerHelper("locationAddress",function(e){var t,n=e.address_lines;if(n){var r=0;n.length>2&&r++,t=n[r]}else t=e.general_location;return t}),i.registerHelper("getStaticMapLatLng",function(){var e;return this.type==="Vehicle"&&this.event_type==="end"?(e=this.end_location,n.isUndefined(this.end_location.lat)&&(e=this.start_location)):e=this.start_location,e.lat+","+e.lng}),i.registerHelper("headerFormat",function(e){return p.capitalize(p.deunderscorize(e))}),i.registerHelper("previewUrl",function(){return window.devicePixelRatio>=1.5?this.destination_images.xlarge:this.destination_images.medium}),i.registerHelper("sidemenuSummaryDate",function(){var e=r(this.start_time,"YYYY-MM-DDTHH:mm:ss").format(s.DateShortDayMonthDate)+" - "+r(this.end_time,"YYYY-MM-DDTHH:mm:ss").format(s.DateShortDayMonthDate);return e}),i.registerHelper("startStopDate",function(){var e=r(this.start_time,"YYYY-MM-DDTHH:mm:ss").format(s.DateMonthDay)+" - "+r(this.end_time,"YYYY-MM-DDTHH:mm:ss").format(s.DateStartEndDate);return e}),i.registerHelper("ifTripFeedMessageClickable",function(e){if(this.url!==undefined||this.event_action==="GoToTool"||this.event_action==="ItemDefault"||this.event_action==="GotoTrip")return e.fn(this)}),t.fn.serializeObject=function(){var e={},n=this.serializeArray();return t.each(n,function(){e[this.name]!==undefined?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e},t.fn.isInView=function(e){return e=e?e:this,t("#app-page").find(e).length?!0:!1};var p={viewportResize:n.debounce(function(){t("html").css("min-height",screen.height),document.documentElement.scrollTop<20&&window.scrollTo(0,1),t("html, #app-page").css("min-height",p.getViewportHeight())},300,!0),hideURLBar:function(){setTimeout(function(){window.scrollTo(0,1)},0)},scrollToTop:function(){var n=document;e.isIos&&(n="#app-page"),t(n).scrollTop(0)},getViewportHeight:function(){var e=window.innerHeight,t=window.outerHeight/window.devicePixelRatio-window.innerHeight;return t<=69&&t>=0&&(e=window.outerHeight/window.devicePixelRatio),e},getViewportHeightOnIosSafari:function(){var e=20,t=32,n=44,r=this.getWindowOrientation(),i=r===0,s=i?screen.height:screen.width,o=i?n:t;return s-o-e},getWindowOrientation:function(){var e=window.orientation;return e===undefined&&(e=screen.height>screen.width?0:1),e},changeLocation:function(e){window.location.href=e},dateHelpers:a,flightHelpers:f,validate:l,capitalize:function(e){var t=e.split(" "),n="";for(var r=0;r<t.length;r++)r>0&&(n+=" "),n+=t[r].charAt(0).toUpperCase()+t[r].slice(1).toLowerCase();return n},camelize:function(){var e,t;return t=/[\-_]([a-z])/g,e=function(e,t){return t.toUpperCase()},function(n){return n.replace(t,e)}}(),upcase:function(e){return e.charAt(0).toUpperCase()+e.substring(1)},deunderscorize:function(){var e,t;return e=/_/g,t=function(e){return" "},function(n){return n.replace(e,t)}}(),underscorize:function(){var e,t;return e=/[A-Z]/g,t=function(e){return"_"+e.toLowerCase()},function(n){return n.replace(e,t)}}(),underscorizeObjectKeys:function(e){var t={};return n.each(e,function(e,n){t[p.underscorize(n)]=e}),t},camelizeObjectKeys:function(e){var t={};return n.each(e,function(e,n){t[p.camelize(n)]=e}),t},getModule:function(e){var t=e.split("/"),n=p.camelize(t[t.length-1]);require([e],function(e){window[n]=e})},lowercase:function(e){return e?e.toLowerCase():""},truncate:function(e,t){return t==="undefined"?e:e.length<=t?e:e.substring(0,t)+"..."},translate:function(e){var t=s[e];return t===undefined&&console.log("ERROR: translate key["+e+"] does not exist!"),t},confirm:function(e,t,n){n=n||"";if(navigator.notification&&navigator.notification.confirm)navigator.notification.confirm(e,function(e){e===1&&t()},n);else{var r=confirm(e);r&&t()}},isNudgable:function(e,t){e=parseInt(e,10),t=parseInt(t,10);var n=!1,r=e===3&&t>12,i=e%25===0,s=t-e>10;if(r||i&&s)n=!0;return n},createStarRating:function(e){var t;return e?t='<span class="rating star-icon stars_'+e+'">Rating: '+e+"</span>":t="",t},isModalVisible:function(){return document.querySelector(".error-popup")}},d={getCarouselImageWidth:function(e,t){var n=300,r=200,i=Math.min(n/e,r/t);return i*e},getCarouselImageHeight:function(e,t){var n=300,r=200,i=Math.min(n/e,r/t);return i*t}};i.registerHelper("getCarouselImageWidth",d.getCarouselImageWidth),i.registerHelper("getCarouselImageHeight",d.getCarouselImageHeight),i.registerHelper("lowercase",p.lowercase),i.registerHelper("capitalize",p.capitalize),i.registerHelper("truncate",p.truncate),i.registerHelper("t",p.translate),i.registerHelper("if_is_nudgeable",function(e){return p.isNudgable(e.hash.index,e.hash.length)?e.fn(this):e.inverse(this)});var v={parseErrors:function(e){var t=document.createElement("ul");for(var n=0;n<e.length;n++){var r=e[n];if(r&&r!==undefined&&r!=="undefined"){var i=document.createElement("li");i.innerHTML=r,t.appendChild(i)}}return"<ul>"+t.innerHTML+"</ul>"}};return i.registerHelper("parseErrors",v.parseErrors),p}),define("mediator",["backbone","underscore","helpers"],function(e,t,n){var r={};return t(r).defaults(e.Events),r._history=[],r._callbacks={},requirejs.onError=function(e){if(!window.jasmine){e.requireType==="scripterror"&&e.originalError&&e.originalError.target&&e.originalError.target.src&&(e.message=e.message+"\n"+e.originalError.target.src);if(e.requireType!=="timeout")throw console.log(e),e;console.warn("Could not load module "+e.requireModules)}},r._autoload=function(t){var n=this,r=arguments,i=t.split(":")[0];require(["controllers/"+i+"_controller"],function(t){e.Events.trigger.apply(n,["startupController!",i,t]),e.Events.trigger.apply(n,r)})},r.pushToHistory=function(e){return r._history.push(e),r.trimHistory(),r._history},r.trimHistory=function(){r._history.length>50&&r._history.splice(0,r._history.length-50)},r.getHistory=function(){return r._history},r.subscribe=r.on=e.Events.on,r.unsubscribe=r.off=e.Events.off,r.publish=r.trigger=function(t){if(!r._callbacks[t]){r._autoload.apply(this,arguments);return}r.pushToHistory(t),e.Events.trigger.apply(this,arguments)},r}),define("collections/collection",["jquery","underscore","backbone"],function(e,t,n){var r=n.Collection.extend({constructor:function(e,t){n.Collection.prototype.constructor.call(this,e,t),this._afterInitialize(t)},_afterInitialize:function(e){this._attachProxy()},_attachProxy:function(){this.proxy&&(this.sync=this._proxiedSync)},_proxiedSync:function(e,t,n){this.proxy.sync(e,t,n)},parse:function(e,n){var r=this,i=t(e).map(function(e){var t=new r.model;return t.set(t.parse(e),{silent:!0}),t});return i}});return r}),define("models/model",["jquery","underscore","backbone"],function(e,t,n){var r=n.Model.extend({constructor:function(e,t){n.Model.prototype.constructor.call(this,e,t),this._afterInitialize(t)},_afterInitialize:function(e){this._attachProxy()},_attachProxy:function(){this.proxy&&(this.sync=this._proxiedSync)},_proxiedSync:function(e,t,n){this.proxy.sync(e,t,n)},serialize:function(){return this.attributes}});return r}),define("parsers/message_parser",["underscore","backbone","strings","config"],function(e,t,n,r){var i={parse:function(e){return this.clear({silent:!0}),this.parseMessage(e)},parseMessage:function(e){this.id=e.id;var t={},i=e.body,s=e.item;return t.start_time=e.start_time,t.icon_url=e.icon_url||r.assetPath+"assets/images/trip_feed_msg_default.png",t.text=i&&i.text||"",t.trip_id=e.trip_id||"",t.trip_item_id=s&&s.id,t.event_action=e.event_action,t.event_name=e.event_name,t.tool_name=e.tool_name,t.drive_suggestion_id=e.drive_suggestion_id,t.event_id=e.event_id,t.web_url=e.web_url,t.url=e.url,t.id=e.id,t.metrics_url=e.metrics_url,t.event_name==="air_cancelled"&&(t.text+="<br/>"+n.ViewAltFlightSchedules),t}};return i}),define("models/message",["jquery","underscore","backbone","models/model","parsers/message_parser"],function(e,t,n,r,i){var s=r.extend({initialize:function(e,n){n=n||{},t.extend(this,i),this.trip=n.trip},isActionable:function(){return!!this.get("event_action")||this.isFeedbackSolicitation()},isToolLink:function(){return this.get("event_action")==="GoToTool"},isTripLink:function(){return this.get("event_action")==="GotoTrip"},isUrlLink:function(){return this.get("event_action")==="GotoUrl"},isBrowserLink:function(){return this.get("event_action")==="GotoBrowser"},isItemDefault:function(){return this.get("event_action")==="ItemDefault"},isSupported:function(){return this.isToolLink()?this.isSupportedTool():!0},isSupportedTool:function(){var e=this.getToolName();return e&&t.any(s.SUPPORTED_TOOLS,function(t){return t===e})},isCancelledFlight:function(){return this.get("event_name")==="air_cancelled"},isFeedbackSolicitation:function(){return this.get("event_name")==="solicit_feedback"},isAirportWaitTimes:function(){return this.get("event_name")==="airport_wait_times"},getToolName:function(){return this.get("tool_name")},getTripId:function(){return this.get("trip_id")},getTripItemId:function(){return this.get("trip_item_id")},hasMetricsUrl:function(){return!t.isUndefined(this.get("metrics_url"))},isSuggestion:function(){return!t.isUndefined(this.get("drive_suggestion_id"))},getDriveSuggestionID:function(){return this.get("drive_suggestion_id")},getTrafficAlertID:function(){return this.get("event_id")},isShowTrafficAlert:function(){return this.getToolName()==="traffic_alerts"&&!t.isUndefined(this.get("event_id"))},getIconUrl:function(){var e;if(this.isItemDefault()){var t=this.getTripItemId(),n=this.trip.getTripItem(t);e=n&&n.icon_url()}return e||this.get("icon_url")},getUrl:function(){return this.get("url")},getMetricsUrl:function(){return this.get("metrics_url")}},{SUPPORTED_TOOLS:["alternate_flights","arrival_updates","bonus_offers","connections","converter","conversions","flight_schedules","maps","phone","publish_updates","seat_maps","itin_sharing","directions","weather","traffic_alerts","expenses","amex_benefits"]});return s}),define("models/upgrade_error",["jquery","underscore","models/model"],function(e,t,n){var r=n.extend({getMessage:function(){return this.get("error")||this.get("message")},getUrl:function(){return this.get("update_url")}});return r}),define("helpers/error_handler",["underscore","mediator","namespace","strings","models/upgrade_error"],function(e,t,n,r,i){var s=null,o=function(){if(s!==null)throw new Error("Cannot instantiate more than one ErrorHandler, use ErrorHandler.getInstance()")};return o.getInstance=function(){return s===null&&(s=new o),s},o.prototype={handle:function(i,s){return this._requireTerms(s)?this._handleRequireTerms(s):this._isAuthenticationError(s)?this._handleAuthenticationError(s):this._isAjaxAbort(s)?(s.handled=!0,!0):this._isConnectionError(s)?(!n.user&&!i.isValid()?t.publish("session:invalid"):this._clientConnectionErrorHandler?this._clientConnectionErrorHandler(i,s):this._handleConnectionError(),s.handled=!0,!0):this._isUpgradeError(s)?this._handleUpgradeError(s):this._isServerError(s)?this._handleServerError(s):this._isClientRequestError(s)?this._handleServerError(s):e.isString(s)?(console.log("_errorHandler / Error: "+s),t.publish("error:trigger","service",[{message:r.ErrorSomethingWrong}]),!0):s[0]&&s[0].message?(t.publish("error:trigger","service",[{message:s[0].message}]),!0):s.responseText&&s.statusText?(console.log(s.responseText),!0):s.error?(console.log("_errorHandler / Error: "+s.error),t.publish("error:trigger","service",[{message:r.ErrorSomethingWrong}]),!0):(t.publish("error:trigger","service",[{message:r.ErrorSomethingWrong}]),!0)},handleUpgradeErrors:function(e){var t=!1;return this._isUpgradeError(e)&&(t=this._handleUpgradeError(e)),t},_requireTerms:function(e){return!e||e.status!==401?!1:e.responseText&&e.responseText.match(/terms/i)},_isUpgradeError:function(e){if(e.responseText)try{e=JSON.parse(e.responseText)}catch(t){e={}}return!!e.update_url},_isAuthenticationError:function(e){return e&&(e.status===401||e.status===403)},_isAjaxAbort:function(e){return e&&e.status===0&&e.statusText&&e.statusText==="abort"},_isConnectionError:function(e){return e&&e.status===0&&e.statusText&&e.statusText!=="abort"},_isServerError:function(e){return e&&(e.status===500||e.status===503)},_isServerServiceError:function(e){return e[0]==="["&&e[1]==='"'},_getServerServiceError:function(e){return e.substr(2,e.length-4)},_isClientRequestError:function(e){return e&&e.status!==403&&e.status!==451&&e.status>=400&&e.status<500},_handleRequireTerms:function(e){return t.publish("terms:prompt"),!0},_handleUpgradeError:function(e){e.responseText&&(e=JSON.parse(e.responseText));var n=new i(e);return t.publish("upgradeerror",n),t.publish("session:invalid"),!0},_handleAuthenticationError:function(e){var n=!1,r;return e&&e.responseText&&(r=this._parseErrorMessage(e.responseText),t.publish("error:trigger","service",[{message:r}]),t.publish("session:invalid"),n=!0),n},_parseErrorMessage:function(e){var t,n;return e[0]==="{"?(n=JSON.parse(e),t=n.error):this._isServerServiceError(e)?t=this._getServerServiceError(e):e[0]==="<"?t=r.ErrorSomethingWrong:t=e,t},_handleConnectionError:function(){t.publish("error:trigger","service",[{message:r.ErrorOffline}]),t.publish("networkerror")},_handleServerError:function(e){var n;return e.responseText&&e.responseText.trim().length>0?n=this._parseErrorMessage(e.responseText):n=r.ErrorInternalError,t.publish("error:trigger","service",[{message:n}]),!0}},o.getInstance()}),define("helpers/device",[],function(){var e={};return e.isWrapped=function(){return typeof window.cordova!="undefined"},e.isWebApp=function(){return navigator.standalone&&!e.isWrapped()?!0:!1},e.getDevicePlatform=function(){return e.isWrapped()?device.platform:null},e.getDeviceHardwareId=function(){return e.isWrapped()?device.uuid:null},e.getOperatingSystemVersion=function(){return e.isWrapped()?device.version:null},e.getDeviceType=function(t){var n=e.getDevicePlatform();return e.isWrapped()?t[n].deviceType:null},e.getLocale=function(){return navigator?navigator.userLanguage||navigator.language:null},e.getScreenSize=function(){return screen?screen.availWidth+"x"+screen.availHeight:null},e}),define("helpers/app_agent",["config","helpers/device","jquery"],function(e,t,n){var r={};return r.getAppAgent=function(){var r={touch:!0,device:t.getDevicePlatform(),app_version:e.version,osv:t.getOperatingSystemVersion(),locale:t.getLocale(),screen_size:t.getScreenSize(),device_type:t.getDeviceType(e.platforms),device_hwid:t.getDeviceHardwareId(),"native":t.isWrapped()?"PhoneGap":""};for(var i in r)n.trim(r[i]).length===0&&delete r[i];return"TripCase/5 "+JSON.stringify(r)},r}),$.ajaxPrefilter(function(e,t,n){var r=function(){var e="privateBrowsing",t=window.localStorage,n=!1;try{t.setItem(e,"1"),t.removeItem(e)}catch(r){r.code===22&&t.length===0?n=!0:n=!1}return n}();if(typeof localStorage=="undefined"||!e.localCache||r)return;var i=e.cacheTTL||5,s=e.cacheKey||e.url.replace(/jQuery.*/,"")+e.type+e.data,o=e.preventExpiration||!1,u=6e4,a=u*60,f=a*24,l=a;e.cacheTTLmultiplier&&(e.cacheTTLmultiplier==="minutes"?l=u:e.cacheTTLmultiplier==="hours"?l=a:e.cacheTTLmultiplier==="days"?l=f:l=e.cacheTTLmultiplier),e.isCacheValid&&!e.isCacheValid()&&localStorage.removeItem(s);var c=localStorage.getItem(s+"cachettl");if(o===!1&&c&&c<+(new Date)||e.isToRefresh)c="expired";var h;c!=="expired"&&(h=localStorage.getItem(s)),h?(e.dataType.indexOf("json")===0&&(h=JSON.parse(h)),e.success(h),n.abort()):(e.success&&(e.realsuccess=e.success),e.success=function(t){var n=t;n.error||(e.dataType.indexOf("json")===0&&(n=JSON.stringify(t)),localStorage.setItem(s,n),(!c||c==="expired")&&localStorage.setItem(s+"cachettl",+(new Date)+i*l)),e.realsuccess&&e.realsuccess(t)},e.error&&(e.realerror=e.error),e.error=function(t,n,r){var i=t.status===403,o=t.status===404;h=localStorage.getItem(s),h&&!i&&!o?(e.dataType.indexOf("json")===0&&(h=JSON.parse(h)),e.realsuccess&&e.realsuccess(h),t.abort()):e.realerror&&e.realerror(t,n,r)})}),define("jquery-ajax-localstorage-cache",["jquery"],function(){}),define("proxies/proxy",["jquery","underscore","backbone","helpers/error_handler","mediator","helpers","config","namespace","helpers/app_agent","strings","jquery-ajax-localstorage-cache"],function(e,t,n,r,i,s,o,u,a,f){var l=n.Model.extend({CACHE_MODE_NONE:"cache_mode_none",CACHE_MODE_DEFER:"cache_mode_defer",initialize:function(e,n){n=n||{},t.bindAll(this,"_handleErrors"),this.model=n.model,this.collection=n.collection},url:null,getSubject:function(){return this.model||this.collection},toJSON:function(){if(this.collection)return this.collection.map(function(e){return e.toJSON()});var e={},t=this._getAttrs(),n=this._getAttrsNamespace();return n?e[n]=t:e=t,e},_getAttrsNamespace:function(){return this.model.name},_getAttrs:function(){return s.underscorizeObjectKeys(this.model.toJSON())},parse:function(e,t){return e},validate:function(e){return null},_handleErrors:function(e,t){return r.handle(e,t)},_handleUpgradeErrors:function(e){return r.handleUpgradeErrors(e)},invalidationKeys:[],getInvalidationKeys:function(){return this.invalidationKeys},invalidateCache:function(){var e=this.getInvalidationKeys();this.invalidationKeys=e;for(var t=0;t<e.length;t++){var n=e[t];localStorage.setItem(n+"cachettl",0)}return!0},sync:function(r,s,f){var l=this,c={create:"POST",update:"PUT","delete":"DELETE",read:"GET"},h=function(e,n){return!e||!e[n]?null:t.isFunction(e[n])?e[n]():e[n]},p=c[r],d={type:p,dataType:"json"};s.proxy.syncConfig&&s.proxy.syncConfig(r,f);if(!f.url){if(!h(s.proxy,"url"))throw new Error("url must be defined");d.url=o.apiURL+h(s.proxy,"url")}p==="GET"&&(d.data=s.proxy.toJSON(),d.processData=!0),!f.data&&s&&(r==="create"||r==="update")&&(d.contentType="application/json",d.data=JSON.stringify(s.proxy.toJSON())),n.emulateJSON&&(d.contentType="application/x-www-form-urlencoded",d.data=d.data?{model:d.data}:{}),n.emulateHTTP&&(p==="PUT"||p==="DELETE")&&(n.emulateJSON&&(d.data._method=p),d.type="POST",d.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",p)}),d.type!=="GET"&&!n.emulateJSON&&(d.processData=!1);var v=h(s.proxy,"cacheForceSave");if(d.type==="GET"||v)d.cacheKey=h(s.proxy,"cacheKey"),d.cacheKey&&(d.localCache=!0),d.cacheTTL=h(s.proxy,"cacheTTL")||24,d.cacheTTLmultiplier=h(s.proxy,"cacheTTLmultiplier"),d.preventExpiration=!u.isOnline;else if(u.isOnline===!0&&h(s.proxy,"invalidationKeys")){var m=h(s.proxy,"invalidationKeys");for(var g=0;g<m.length;g++){var y=m[g];localStorage.removeItem(y),localStorage.removeItem(y+"cachettl")}switch(f.cache_mode){case l.CACHE_MODE_NONE:break;case l.CACHE_MODE_DEFER:f.success=t.wrap(f.success,function(){arguments[0].apply(l,t.toArray(arguments).slice(1)),i.publish("proxy:cacheRemove")});break;default:i.publish("proxy:cacheRemove")}}f.error=t.wrap(f.error,function(e){var t=Array.prototype.slice.call(arguments,1),n=t[0];n.attributes&&(n=t[1]),l._handleErrors.apply(l,[l.model,n])||e.apply(l,t)}),f.success=t.wrap(f.success,function(e){var t=Array.prototype.slice.call(arguments,1);e.apply(this,t)}),d.complete=function(e,t){var n=!1;return n=l._handleUpgradeErrors(e),n};var b=d.beforeSend;return d.beforeSend=function(e){b&&b();var t=a.getAppAgent();e.setRequestHeader("App-Agent",t)},e.ajax(t.extend(d,f))}});return l}),define("proxies/trip_item_proxy",["proxies/proxy"],function(e){var t=e.extend({syncConfig:function(e,t){this._setUrl(e),this.cacheKey="trip_item_"+this.model.get("id"),this.cacheTTL=5,this.cacheTTLmultiplier="minutes",this.invalidationKeys=[this.cacheKey,"trip_"+this.model.getTripId(),"trip_list","session"]},_setUrl:function(e){var t=this.model.getTripId(),n=this.model.get("id")||this.model.id,r="/mapi/trips/"+t+"/trip_items/";e==="create"?this.url=r+this._getPostSubPath()+".json":this.url=r+n+".json"},_getPostSubPath:function(){throw new Error('Post sub path must be set, e.g. "hotel"')}});return t}),define("models/phone_number",["jquery","underscore","backbone","models/model"],function(e,t,n,r){var i=r.extend({initialize:function(e){this._fixupBlanksInPhoneNumber(e)},_fixupBlanksInPhoneNumber:function(e){e.number!==undefined&&e.number.indexOf(" ")!==-1&&(e.number=e.number.replace(" ","-"),this.set({number:e.number}))},isCallable:function(){return!this.isFax()},isFax:function(){var e=this.get("type");return e&&e.toLowerCase()==="fax"}});return i}),define("collections/phone_number_list",["jquery","underscore","collections/collection","models/phone_number"],function(e,t,n,r){var i=n.extend({model:r,clone:function(){var e=this.map(function(e){return e.clone()});return new i(e)}});return i}),define("parsers/location_parser",["underscore","backbone"],function(e,t){var n={_parseAddressLines:function(e,t,n){var r=t.label_lines||[];e.address_lines=[];for(var i=0;i<r.length;i++)if(!n||r[i].text!==n.name||r[i].text===e.label)r[i].part==="street"&&(e.street=r[i].text),e.address_lines.push(r[i].text)},parse:function(e,t){return this.clear({silent:!0}),this.parseLocation(e,t)},parseLocation:function(e,t){if(!e)return;var n={};n.type=e.type,n.name=t?null:e.name;var r=e.geo_code;n.lat=r&&r.latitude||e.latitude,n.lng=r&&r.longitude||e.longitude,n.airport_code=e.closest_airport&&e.closest_airport.iata_code||e.closest_airport||e.location;var i=e.address||e;return n.city=i.city,n.county=i.county||i.county,n.state=i.state_code||i.state,n.postal_code=i.postal_code,n.country=i.country_code||i.country,n.label=i.label,this._parseAddressLines(n,i,t),n.street=n.street||i.street,n.general_location=i&&i.general_location||e.general_location||"",n.location_code=e.location_code,n.vendor_code=e.vendor_code,n.property_id=e.property_id,n.traffic=e.traffic&&e.traffic.covered,n.one_line_description=e.one_line_description,n.trip_location_reference=e.trip_location_reference,n.start_time_hint=e.start_time_hint,n}};return n}),define("models/location",["jquery","underscore","backbone","models/model","parsers/location_parser","strings"],function(e,t,n,r,i,s){var o=r.extend({initialize:function(e,n){t.extend(this,i)},displayAddress:function(){var e=this.get("address_lines");if(e&&e.length>0)return e.join("<br />");var n=t.compact(new Array(this.get("street"),this.get("city"),this.get("state"),this.get("postal_code"),this.get("county"),this.get("country")));if(n.length>0)return n.join(", ");if(n.length===0)return this.get("general_location")||""},validate:function(e){var n=[];return t.isEmpty(e.street)&&t.isEmpty(e.city)&&t.isEmpty(e.state)&&t.isEmpty(e.postal)&&t.isEmpty(e.country)&&n.push({message:s.ErrorLocationAllBlank}),!t.isEmpty(e.postal)&&t.isEmpty(e.country)&&n.push({fieldName:"postal_code",message:s.ErrorPostalCountryBlank}),t.any(n)?this.set({error:n},{silent:!0}):(this.unset("error",{silent:!0}),null)},validateErrors:function(e){var n=[],r=this.get("lat"),i=this.get("lng");return r=typeof r=="number"?r.toString():r,i=typeof i=="number"?i.toString():i,(t.isEmpty(r)||t.isEmpty(i))&&n.push({message:e+s.ErrorCantBeBlank}),n},hasAddressLines:function(){return!!this.get("address_lines")},getAddressLines:function(){var e=this.get("address_lines");return t.isEmpty(e)&&(e=this.getGenericAddressLines()),e},getGeneralLocation:function(){return this.get("general_location")},getGenericSubTitle:function(){var e="",n=this.get("name"),r=this.getGenericAddress(),i=this.getGenericCityStateCountry();return t.isEmpty(n)?t.isEmpty(r)?t.isEmpty(i)||(e=i):e=r:e=n,e},getGenericAddressLines:function(){var e=[],t=this.getGenericAddress(),n=this.getGenericCityStateCountry();return t&&e.push(t),n&&e.push(n),e},getGenericAddress:function(){var e=this.get("street");return e},getGenericCityStateCountry:function(){var e,n=t.compact(new Array(this.getCity(),this.getState(),this.getCountry())),r=n.length;return r>0&&(r===1?e=n[0]:e=n.join(", ")),e},isExactMatch:function(){return!!this.get("exact_match")},isGeocoded:function(){return t.isNumber(this.get("lat"))&&t.isNumber(this.get("lng"))},removeGeocoding:function(){delete this.attributes.lat,delete this.attributes.lng},shortDisplayName:function(){return this.displayAddress()},getAirportCode:function(){return this.get("closest_airport")||this.get("airport_code")},getCity:function(){return this.get("city")},getState:function(){return this.get("state")},getCountry:function(){return this.get("country")},getOneLineDescription:function(){return this.get("one_line_description")},isTrafficCovered:function(){return this.get("traffic")},getTripLocationReference:function(){return this.get("trip_location_reference")},getStartTimeHint:function(){return this.get("start_time_hint")},getMapConfig:function(){return{latitude:this.get("lat"),longitude:this.get("lng")}},getDisplayableName:function(){return this.get("label")||this.get("name")}});return o}),define("parsers/vehicle_location_parser",["underscore","backbone","parsers/location_parser"],function(e,t,n){var r={parse:function(e){return this.clear({silent:!0}),this.parseVehicleLocation(e)},parseVehicleLocation:function(e){var t=n.parseLocation(e);return e.vendor&&(t.name=e.vendor.name),t.vendor_code=e.vendor_code,t.search_distance_km=e.search_distance_km,t.search_distance_mi=e.search_distance_mi,t}};return r}),define("models/vehicle_location",["jquery","underscore","backbone","models/model","models/location","parsers/vehicle_location_parser","strings"],function(e,t,n,r,i,s,o){var u=i.extend({initialize:function(e,n){t.extend(this,s)},displayAddress:function(){var e=i.prototype.displayAddress.call(this),n=this.get("name");return t.isEmpty(n)?e:n+"<br />"+e},validateErrors:function(e){var t=[];return this.get("vendor_code")!==undefined||this.get("lat")!==undefined?t:(t.push(e+o.ErrorCantBeBlank),t)}});return u}),define("parsers/hotel_location_parser",["underscore","backbone","parsers/location_parser"],function(e,t,n){var r={parse:function(e){return this.clear({silent:!0}),this.parseHotelLocation(e)},parseHotelLocation:function(e){var t=n.parseLocation(e);return t.name=e.name,t.property_id=e.property_id,t.search_distance_km=e.search_distance_km,t.search_distance_mi=e.search_distance_mi,t.thumbnail_medium=e.thumbnail_medium,t.thumbnail_xlarge=e.thumbnail_xlarge,t.airport_code=e.airport_code,t}};return r}),define("models/hotel_location",["jquery","underscore","backbone","models/model","models/location","parsers/hotel_location_parser","strings"],function(e,t,n,r,i,s,o){var u=i.extend({idAttribute:"property_id",initialize:function(e,n){t.extend(this,s)},displayAddress:function(){var e=i.prototype.displayAddress.call(this),n=this.get("name");return t.isEmpty(n)?e:n+"<br />"+e},validateErrors:function(){var e=[];return t.isEmpty(this.get("property_id"))&&e.push({fieldName:"property_id",message:o.ErrorLodgingBlank}),e}});return u}),define("parsers/trip_item_parser",["underscore","backbone","helpers","models/location","models/vehicle_location","models/hotel_location","models/phone_number"],function(e,t,n,r,i,s,o){var u={parse:function(t){var n;if(this._isTripResponse(t)){var r=this.get("id"),i=this.trip.parse(t);this.trip.set(i,{silent:!0}),r=r||e.max(this.trip.tripItems.pluck("id"));var s=this.trip.tripItems.get(r);n=s.attributes,this.setStartLocation(s.getStartLocation()),this.setEndLocation(s.getEndLocation()),this.setPhoneNumbers(s.getPhoneNumbers())}else{if(t instanceof Array)return!1;n=this.parseTripItem(t)}return n},_isTripResponse:function(e){return e["@name"]==="trip"},_hasChangeEventsFor:function(t,n){return e.any(t,function(e){return e.name===n})},parseTripItem:function(e){var t={};t.id=e.id,t.named_type=n.capitalize(e.type),t.read_only=e.read_only,t.calendar_start=e.start_time.time,t.calendar_start_timezone_name=e.start_time.tz_name,t.calendar_end=e.end_time.time,t.calendar_end_timezone_name=e.end_time.tz_name,t.note=e.note,t.for_business=e.for_business||!1,t.corporation=e.corporation||"",e.itinerary_ref&&(t.itinerary_ref=e.itinerary_ref.id+"",t.itinerary_locator=e.itinerary_ref.locator||""),this.set(t,{silent:!0});var r="parse"+t.named_type+"TripItem";this[r](e)},parseAirTripItem:function(e){var t={},n=e.air_reservation,r=n.flight,i=n.seats,s=r.aircraft,o=r.operating_airline,u=r.departure_airport,a=r.arrival_airport,f=r.airline,l=f.phones,c=r.change_events,h=this._hasChangeEventsFor(c,"departure_gate"),p=this._hasChangeEventsFor(c,"departure_terminal"),d=this._hasChangeEventsFor(c,"arrival_gate"),v=this._hasChangeEventsFor(c,"arrival_terminal"),m=this._hasChangeEventsFor(c,"baggage_claim");t.type=e.type,t.num_following=e.num_following,t.confirmation_number=n.reservation_number,t.seat_map_url=n.seat_map_url,t.baggage_claim=n.flight.baggage_claim,t.cancelled=r.cancelled===!0,t.hasChangeOrCancel=c&&c.length>0||t.cancelled,t.flight_number=r.flight_number,t.scheduled_departure=t.start_date=t.start_time=r.scheduled_departure,t.scheduled_arrival=t.end_date=t.end_time=r.scheduled_arrival,t.status_code=r.status_code,t.completed=r.completed,t.alt_schedules_avail=r.alt_schedules_avail,t.estimated_departure=r.estimated_departure,t.estimated_arrival=r.estimated_arrival,t.extended_status_code=r.extended_status_code,t.departure_status=r.departure_status,t.arrival_status=r.arrival_status,t.departure_terminal=r.departure_terminal,t.departure_gate=r.departure_gate,t.arrival_terminal=r.arrival_terminal,t.arrival_gate=r.arrival_gate,i&&i[0]&&i[0].number&&(t.seat_number=i[0].number),t.departure_terminal_or_gate_change=!!h||!!p,t.arrival_terminal_or_gate_change=!!d||!!v,t.baggage_claim_change=!!m,s&&(t.aircraft_description=s.description),o&&(t.operated_by=o.name),t.airline=f.name,t.airline_code=f.iata_code;var g=this.parseAirport(u);this.setStartLocation(g);var y=this.parseAirport(a);this.setEndLocation(y),t.departure_airport_name=u.name,t.departure_airport_code=u.iata_code,t.departure_airport_city=u.city,t.arrival_airport_name=a.name,t.arrival_airport_code=a.iata_code,t.arrival_airport_city=a.city,t.arrival_airport_general_location=a.general_location;var b=this.parsePhoneNumbers(l);this.addPhoneNumbers(b),this.set(t,{silent:!0})},parseVehicleTripItem:function(e){var t={},n=e.vehicle_reservation,r=n.vendor,i=n.pickup_location.vehicle_location,s=this.parseVehicleLocation(i,{vendor_code:r.code});t.type=e.type,t.start_date=t.start_time=n.pickup_time,t.end_date=t.end_time=n.return_time,t.confirmation_number=n.confirmation_code,t.vehicle_desc=n.vehicle_desc,t.item_title=t.name=t.map_name=n.vendor.name,t.general_location=i.address.general_location,t.general_information=i.general_information,t.last_updated=i.last_updated,t.operation_times=i.consolidated_operation_times,t.shuttle_information=i.shuttle_details,this.setStartLocation(s);if(n.return_location){var o=n.return_location.vehicle_location,u=this.parseVehicleLocation(o,{vendor_code:r.code});this.setEndLocation(u),t.end_info={phoneNumbers:o.phones,operation_times:o.consolidated_operation_times,general_information:o.general_information,shuttle_details:o.shuttle_details}}var a=this.parsePhoneNumbers(n.vendor.phones);this.addPhoneNumbers(a),this.set(t,{silent:!0})},parseHotelTripItem:function(e){var t={},n=e.hotel_reservation,r=n.hotel_property,i=r.address,s=r.hotel_details,o=this.parseHotelLocation(i,{name:r.name,geo_code:s.geo_code,airport_code:s.airport.code,property_id:r.property_id});t.type=e.type,t.start_date=t.start_time=e.start_time.time,t.end_date=t.end_time=e.end_time.time,t.confirmation_number=n&&n.confirmation_number,t.cancellation_number=n&&n.cancellation_number,t.item_title=t.name=r.name,t.general_location=t.map_name=i.general_location,t.long_description=s.long_description,t.num_rooms=s.num_rooms,t.num_floors=s.num_floors,t.star_rating=s.awards&&s.awards[0]&&s.awards[0].rating,t.amenities=s.amenities,t.multi_media_objects=r.multi_media_objects,this.setStartLocation(o);var u=this.parsePhoneNumbers(s.phones);this.addPhoneNumbers(u),this.set(t,{silent:!0})},parseGenericTripItem:function(e,t){var r={};t=e.generic_reservation;var i=t.orig_location,s=t.dest_location;r.type=n.capitalize(t.type),r.start_date=r.start_time=t.start_date,r.end_date=r.end_time=t.end_date,r.confirmation_number=t.confirmation_number,r.name=i.name,r.short_description=i.name,r.map_name=i.name;var o=this.parseLocation(i,r);this.setStartLocation(o);var u=this.parseLocation(s,r);this.setEndLocation(u);var a=this.parsePhoneNumbers(t.phones);this.addPhoneNumbers(a),this.set(r,{silent:!0})},parsePhoneNumbers:function(t){return e.map(t,function(e){return new o({type:e.type,number:e.number})})},parseAirport:function(e){var t={city:e.city,name:e.name,closest_airport:{iata_code:e.iata_code},geo_code:{latitude:e.latitude,longitude:e.longitude}};return this.parseLocation(t)},parseLocation:function(e,t){var n=new r;return n.set(n.parse(e,t),{silent:!0}),n},parseVehicleLocation:function(e){var t=new i;return t.set(t.parse(e),{silent:!0}),t},parseHotelLocation:function(t,n){var r=new s,i=e.extend(t,n);return r.set(r.parse(t),{silent:!0}),r}};return u}),define("models/trip_item",["helpers","jquery","underscore","backbone","moment","models/model","proxies/trip_item_proxy","collections/phone_number_list","parsers/trip_item_parser","strings"],function(e,t,n,r,i,s,o,u,a,f){var l=s.extend({initialize:function(e,t){t=t||{},n.extend(this,a),this.proxy=null,this.trip=t.trip,this.phoneNumbers=new u,this.initTripItem&&this.initTripItem(e,t)},isFirst:function(){return this===this.trip.tripItems.models[0]},isUpNext:function(e){if(this.isFirst()){e=typeof e!="undefined"?e:new Date;var t=i(e),n=i(this.getStartTime(),"YYYY-MM-DDTH:m:s");return t>n?!1:n.diff(t,"hours")<=24}return this.isEndingNext()?!1:this===this.trip.getUpNextTripItem(e)},isNow:function(e){return!this.isHotel()&&this===this.trip.getNowTripItem(e)},getTrip:function(){return this.trip},getTripId:function(){return this.trip.get("id")||this.trip.id},getNamedType:function(){return this.get("named_type")},getType:function(){return this.get("type")},isImported:function(){return!!this.get("itinerary_ref")},isManuallyAdded:function(){return!this.isImported()},isEditingAndImported:function(){return!this.isNew()&&!this.isManuallyAdded()},isAir:function(){return this.get("named_type")==="Air"},isVehicle:function(){return this.get("named_type")==="Vehicle"},isHotel:function(){return this.get("named_type")==="Hotel"},isRail:function(){return this.get("named_type")==="Generic"&&this.get("type")==="Rail"},isCruise:function(){return this.get("named_type")==="Generic"&&this.get("type")==="Cruise"},isGroundTransportation:function(){return this.get("named_type")==="Generic"&&this.get("type")==="Ground_transportation"},isFerry:function(){return this.get("named_type")==="Generic"&&this.get("type")==="Ferry"},isMeeting:function(){return this.get("named_type")==="Generic"&&this.get("type")==="Meeting"},hasEndingItineraryItem:function(){return this.isStartAndEndOnSameDay()?!1:this.isVehicle()||this.isHotel()||this.isCruise()||this.isRail()||this.isGroundTransportation()||this.isFerry()||this.isMeeting()},isConnectionable:function(){return this.isAir()&&(this.hasConnections()||this.hasNotEnded())},hasConnections:function(){return parseInt(this.get("num_following"),10)>0},getStartTime:function(){return this.get("calendar_start")},getEndTime:function(){return this.get("calendar_end")},getScheduledDeparture:function(){return this.get("scheduled_departure")},getScheduledArrival:function(){return this.get("scheduled_arrival")},getEstimatedDeparture:function(){return this.get("estimated_departure")},getEstimatedArrival:function(){return this.get("estimated_arrival")},isStartAndEndOnSameDay:function(){var e=this.getStartTime(),t=i(e,"YYYY-MM-DDTH:m:s").startOf("day"),n=this.getEndTime(),r=i(n,"YYYY-MM-DDTH:m:s").startOf("day");return t.valueOf()===r.valueOf()},isStartingNext:function(e){e=typeof e!="undefined"?e:new Date;var t=i(e),n=i(this.getStartTime(),"YYYY-MM-DDTH:m:s");return t<n},isEndingNext:function(e){return this.isCurrent(e)||this.isPast(e)},isEndingToday:function(e){e=typeof e!="undefined"?e:new Date;var t=i(e).startOf("day"),n=i(this.getEndTime(),"YYYY-MM-DDTH:m:s").startOf("day");return t.valueOf()===n.valueOf()},isCurrent:function(e){e=typeof e!="undefined"?e:new Date;var t=i(e),n=i(this.getStartTime(),"YYYY-MM-DDTH:m:s"),r=i(this.getEndTime(),"YYYY-MM-DDTH:m:s");return n<t&&t<r},isPast:function(e){e=typeof e!="undefined"?e:new Date;var t=i(e),n=i(this.getEndTime(),"YYYY-MM-DDTH:m:s");return t>n},hasEnded:function(){return!!this.get("completed")},hasAltSchedulesAvail:function(){return!!this.get("alt_schedules_avail")},hasNotEnded:function(){return!this.hasEnded()},isBooking:function(){return!!this.get("itinerary_ref")},addPhoneNumber:function(e){this.phoneNumbers.add(e)},addPhoneNumbers:function(e){this.phoneNumbers.add(e)},hasPhoneNumbers:function(){return this.phoneNumbers.any()},getPhoneNumbers:function(){return this.phoneNumbers},setPhoneNumbers:function(e){this.phoneNumbers=e},getStartLocation:function(){return this.startLocation},setStartLocation:function(e,t){t=t||{},this.startLocation=e,t.silent||this.change()},getEndLocation:function(){return this.endLocation},setEndLocation:function(e,t){t=t||{},this.endLocation=e,t.silent||this.change()},removeEndLocation:function(){this.endLocation=null},getWeatherAirportCode:function(){var e=this.isAir()?this.getEndLocation():this.getStartLocation();return e&&e.get("airport_code")},getMapLocation:function(){return this.isAir()?this.getEndLocation():this.getStartLocation()},hasDateTimeRange:function(e){e=e||this.attributes;var t=!n.isEmpty(e.start_date)&&!n.isEmpty(e.start_time),r=!n.isEmpty(e.end_date)&&!n.isEmpty(e.end_time);return t&&r},isInvalidDateTimeRange:function(e){return e=e||this.attributes,this.hasDateTimeRange(e)?!1:!0},isExpiredDateTimeRange:function(e){return e=e||this.attributes,this.hasDateTimeRange(e)?!1:!1},hasChangeOrCancel:function(){return this.attributes.hasChangeOrCancel},getTitle:function(){return this.get("name")},getSubtitle:function(){return this.get("general_location")},getEvents:function(){return n.pluck(this.trip.eventsGroupedByDay,"events")},isWorldMate:function(){return this.trip.isWorldMate()},initDefaultDateTimesWithFallback:function(e,t,r,s,o){var u=e&&e.get("default_date_and_times"),a;u?a={start_date:u[t],start_time:u[r],end_date:u[s],end_time:u[o]}:a={start_date:i().format("YYYY-MM-DD"),start_time:i().format(),end_date:i().format("YYYY-MM-DD"),end_time:i().format()},this.set(n.defaults(this.attributes,a),{silent:!0})}});return l}),define("proxies/air_trip_item_proxy",["helpers","proxies/proxy","proxies/trip_item_proxy"],function(e,t,n){var r=n.extend({_getPostSubPath:function(){return"monitor_flight"},_getAttrsNamespace:function(){return this.model.isNew()?"flight":"item"},_getAttrs:function(){var e={};return this.model.isNew()&&(e.airline_code=this.model.get("airline_code")||this.model.get("airlineCode"),e.departure_date=this.model.get("departure_date")||this.model.get("departureDate"),e.flight_number=this.model.get("flight_number")||this.model.get("flightNumber"),e.departure_airport=this.model.get("departure_airport_code")||this.model.get("departureAirport"),e.arrival_airport=this.model.get("arrival_airport")||this.model.get("arrivalAirport"),e.trip_item_id=this.model.get("previous_trip_item_id")||this.model.get("previousTripItemId")),e.for_business=this.model.get("for_business"),e.confirmation_number=this.model.get("confirmation_number")||this.model.get("confirmationNumber"),e.note=this.model.get("note"),e}});return r}),define("models/air_trip_item",["jquery","underscore","backbone","proxies/air_trip_item_proxy","models/trip_item","helpers","strings"],function(e,t,n,r,i,s,o){var u=i.extend({defaults:{named_type:"Air"},initTripItem:function(e,t){this.proxy=new r({},{model:this})},isCancelled:function(){return this.get("cancelled")||!1},isEarly:function(){return this.get("arrival_status")==="early"},hasDepartureStatus:function(){return!t.isEmpty(this.get("departure_status"))},isCancelledOrDelayed:function(){return this.isCancelled()||this.hasDepartureStatus()},isDeparted:function(){return t.include(["AR","AG","LR","LG"],this.get("extended_status_code"))},hasLanded:function(){return this.get("extended_status_code")==="LR"},hasArrived:function(){return this.get("extended_status_code")==="LG"},hasArrivalStatus:function(){return!t.isEmpty(this.get("arrival_status"))},hasDepartureTerminalOrGateChange:function(){return this.get("departure_terminal_or_gate_change")},hasArrivalTerminalOrGateChange:function(){return this.get("arrival_terminal_or_gate_change")},hasSeatMapUrl:function(){return!!this.get("seat_map_url")},getAirlineName:function(){return this.get("airline")},getAirlineCode:function(){return this.get("airline_code")},getFlightNumber:function(){return this.get("flight_number")},getDepartureDate:function(){return this.get("scheduled_departure")},getDepartureTime:function(){return this.get("scheduled_departure")},getDepartureAirportCode:function(){return this.startLocation.get("airport_code")},getDepartureAirportName:function(){return this.startLocation.get("name")},getDepartureCity:function(){return this.startLocation.get("city")},getArrivalAirportCode:function(){return this.endLocation.get("airport_code")},getArrivalAirportName:function(){return this.endLocation.get("name")},getArrivalCity:function(){return this.endLocation.get("city")},hasCabinAvailabilityData:function(){return this.cabinAvailabilities&&this.cabinAvailabilities.any()},hasNoCabinAvailabilityData:function(){return!this.hasCabinAvailabilityData()},isAvailable:function(){return this.cabinAvailabilities.any(function(e){return e.isAvailable()})},getAvailableCabins:function(){return this.cabinAvailabilities.select(function(e){return e.isAvailable()})},isSoldOut:function(){return!this.isAvailable()},hasPlaneChange:function(){var e=!!this.get("last_segment");return!e},isNonStop:function(){return this.get("stops")===0||this.get("stops")==="0"},getNumberStops:function(){return this.get("stops")},hasOnlyOneStop:function(){return this.get("stops")===1||this.get("stops")==="1"},getFlightSummary:function(){return this.isNonStop()?o.Nonstop:this.hasOnlyOneStop()?o.Stop:o.Stops+" "+this.getNumberStops()},getAvailabilitySummary:function(){if(this.hasNoCabinAvailabilityData())return o.SeatAvailUnknown;if(this.isSoldOut())return o.SoldOut;var e=this.getAvailableCabins(),n=t.map(e,function(e){return e.get("available")?s.capitalize(e.get("name")):!1});return n.join(", ")},isVendor:function(e){return this.get("airline")===e.get("company")},getContextTitle:function(){var e=this.getAirlineCode(),t=this.getFlightNumber(),n=this.getDepartureAirportCode(),r=this.getArrivalAirportCode();return e+t+" "+n+"-"+r},icon_url:function(){return"touch/img/TC_tripIcon_flights_45x45.png"},toNew:function(){this.set("previous_trip_item_id",this.id,{silent:!0}),delete this.id}});return u}),define("proxies/generic_trip_item_proxy",["underscore","proxies/proxy","proxies/trip_item_proxy"],function(e,t,n){var r=n.extend({_getPostSubPath:function(){return"add_generic"},_getAttrsNamespace:function(){return null},_getAttrs:function(){var e={},t=this.model.isNew()?"generic":"item";return e[t]=this._getGenericAttributes(),e.orig_address=this._getOrigAttributes(),e.dest_address=this._getDestAttributes(),e},_getGenericAttributes:function(){var e=this.model.get("start_time"),t=this.model.get("end_time"),n={};return n.type=this.model.get("type"),n.name=this.model.get("name"),n.start_time=e,n.end_time=t,n.phone_number=this.model.get("phone_number"),n.confirmation_number=this.model.get("confirmation_number"),n.note=this.model.get("note"),n.for_business=this.model.get("for_business"),n},_getOrigAttributes:function(){var e=this.model.getStartLocation(),t=e.attributes;return t.postal=t.postal_code,t.label=t.label||t.name,delete t.address_lines,delete t.general_location,delete t.postal_code,delete t.thumbnail_medium,delete t.thumbnail_xlarge,delete t.search_distance_km,delete t.search_distance_mi,delete t.name,delete t.airport_code,delete t.county,t},_getDestAttributes:function(e){if(!this.model.isTransportation())return;var t=this.model.getEndLocation(),n=t.attributes;return n.postal=n.postal_code,n.label=n.label||n.name,delete n.address_lines,delete n.general_location,delete n.postal_code,delete n.thumbnail_medium,delete n.thumbnail_xlarge,delete n.search_distance_km,delete n.search_distance_mi,delete n.name,delete n.airport_code,delete n.county,n},_getTripId:function(){return this.model.getTripId()}});return r}),define("models/generic_trip_item",["jquery","underscore","backbone","namespace","moment","proxies/generic_trip_item_proxy","models/trip_item","models/location","strings"],function(e,t,n,r,i,s,o,u,a){var f=o.extend({defaults:{named_type:"Generic",confirmation_number:"",note:""},initTripItem:function(e,t){this.proxy=new s({},{model:this}),this.startLocation=t.start_location||t.startLocation||new u,this.endLocation=t.end_location||t.endLocation||new u,this.type=this.attributes.type=t.type,this.initDefaultDateTimesWithFallback(t.trip,"generic_item_start_date","generic_item_start_time","generic_item_end_date","generic_item_end_time")},validate:function(e){e=e||this.attributes;if(this.isEditingAndImported())return;var n=[];t.isEmpty(e.name)&&n.push({fieldName:"name",message:this.nameLabel()+a.ErrorCantBeBlank}),t.isEmpty(e.start_date)&&n.push({fieldName:"start_date",message:a.ErrorStartDateBlank}),t.isEmpty(e.start_time)&&n.push({fieldName:"start_time",message:a.ErrorStartTimeBlank}),t.isEmpty(e.end_date)&&n.push({fieldName:"end_date",message:a.ErrorEndDateBlank}),t.isEmpty(e.end_time)&&n.push({fieldName:"end_time",message:a.ErrorEndTimeBlank}),!t.isEmpty(e.start_time)&&!t.isEmpty(e.end_time)&&i(e.end_time)<i(e.start_time)&&n.push({fieldName:"end_time",message:a.ErrorEndTimeBeforeStartTime});if(this.isNew()){var r=this.startLocation.validateErrors(this.startLocationLabel());n=n.concat(r);if(this.isTransportation()){var s=this.endLocation.validateErrors(this.endLocationLabel());n=n.concat(s)}}return t.any(n)?this.set({error:n},{silent:!0}):(this.unset("error",{silent:!0}),null)},getPhoneNumbers:function(){var e=this.phoneNumbers.first();return e&&e.get("number")||""},isTransportation:function(){return r.otherEventsMeta[this.type.toLowerCase()]?r.otherEventsMeta[this.type.toLowerCase()].is_transportation:!1},startLocationLabel:function(){return r.otherEventsMeta[this.type]?r.otherEventsMeta[this.type].start_location_label:a.StartLocation},endLocationLabel:function(){return r.otherEventsMeta[this.type]?r.otherEventsMeta[this.type].end_location_label:a.EndLocation},nameLabel:function(){return r.otherEventsMeta[this.type]?r.otherEventsMeta[this.type].name_label:a.Name},clone:function(){var e=new f(this.attributes,{start_location:this.startLocation.clone(),end_location:this.endLocation.clone(),type:this.get("type")});return e.trip=this.trip,e.phoneNumbers=this.phoneNumbers.clone(),e.id=this.id,e},merge:function(e){this.set(e.attributes),this.phoneNumbers.reset(e.phoneNumbers.models),this.startLocation.set(e.startLocation.attributes),this.endLocation.set(e.endLocation.attributes)},getSubtitle:function(){return null}});return f}),define("proxies/hotel_trip_item_proxy",["proxies/proxy","proxies/trip_item_proxy"],function(e,t){var n=t.extend({_getPostSubPath:function(){return"add_hotel"},_getAttrs:function(){var e={},t=this.model.isNew()?"hotel":"item",n={},r=this.model.get("start_time"),i=this.model.get("end_time");return this.model.isNew()?(n.arriving=r,n.departing=i):(n.start_time=r,n.end_time=i),n.confirmation_number=this.model.get("confirmation_number"),n.note=this.model.get("note"),n.for_business=this.model.get("for_business"),this.model.isNew()&&(n.property_id=this.model.getPropertyId()),e[t]=n,e}});return n}),define("models/hotel_trip_item",["underscore","models/trip_item","proxies/hotel_trip_item_proxy","models/hotel_location","moment","strings"],function(e,t,n,r,i,s){var o=t.extend({defaults:{named_type:"Hotel",confirmation_number:"",note:""},initTripItem:function(e,t){this.startLocation=t.start_location||new r,this.proxy=new n({},{model:this}),this.initDefaultDateTimesWithFallback(t.trip,"hotel_check_in_date","hotel_check_in_time","hotel_check_out_date","hotel_check_out_time")},validate:function(t){if(this.isEditingAndImported())return;var n=[];e.isEmpty(t.start_date)&&n.push({fieldName:"start_date",message:s.ErrorCheckInDateBlank}),e.isEmpty(t.start_time)&&n.push({fieldName:"start_time",message:s.ErrorCheckInTimeBlank}),e.isEmpty(t.end_date)&&n.push({fieldName:"end_date",message:s.ErrorCheckOutDateBlank}),e.isEmpty(t.end_time)&&n.push({fieldName:"end_time",message:s.ErrorCheckOutTimeBlank}),!e.isEmpty(t.start_time)&&!e.isEmpty(t.end_time)&&i(t.end_time)<i(t.start_time)&&n.push({fieldName:"end_time",message:s.ErrorCheckOutTimeBeforeCheckInTime});if(this.isNew()&&!this.isManualAdd){var r=this.startLocation.validateErrors(s.LodgingLocation);n=n.concat(r)}return e.any(n)?n:null},getMapName:function(){return this.get("map_name")},getPropertyId:function(){if(e.isEmpty(this.startLocation))return;return this.startLocation.get("property_id")},isCancelled:function(){return!!this.get("cancellation_number")},clone:function(){var e=new o(this.attributes,{startLocation:this.startLocation});return e.trip=this.trip,e.id=this.id,e}});return o}),define("proxies/vehicle_trip_item_proxy",["proxies/proxy","proxies/trip_item_proxy"],function(e,t){var n=t.extend({_getPostSubPath:function(){return"add_vehicle"},_getAttrsNamespace:function(){return this.model.isNew()?"car":"item"},_getAttrs:function(){var e={};return e.note=this.model.get("note"),e.for_business=this.model.get("for_business"),e.confirmation_number=this.model.get("confirmation_number"),e.start_time=this.model.get("start_time"),e.end_time=this.model.get("end_time"),this.model.isNew()&&(e.vendor_code=this.model.getVendorCode(),e.pu_location_code=this.model.getPickupLocationCode(),e.rt_location_code=this.model.getDropoffLocationCode()),e}});return n}),define("models/vehicle_trip_item",["jquery","underscore","backbone","moment","models/trip_item","proxies/vehicle_trip_item_proxy","models/vehicle_location","models/generic_trip_item","strings"],function(e,t,n,r,i,s,o,u,a){var f=i.extend({defaults:{named_type:"Vehicle",confirmation_number:"",note:""},initTripItem:function(e,t){this.proxy=new s({},{model:this}),this.startLocation=t.start_location||new o,this.endLocation=t.end_location||new o,this.initDefaultDateTimesWithFallback(t.trip,"vehicle_pick_up_date","vehicle_pick_up_time","vehicle_drop_off_date","vehicle_drop_off_time")},validate:function(e){if(this.isEditingAndImported())return;var n=[];return t.isEmpty(e.start_date)&&n.push({fieldName:"start_date",message:a.ErrorPickUpDateBlank}),t.isEmpty(e.start_time)&&n.push({fieldName:"start_time",message:a.ErrorPickUpTimeBlank}),t.isEmpty(e.end_date)&&n.push({fieldName:"end_date",message:a.ErrorDropOffDateBlank}),t.isEmpty(e.end_time)&&n.push({fieldName:"end_time",message:a.ErrorDropOffTimeBlank}),!t.isEmpty(e.start_time)&&!t.isEmpty(e.end_time)&&r(e.end_time)<r(e.start_time)&&n.push({fieldName:"end_time",message:a.ErrorDropOffTimeBeforePickUpTime}),this.isNew()&&(this.isManualAdd?this.getStartLocation().get("lat")===undefined&&n.push({fieldName:"startLocation",message:a.ErrorPickUpLocationBlank}):this.getStartLocation().get("vendor_code")===undefined&&n.push({fieldName:"startLocation",message:a.ErrorPickUpLocationBlank}),this.isManualAdd?this.getEndLocation().get("lat")===undefined&&n.push({fieldName:"startLocation",message:a.ErrorDropOffLocationBlank}):this.getEndLocation().get("vendor_code")===undefined&&n.push({fieldName:"endLocation",message:a.ErrorDropOffLocationBlank})),t.any(n)?n:null},getVehicleDescription:function(){return this.get("vehicle_desc")},getVendorCode:function(){var e=this.startLocation&&this.startLocation.get("vendor_code");return e=e||this.endLocation&&this.endLocation.get("vendor_code"),e||""},getGeneralLocation:function(){if(t.isEmpty(this.startLocation))return;return this.startLocation.get("general_location")},getPickupLocationCode:function(){if(t.isEmpty(this.startLocation))return;return this.startLocation.get("location_code")},getDropoffLocationCode:function(){if(t.isEmpty(this.endLocation))return;var e=this.endLocation.get("location_code");return t.isEmpty(e)?this.getPickupLocationCode():e},icon_url:function(){return"touch/img/TC_tripIcon_car_45x45.png"},getSubtitle:function(){return null},clone:function(e,t){var n=e||f,r=new n(this.attributes,{startLocation:this.startLocation,endLocation:this.endLocation,type:t||"vehicle"});return r.trip=this.trip,r.id=this.id,r},toGenericItem:function(){var e=this.clone(u,"ground_transportation");return e}});return f}),define("proxies/messages_proxy",["proxies/proxy"],function(e){var t=e.extend({syncConfig:function(e,t){this.method=e,this.url="/mapi/trips/"+this.collection.trip.id+"/messages.json",this.setupCache(t.isToRefresh)},setupCache:function(e){this.cacheKey="trip_"+this.collection.trip.id+"_messages",this.cacheTTL=5,this.cacheTTLmultiplier="minutes",this.invalidationKeys=[this.cacheKey],e?this.isToRefresh=!0:this.isToRefresh&&delete this.isToRefresh}});return t}),define("collections/message_list",["jquery","underscore","collections/collection","models/message","proxies/messages_proxy"],function(e,t,n,r,i){var s=n.extend({model:r,isLegacy:!1,isFetching:!1,initialize:function(e,t){this.proxy=new i({},{collection:this}),this.trip=t&&t.trip}});return s}),define("proxies/source_proxy",["jquery","proxies/proxy"],function(e,t){var n=t.extend({syncConfig:function(t,n){if(t==="delete"){var r=this.model.collection.getTripId();this.url="/mapi/trips/"+r+"/delete_source.json?"+e.param(this._getAttrs())}},_getAttrs:function(){return{source_id:this.model.id}},toJSON:function(){return this._getAttrs()}});return n}),define("models/source",["jquery","underscore","backbone","models/model","proxies/source_proxy","moment"],function(e,t,n,r,i){var s=r.extend({initialize:function(e,t){this.proxy=new i({},{model:this})}});return s}),define("collections/source_list",["jquery","underscore","collections/collection","models/source"],function(e,t,n,r){var i=n.extend({model:r,initialize:function(e,t){this.trip=t.trip},getTripId:function(){return this.trip.id},getTrip:function(){return this.trip}});return i}),define("collections/trip_item_list",["jquery","underscore","collections/collection","models/trip_item"],function(e,t,n,r){var i=n.extend({model:r,getEndingItineraryList:function(){var e=this.filter(function(e){return e.hasEndingItineraryItem()});return new i(e)},getReversedItineraryList:function(){var e=this.sortBy(function(e){return-parseInt(e.cid.match(/\d+(,\d+)?/)[0],10)});return new i(e)}});return i}),define("parsers/trip_parser",["underscore","backbone","helpers","models/message","models/trip_item","models/air_trip_item","models/generic_trip_item","models/hotel_trip_item","models/vehicle_trip_item","collections/message_list","collections/source_list","collections/trip_item_list"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h={parse:function(e){var t;return this.clear({silent:!0}),this.set(this.defaults,{silent:!0}),this.isServiceError(e)?t=this.parseServiceError(e):t=this.parseTrip(e),t},isServiceError:function(t){return e.isArray(t)&&e.isString(e.first(t))},parseServiceError:function(t){var n={};return n.error=e.first(t),n},parseTrip:function(e){this.id=e.id;var t={};return t.id=e.id,t.user_id=e.user_id,t.name=e.name,t.start_time=e.start_time,t.end_time=e.end_time,t.end_time_utc=e.end_time_utc,t.start_time_utc=e.start_time_utc,t.trip_event_relevance=e.trip_event_relevance,t.most_relevant=e.most_relevant==="true",t.most_relevant_item=e.most_relevant_item&&typeof e.most_relevant_item.index=="number"?e.most_relevant_item.index:0,t.default_item_create_date=e.default_item_create_date,t.destination=e.destination,t.destination_country=e.destination_country,t.for_business=e.for_business,t.item_types=e.item_types,t.active=e.active,t.is_dtr=e.amex_dtr==="true",t.traveler_name=e.traveler_name,t.create_source=e.create_source,t.isFollowing=e.following,t.permissions=e.permissions,t.destination_images={web:e.closest_image_web,xlarge:e.closest_image_mobi_xlarge,large:e.closest_image_mobi_large,medium:e.closest_image_mobi_medium,small:e.closest_image_mobi_small},e.default_dates_and_times&&(t.default_date_and_times={flight_departure_date:e.default_dates_and_times.flight_departure_date,generic_item_end_date:e.default_dates_and_times.generic_item_end_date,generic_item_end_time:e.default_dates_and_times.generic_item_end_time,generic_item_start_date:e.default_dates_and_times.generic_item_start_date,generic_item_start_time:e.default_dates_and_times.generic_item_start_time,hotel_check_in_date:e.default_dates_and_times.hotel_check_in_date,hotel_check_in_time:e.default_dates_and_times.hotel_check_in_time,hotel_check_out_date:e.default_dates_and_times.hotel_check_out_date,hotel_check_out_time:e.default_dates_and_times.hotel_check_out_time,vehicle_drop_off_date:e.default_dates_and_times.vehicle_drop_off_date,vehicle_drop_off_time:e.default_dates_and_times.vehicle_drop_off_time,vehicle_pick_up_date:e.default_dates_and_times.vehicle_pick_up_date,vehicle_pick_up_time:e.default_dates_and_times.vehicle_pick_up_time}),this.active=e.active,this.sources=new l(e.sources,{trip:this}),this.tripItems=this.parseTripItems(e.items,this),this.messages=this.messages||new f,e.messages&&(this.messages.isLegacy=!0,this.messages.reset(this.messages.parse(e.messages))),this.eventsGroupedByDay=e.item_date_sequence,t},parseTripItems:function(t,r){r=r||{};var i=new c;if(!t)return i;var s=this,o=e(t).map(function(e){var t=n.capitalize(e.type),i=t+"TripItem",o=s.createTripItem(i,{id:e.id,trip_id:r.id,is_trip_active:r.active},{trip:r});return o.set(o.parse(e),{silent:!0}),o});return i.add(o,{silent:!0}),i},createTripItem:function(e,t,n){switch(e){case"AirTripItem":return new s(t,n);case"HotelTripItem":return new u(t,n);case"GenericTripItem":return new o(t,n);case"VehicleTripItem":return new a(t,n);default:return null}}};return h}),define("proxies/trip_proxy",["proxies/proxy"],function(e){var t=e.extend({syncConfig:function(e,t){this.method=e;switch(e){case"read":this.url="/mapi/trips/"+this.model.id+".json?suppress_messages=true";break;case"update":case"delete":this.url="/mapi/trips/"+this.model.id+".json";break;default:this.url="/mapi/trips.json"}this.cacheKey=this.getCacheKey(),this.cacheTTL=5,this.cacheTTLmultiplier="minutes",this.invalidationKeys=this.getInvalidationKeys(),t.isToRefresh?this.isToRefresh=!0:this.isToRefresh&&delete this.isToRefresh},getCacheKey:function(){return"trip_"+this.model.id},getInvalidationKeys:function(){var e=[this.getCacheKey(),"trip_list","session"],t=this.getFlightGroupIds();for(var n=0;n<t.length;n++)e.push("trip_item_"+t[n]);return e},getFlightGroupIds:function(){var e=[];return this.model.tripItems.each(function(t){t.get("type").toLowerCase()==="air"&&e.push(t.id)}),e},_getAttrs:function(){var e={};if(this.method==="create"||this.method==="update")e.name=this.model.get("name");return this.isToRefresh&&(e.refresh=!0),e}});return t}),define("models/trip",["jquery","underscore","backbone","models/model","parsers/trip_parser","collections/trip_item_list","collections/message_list","proxies/trip_proxy","moment","strings","namespace","helpers"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h=r.extend({name:"trip",initialize:function(e,n){t.extend(this,i),this.tripItems=new s,this.messages=new o([],{trip:this}),this.proxy=new u({},{model:this}),this.setTripFeedView(!1)},validate:function(e){var n=[];return t.isEmpty(e.name)&&n.push({fieldName:"tripname",message:f.ErrorTripNameBlank}),this.validateNameLength(e.name)||n.push({fieldName:"tripname",message:f.ErrorTripNameTooLong}),t.any(n)?n:null},validateNameLength:function(e){return e?e.length<=h.MAX_NAME_SIZE:!0},hasSupportedMessages:function(){return this.messages.any(function(e){return e.isSupported()})},getTripItem:function(e){return this.tripItems.detect(function(t){var n=t.get("id");return n===e||n===parseInt(e,10)})},manualTripItems:function(){return this.tripItems.filter(function(e){return!e.isImported()})},airTripItems:function(e){e=e||{};var t=this.tripItems.filter(function(e){return e.isAir()});return e.filter&&(t=t.filter(e.filter)),new s(t)},connectionAirTripItems:function(){var e=this.tripItems.filter(function(e){return e.isConnectionable()});return new s(e)},hasUnendedAirTripItems:function(){return this.unendedAirTripItems().length>0},unendedAirTripItems:function(){var e=this.tripItems.filter(function(e){return e.isAir()&&!e.hasEnded()});return new s(e)},hasSources:function(){return!!this.sources&&!this.sources.isEmpty()},hasOneAirTripItem:function(){return t.size(this.airTripItems())===1},hasAnyAirTripItems:function(){return this.airTripItems().length>0},hasOneTripItem:function(){return this.tripItems.length===1},hasNoTripItems:function(){return this.tripItems.isEmpty()},hasTripItems:function(){return this.tripItems.length>0},hasEnded:function(){var e=a.utc(this.get("end_time_utc"),"YYYY-MM-DDTHH:mm:ss");return e<a(new Date)},startsSoon:function(){var e=a.utc(this.get("start_time_utc"),"YYYY-MM-DDTHH:mm:ss"),t=e.subtract("hours",4)<=a(new Date);return t&&!this.isInProgress()},isInProgress:function(e){var t=a.utc(this.get("start_time_utc"),"YYYY-MM-DDTHH:mm:ss"),n=t<=a(new Date);return n&&!this.hasEnded()},isMostRelevant:function(){return!!this.get("most_relevant")},getOnlyTripItem:function(){return this.tripItems.first()},getOnlyAirTripItem:function(){return t.first(this.airTripItems())},getTripItems:function(){return this.tripItems},getEndingItineraryTripItems:function(){return this.tripItems.getEndingItineraryList()},setTripItems:function(e){this.tripItems=e},getTripId:function(){return this.get("id")},getName:function(){return this.get("name")},getDestination:function(){return this.get("destination")},getDestinationCountry:function(){return this.get("destination_country")},isActive:function(){return this.get("active")},isFollowing:function(){return!!this.get("isFollowing")},getDestinationImagePath:function(e){return this.get("destination_images")[e]},getNowTripItem:function(e){e=typeof e!="undefined"?e:new Date;var t=this.tripItems.getReversedItineraryList();return t.find(function(e){return e.isCurrent()})},getUpNextTripItem:function(e){if(!this.isActive())return;return e=typeof e!="undefined"?e:new Date,this.tripItems.find(function(t){return!t.isEndingNext(e)})},setTripFeedView:function(e){var t=this.getTripId();t&&(l.tripsIsFeedView[t]=e)},getTripFeedView:function(){return l.tripsIsFeedView[this.getTripId()]},bestViewTypeBasedOnStartTime:function(){var e,t=2192,n=c.dateHelpers.hoursUntil(this.get("start_time"));return this.isActive()&&n<t?e="feed":e="none",e},isWorldMate:function(){return this.get("create_source")==="worldmate"},isAmexDTR:function(){return this.get("is_dtr")},getMostRelevantEvents:function(){var e=this.get("trip_event_relevance");return e?(e.sort(function(e,t){return e.relevant_at_epoch!==t.relevant_at_epoch?e.relevant_at_epoch<t.relevant_at_epoch?-1:1:0}),e):undefined},getMostRelevantEventIndex:function(e){var n=e||Math.round(a.utc().valueOf()/1e3),r=this.getMostRelevantEvents(),i,s;return r===undefined?i=this.get("most_relevant_item"):(s=t.sortedIndex(r,{relevant_at_epoch:n},"relevant_at_epoch"),i=s>0?s-1:0),i!==undefined?i:0},getStartTime:function(){return this.get("start_time")},getStartTimeUTC:function(){return this.get("start_time_utc")},invalidateCache:function(){return this.proxy.invalidateCache()},can:function(e){return this.has("permissions")&&this.get("permissions").indexOf(e)>=0}},{MAX_NAME_SIZE:50});return h}),define("proxies/trip_list_proxy",["proxies/proxy"],function(e){var t=e.extend({url:"/mapi/trips.json",initialize:function(){this.cacheKey="trip_list",this.cacheTTL=15,this.cacheTTLmultiplier="minutes",this.invalidationKeys=[this.cacheKey,"session"]},syncConfig:function(e,t){this.method=e,t.isToRefresh?this.isToRefresh=!0:this.isToRefresh&&delete this.isToRefresh},toJSON:function(){return}});return t}),define("local_storage_facade",[],function(){var e,t={destroy:function(e){this.isPrivateBrowsing()||localStorage.removeItem(e)},read:function(e){var t;return this.isPrivateBrowsing()||(t=localStorage.getItem(e)),t},write:function(e,t){this.isPrivateBrowsing()||localStorage.setItem(e,t)},isPrivateBrowsing:function(){return e===undefined&&this.init(),e},init:function(){e=function(){var e="privateBrowsing",t=window.localStorage,n=!1;try{t.setItem(e,"1"),t.removeItem(e)}catch(r){r.code===22&&t.length===0?n=!0:n=!1}return n}()}};return t}),define("collections/trips",["jquery","underscore","namespace","collections/collection","models/trip","proxies/trip_list_proxy","local_storage_facade"],function(e,t,n,r,i,s,o){var u=r.extend({model:i,initialize:function(){this.proxy=new s({},{collection:this})},addTrip:function(e){this.add(e)},removeTrips:function(e){this.remove(e)},getTripItems:function(e,t){var n=this.get(e);!n||!n.tripItems||n.tripItems.isEmpty()?n.fetch({success:function(e){t.call(this,e.tripItems)}}):t.call(this,n.tripItems)},parse:function(e){var n=t(e).map(function(e){var t=new i;return t.set(t.parse(e),{silent:!0}),t});return n},deleteSelected:function(n,r){r=r||{},t.each(n,function(i,s){var o=this.get(i);if(o){var u={};t.extend(u,{cache_mode:s===n.length-1?o.proxy.CACHE_MODE_DEFER:o.proxy.CACHE_MODE_NONE,success:s===n.length-1?r.success:e.noop}),o.destroy(u)}},this)},invalidateCache:function(){return this.proxy.invalidateCache()},resetAndCache:function(e,t){this.reset(e),o.write(this.proxy.cacheKey,JSON.stringify(t.trips)),o.write(this.proxy.cacheKey+"cachettl",+(new Date)+60*this.proxy.cacheTTL)}});return u}),define("proxies/following_trips_proxy",["proxies/proxy"],function(e){var t=e.extend({baseURL:"/mapi/trips/following.json?active=",initialize:function(){this.cacheKey="following_trip_list",this.cacheTTL=15,this.cacheTTLmultiplier="minutes",this.invalidationKeys=[this.cacheKey,"session"]},syncConfig:function(e,t){var n=this.baseURL+!!t.fetchActiveTrips;this.url=t.fetchAllTrips?this.baseURL:n,this.method=e,t.isToRefresh?this.isToRefresh=!0:this.isToRefresh&&delete this.isToRefresh}});return t}),define("collections/following_trips",["underscore","collections/trips","models/trip","proxies/following_trips_proxy","local_storage_facade"],function(e,t,n,r,i){var s=t.extend({model:n,isFollowing:!0,initialize:function(e,n){t.prototype.initialize.call(this),this.proxy=new r({},{collection:this})},invalidateCache:function(){return this.proxy.invalidateCache()},parse:function(t){var r=e(t).map(function(e){var t=new n;return t.set(t.parse(e),{silent:!0}),t});return r},resetAndCache:function(t){e.isEmpty(t)?(this.reset(),i.destroy(this.proxy.cacheKey),i.destroy(this.proxy.cacheKey+"cachettl")):(this.reset(t),i.write(this.proxy.cacheKey,JSON.stringify(t)),i.write(this.proxy.cacheKey+"cachettl",+(new Date)+60*this.proxy.cacheTTL))}});return s}),define("trips_manager",["collections/trips","collections/following_trips","underscore"],function(e,t,n){var r=function(){function r(){this.collections={trips:new e,followingTrips:new t},this.currentTrip=null,this.currentTripId=null,n.bindAll(this,"getCurrentTrip")}return r.prototype={getTrips:function(){return this.collections.trips},getFollowingTrips:function(){return this.collections.followingTrips},getCurrentTrip:function(){var e=this.getTrip(this.currentTripId);return e},getTrip:function(e){var t=this,r;return n.every(this.collections,function(t){return r=t.get(e),!r}),r},getTripItems:function(e,t){var r;n.every(this.collections,function(t){var n=t.get(e);return r=t,!n}),r.getTripItems(e,t)},getCurrentTripId:function(){return this.currentTripId},setCurrentTripId:function(e){return this.currentTripId=e,this.currentTripId},invalidateCache:function(){return n.each(this.collections,function(e){e.invalidateCache()})},resetAllTrips:function(){return n.each(this.collections,function(e){e.reset(arguments)})}},r}(),i=new r;return window.TripsManager=i,i}),function(e){function i(e){n.each(n.isArray(e)?e:[e],function(e){e.remove(),e.unbind(),e.views&&n.each(e.views,function(e){i(e)}),n.isFunction(e.cleanup)&&e.cleanup.call(e)})}function s(e){function u(n,r){o.cache(t,r),r&&s.html(e.el,s.render(r,n)),i.resolveWith(e,[e.el])}var t,r,i,s=e._options();return{insert:function(t,n){return n?e.view(t,n,!0):e.view("",t,!0)},render:function(a){var f=e.template||s.template;return e.serialize&&(s.serialize=e.serialize),!a&&n.isFunction(s.serialize)?a=s.serialize.call(e):!a&&n.isObject(s.serialize)&&(a=s.serialize),i=o.makeAsync(s,n.bind(u,e,a)),n.isString(f)&&(t=e._prefix+f),(r=o.cache(t))?(u(a,r,t),i):(n.isString(f)?r=s.fetch.call(i,e._prefix+f):f!=null&&(r=s.fetch.call(i,f)),i._isAsync||u(a,r),i)}}}var t=e.Backbone,n=e._,r=e.$,o=t.View.extend({__manager__:{},constructor:function(r){var i=t.LayoutManager.prototype;r=n.extend({},i.options,r),this._render=function(e){return e(this).render()},this.views={},this.render!==i.render&&(this._render=this.render,this.render=i.render),r.paths&&(this._prefix=r.paths.layout||""),r.views&&this.setViews(r.views),this.template&&(r.template=this.template),t.View.call(this,r)},setViews:function(e){n.each(e,function(e,t){n.isArray(e)?n.each(e,function(e){this.view(t,e,!0)},this):this.view(t,e)},this)},view:function(r,s,u){var a,f,l=this;return this.views[r]&&!u&&i(this.views[r]),s.__manager__||(s.__manager__={},s instanceof o||(s._render=s.render,s.render===t.View.prototype.render&&(s._render=function(e){return e(this).render()}),s.views&&(s.options.views=s.views),n.extend(s,{views:{},view:o.prototype.view,setViews:o.prototype.setViews,_options:o.prototype._options})),u||(s.__manager__.isManaged=!0),s.render=function(t){function a(e){u||(f.detach(s.el),f.partial(l.el,r,s.el)),n.isFunction(t)&&t.call(s,s.el)}function c(){s.__manager__.hasRendered||(f.partial(l.el,r,s.el,u),s.delegateEvents(),s.__manager__.hasRendered=!0),i.resolveWith(s,[s.el]).then(a)}var i=f.deferred();if(!s.__manager__.isManaged)return i.resolve(s.el).then(a);try{o.prototype.render.call(s,c)}catch(h){e.setTimeout(function(){o.prototype.render.call(s,c)},0)}return i.promise()},f=s._options(),!s._prefix&&f.paths&&(s._prefix=f.paths.template||""),f.views&&s.setViews(f.views)),u?(a=this.views[r]=this.views[r]||[],a.push(s),s):this.views[r]=s},render:function(e){var t=this,r=this._options(),i=r.deferred();return this._render(s).then(function(){t.__manager__.hasRendered||r.detach(t.el);var e=n.map(t.views,function(e){function i(e,t){if(!e.length)return t();var n=e.shift();n.__manager__.isManaged=!0,n.render(function(){i(e,t)})}var t;return n.isArray(e)?(t=r.deferred(),i(n.clone(e),function(){t.resolve()}),t.promise()):(e.__manager__.isManaged=!0,e.render())});r.when(e).then(function(){i.resolveWith(t,[t.el])})}),i.then(function(){t.delegateEvents(),n.isFunction(e)&&e.call(t,t.el)}).promise()},_options:function(){return n.extend({},o.prototype.options,this.options)}},{_cache:{},cache:function(e,t){if(e in this._cache)return this._cache[e];if(e!=null&&t!=null)return this._cache[e]=t},configure:function(e){n.isObject(e)&&n.extend(o.prototype.options,e)},makeAsync:function(e,t){var n=e.deferred();return n.async=function(){return n._isAsync=!0,t},n}});t.LayoutManager=o,t.LayoutManager.View=t.View,o.prototype.options={paths:{},deferred:function(){return r.Deferred()},fetch:function(e){return n.template(r(e).html())},partial:function(e,t,n,i){var s=t?r(e).find(t):r(e);this[i?"append":"html"](s,n)},html:function(e,t){r(e).html(t)},append:function(e,t){r(e).append(t)},detach:function(e){r(e).detach()},when:function(e){return r.when.apply(null,e)},render:function(e,t){return e(t)}}}(this),define("layoutmanager",["backbone"],function(){}),define("router",["namespace","jquery","underscore","backbone","mediator","moment","trips_manager","layoutmanager"],function(e,t,n,r,i,s,o,u){var a=r.Router.extend({initialize:function(e){this.initBeforeFilters(),this.initRoutes(),this.syncRoutesWithMediatorEvents(),this._bindRoutes()},publicRoutes:{"":"defaultUserView",sign_up:"showSignUp",signin:"showSignIn",login:"login",logout:"logout",terms:"termsNavigation",privacy:"privacy",cookies:"cookies","login/failure/*error":"loginError"},privateRoutes:{trips:"trips","trips/:trip_id/details/:item_id":"showTripItem","trips/:trip_id/seat_maps":"showSeatMapList","trips/:trip_id/details/:item_id/seat_map":"showSeatMap","trips/:trip_id/trip_items/:item_id/location_details":"showLocationDetails","trips/:trip_id/trip_items":"tripItems","trips/:trip_id/trip_items/add":"addTripItem","trips/:trip_id/trip_items/add/:tripItemType":"addTripItem","trips/:trip_id/trip_items/flight":"addTripItem","trips/:trip_id/trip_items/import":"addTripItem","trips/:trip_id/trip_items/index":"indexTripItems","trips/:trip_id/trip_items/phone_numbers":"indexPhoneNumbers","trips/:trip_id/trip_items/phone_numbers/:item_id":"showPhoneNumber","trips/:trip_id/maps/:item_id":"showMap","trips/:trip_id/alt_flights/:item_id":"altFlightsDetails","trips/:trip_id/directions/:item_id":"showDirections","trips/:trip_id":"trip","trips/:trip_id/share":"share","trips/:trip_id/altflights":"altflights","trips/:trip_id/edit":"editTrip","trips/:trip_id/*":"indexTripItems","following_trips/:trip_id":"followingTrip",create:"createTrip",contacts:"contactsShow","trips/:trip_id/amex":"amex","*fallback":"defaultUserView"},routes:{},initRoutes:function(){this.routes=t.extend(this.publicRoutes,this.privateRoutes)},initBeforeFilters:function(){var e=this;n.each(this.privateRoutes,function(t){e[t]=n.wrap(e[t],e._requireSessionFor)})},syncRoutesWithMediatorEvents:function(){var e=this;i.subscribe("trips:index",function(){e._changeURL("trips")}),i.subscribe("trips:edit",function(t){e._changeURL("trips/"+t.tripId+"/edit")}),i.subscribe("trips:rename",function(t){e._changeURL("trips/"+t.tripId+"/rename")}),i.subscribe("trip_items:index",function(t){e._changeURL("trips/"+t.tripId+"/trip_items/index")}),i.subscribe("trip_items:feed",function(t){e._changeURL("trips/"+t.tripId+"/trip_items/index")}),i.subscribe("trip_items:add",function(t){e._changeURL("trips/"+o.getCurrentTripId()+"/trip_items/add")}),i.subscribe("vehicles:add",function(t){e._changeURL("trips/"+o.getCurrentTripId()+"/trip_items/add/vehicle")}),i.subscribe("hotels:add",function(t){e._changeURL("trips/"+o.getCurrentTripId()+"/trip_items/add/lodging")}),i.subscribe("hotels:edit",function(t){e._changeURL("trips/"+o.getCurrentTripId()+"/trip_items/"+t.itemId+"/edit")}),i.subscribe("hotels:locationDetails",function(t){e._changeURL("trips/"+o.getCurrentTripId()+"/trip_items/"+t.itemId+"/location_details")}),i.subscribe("vehicles:locationDetails",function(t){e._changeURL("trips/"+o.getCurrentTripId()+"/trip_items/"+t.itemId+"/location_details")}),i.subscribe("vehicles:edit",function(t){e._changeURL("trips/"+o.getCurrentTripId()+"/trip_items/"+t.itemId+"/edit")}),i.subscribe("generic_item:edit",function(t){e._changeURL("trips/"+o.getCurrentTripId()+"/trip_items/"+t.itemId+"/edit")}),i.subscribe("cruise:add",function(t){e._changeURL("trips/"+o.getCurrentTripId()+"/trip_items/add/cruise")},this),i.subscribe("food:add",function(t){e._changeURL("trips/"+o.getCurrentTripId()+"/trip_items/add/food")},this),i.subscribe("attraction:add",function(t){e._changeURL("trips/"+o.getCurrentTripId()+"/trip_items/add/attraction")},this),i.subscribe("activity:add",function(t){e._changeURL("trips/"+o.getCurrentTripId()+"/trip_items/add/activity")},this),i.subscribe("ferry:add",function(t){e._changeURL("trips/"+o.getCurrentTripId()+"/trip_items/add/ferry")},this),i.subscribe("groundtransportation:add",function(t){e._changeURL("trips/"+o.getCurrentTripId()+"/trip_items/add/ground_transportation")},this),i.subscribe("meeting:add",function(t){e._changeURL("trips/"+o.getCurrentTripId()+"/trip_items/add/meeting")},this),i.subscribe("rail:add",function(t){e._changeURL("trips/"+o.getCurrentTripId()+"/trip_items/add/rail")},this),i.subscribe("trip_items:show",function(t){e._changeURL("trips/"+(o.getCurrentTripId()||t.tripId)+"/details/"+t.itemId)}),i.subscribe("seatmaps:list",function(t){e._changeURL("trips/"+(o.getCurrentTripId()||t.tripId)+"/seat_maps")}),i.subscribe("seatmaps:show",function(t){e._changeURL("trips/"+(o.getCurrentTripId()||t.tripId)+"/details/"+t.itemId+"/seat_map")}),i.subscribe("map:show",function(t){e._changeURL("trips/"+(o.getCurrentTripId()||t.tripId)+"/maps/"+t.itemId)}),i.subscribe("sign_up:show",function(){e._changeURL("sign_up")}),i.subscribe("map:directions",function(t){e._changeURL("trips/"+(o.getCurrentTripId()||t.tripId)+"/directions/"+t.itemId)}),i.subscribe("trips:share",function(t){e._changeURL("trips/"+(o.getCurrentTripId()||t.tripId)+"/share")}),i.subscribe("altflights:show",function(t){e._changeURL("trips/"+(o.getCurrentTripId()||t.tripId)+"/altflights")}),i.subscribe("trips:create",function(t){e._changeURL("create")}),i.subscribe("contacts:show",function(){e._changeURL("contacts")}),i.subscribe("back:history",function(){t("body").removeClass("load"),window.history.back()})},_changeURL:function(e){this.navigate(e,{trigger:!1}),i.publish("changedView","changeURL")},_requireSessionFor:function(t){var n=Array.prototype.slice.call(arguments,1),r=this;e.session.hasNoSession()?e.session.isLoggedOut()?i.publish("session:invalid"):e.session.checkActiveSession({success:function(){t.apply(r,n)}}):t.apply(r,n)},index:function(){this.navigate("login",{trigger:!0})},login:function(){i.publish("session:login")},loginError:function(t){e.flash.addErrorFromURI(t),this.login()},termsPrompt:function(){i.publish("terms:prompt")},amex:function(e){this._setCurTripIfUndefined(e),i.publish("amex_benefits:index",{tripId:e})},_setCurTripIfUndefined:function(e){n.isNumber(o.getCurrentTripId())||o.setCurrentTripId(e)},trip:function(e){this._setCurTripIfUndefined(e),i.publish("trip_items:index",{tripId:e})},followingTrip:function(e){this._setCurTripIfUndefined(e),i.publish("following_trip_items:index",{tripId:e})},editTrip:function(e){this._setCurTripIfUndefined(e),i.publish("trips:edit",{tripId:e})},trips:function(){i.publish("trips:index")},defaultUserView:function(){var e=this.calcUserEntryPoint();i.publish(e.message,e.params)},getMostRelevantTrip:function(){var t=e.session.get("most_relevant_trip_id");return t&&o.getTrips().get(t)},calcUserEntryPoint:function(){var e,t={},n=this.getMostRelevantTrip();return n?(e=n.bestViewTypeBasedOnStartTime(),e==="none"?t.message="trips:index":e==="feed"&&(t.message="trip_items:feed",t.params={tripId:n.getTripId()},n.setTripFeedView(!0))):t.message="trips:index",t},addTripItem:function(e,t){var n,r;o.getCurrentTripId()?n="add":(r=o.getTrips().get(e),n=r.bestViewTypeBasedOnStartTime(),n==="feed"?r.setTripFeedView(!0):n==="none"&&(n="index")),i.publish("trip_items:"+n,{tripId:e})},showTripItem:function(e,t){this._setCurTripIfUndefined(e),i.publish("trip_items:show",{tripId:e,itemId:t})},showSeatMapList:function(e){this._setCurTripIfUndefined(e),i.publish("seatmaps:list",{tripId:e})},showSeatMap:function(e,t){this._setCurTripIfUndefined(e),i.publish("seatmaps:show",{tripId:e,itemId:t})},showLocationDetails:function(e,t){var n=o.getCurrentTrip(),r=n.tripItems.get(t),s;this._setCurTripIfUndefined(e);switch(r.getType().toLowerCase()){case"vehicle":s="vehicles:locationDetails";break;case"hotel":case"lodging":s="hotels:locationDetails"}i.publish(s,{tripId:e,itemId:t})},indexTripItems:function(e){this._setCurTripIfUndefined(e),i.publish("trip_items:index",{tripId:e})},showPhoneNumber:function(e,t){this._setCurTripIfUndefined(e),i.publish("phone_numbers:showPhoneNumbers",{tripId:e,itemId:t})},showMap:function(e,t){var n=o.getCurrentTrip(),r=n.tripItems.get(t);this._setCurTripIfUndefined(e),i.publish("map:show",{itemId:r.id})},showSignUp:function(){i.publish("sign_up:show")},showSignIn:function(){i.publish("session:login")},termsNavigation:function(){i.publish("terms:show")},altFlightsDetails:function(e,t){this._setCurTripIfUndefined(e),i.publish("altflights:showdetails",{tripId:e,itemId:t})},indexPhoneNumbers:function(e){if(!o.getCurrentTripId()){this._setCurTripIfUndefined(e);var t=o.getCurrentTrip();t&&t.fetch({success:function(){i.publish("phone_numbers:showIndex",{tripId:e})}})}else i.publish("phone_numbers:showIndex",{tripId:e})},share:function(e){this._setCurTripIfUndefined(e),i.publish("trips:share",{tripId:e})},altflights:function(e){this._setCurTripIfUndefined(e),i.publish("altflights:show",{tripId:e})},createTrip:function(){i.publish("trips:create")},contactsShow:function(){i.publish("contacts:show")}});return a}),define("modules/flash",[],function(){var e=function(){this.errors=[]};return e.prototype.addError=function(e){return this.errors.push(e)},e.prototype.addErrors=function(e){return this.errors=this.errors.concat(e),this.errors.length},e.prototype.addErrorFromURI=function(e){var t=decodeURIComponent(e);return this.addError(t)},e.prototype.getErrors=function(){var e=[];return this.errors&&(e=this.errors,this.errors=[]),e},e}),define("controllers/controller",["underscore","jquery","backbone","namespace","helpers","mediator"],function(e,t,n,r,i,s){var o=function(){this.initialize.apply(this,arguments)};return o.prototype.setView=function(n){r.currentView&&r.currentView!==n&&e.isFunction(r.currentView.cleanup)&&r.currentView.cleanup(),this._layout.view(".content",n),n.trigger("beforerender"),s.publish("ajax:abort"),s.publish("popup:remove"),this._layout.render(function(e){t("#app-page").html(e)}).then(function(){i.hideURLBar(),n.trigger("afterrender"),r.currentView=n})},o.prototype.showLoading=function(){t("#app-page").html('<div class="loader light lg"></div><div class="no-connection">No Network Connection</div>')},o.prototype.changeURL=function(e,t){typeof e=="function"?r.router.navigate(e(),t):typeof e=="string"&&r.router.navigate(e,t)},o.prototype._updateHeader=function(t,n,r){var i={};t&&(i.title=t),n&&(i.backAction=n),r&&e.extend(i,r),s.publish("header:updateHeader",i)},o.extend=n.View.extend,o}),define("views/trip_items/trip_items_index_view",["namespace","jquery","backbone","underscore","mediator","strings","trips_manager"],function(e,t,n,r,i,s,o){var u=n.View.extend({template:"trip_items/trip_items_index",className:"list-panel",hasItems:!0,initialize:function(e){this._tripId=e.tripId,this.on("afterrender",function(){var e=o.getTrips().get(this._tripId);e.tripItems.isEmpty()===!1&&t("#empty-trip-message").hide()})},events:{"click .help-import":"addImportHelp","click .add-import":"addImport","click .add-flight":"addFlight","click .add-lodging":"addLodging","click .add-vehicle":"addVehicle","click .add-cruise":"addGeneric","click .add-food":"addGeneric","click .add-attraction":"addGeneric","click .add-activity":"addGeneric","click .add-ferry":"addGeneric","click .add-groundtransportation":"addGeneric","click .add-meeting":"addGeneric","click .add-rail":"addGeneric"},serialize:{hasItems:this.hasItems,types:[{className:"add-import",icon:"icon_import_45px",name:"import",text:s.ImportBooking,hasHelp:!0},{className:"add-flight",icon:"icon_airplane_45px",name:"flight",text:s.Flight},{className:"add-lodging",icon:"icon_hotel_45px",name:"lodging",text:s.Lodging},{className:"add-vehicle",icon:"icon_car_45px",name:"vehicle",text:s.CarRental},{className:"add-groundtransportation",icon:"icon_ground_transportation_45px",name:"groundtransportation",text:s.GroundTransportation},{className:"add-activity",icon:"icon_activity_45px",name:"activity",text:s.Activity},{className:"add-meeting",icon:"icon_meeting_45px",name:"meeting",text:s.Meeting},{className:"add-food",icon:"icon_food_45px",name:"food",text:s.Restaurant},{className:"add-attraction",icon:"icon_attraction_45px",name:"attraction",text:s.Attraction},{className:"add-cruise",icon:"icon_cruise_45px",name:"cruise",text:s.Cruise},{className:"add-ferry",icon:"icon_ferry_45px",name:"ferry",text:s.Ferry},{className:"add-rail",icon:"icon_rail_45px",name:"rail",text:s.Rail}]},addImport:function(e){e.preventDefault(),i.publish("imports:add",{tripId:this._tripId})},addImportHelp:function(e){e.stopPropagation(),e.preventDefault(),i.publish("info_page:show_for_link_booking")},addFlight:function(e){e.preventDefault(),i.publish("flights:add",{tripId:this._tripId})},addLodging:function(e){e.preventDefault(),i.publish("hotels:add",{tripId:this._tripId})},addVehicle:function(e){e.preventDefault(),i.publish("vehicles:add",{tripId:this._tripId})},addGeneric:function(e){e.preventDefault();var n="{type}:add".supplant({type:r.find(t(e.currentTarget).attr("class").split(" "),function(e){return e.indexOf("add-")===0}).substring(4)});i.publish(n,{tripId:this._tripId})},cancel:function(e){e.preventDefault()}});return u}),define("presenters/presenter",["jquery","underscore","backbone"],function(e,t,n){var r=function(e){e=e||{},this.initialize(e)};t.extend(r.prototype,{initialize:function(){}});var i=function(){},s=function(e,n,r){var s;return n&&n.hasOwnProperty("constructor")?s=n.constructor:s=function(){return e.apply(this,arguments)},i.prototype=e.prototype,s.prototype=new i,n&&t.extend(s.prototype,n),r&&t.extend(s,r),s.prototype.constructor=s,s.__super__=e.prototype,s},o=function(e,t){var n=s(this,e,t);return n.extend=o,n};return r.extend=o,r}),define("presenters/trip_item/trip_item_presenter",["underscore","presenters/presenter","helpers/date_helpers","strings"],function(e,t,n,r){var i=t.extend({initialize:function(t){this.model=t.model,this.event=t.event,this._serializeFunctions&&this._serializeFunctions();var n=this.model.getPhoneNumbers();n=typeof n=="string"?this._arrayizePhoneNumbers(n):n.toJSON(),e.extend(this,this.model.toJSON(),{is_phone_number_displayable:!0,is_generic_trip_item:!0,is_both_same_checked:this.model.get("is_both_same_checked")||!1,is_end_location_displayable:!1,is_start_location_displayable:!0,is_name_displayable:!0,labels:{info:r.Information,name:r.Name,start:r.Start,end:r.End},phone_numbers:n,isBeingEdited:!this.model.isNew()}),this.isWorldMate=this.model.isWorldMate(),this.model.startLocation&&(this.start_location=e.extend(this.model.startLocation.toJSON(),{address_lines:this.model.startLocation.getAddressLines(),displayable_name:this.model.startLocation.getDisplayableName()})),this.model.endLocation&&(this.end_location=e.extend(this.model.endLocation.toJSON(),{address_lines:this.model.endLocation.getAddressLines(),displayable_name:this.model.endLocation.getDisplayableName()})),this.is_map_viable_for_start_location=this._isLocViable(this.start_location),this.is_map_viable_for_end_location=this._isLocViable(this.end_location)},_arrayizePhoneNumbers:function(t){var n=[];return e.isEmpty(t)||(n=[{number:t,type:""}]),n},_serializeFunctions:function(){this.eventHead=this._getEventHead(),this.masthead=this._getMasthead(),this.subhead=this._getSubhead(),this.icon=this._getIcon(),this.startAction=this._getStartAction(),this.detailMenuItems=this._getDetailMenuItems()},getClassName:function(){return this.model.getType()},_getEventHead:function(){return n.itinTimeAmPm(this.model.get("start_time"))},_getMasthead:function(){return this.model.get("name")},_getSubhead:function(){return this.getLocationName()||this.getStreet()||this.getGeneralLocation()},getLocationName:function(){var e=this.model.getStartLocation&&this.model.getStartLocation();return e.get("label")},getStreet:function(){var e=this.model.getStartLocation&&this.model.getStartLocation();return e.get("street")},getGeneralLocation:function(){var e=this.model.getStartLocation&&this.model.getStartLocation(),t=e.get("general_location");return t},_isLocViable:function(e){return e&&e.lat&&e.lng},getType:function(){return this.model.get("named_type")},getAddress:function(){if(this.model.displayAddress)return this.model.displayAddress();var e=this.model.getStartLocation&&this.model.getStartLocation();return e=e||this.model.getAddress&&this.model.getAddress(),e.displayAddress()},hasPhoneNumbers:function(){return this.model.phoneNumbers.any()},getPhoneNumbers:function(){return this.model.phoneNumbers.toJSON()},_getStartAction:function(){var e;switch(this.model.get("named_type").toLowerCase()){case"air":case"rail":case"cruise":case"ferry":e=r.Departs;break;case"hotel":e=r.CheckInAt;break;case"vehicle":e=r.PickUpAt;break;default:e=r.StartsAt}return e},_getIcon:function(){var e;switch(this.model.getType().toLowerCase()){case"food_drink":e="icon_food_45px";break;case"ground_transportation":e="icon_ground_transportation_45px";break;case"rail":e="icon_rail_45px";break;case"ferry":e="icon_ferry_45px";break;case"activity":e="icon_activity_45px";break;case"attraction":e="icon_attraction_45px";break;case"cruise":e="icon_cruise_45px";break;case"meeting":e="icon_meeting_45px";break;case"lodging":e="icon_hotel_45px";break;case"vehicle":e="icon_car_45px";break;default:e="icon_some_other_45px"}return e},_getDetailMenuItems:function(){var e=[{label:r.Weather,id:"weather-menu",icon:"icon_weather_45px"},{label:r.Directions,id:"directions-menu",icon:"icon_directions_45px"}];return e},_getEventLocation:function(){var e;return!this.event||this.event&&this.event.event_type==="start"?e=this.model.getStartLocation():e=this.model.getEndLocation()||this.model.getStartLocation(),e}});return i}),define("presenters/trip_item/trip_item_air_presenter",["underscore","helpers","presenters/trip_item/trip_item_presenter","strings","moment"],function(e,t,n,r,i){var s=n.extend({className:"air",_serializeFunctions:function(){this.masthead=this._getMasthead(),this.subhead=this._getSubhead(),this.icon="icon_airplane_45px",this.startAction=this._getStartAction(),this.detailMenuItems=this._getDetailMenuItems(),this.hasChangeOrCancel=this.model.hasChangeOrCancel()||this.model.isCancelledOrDelayed()||this.model.isEarly(),this._setAirStatus()},_getMasthead:function(){var e=this.model.getDepartureCity(),t=this.model.getArrivalCity();return e+" "+r.To+" "+t},_getSubhead:function(){var e=this.model.getAirlineName(),t=this.model.getFlightNumber();return e+" "+t},_getDetailMenuItems:function(){var e=[{label:r.Weather,id:"weather-menu",icon:"icon_weather_45px"},{label:r.AltFlights,id:"alternate-flights-menu",icon:"icon_airplane_45px"}];return e},_setAirStatus:function(){if(this.model.isCancelled()){this.airStatusClass="canceled",this.airStatusMessage=r.Canceled;return}var e,n,s,o;this.model.isDeparted()?(e=this.model.getScheduledArrival(),n=this.model.getEstimatedArrival()):(e=this.model.getScheduledDeparture(),n=this.model.getEstimatedDeparture());if(!e||!n||e===n){this.airStatusClass="on-time",this.airStatusMessage=!1;return}e=i(e),n=i(n);if(!e.isValid()||!n.isValid()){this.airStatusMessage=!1;return}s=e.diff(n,"minutes"),o=Math.abs(s),this.airStatusClass=s<0?"delayed":"early",this.airStatusMessage=(s<0?r.Delayed:r.Early)+" "+t.dateHelpers.hoursMinutesFromMinutesHumanize(o)}});return s}),define("presenters/trip_item/trip_item_hotel_presenter",["underscore","presenters/trip_item/trip_item_presenter","strings"],function(e,t,n){var r=t.extend({className:"hotel",_serializeFunctions:function(){this.eventHead=this._getEventHead(),this.masthead=this._getMasthead(),this.subhead=this._getSubhead(),this.icon="icon_hotel_45px",this.startAction=this._getStartAction(),this.detailMenuItems=this._getDetailMenuItems()},_getEventHead:function(){var e;return this.event&&this.event.event_type==="start"?e=n.CheckIn:e=n.CheckOut,n.Hotel+" "+e},_getSubhead:function(){return this.getStreet()||this.getGeneralLocation()},initialize:function(r){t.prototype.initialize.call(this,r),e.extend(this.labels,{info:n.HotelInformation,start:n.CheckIn,end:n.CheckOut}),e.extend(this,{is_phone_number_displayable:r.model.isManuallyAdded()})},getShowContinue:function(){return!0},hasHotelThumbnail:function(){return!!this.getHotelThumbnailUrl()},getHotelThumbnailUrl:function(){var t=e.detect(this.model.get("multi_media_objects"),function(e){return e.type==="Thumbnail"});return t&&t.url},getGlamourShots:function(){var t=e.filter(this.model.get("multi_media_objects"),function(e){return e.type==="Large"});return t},getMasthead:function(){return this.model.get("name")},getGeneralLocation:function(){return this.model.get("general_location")},hasRoomsFloors:function(){return!!this.model.get("num_rooms")&&!!this.model.get("num_floors")},getNumRoomsFloors:function(){var e=[];return e.push(this.model.get("num_rooms")+" rooms"),e.push(this.model.get("num_floors")+" floors"),e.join(", ")},hasStarRating:function(){return!!this.getStarRating()},getStarRating:function(){return this.model.get("star_rating")},hasGeneralInformation:function(){return!!this.getGeneralInformation()},getGeneralInformation:function(){var e=this.model.get("long_description");return e&&e.replace(/\n\r?/g,"<br />")},hasAmenities:function(t){return e.any(this.getAmenities(t))},getAmenities:function(t){return e.compact(e.map(this.model.get("amenities"),function(e){if(e.category===t)return e.description}))},_getDetailMenuItems:function(){var e=[{label:n.Weather,id:"weather-menu",icon:"icon_weather_45px"},{label:n.Directions,id:"directions-menu",icon:"icon_directions_45px"}];return e.unshift({label:n.HotelInformation,id:"hotel-co-menu",icon:"icon_info_45px"}),e}});return r}),define("presenters/trip_item/trip_item_vehicle_presenter",["underscore","presenters/trip_item/trip_item_presenter","strings","handlebars"],function(e,t,n,r){var i=t.extend({initialize:function(r){t.prototype.initialize.call(this,r),e.extend(this,{is_generic_trip_item:!1,is_phone_number_displayable:r.model.isManuallyAdded(),is_both_same_checked:r.model.get("is_both_same_checked")===undefined?!0:r.model.get("is_both_same_checked"),is_name_displayable:!1,is_end_location_displayable:!this.isBeingEdited,is_start_location_displayable:!this.isBeingEdited,labels:{info:n.RentalCompanyInformation,start:n.PickUp,end:n.DropOff,same_as:n.SameAsPickUpLocation}})},className:"vehicle",_serializeFunctions:function(){this.eventHead=this._getEventHead(),this.masthead=this._getMasthead(),this.subhead=this._getSubhead(),this.icon="icon_car_45px",this.startAction=this._getStartAction(),this.detailMenuItems=this._getDetailMenuItems()},_getEventHead:function(){var e;return this.event&&this.event.event_type==="start"?e=n.PickUp:e=n.DropOff,n.Car+" "+e},_getSubhead:function(){return this.getStreet()||this.getGeneralLocation()},getShowContinue:function(){return!0},getMasthead:function(){return this.model.get("vendor_name")},getGeneralLocation:function(){return this.model.get("general_location")},hasReturnAddress:function(){var e=this.model.endLocation;return e?new r.SafeString(!!e.get("lat")&&!!e.get("lng")):!1},getReturnAddress:function(){var e=this.model.endLocation;return e&&e.displayAddress()},hasOperationTimes:function(){return e.any(this.model.get("operation_times"))},getGeneralInformation:function(){return this.model.get("general_information").join("<br /><br />")},hasShuttleDetails:function(){return this.model.get("shuttle_information").length},getShuttleDetails:function(){var t=e.compact(e.map(this.model.get("shuttle_information"),function(e){return e.content}));return t},getEndShuttleDetails:function(){var t=e.compact(e.map(this.model.get("end_info").shuttle_details,function(e){return e.content}));return t},_getDetailMenuItems:function(){var e=[{label:n.Weather,id:"weather-menu",icon:"icon_weather_45px"},{label:n.Directions,id:"directions-menu",icon:"icon_directions_45px"}];return e.unshift({label:n.RentalCompanyInformation,id:"rental-co-menu",icon:"icon_car_45px"}),e}});return i}),define("presenters/trip_item/trip_item_cruise_presenter",["underscore","presenters/trip_item/trip_item_presenter","strings"],function(e,t,n){var r=t.extend({initialize:function(r){t.prototype.initialize.call(this,r),e.extend(this,{is_both_same_checked:this.is_both_same_checked||!1,is_name_displayable:!0,is_start_location_displayable:!0,is_end_location_displayable:!0,labels:{name:n.CruiseLine,start:n.StartingPort,end:n.EndingPort,same_as:n.SameAsStartingPort}})}});return r}),define("presenters/trip_item/trip_item_ferry_presenter",["underscore","presenters/trip_item/trip_item_presenter","strings"],function(e,t,n){var r=t.extend({initialize:function(r){t.prototype.initialize.call(this,r),e.extend(this,{is_both_same_checked:this.is_both_same_checked||!1,is_name_displayable:!0,is_end_location_displayable:!0,is_start_location_displayable:!0,labels:{name:n.FerryLine,start:n.StartingPort,end:n.EndingPort,same_as:n.SameAsStartingPort}})}});return r}),define("presenters/trip_item/trip_item_rail_presenter",["underscore","presenters/trip_item/trip_item_presenter","strings"],function(e,t,n){var r=t.extend({initialize:function(r){t.prototype.initialize.call(this,r),e.extend(this,{is_both_same_checked:this.is_both_same_checked||!1,is_name_displayable:!0,is_end_location_displayable:!0,is_start_location_displayable:!0,labels:{name:n.RailwayName,start:n.DepartureStation,end:n.ArrivalStation,same_as:n.SameAsStartingLocation}})}});return r}),define("presenters/trip_item/trip_item_gt_presenter",["underscore","presenters/trip_item/trip_item_presenter","strings"],function(e,t,n){var r=t.extend({initialize:function(r){t.prototype.initialize.call(this,r),e.extend(this,{is_both_same_checked:this.is_both_same_checked||!1,is_name_displayable:!0,is_start_location_displayable:!0,is_end_location_displayable:!0,labels:{name:n.Name,start:n.StartLocation,end:n.EndLocation,same_as:n.SameAsStartingLocation}})}});return r}),define("trip_item_presenter_factory",["presenters/trip_item/trip_item_air_presenter","presenters/trip_item/trip_item_hotel_presenter","presenters/trip_item/trip_item_vehicle_presenter","presenters/trip_item/trip_item_cruise_presenter","presenters/trip_item/trip_item_ferry_presenter","presenters/trip_item/trip_item_rail_presenter","presenters/trip_item/trip_item_gt_presenter","presenters/trip_item/trip_item_presenter"],function(e,t,n,r,i,s,o,u){var a={getPresenter:function(a){var f=a.model.get("type")||a.model.get("named_type")||"";switch(f.toLowerCase()){case"air":return new e(a);case"lodging":case"hotel":return new t(a);case"vehicle":return new n(a);case"cruise":return new r(a);case"ferry":return new i(a);case"rail":return new s(a);case"ground_transportation":return new o(a);default:return new u(a)}}};return a}),define("presenters/trip_events/trip_event_planning_presenter",["underscore","strings","moment"],function(e,t,n){var r={serialize:function(t){var n={"@name":"planning",events:[{hasClockTimer:this._hasClockTimer(t),labelText:this._labelText(t),isPlanEvent:!0,destination:this._destination(t),event_type:"start"}]},r=this._timeUntilStart(t);return e.extend(n.events[0],r),n},_hasClockTimer:function(e){return!e.hasEnded()&&!e.startsSoon()&&!e.isInProgress()},_labelText:function(e){var n=t.TripStartsIn;return e.hasEnded()?n=t.TripHasEnded:e.startsSoon()?n=t.TripStartsSoon:e.isInProgress()&&(n=t.TripHasStarted),n},_destination:function(e){return e.getDestination()},_customDayRound:function(e){var t=.405,n=Math.floor(e),r=e-n,i;return r<=t?i=Math.floor(e):i=Math.ceil(e),i},_timeUntilStart:function(e){var r,i,s,o,u,a,f,l;return f=n.utc(e.getStartTimeUTC(),"YYYY-MM-DDTHH:mm:ss"),l=n().utc(),o=Math.round(f.diff(l,"hours",!0)),u=this._customDayRound(f.diff(l,"days",!0)),a=Math.round(f.diff(l,"months",!0)),o<24?(r=o,i=r>1?t.Hours:t.Hour):u>=1&&u<=31?(r=u,i=r>1?t.Days:t.Day):(r=a,i=r>1?t.Months:t.Month),s={timeValue:r,timeLabel:i},s}};return r}),define("presenters/trip_events_presenter",["underscore","helpers","presenters/presenter","trip_item_presenter_factory","presenters/trip_events/trip_event_planning_presenter"],function(e,t,n,r,i){var s=n.extend({className:"flight-group",initialize:function(t){var n=t.model.tripItems,s=function(e){return!n.get(e.id)},o={days:[]},u=t.model.eventsGroupedByDay,a,f,l;if(!u)return{};for(var c=0;c<u.length;c++){a=u[c],o.days.push(a),f=o.days[c].events,f=e.reject(f,s);for(var h=0;h<f.length;h++)l=n.get(f[h].id),e.extend(f[h],r.getPresenter({model:l,event:f[h]}))}if(t.isPlanEventNeeded){var p=i.serialize(t.model);o.days.unshift(p)}e.extend(this,o)}});return s});var _gaq=_gaq||[];define("analytics",["config","helpers/device"],function(e,t){function s(){var n=e.analyticsID,s=5;if(t.isWrapped())r=window.plugins.gaPlugin,r.init(u,a,n,s),t.getDevicePlatform()==="iOS"||t.getDevicePlatform()==="iPhone"?i="iOSApp":t.getDevicePlatform()==="Android"&&(i="AndroidApp");else{i="tdot",_gaq.push(["_setAccount",n]),_gaq.push(["_trackPageview"]);var f=document.createElement("script");f.type="text/javascript",f.async=!0,f.src=("https:"===document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var l=document.getElementsByTagName("script")[0];l.parentNode.insertBefore(f,l)}o()}function o(){if(window.devicePixelRatio){var e=1,i="PixelRatio",s=window.devicePixelRatio.toString();t.isWrapped()?r.setVariable(u,a,i,s,e):_gaq.push(["_setCustomVar",e,i,s,n]),h("Device","Capability")}}function u(e){return}function a(e){return}function f(e){var i=1,s="UserId",o,f;e&&e.session&&e.session.getUser()?(o=e.session.getUser().getId(),f=o.toString(),t.isWrapped()?r.setVariable(u,a,s,f,i):_gaq.push(["_setCustomVar",i,s,f,n])):_gaq.push(["_deleteCustomVar",i])}function l(e,i){var s=2,o=3,f="TripId",l="TripItemId",c;e?(c=e.toString(),t.isWrapped()?r.setVariable(u,a,f,c,s):_gaq.push(["_setCustomVar",s,f,c,n])):_gaq.push(["_deleteCustomVar",s]),i?(c=i.toString(),t.isWrapped()?r.setVariable(u,a,l,c,o):_gaq.push(["_setCustomVar",o,l,c,n])):_gaq.push(["_deleteCustomVar",o])}function c(e){var i=4,s="AppVersion",o;e&&e.config?(o=e.config.version,t.isWrapped()?r.setVariable(u,a,s,o,i):_gaq.push(["_setCustomVar",i,s,o,n])):_gaq.push(["_deleteCustomVar",i])}function h(e,n){t.isWrapped()?r.trackEvent(u,a,e,n,i,-1):_gaq.push(["_trackEvent",e,n,i])}function p(e,n){var i="/"+e+"/"+n+"/";t.isWrapped()?r.trackPage(u,a,i):_gaq.push(["_trackPageview",i])}function d(n,r,s,o){if(t.isWrapped())return;_gaq.push(["_trackTiming",n,r,s,i,e.timingSampleRate])}var n=2,r,i="",v={initialize:s,trackEvent:function(e,t,n,r,i){f(n),l(r,i),c(n),h(e,t),p(e,t)},trackTiming:function(e,t,n,r){d(e,t,n,r)}};return v}),define("text!templates/itinerary/_flight_schedule.tmpl",[],function(){return'{{#if_equal type "Air"}}\n<div class="bubble-content">\n	<table class="flight-schedule">\n		<tbody>\n\n		<tr class="departure">\n			<th class="schedule-header" colspan="2">{{startAction}}</th>\n			<th class="schedule-header">{{t "TermGate"}}</th>\n		</tr>\n		<tr class="departure">\n			<td class="time {{departureTimeClass cancelled scheduled_departure estimated_departure}}">\n				{{timeFromDateTime estimated_departure}}\n			</td>\n			<td class="airport-code">{{departure_airport_code}}</td>\n			<td class="term-gate {{alertClassIf departure_terminal_or_gate_change}}">{{get_terminal_and_gate\n				departure_terminal departure_gate}}\n			</td>\n		</tr>\n		<tr class="arrival">\n			<th class="schedule-header" colspan="2">Arrives</th>\n			<th class="schedule-header">{{t "TermGate"}}</th>\n		</tr>\n		<tr class="arrival">\n			<td class="time {{arrivalTimeClass cancelled scheduled_arrival estimated_arrival}}">{{timeFromDateTime\n				estimated_arrival}}\n			</td>\n			<td class="airport-code">{{arrival_airport_code}}</td>\n			<td class="term-gate {{alertClassIf arrival_terminal_or_gate_change}}">{{get_terminal_and_gate\n				arrival_terminal arrival_gate}}\n			</td>\n		</tr>\n\n		</tbody>\n	</table>\n</div>\n{{/if_equal}}'}),define("views/itinerary/itinerary_views",["namespace","jquery","underscore","backbone","models/trip","mediator","moment","helpers","presenters/trip_events_presenter","analytics","text!templates/itinerary/_flight_schedule.tmpl","handlebars"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h=r.View.extend({className:"itinerary-page",events:{"click .itinerary-item":"onSelect"},template:"itinerary/itinerary",initialize:function(){n.bindAll(this),this._registerPartials(),this.on("afterrender",this._createEdge,this)},_registerPartials:function(){c.registerPartial("FlightSchedule",l)},_createEdge:function(){var e=t(".bubble-marker");if(e.length>=2){var r=t(n.first(e)),i=t(n.last(e)),s=r.offset(),o=i.offset(),u=12,a=4,f=(u-a)/2,l=46,c=l+f,h=s.top,p=o.top-s.top,d=t('<div class="edge-runner"></div>');this.$el.find(".itinerary-container").prepend(d),d.css("left",c),d.css("top",h),d.css("height",p+"px")}},isInView:function(){return t.contains(t("#app-page")[0],this.el)},render:function(e){return s.publish("trip_items:index:change",{tripId:this.model.get("id")}),e(this).render()},serialize:function(){var e=new a({model:this.model});return e.tripCanShare=this.model.can("share"),e},onSelect:function(n){n.preventDefault();var r,i=t(n.currentTarget),o=i.data("trip-item-id"),u=i.data("location");u&&this.model.tripItems.get(o).set("viewedLocation",u),s.publish("trip_items:show",{tripId:this.model.id,itemId:o}),r=this.model.tripItems.find(function(e){return e.get("id")===o}),f.trackEvent("Itinerary","Show"+r.getType(),e,this.model.id,o)}});return h}),function(e,t){function O(e){return i===""?e:(e=e.charAt(0).toUpperCase()+e.substr(1),i+e)}var n=Math,r=t.createElement("div").style,i=function(){var e="webkitT,MozT,msT,OT,t".split(","),t,n=0,i=e.length;for(;n<i;n++){t=e[n]+"ransform";if(t in r)return e[n].substr(0,e[n].length-1)}return!1}(),s=i?"-"+i.toLowerCase()+"-":"",o=O("transform"),u=O("transitionProperty"),a=O("transitionDuration"),f=O("transformOrigin"),l=O("transitionTimingFunction"),c=O("transitionDelay"),h=/android/gi.test(navigator.appVersion),p=/iphone|ipad/gi.test(navigator.appVersion),d=/hp-tablet/gi.test(navigator.appVersion),v=O("perspective")in r,m="ontouchstart"in e&&!d,g=!!i,y=O("transition")in r,b="onorientationchange"in e?"orientationchange":"resize",w=m?"touchstart":"mousedown",E=m?"touchmove":"mousemove",S=m?"touchend":"mouseup",x=m?"touchcancel":"mouseup",T=i=="Moz"?"DOMMouseScroll":"mousewheel",N=function(){if(i===!1)return!1;var e={"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"};return e[i]}(),C=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(e){return setTimeout(e,1)}}(),k=function(){return e.cancelRequestAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame||e.mozCancelRequestAnimationFrame||e.oCancelRequestAnimationFrame||e.msCancelRequestAnimationFrame||clearTimeout}(),L=v?" translateZ(0)":"",A=function(n,r){var i=this,c;i.wrapper=typeof n=="object"?n:t.getElementById(n),i.wrapper.style.overflow="hidden",i.scroller=i.wrapper.children[0],i.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,handleClick:!0,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:h,hideScrollbar:p,fadeScrollbar:p&&v,scrollbarClass:"",zoom:!1,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:!1,snapThreshold:1,gutterWidth:0,peekWidth:0,onRefresh:null,onBeforeScrollStart:function(e){e.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(c in r)i.options[c]=r[c];i.x=i.options.x,i.y=i.options.y,i.options.useTransform=g&&i.options.useTransform,i.options.hScrollbar=i.options.hScroll&&i.options.hScrollbar,i.options.vScrollbar=i.options.vScroll&&i.options.vScrollbar,i.options.zoom=i.options.useTransform&&i.options.zoom,i.options.useTransition=y&&i.options.useTransition,i.options.zoom&&h&&(L=""),i.scroller.style[u]=i.options.useTransform?s+"transform":"top left",i.scroller.style[a]="0",i.scroller.style[f]="0 0",i.options.useTransition&&(i.scroller.style[l]="cubic-bezier(0.33,0.66,0.66,1)"),i.options.useTransform?i.scroller.style[o]="translate("+i.x+"px,"+i.y+"px)"+L:i.scroller.style.cssText+=";position:absolute;top:"+i.y+"px;left:"+i.x+"px",i.options.useTransition&&(i.options.fixedScrollbar=!0),i.refresh(),i._bind(b,e),i._bind(w),m||i.options.wheelAction!="none"&&i._bind(T),i.options.checkDOMChanges&&(i.checkDOMTime=setInterval(function(){i._checkDOMChanges()},500))};A.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(e){var t=this;switch(e.type){case w:if(!m&&e.button!==0)return;t._start(e);break;case E:t._move(e);break;case S:case x:t._end(e);break;case b:t._resize();break;case T:t._wheel(e);break;case N:t._transitionEnd(e)}},_checkDOMChanges:function(){if(this.moved||this.zoomed||this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale)return;this.refresh()},_scrollbar:function(e){var r=this,i;if(!r[e+"Scrollbar"]){r[e+"ScrollbarWrapper"]&&(g&&(r[e+"ScrollbarIndicator"].style[o]=""),r[e+"ScrollbarWrapper"].parentNode.removeChild(r[e+"ScrollbarWrapper"]),r[e+"ScrollbarWrapper"]=null,r[e+"ScrollbarIndicator"]=null);return}r[e+"ScrollbarWrapper"]||(i=t.createElement("div"),r.options.scrollbarClass?i.className=r.options.scrollbarClass+e.toUpperCase():i.style.cssText="position:absolute;z-index:100;"+(e=="h"?"height:7px;bottom:1px;left:2px;right:"+(r.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(r.hScrollbar?"7":"2")+"px;top:2px;right:1px"),i.style.cssText+=";pointer-events:none;"+s+"transition-property:opacity;"+s+"transition-duration:"+(r.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(r.options.hideScrollbar?"0":"1"),r.wrapper.appendChild(i),r[e+"ScrollbarWrapper"]=i,i=t.createElement("div"),r.options.scrollbarClass||(i.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);"+s+"background-clip:padding-box;"+s+"box-sizing:border-box;"+(e=="h"?"height:100%":"width:100%")+";"+s+"border-radius:3px;border-radius:3px"),i.style.cssText+=";pointer-events:none;"+s+"transition-property:"+s+"transform;"+s+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);"+s+"transition-duration:0;"+s+"transform: translate(0,0)"+L,r.options.useTransition&&(i.style.cssText+=";"+s+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"),r[e+"ScrollbarWrapper"].appendChild(i),r[e+"ScrollbarIndicator"]=i),e=="h"?(r.hScrollbarSize=r.hScrollbarWrapper.clientWidth,r.hScrollbarIndicatorSize=n.max(n.round(r.hScrollbarSize*r.hScrollbarSize/r.scrollerW),8),r.hScrollbarIndicator.style.width=r.hScrollbarIndicatorSize+"px",r.hScrollbarMaxScroll=r.hScrollbarSize-r.hScrollbarIndicatorSize,r.hScrollbarProp=r.hScrollbarMaxScroll/r.maxScrollX):(r.vScrollbarSize=r.vScrollbarWrapper.clientHeight,r.vScrollbarIndicatorSize=n.max(n.round(r.vScrollbarSize*r.vScrollbarSize/r.scrollerH),8),r.vScrollbarIndicator.style.height=r.vScrollbarIndicatorSize+"px",r.vScrollbarMaxScroll=r.vScrollbarSize-r.vScrollbarIndicatorSize,r.vScrollbarProp=r.vScrollbarMaxScroll/r.maxScrollY),r._scrollbarPos(e,!0)},_resize:function(){var e=this;setTimeout(function(){e.refresh()},h?200:0)},_pos:function(e,t){if(this.zoomed)return;e=this.hScroll?e:0,t=this.vScroll?t:0,this.options.useTransform?this.scroller.style[o]="translate("+e+"px,"+t+"px) scale("+this.scale+")"+L:(e=n.round(e),t=n.round(t),this.scroller.style.left=e+"px",this.scroller.style.top=t+"px"),this.x=e,this.y=t,this._scrollbarPos("h"),this._scrollbarPos("v")},_scrollbarPos:function(e,t){var r=this,i=e=="h"?r.x:r.y,s;if(!r[e+"Scrollbar"])return;i=r[e+"ScrollbarProp"]*i,i<0?(r.options.fixedScrollbar||(s=r[e+"ScrollbarIndicatorSize"]+n.round(i*3),s<8&&(s=8),r[e+"ScrollbarIndicator"].style[e=="h"?"width":"height"]=s+"px"),i=0):i>r[e+"ScrollbarMaxScroll"]&&(r.options.fixedScrollbar?i=r[e+"ScrollbarMaxScroll"]:(s=r[e+"ScrollbarIndicatorSize"]-n.round((i-r[e+"ScrollbarMaxScroll"])*3),s<8&&(s=8),r[e+"ScrollbarIndicator"].style[e=="h"?"width":"height"]=s+"px",i=r[e+"ScrollbarMaxScroll"]+(r[e+"ScrollbarIndicatorSize"]-s))),r[e+"ScrollbarWrapper"].style[c]="0",r[e+"ScrollbarWrapper"].style.opacity=t&&r.options.hideScrollbar?"0":"1",r[e+"ScrollbarIndicator"].style[o]="translate("+(e=="h"?i+"px,0)":"0,"+i+"px)")+L},_start:function(t){var r=this,i=m?t.touches[0]:t,s,u,a,f,l;if(this.initiated)return;if(!r.enabled)return;r.options.onBeforeScrollStart&&r.options.onBeforeScrollStart.call(r,t),(r.options.useTransition||r.options.zoom)&&r._transitionTime(0),this.initiated=!0,r.moved=!1,r.animating=!1,r.zoomed=!1,r.distX=0,r.distY=0,r.absDistX=0,r.absDistY=0,r.dirX=0,r.dirY=0,this.stepsX=0,this.stepsY=0,this.directionLocked=!1,r.options.zoom&&m&&t.touches.length>1&&(f=n.abs(t.touches[0].pageX-t.touches[1].pageX),l=n.abs(t.touches[0].pageY-t.touches[1].pageY),r.touchesDistStart=n.sqrt(f*f+l*l),r.originX=n.abs(t.touches[0].pageX+t.touches[1].pageX-r.wrapperOffsetLeft*2)/2-r.x,r.originY=n.abs(t.touches[0].pageY+t.touches[1].pageY-r.wrapperOffsetTop*2)/2-r.y,r.options.onZoomStart&&r.options.onZoomStart.call(r,t));if(r.options.momentum){r.options.useTransform?(s=getComputedStyle(r.scroller,null)[o].replace(/[^0-9\-.,]/g,"").split(","),u=+s[4],a=+s[5]):(u=+getComputedStyle(r.scroller,null).left.replace(/[^0-9-]/g,""),a=+getComputedStyle(r.scroller,null).top.replace(/[^0-9-]/g,""));if(u!=r.x||a!=r.y)r.options.useTransition?r._unbind(N):k(r.aniTime),r.steps=[],r._pos(u,a),r.options.onScrollEnd&&r.options.onScrollEnd.call(r)}r.absStartX=r.x,r.absStartY=r.y,r.startX=r.x,r.startY=r.y,r.pointX=i.pageX,r.pointY=i.pageY,r.startTime=t.timeStamp||Date.now(),r.options.onScrollStart&&r.options.onScrollStart.call(r,t),r._bind(E,e),r._bind(S,e),r._bind(x,e)},_move:function(e){if(!this.initiated)return;var t=this,r=m?e.touches[0]:e,i=r.pageX-t.pointX,s=r.pageY-t.pointY,u=t.x+i,a=t.y+s,f,l,c,h=e.timeStamp||Date.now();t.options.onBeforeScrollMove&&t.options.onBeforeScrollMove.call(t,e);if(t.options.zoom&&m&&e.touches.length>1){f=n.abs(e.touches[0].pageX-e.touches[1].pageX),l=n.abs(e.touches[0].pageY-e.touches[1].pageY),t.touchesDist=n.sqrt(f*f+l*l),t.zoomed=!0,c=1/t.touchesDistStart*t.touchesDist*this.scale,c<t.options.zoomMin?c=.5*t.options.zoomMin*Math.pow(2,c/t.options.zoomMin):c>t.options.zoomMax&&(c=2*t.options.zoomMax*Math.pow(.5,t.options.zoomMax/c)),t.lastScale=c/this.scale,u=this.originX-this.originX*t.lastScale+this.x,a=this.originY-this.originY*t.lastScale+this.y,this.scroller.style[o]="translate("+u+"px,"+a+"px) scale("+c+")"+L,t.options.onZoom&&t.options.onZoom.call(t,e);return}this.moved=!0,t.pointX=r.pageX,t.pointY=r.pageY,this.stepsX+=Math.abs(i),this.stepsY+=Math.abs(s);if(this.stepsX<10&&this.stepsY<10)return;if(!t.options.vScroll&&!this.directionLocked&&this.stepsY>this.stepsX){this.initiated=!1;return}e.preventDefault(),this.directionLocked=!0;if(u>0||u<t.maxScrollX)u=t.options.bounce?t.x+i/2:u>=0||t.maxScrollX>=0?0:t.maxScrollX;if(a>t.minScrollY||a<t.maxScrollY)a=t.options.bounce?t.y+s/2:a>=t.minScrollY||t.maxScrollY>=0?t.minScrollY:t.maxScrollY;t.distX+=i,t.distY+=s,t.absDistX=n.abs(t.distX),t.absDistY=n.abs(t.distY);if(t.absDistX<6&&t.absDistY<6)return;t.options.lockDirection&&(t.absDistX>t.absDistY+5?(a=t.y,s=0):t.absDistY>t.absDistX+5&&(u=t.x,i=0)),t.moved=!0,t._pos(u,a),t.dirX=i>0?-1:i<0?1:0,t.dirY=s>0?-1:s<0?1:0,h-t.startTime>300&&(t.startTime=h,t.startX=t.x,t.startY=t.y),t.options.onScrollMove&&t.options.onScrollMove.call(t,e)},_end:function(r){if(!this.initiated)return;if(m&&r.touches.length!==0)return;this.initiated=!1;var i=this,s=m?r.changedTouches[0]:r,u,f,l={dist:0,time:0},c={dist:0,time:0},h=(r.timeStamp||Date.now())-i.startTime,p=i.x,d=i.y,v,g,y,b,w;i._unbind(E,e),i._unbind(S,e),i._unbind(x,e),i.options.onBeforeScrollEnd&&i.options.onBeforeScrollEnd.call(i,r);if(i.zoomed){w=i.scale*i.lastScale,w=Math.max(i.options.zoomMin,w),w=Math.min(i.options.zoomMax,w),i.lastScale=w/i.scale,i.scale=w,i.x=i.originX-i.originX*i.lastScale+i.x,i.y=i.originY-i.originY*i.lastScale+i.y,i.scroller.style[a]="200ms",i.scroller.style[o]="translate("+i.x+"px,"+i.y+"px) scale("+i.scale+")"+L,i.zoomed=!1,i.refresh(),i.options.onZoomEnd&&i.options.onZoomEnd.call(i,r);return}if(!i.moved){m&&(i.doubleTapTimer&&i.options.zoom?(clearTimeout(i.doubleTapTimer),i.doubleTapTimer=null,i.options.onZoomStart&&i.options.onZoomStart.call(i,r),i.zoom(i.pointX,i.pointY,i.scale==1?i.options.doubleTapZoom:1),i.options.onZoomEnd&&setTimeout(function(){i.options.onZoomEnd.call(i,r)},200)):this.options.handleClick&&(i.doubleTapTimer=setTimeout(function(){i.doubleTapTimer=null,u=s.target;while(u.nodeType!=1)u=u.parentNode;u.tagName!="SELECT"&&u.tagName!="INPUT"&&u.tagName!="TEXTAREA"&&(f=t.createEvent("MouseEvents"),f.initMouseEvent("click",!0,!0,r.view,1,s.screenX,s.screenY,s.clientX,s.clientY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,0,null),f._fake=!0,u.dispatchEvent(f))},i.options.zoom?250:0))),i._resetPos(400),i.options.onTouchEnd&&i.options.onTouchEnd.call(i,r);return}if(h<300&&i.options.momentum){l=p?i._momentum(p-i.startX,h,-i.x,i.scrollerW-i.wrapperW+i.x,i.options.bounce?i.wrapperW:0):l,c=d?i._momentum(d-i.startY,h,-i.y,i.maxScrollY<0?i.scrollerH-i.wrapperH+i.y-i.minScrollY:0,i.options.bounce?i.wrapperH:0):c,p=i.x+l.dist,d=i.y+c.dist;if(i.x>0&&p>0||i.x<i.maxScrollX&&p<i.maxScrollX)l={dist:0,time:0};if(i.y>i.minScrollY&&d>i.minScrollY||i.y<i.maxScrollY&&d<i.maxScrollY)c={dist:0,time:0}}if(l.dist||c.dist){y=n.max(n.max(l.time,c.time),10),i.options.snap&&(v=p-i.absStartX,g=d-i.absStartY,n.abs(v)<i.options.snapThreshold&&n.abs(g)<i.options.snapThreshold?i.scrollTo(i.absStartX,i.absStartY,200):(b=i._snap(p,d),p=b.x,d=b.y,y=n.max(b.time,y))),i.scrollTo(n.round(p+i.options.gutterWidth+i.options.peekWidth),n.round(d),y),i.options.onTouchEnd&&i.options.onTouchEnd.call(i,r);return}if(i.options.snap){v=p-i.absStartX,g=d-i.absStartY,n.abs(v)<i.options.snapThreshold&&n.abs(g)<i.options.snapThreshold?i.scrollTo(i.absStartX,i.absStartY,200):(b=i._snap(i.x,i.y),(b.x!=i.x||b.y!=i.y)&&i.scrollTo(b.x+i.options.gutterWidth+i.options.peekWidth,b.y,b.time)),i.options.onTouchEnd&&i.options.onTouchEnd.call(i,r);return}i._resetPos(200),i.options.onTouchEnd&&i.options.onTouchEnd.call(i,r)},_resetPos:function(e){var t=this,n=t.x>=0?0:t.x<t.maxScrollX?t.maxScrollX:t.x,r=t.y>=t.minScrollY||t.maxScrollY>0?t.minScrollY:t.y<t.maxScrollY?t.maxScrollY:t.y;if(n==t.x&&r==t.y){t.moved&&(t.moved=!1,t.options.onScrollEnd&&t.options.onScrollEnd.call(t)),t.hScrollbar&&t.options.hideScrollbar&&(i=="webkit"&&(t.hScrollbarWrapper.style[c]="300ms"),t.hScrollbarWrapper.style.opacity="0"),t.vScrollbar&&t.options.hideScrollbar&&(i=="webkit"&&(t.vScrollbarWrapper.style[c]="300ms"),t.vScrollbarWrapper.style.opacity="0");return}t.scrollTo(n,r,e||0)},_wheel:function(e){var t=this,n,r,i,s,o;if("wheelDeltaX"in e)n=e.wheelDeltaX/12,r=e.wheelDeltaY/12;else if("wheelDelta"in e)n=r=e.wheelDelta/12;else{if(!("detail"in e))return;n=r=-e.detail*3}if(t.options.wheelAction=="zoom"){o=t.scale*Math.pow(2,1/3*(r?r/Math.abs(r):0)),o<t.options.zoomMin&&(o=t.options.zoomMin),o>t.options.zoomMax&&(o=t.options.zoomMax),o!=t.scale&&(!t.wheelZoomCount&&t.options.onZoomStart&&t.options.onZoomStart.call(t,e),t.wheelZoomCount++,t.zoom(e.pageX,e.pageY,o,400),setTimeout(function(){t.wheelZoomCount--,!t.wheelZoomCount&&t.options.onZoomEnd&&t.options.onZoomEnd.call(t,e)},400));return}i=t.x+n,s=t.y+r,i>0?i=0:i<t.maxScrollX&&(i=t.maxScrollX),s>t.minScrollY?s=t.minScrollY:s<t.maxScrollY&&(s=t.maxScrollY),t.maxScrollY<0&&t.scrollTo(i,s,0)},_transitionEnd:function(e){var t=this;if(e.target!=t.scroller)return;t._unbind(N),t._startAni()},_startAni:function(){var e=this,t=e.x,r=e.y,i=Date.now(),s,o,u;if(e.animating)return;if(!e.steps.length){e._resetPos(400);return}s=e.steps.shift(),s.x==t&&s.y==r&&(s.time=0),e.animating=!0,e.moved=!0;if(e.options.useTransition){e._transitionTime(s.time),e._pos(s.x,s.y),e.animating=!1,s.time?e._bind(N):e._resetPos(0);return}u=function(){var a=Date.now(),f,l;if(a>=i+s.time){e._pos(s.x,s.y),e.animating=!1,e.options.onAnimationEnd&&e.options.onAnimationEnd.call(e),e._startAni();return}a=(a-i)/s.time-1,o=n.sqrt(1-a*a),f=(s.x-t)*o+t,l=(s.y-r)*o+r,e._pos(f,l),e.animating&&(e.aniTime=C(u))},u()},_transitionTime:function(e){e+="ms",this.scroller.style[a]=e,this.hScrollbar&&(this.hScrollbarIndicator.style[a]=e),this.vScrollbar&&(this.vScrollbarIndicator.style[a]=e)},_momentum:function(e,t,r,i,s){var o=6e-4,u=n.abs(e)/t,a=u*u/(2*o),f=0,l=0;return e>0&&a>r?(l=s/(6/(a/u*o)),r+=l,u=u*r/a,a=r):e<0&&a>i&&(l=s/(6/(a/u*o)),i+=l,u=u*i/a,a=i),a*=e<0?-1:1,f=u/o,{dist:a,time:n.round(f)}},_offset:function(e){var t=-e.offsetLeft,n=-e.offsetTop;while(e=e.offsetParent)t-=e.offsetLeft,n-=e.offsetTop;return e!=this.wrapper&&(t*=this.scale,n*=this.scale),{left:t,top:n}},_snap:function(e,t){var r=this,i,s,o,u,a,f;o=r.pagesX.length-1;for(i=0,s=r.pagesX.length;i<s;i++)if(e>=r.pagesX[i]){o=i;break}o==r.currPageX&&o>0&&r.dirX<0&&o--,e=r.pagesX[o],a=n.abs(e-r.pagesX[r.currPageX]),a=a?n.abs(r.x-e)/a*500:0,r.currPageX=o,o=r.pagesY.length-1;for(i=0;i<o;i++)if(t>=r.pagesY[i]){o=i;break}return o==r.currPageY&&o>0&&r.dirY<0&&o--,t=r.pagesY[o],f=n.abs(t-r.pagesY[r.currPageY]),f=f?n.abs(r.y-t)/f*500:0,r.currPageY=o,u=n.round(n.max(a,f))||200,{x:e,y:t,time:u}},_bind:function(e,t,n){(t||this.scroller).addEventListener(e,this,!!n)},_unbind:function(e,t,n){(t||this.scroller).removeEventListener(e,this,!!n)},destroy:function(){var t=this;t.scroller.style[o]="",t.hScrollbar=!1,t.vScrollbar=!1,t._scrollbar("h"),t._scrollbar("v"),t._unbind(b,e),t._unbind(w),t._unbind(E,e),t._unbind(S,e),t._unbind(x,e),t.options.hasTouch||t._unbind(T),t.options.useTransition&&t._unbind(N),t.options.checkDOMChanges&&clearInterval(t.checkDOMTime),t.options.onDestroy&&t.options.onDestroy.call(t)},refresh:function(){var e=this,t,r,i,s,o=0,u=0;e.scale<e.options.zoomMin&&(e.scale=e.options.zoomMin),e.wrapperW=e.wrapper.clientWidth||1,e.wrapperH=e.wrapper.clientHeight||1,e.minScrollY=-e.options.topOffset||0,e.scrollerW=n.round(e.scroller.offsetWidth*e.scale),e.scrollerH=n.round((e.scroller.offsetHeight+e.minScrollY)*e.scale),e.maxScrollX=e.wrapperW-e.scrollerW,e.maxScrollY=e.wrapperH-e.scrollerH+e.minScrollY,e.dirX=0,e.dirY=0,e.options.onRefresh&&e.options.onRefresh.call(e),e.hScroll=e.options.hScroll&&e.maxScrollX<0,e.vScroll=e.options.vScroll&&(!e.options.bounceLock&&!e.hScroll||e.scrollerH>e.wrapperH),e.hScrollbar=e.hScroll&&e.options.hScrollbar,e.vScrollbar=e.vScroll&&e.options.vScrollbar&&e.scrollerH>e.wrapperH,t=e._offset(e.wrapper),e.wrapperOffsetLeft=-t.left,e.wrapperOffsetTop=-t.top;if(typeof e.options.snap=="string"){e.pagesX=[],e.pagesY=[],s=e.scroller.querySelectorAll(e.options.snap);for(r=0,i=s.length;r<i;r++)o=e._offset(s[r]),o.left+=e.wrapperOffsetLeft,o.top+=e.wrapperOffsetTop,e.pagesX[r]=o.left<e.maxScrollX?e.maxScrollX:o.left*e.scale,e.pagesY[r]=o.top<e.maxScrollY?e.maxScrollY:o.top*e.scale}else if(e.options.snap){e.pagesX=[];while(o>=e.maxScrollX)e.pagesX[u]=o,o-=e.wrapperW,u++;e.maxScrollX%e.wrapperW&&(e.pagesX[e.pagesX.length]=e.maxScrollX-e.pagesX[e.pagesX.length-1]+e.pagesX[e.pagesX.length-1]),o=0,u=0,e.pagesY=[];while(o>=e.maxScrollY)e.pagesY[u]=o,o-=e.wrapperH,u++;e.maxScrollY%e.wrapperH&&(e.pagesY[e.pagesY.length]=e.maxScrollY-e.pagesY[e.pagesY.length-1]+e.pagesY[e.pagesY.length-1])}e._scrollbar("h"),e._scrollbar("v"),e.zoomed||(e.scroller.style[a]="0",e._resetPos(400))},scrollTo:function(e,t,n,r){var i=this,s=e,o,u;i.stop(),s.length||(s=[{x:e,y:t,time:n,relative:r}]);for(o=0,u=s.length;o<u;o++)s[o].relative&&(s[o].x=i.x-s[o].x,s[o].y=i.y-s[o].y),i.steps.push({x:s[o].x,y:s[o].y,time:s[o].time||0});i._startAni()},scrollToElement:function(e,t){var r=this,i;e=e.nodeType?e:r.scroller.querySelector(e);if(!e)return;i=r._offset(e),i.left+=r.wrapperOffsetLeft,i.top+=r.wrapperOffsetTop,i.left=i.left>0?0:i.left<r.maxScrollX?r.maxScrollX:i.left,i.left=i.left+r.options.gutterWidth+r.options.peekWidth,i.top=i.top>r.minScrollY?r.minScrollY:i.top<r.maxScrollY?r.maxScrollY:i.top,t=t===undefined?n.max(n.abs(i.left)*2,n.abs(i.top)*2):t,r.scrollTo(i.left,i.top,t)},scrollToPage:function(e,t,n){var r=this,i,s;n=n===undefined?400:n,r.options.onScrollStart&&r.options.onScrollStart.call(r),r.options.snap?(e=e=="next"?r.currPageX+1:e=="prev"?r.currPageX-1:e,t=t=="next"?r.currPageY+1:t=="prev"?r.currPageY-1:t,e=e<0?0:e>r.pagesX.length-1?r.pagesX.length-1:e,t=t<0?0:t>r.pagesY.length-1?r.pagesY.length-1:t,r.currPageX=e,r.currPageY=t,i=r.pagesX[e]+r.options.gutterWidth+r.options.peekWidth,s=r.pagesY[t]):(i=-r.wrapperW*e,s=-r.wrapperH*t,i<r.maxScrollX&&(i=r.maxScrollX),s<r.maxScrollY&&(s=r.maxScrollY)),r.scrollTo(i,s,n)},disable:function(){this.stop(),this._resetPos(0),this.enabled=!1,this._unbind(E,e),this._unbind(S,e),this._unbind(x,e)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind(N):k(this.aniTime),this.steps=[],this.moved=!1,this.animating=!1},zoom:function(e,t,n,r){var i=this,s=n/i.scale;if(!i.options.useTransform)return;i.zoomed=!0,r=r===undefined?200:r,e=e-i.wrapperOffsetLeft-i.x,t=t-i.wrapperOffsetTop-i.y,i.x=e-e*s+i.x,i.y=t-t*s+i.y,i.scale=n,i.refresh(),i.x=i.x>0?0:i.x<i.maxScrollX?i.maxScrollX:i.x,i.y=i.y>i.minScrollY?i.minScrollY:i.y<i.maxScrollY?i.maxScrollY:i.y,i.scroller.style[a]=r+"ms",i.scroller.style[o]="translate("+i.x+"px,"+i.y+"px) scale("+n+")"+L,i.zoomed=!1},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}},r=null,typeof exports!="undefined"?exports.iScroll=A:e.iScroll=A}(window,document),define("iscroll",function(e){return function(){var t,n;return t||e.iScroll}}(this)),define("text!templates/trip_feed/flight_card.tmpl",[],function(){return'<li class="card flight" data-trip-item-id="{{id}}" data-location="{{event_type}}" data-trip-item-type="{{lowercase type}}">\n	<header class="card-header event-detail">\n		<div class="cell col-26">\n			<div class="airline-icon airline-{{lowercase airline_code}}"></div>\n			<h3>{{ airline }}</h3>\n			<p class="subtitle">\n				<span>{{ airline_code }} {{ flight_number }}</span>\n\n				{{#ifShowStatusIndicator scheduled_departure}}\n				<span class="status-indicator {{statusIndicatorClass cancelled departure_status}}">\n					{{statusIndicatorText cancelled departure_status}}\n				</span>\n				{{/ifShowStatusIndicator}}\n			</p>\n		</div>\n	</header>\n\n	<section class="card-content event-detail">\n		<div class="cell first col-18">\n			<div class="label">{{t "Departs"}}</div>\n			<div class="value">\n				{{departure_airport_code}} <span class="note">{{departure_airport_city}}</span>\n			</div>\n		</div>\n\n		<div class="cell right col-7">\n			<div class="label">\n				{{t "TermGate"}}\n			</div>\n			<div class="value {{alertClassIf departure_terminal_or_gate_change}}">\n				{{get_terminal_and_gate departure_terminal departure_gate}}\n			</div>\n		</div>\n\n		<div class="cell first col-13">\n			<div class="primary {{departureTimeClass cancelled scheduled_departure estimated_departure}}">\n				<span class="small-caps">{{timeFromDateTime estimated_departure}}</span>\n			</div>\n		</div>\n\n		{{#if seat_number}}\n		<div class="cell col-3">\n			<div class="label">\n				{{t "Seat"}}\n			</div>\n			<div class="value">\n				{{seat_number}}\n			</div>\n		</div>\n		{{else}}\n		<div class="cell col-3"></div>\n		{{/if}}\n\n		{{#if confirmation_number}}\n		<div class="cell right col-8">\n			<div class="label">\n				{{t "ConfirmNum"}}\n			</div>\n			<div class="value">\n				{{confirmation_number}}\n			</div>\n		</div>\n		{{/if}}\n\n	</section>\n\n	<section class="card-content event-detail">\n		<div class="cell first col-18">\n			<div class="label">{{t "Arrives"}}</div>\n			<div class="value">\n				{{arrival_airport_code}} <span class="note">{{arrival_airport_city}}</span>\n			</div>\n		</div>\n\n		<div class="cell right col-7">\n			<div class="label">\n				{{t "TermGate"}}\n			</div>\n			<div class="value {{alertClassIf arrival_terminal_or_gate_change}}">\n				{{get_terminal_and_gate arrival_terminal arrival_gate}}\n			</div>\n		</div>\n\n		<div class="cell first col-13">\n			<div class="primary {{arrivalTimeClass cancelled scheduled_arrival estimated_arrival}}">\n				<span class="small-caps">{{timeFromDateTime estimated_arrival}}</span>\n			</div>\n		</div>\n\n		<div class="cell right col-12">\n			<div class="label">\n				{{t "Baggage"}}\n			</div>\n			<div class="value {{alertClassIf baggage_claim_change}}">\n				{{if_not_blank baggage_claim "TBD"}}\n			</div>\n		</div>\n	</section>\n\n	<ul class="card-toolbar clearfix">\n		<li class="call" data-trip-item-id="{{id}}">\n			<div class="button-icon btn_icon_call_blue_25px"></div>\n			{{t "Call"}}\n		</li>\n		<li class="directions" data-trip-item-id="{{id}}">\n			<div class="button-icon btn_icon_directions_blue_25px"></div>\n			{{t "Directions"}}\n		</li>\n		<li class="weather" data-trip-item-id="{{id}}">\n			<div class="button-icon btn_icon_weather_blue_25px"></div>\n			{{t "Weather"}}\n		</li>\n		<li class="alternate-flights" data-trip-item-id="{{id}}">\n			<div class="button-icon btn_icon_alt_flights_blue_25px"></div>\n			{{t "AltFlightsShort"}}\n		</li>\n	</ul>\n</li>'}),define("text!templates/trip_feed/hotel_vehicle_generic_card.tmpl",[],function(){return'<li class="card" data-trip-item-id="{{id}}" data-location="{{event_type}}" data-trip-item-type="{{lowercase type}}">\n	<header class="card-header event-detail">\n		<div class="cell col-26">\n			<div class="general-icon {{icon}}"></div>\n			<h3>{{if_not_blank name "Untitled"}}</h3>\n		</div>\n	</header>\n\n	<section class="card-content event-detail">\n		<div class="cell first col-26">\n			<div class="label">\n				{{#isCarOrHotel className}}\n					{{#if_equal event_type "start"}}\n						{{labels.start}}\n					{{else}}\n						{{labels.end}}\n					{{/if_equal}}\n				{{else}}\n					{{t "Starts"}}\n				{{/isCarOrHotel}}\n			</div>\n			<div class="value">\n				{{#isCarOrHotel className}}\n					{{#if_equal event_type "start"}}\n						{{locationAddress start_location}}\n					{{else}}\n						{{#if end_location.general_location}}\n							{{locationAddress end_location}}\n						{{else}}\n							{{locationAddress start_location}}\n						{{/if}}\n					{{/if_equal}}\n				{{else}}\n					{{locationAddress start_location}}\n				{{/isCarOrHotel}}\n			</div>\n		</div>\n\n		<div class="cell first col-13">\n			<div class="primary">\n				<span class="small-caps">\n				{{#isCarOrHotel className}}\n					{{#if_equal event_type "start"}}\n						{{timeFromDateTime start_date}}\n					{{else}}\n						{{timeFromDateTime end_date}}\n					{{/if_equal}}\n				{{else}}\n					{{timeFromDateTime start_date}}\n				{{/isCarOrHotel}}\n				</span>\n			</div>\n		</div>\n\n		{{#if confirmation_number}}\n		<div class="cell col-8">\n			<div class="label">\n				{{t "ConfirmNum"}}\n			</div>\n			<div class="value">\n				{{confirmation_number}}\n			</div>\n		</div>\n		{{/if}}\n\n	</section>\n\n	<section class="card-content card-map" data-lat-lng="{{getStaticMapLatLng}}"\n		{{#if_equal type "Vehicle"}}\n			{{#if_equal event_type "end"}}\n				data-segment="end"\n			{{/if_equal}}\n		{{/if_equal}}\n	>\n		<div class="card-map-marker-shadow"></div>\n		<div class="card-map-marker"></div>\n	</section>\n\n	<ul class="card-toolbar clearfix">\n		<li class="call" data-trip-item-id="{{id}}">\n			<div class="button-icon btn_icon_call_blue_25px"></div>\n			{{t "Call"}}\n		</li>\n		<li class="directions" data-trip-item-id="{{id}}"\n		{{#if_equal type "Vehicle"}}\n			{{#if_equal event_type "end"}}\n				data-segment="end"\n			{{/if_equal}}\n		{{/if_equal}}\n		>\n			<div class="button-icon btn_icon_directions_blue_25px"></div>\n			{{t "Directions"}}\n		</li>\n	</ul>\n</li>'}),define("text!templates/trip_feed/hotel_check_out_card.tmpl",[],function(){return'<li class="card hotel-checkout event-detail" data-trip-item-id="{{id}}" data-location="{{ event_type }}" data-trip-item-type="{{lowercase type}}">\n	<div class="hotel-checkout-image"></div>\n	<section class="card-content">\n		<div class="cell first col-8">\n			<div class="label">\n				<span class="upper-case">\n					{{t "HotelCheckOut"}}\n				</span>\n			</div>\n		</div>\n		<div class="cell first col-8">\n			<div class="value">\n				<span class="small-caps">\n					{{timeFromDateTime end_date}}\n				</span>\n			</div>\n		</div>\n	</section>\n</li>'}),define("text!templates/trip_feed/plan_event_card.tmpl",[],function(){return'<li class="card plan-event" data-trip-item-type="{{lowercase type}}">\n	<section class="plan-event-header">\n		{{#if hasClockTimer}}\n			<div class="cell first col-14 right">\n				<div class="status-label">\n					{{labelText}}\n				</div>\n			</div>\n			<div class="cell col-7 days-padding">\n				<div class="days-value-flipper">\n					<div class="days-value">{{timeValue}}</div>\n					<div class="days-label">{{timeLabel}}</div>\n					<div class="days-line"></div>\n				</div>\n			</div>\n		{{else}}\n			<div class="cell first col-26 center status-label">\n				{{labelText}}\n			</div>\n		{{/if}}\n	</section>\n\n	<section class="plan-event-destination">\n		<div class="destination-locale">\n			{{destination}}\n		</div>\n	</section>\n\n	<nav>\n		<ul class="card-toolbar clearfix">\n			<li id="trip-itinerary" class="itinerary">\n				<div class="button-icon btn_icon_itinerary_blue_25px"></div>\n				{{t "Timeline"}}\n			</li>\n			<li id="trip-add-item" class="add-item">\n				<div class="button-icon btn_icon_add_blue_25px"></div>\n				{{t "AddItem"}}\n			</li>\n			<li id="trip-weather" class="weather">\n				<div class="button-icon btn_icon_weather_blue_25px"></div>\n				{{t "Weather"}}\n			</li>\n			<li id="trip-share" class="share">\n				<div class="button-icon btn_icon_share_blue_25px"></div>\n				{{t "Share"}}\n			</li>\n		</ul>\n	</nav>\n</li>\n'}),define("views/trip_feed/trip_feed_view_partials",["handlebars","text!templates/trip_feed/flight_card.tmpl","text!templates/trip_feed/hotel_vehicle_generic_card.tmpl","text!templates/trip_feed/hotel_check_out_card.tmpl","text!templates/trip_feed/plan_event_card.tmpl"],function(e,t,n,r,i){e.registerPartial("flightCard",t),e.registerPartial("hotelVehicleGenericCard",n),e.registerPartial("hotelCheckOutCard",r),e.registerPartial("planEventCard",i)}),define("views/trip_feed/trip_feed_view_helpers",["handlebars","strings","moment"],function(e,t,n){function i(e,t){var r="on-time",i=n(e).diff(n(t));return i<0?r="delayed":i>0&&(r="early"),r}var r={ifShowStatusIndicator:function(e,t){var r=n(e).diff(n(),"hours");if(r>-24&&r<24)return t.fn(this)},statusIndicatorClass:function(e,t){return e?"canceled":t?"delayed":"on-time"},statusIndicatorText:function(e,n){return e?t.Canceled:n?t.Delayed:t.OnTime},departureTimeClass:function(e,t,n){return e?"canceled":i(t,n)},arrivalTimeClass:function(e,t,n){return e?"canceled":i(t,n)},alertClassIf:function(e){return e&&"alert"}};return e.registerHelper("ifShowStatusIndicator",r.ifShowStatusIndicator),e.registerHelper("statusIndicatorClass",r.statusIndicatorClass),e.registerHelper("statusIndicatorText",r.statusIndicatorText),e.registerHelper("departureTimeClass",r.departureTimeClass),e.registerHelper("arrivalTimeClass",r.arrivalTimeClass),e.registerHelper("alertClassIf",r.alertClassIf),r}),define("views/trip_feed/trip_card_view",["namespace","jquery","underscore","backbone","mediator","helpers","moment","analytics","presenters/trip_events_presenter","iscroll","strings","views/trip_feed/trip_feed_view_partials","views/trip_feed/trip_feed_view_helpers"],function(e,t,n,r,i,s,o,u,a,f,l){var c=r.View.extend({template:"trip_feed/trip_cards",attributes:{"data-timing-category":"appload","data-timing-name":"tripcards"},events:{"vclick .event-detail":"onViewDetail","vclick .call":"onPhonePick","vclick .directions":"onDirectionsPick","vclick .card-map":"onMapPick","vclick .weather:not(#trip-weather)":"onWeatherPick","vclick .alternate-flights":"onAltFlight",vclick:"setModelShouldCacheView","vclick .map":"onDirectionsPick","vclick #trip-itinerary":"onTripItinerary","vclick #trip-add-item":"onTripAddItem","vclick #trip-weather":"onTripWeather","vclick #trip-share":"onTripShare"},className:"card-container",initialize:function(){n.bindAll(this,"snapToActiveItem","recalculateSizing","scrollLeft","scrollRight"),this.presenter=this._getPresenter(),this.activeItemIndex=this._getRelevantTripItem(),this.on("afterrender",this.afterrender,this),this.peekWidth=10,this.gutterWidth=10,i.subscribe("tripfeed:scrollleft",this.scrollLeft),i.subscribe("tripfeed:scrollright",this.scrollRight)},_getRelevantTripItem:function(){var e=0;return this.model&&(this.model.isInProgress()||this.model.startsSoon())&&(e=this.model.getMostRelevantEventIndex()+1),e},_getPresenter:function(){return new a({model:this.model,isPlanEventNeeded:!0})},_onMessagesHide:function(){this.activeItemIndex=this._getRelevantTripItem(),this.snapToActiveItem()},afterrender:function(){this.scrollInstance||(this.setupSwipe(),t(window).on("resize.recalcContainer",n.debounce(this.recalculateSizing,300))),this.recalculateSizing(),this.model.shouldCacheTripFeedView=null,i.unsubscribe("messages:hide"),i.subscribe("messages:hide",this._onMessagesHide,this),this.tripEvents=null},serialize:function(){return this.presenter=this._getPresenter(),this.presenter},setupSwipe:function(){var e=this;this.scrollInstance=new f("trip-cards",{snap:".card",momentum:!1,hScrollbar:!1,vScrollbar:!1,vScroll:!1,lockDirection:!0,onBeforeScrollStart:null,useTransition:!0,peekWidth:e.peekWidth,gutterWidth:e.gutterWidth,onScrollEnd:function(){e.onScrollEnd(this)}})},scrollLeft:function(){this.scrollInstance.scrollToPage(this.activeItemIndex-1,0,0)},scrollRight:function(){this.scrollInstance.scrollToPage(this.activeItemIndex+1,0,0)},recalculateSizing:function(){var e=this.$el,n=e.find(".card"),r=n.not(".hotel-checkout"),i=n.filter(".hotel-checkout"),s=t(window).width(),o,u=parseInt(n.css("min-width").replace("px",""),10),a=i.first().width()||0,f=this.peekWidth+this.gutterWidth,l=f*2;u>s-l?o=u:o=s-l,this.updateStaticMaps(r,o),r.width(o),e.width(l+this.gutterWidth+r.length*(o+this.gutterWidth)+i.length*(a+this.gutterWidth)),this.scrollInstance&&(this.scrollInstance.wrapper.contains(this.scrollInstance.scroller)||this.setupSwipe(),this.scrollInstance.refresh(),this.snapToActiveItem())},updateStaticMaps:function(e){var n=window.devicePixelRatio>1,r="https://maps.googleapis.com/maps/api/staticmap?key=AIzaSyB3bok8pEJ9bX71nPHiccECokdDzmhx3r8&sensor=false&zoom=13";n&&(r+="&scale=2"),e.find(".card-map").each(function(){var e=t(this),n=r+"&center="+e.data("lat-lng")+"&size="+640+"x118";e.css("background-image","url("+n+")")})},onScrollEnd:function(e){this.activeItemIndex=e.currPageX,this.updateCarouselHeader(this.activeItemIndex)},snapToActiveItem:function(){this.scrollInstance.scrollToPage(this.activeItemIndex,0,0)},updateCarouselHeader:function(e){var t=this.getItemDateText(e),n=this.getCardIndexText(e);this.trigger("updateHeader",{index:n,dateString:t})},getCardIndexText:function(e){var t=this.getTripEvents().length;return e+1+" of "+t},getItemDateText:function(e){var t="",n=this.getTripEvents()[e],r,i;return n.end_date&&n.start_date&&(r=n.event_type==="end",i=r?n.end_date:n.start_date,t=s.dateHelpers.mediumLongDate(i)),t},getTripEvents:function(){return this.tripEvents=this.tripEvents||n.flatten(n.map(this.presenter.days,function(e){return e.events})),this.tripEvents},isInView:function(){return t.contains(t("#app-page")[0],this.el)},cleanup:function(){this.tripEvents=null,this.scrollInstance&&this.scrollInstance.destroy(),this.scrollInstance=null,this.model.shouldCacheTripFeedView=null,t(window).off("resize.recalcContainer"),i.unsubscribe("tripfeed:scrollleft",this.scrollLeft),i.unsubscribe("tripfeed:scrollright",this.scrollRight)},render:function(e){return i.publish("trip_items:feed:change",{tripId:this.model.get("id")}),e(this).render()},setModelShouldCacheView:function(){this.model.shouldCacheTripFeedView=!0},_eventPreventOfflineGuard:function(t){return t.preventDefault(),e.isOnline||i.publish("error:trigger","service",[{message:l.ErrorOffline}]),e.isOnline},onViewDetail:function(n){n.preventDefault();var r=t(n.currentTarget).closest(".card"),s=this.model.id,o=r.data("trip-item-id"),a=r.data("location"),f=this.model.tripItems.get(o),l=f.getType();a&&f.set("viewedLocation",a),i.publish("trip_items:show",{tripId:s,itemId:o}),u.trackEvent("TripFeed","ViewDetail_"+l,e,s,o)},onPhonePick:function(n){n.preventDefault();var r=this.model.id,s=t(n.currentTarget).data("trip-item-id");i.publish("phone_numbers:showPhoneNumbers",{tripId:r,itemId:s}),u.trackEvent("TripFeed","Phone",e,r,s)},onDirectionsPick:function(n){var r,s,o,a;this._eventPreventOfflineGuard(n)&&(r=t(n.currentTarget).data("trip-item-id"),s=t(n.currentTarget).data("segment"),o=!1,a=this.trip?this.trip.id:undefined,s&&s==="end"&&(o=!0),i.publish("map:directions",{itemId:r,isEnd:o}),u.trackEvent("TripFeed","Directions",e,a,r))},onMapPick:function(n){var r,s,o,a;this._eventPreventOfflineGuard(n)&&(r=t(n.currentTarget),s=r.closest(".card").data("trip-item-id"),o=r.data("segment"),a=!1,o&&o==="end"&&(a=!0),i.publish("map:show",{itemId:s,isEnd:a}),u.trackEvent("TripFeed","Map",e,this.model.id,s))},onWeatherPick:function(n){var r;this._eventPreventOfflineGuard(n)&&(r=t(n.currentTarget).data("trip-item-id"),i.publish("weather:show",{tripItemId:r}),u.trackEvent("TripFeed","Weather",e,this.model.id,r))},onAltFlight:function(n){var r;this._eventPreventOfflineGuard(n)&&(r=t(n.currentTarget).data("trip-item-id"),i.publish("altflights:show",{itemId:r}),u.trackEvent("TripFeed","AlternateFlights",e,this.model.id,r))},onTripItinerary:function(t){var n;this.model.setTripFeedView(!1),n=this.model.id,i.publish("trip_items:index",{tripId:n}),u.trackEvent("PlanEvent","Itinerary",e,n)},onTripAddItem:function(t){var n;this._eventPreventOfflineGuard(t)&&(n=this.model.id,i.publish("trip_items:add",{tripId:n}),u.trackEvent("PlanEvent","AddItem",e,n))},onTripWeather:function(t){var n;this._eventPreventOfflineGuard(t)&&(n=this.model.id,i.publish("weather:show"),u.trackEvent("PlanEvent","Weather",e,n))},onTripShare:function(t){var n;this._eventPreventOfflineGuard(t)&&(n=this.model.id,i.publish("trips:share"),u.trackEvent("PlanEvent","Share",e,n))}});return c}),define("views/trip_feed/trip_message_view",["namespace","jquery","backbone","mediator","analytics","strings","trips_manager","layoutmanager"],function(e,t,n,r,i,s,o){var u=n.View.extend({events:{"click .trip-message":"onClicked"},template:"trip_feed/trip_messages",initialize:function(e){this.collection&&this.initSubscriptions()},initSubscriptions:function(){this.collection.off("reset"),this.collection.on("reset",function(){this.render()},this)},setCollection:function(e){e!==this.collection&&(this.collection=e,this.initSubscriptions())},serialize:function(){var e={messages:this.collection.toJSON(),isFetchingMessages:this.collection.isFetching};return e},onClicked:function(n){var u=t(n.currentTarget).data("index")-1,a=this.collection.at(u);e.isOnline?a.isCancelledFlight()?(this._callMetricsUrl(a,function(){r.publish("altflights:show",{itemId:a.getTripItemId()})}),i.trackEvent("TripFeedMessage","GotoAltFlightsIsCanceled",e,this.collection.trip.id)):a.isUrlLink()?(r.publish("messages:external_url",{url:a.getUrl()}),i.trackEvent("TripFeedMessage","GotoUrl",e,this.collection.trip.id)):a.isBrowserLink()?(r.publish("messages:external_url_in_browser",{url:a.getUrl()}),i.trackEvent("TripFeedMessage","GotoBrowser",e,this.collection.trip.id)):a.isToolLink()?(this._callMetricsUrl(a,function(){r.publish("messages:"+a.getToolName())}),i.trackEvent("TripFeedMessage","GotoTool_"+a.getToolName(),e,this.collection.trip.id)):a.isItemDefault()?(this._callMetricsUrl(a,function(){r.publish("trip_items:show",{tripId:o.getCurrentTrip().getTripId(),itemId:a.getTripItemId()})}),i.trackEvent("TripFeedMessage","GotoTripItem",e,this.collection.trip.id)):a.isTripLink()&&this._callMetricsUrl(a,function(){r.publish("trips:select",o.getTrips().get(a.getTripId()))}):(a.getUrl()||a.isToolLink())&&r.publish("error:trigger","service",[{message:s.ErrorOffline}]),n.preventDefault()},_callMetricsUrl:function(n,r){n.hasMetricsUrl()?t.ajax({data:{url:n.getMetricsUrl()},type:"get",url:e.config.apiURL+"/mapi/tripfeed_metrics",complete:function(){r()}}):r()}});return u}),define("views/trip_feed/carousel_header_view",["namespace","jquery","underscore","backbone","mediator","helpers","analytics","presenters/trip_events_presenter","iscroll","strings"],function(e,t,n,r,i,s,o,u,a,f){var l=r.View.extend({template:"trip_feed/carousel_header",initialize:function(){this.tripCardView=this.options.tripCardView,this.tripCardView.on("updateHeader",this._onCarouselChange,this)},_onCarouselChange:function(e){this.$el.find("#carousel-index").html(e.index),this.$el.find("#carousel-date").html(e.dateString)}});return l}),define("controllers/trip_items_controller",["mediator","namespace","jquery","underscore","controllers/controller","backbone","views/trip_items/trip_items_index_view","helpers","views/itinerary/itinerary_views","views/trip_feed/trip_card_view","views/trip_feed/trip_message_view","views/trip_feed/carousel_header_view","trips_manager","analytics"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){var d=i.extend({initialize:function(e){r.bindAll(this),this._tripId=null,this._layout=t.getLayout("simple_with_loading"),this._initSubscriptions()},_initSubscriptions:function(){e.subscribe("trip_items:index",this.index),e.subscribe("trip_items:add",this.add),e.subscribe("trip_items:show",this.show),e.subscribe("trip_items:feed",this.feed),e.subscribe("trip_items:back_info_add",this.add),e.subscribe("following_trip_items:index",this.followingIndex),e.subscribe("itinerary:refresh",this.onItineraryRefresh,this),e.subscribe("tripFeed:refresh",this.onTripFeedRefresh,this),e.subscribe("device:resume",this.resume)},index:function(e){this.tripId=e.tripId||this.tripId,this.model=h.getTrips().get(this.tripId),this._initModelChangeSubscription(),this._goToBestView(e)},followingIndex:function(e){var t,n=this;this.tripId=e.tripId||this.tripId,h.getFollowingTrips().isEmpty()?(this.showLoading(),h.getFollowingTrips().fetch({localCache:!1,fetchAllTrips:!0,success:function(r){t=r.get(e.tripId),n.showFollowingIndex(t,e)}})):(t=h.getFollowingTrips().get(this.tripId),this.showFollowingIndex(t,e))},showFollowingIndex:function(t,n){r(t).isUndefined()?e.publish("trips:index"):(e.publish("following_trip_header:index",t),this.model=t,this._initModelChangeSubscription(),this.itinerary(n))},_goToBestView:function(e){var t=this.model.getTripFeedView()||typeof this.model.getTripFeedView()=="undefined";t?(this.model.setTripFeedView(!0),this.feed(e)):this.itinerary(e)},_onModelChange:function(){n("#trip-cards").length>0?this._setFeedView():n(".itinerary-page").length>0&&this._setItineraryView()},itinerary:function(e){this._layout=t.getLayout("simple_with_loading"),this.showLoading(),this.tripId=e.tripId||this.tripId,this.model.fetch({silent:!0,success:this._setItineraryView})},_initModelChangeSubscription:function(){this.model.off("change",this._onModelChange,this),this.model.on("change",this._onModelChange,this)},feed:function(e){return this._layout=t.getLayout("simple_with_loading"),this.showLoading(),this.tripId=e.tripId||this.tripId,this.model=h.getTrips().get(this.tripId),this._initModelChangeSubscription(),this.model.fetch({silent:!0,success:this._setFeedView})},add:function(e){this.tripId=e?e.tripId||this.tripId:this.tripId,this.model=h.getTrips().get(this.tripId),this._layout=t.getLayout("simple_with_loading"),this.setView(new o({tripId:this.tripId}))},edit:function(e){this.tripId=e?e.tripId||this.tripId:this.tripId,this.model=h.getTrips().get(this.tripId),this._layout=t.getLayout("simple_with_loading"),this.setView(new o({tripId:this.tripId}))},show:function(n){var r,i={trip:{id:n.tripId},id:n.itemId},s;this._layout=t.getLayout("simple_with_loading"),h.getTripItems(n.tripId,function(t){var o=t.get(n.itemId);o.get("named_type")!=="Generic"&&(s=o.get("type").toLowerCase(),s==="air"?r="flights:show":r=s+"s:show",e.publish(r,i))})},_doesModelHaveTripItems:function(){return!this.model.tripItems.isEmpty()},_setItineraryView:function(){delete this.model.attributes["@name"],this._doesModelHaveTripItems()||this.model.isFollowing()?(this.itineraryView=new a({model:this.model}),this.setView(this.itineraryView)):this.add()},onItineraryRefresh:function(){var e="Refresh";t.isOnline&&(this.model.fetch({isToRefresh:!0}),h.getCurrentTrip().isFollowing()&&(e="RefreshFollowing"),p.trackEvent("Itinerary",e,t))},onTripFeedRefresh:function(){t.isOnline&&(this.model.fetch({isToRefresh:!0}),this.model.messages.isLegacy||this.model.messages.fetch({isToRefresh:!0}),p.trackEvent("TripFeed","Refresh",t))},_setFeedView:function(){if(this._doesModelHaveTripItems()){var r=this;this._layout=t.getLayout("trip_feed"),this.model.shouldCacheTripFeedView?e.publish("ajax:abort"):(this.tripCardView=new f({model:this.model}),this.carouselHeaderView=new c({tripCardView:this.tripCardView}),this.tripMessageView=this.tripMessageView||new l,this.tripMessageView.setCollection(this.model.messages),this._layout.setViews({"#trip-cards":this.tripCardView,"#trip-messages":this.tripMessageView,"#carousel-header":this.carouselHeaderView})),this.model.messages.isLegacy||(this.model.messages.isFetching=!0,this.model.messages.fetch({reset:!0,silent:!0,success:function(e){e.isFetching=!1,e.trigger("reset")}}),n("body").removeClass("load")),this._layout.render(function(e){n("#app-page").html(e)}).then(function(){r.tripCardView.trigger("afterrender"),u.hideURLBar(),r._actionViewOverlay()})}else this.add()},_actionViewOverlay:function(){e.publish("overlay:trigger",{templateFilename:"overlay_action_view",storageKeyName:"action_view",analyticsEvent:"ActionView"})},resume:function(){var e=this;this.isInView()&&!this.isFetchingTrip&&(this.isFetchingTrip=!0,this.model.fetch({isToRefresh:!0,success:function(){e.isFetchingTrip=!1}}),this.tripCardView.isInView()&&!this.model.messages.isLegacy&&!this.isFetchingMessages&&(this.isFetchingMessages=!0,this.model.messages.fetch({isToRefresh:!0,success:function(){e.isFetchingMessages=!1}})))},isInView:function(){var e=this.itineraryView!==undefined&&this.itineraryView.isInView();return e=e||this.tripCardView!==undefined&&this.tripCardView.isInView(),e}});return d}),define("parsers/flight_group_parser",["underscore","backbone","models/air_trip_item"],function(e,t,n){var r={parse:function(t){var r=t.air_reservations;return this.reservations.reset(),r=e.each(r,function(e,t){var r=new n;r.parseAirTripItem({air_reservation:e}),r.id=e.flight.id,r.index=t,r.attributes.id=r.id,r.attributes.seats=e.seats,r.attributes.note=e.flight.note,r.attributes.for_business=e.flight.for_business,r.attributes.travel_time_minutes=e.flight.estimated_duration,r.attributes.baggage_claim=e.flight.baggage_claim,r.attributes.layover_minutes=e.flight.layover_minutes,r.attributes.arrival_airport=e.flight.arrival_airport.name,r.attributes.arrival_airport_code=e.flight.arrival_airport.iata_code,r.attributes.departure_airport=e.flight.departure_airport.name,r.attributes.departure_airport_code=e.flight.departure_airport.iata_code,this.reservations.add(r)},this),t.flight_group_summary}};return r}),define("collections/air_reservations_list",["jquery","underscore","collections/collection","models/air_trip_item"],function(e,t,n,r){var i=n.extend({model:r});return i}),define("proxies/flight_group_proxy",["proxies/proxy","helpers"],function(e,t){var n=e.extend({syncConfig:function(e,t){this._setUrl(e),this.cacheTTL=1,this.cacheTTLmultiplier="minutes",this.cacheKey="trip_item_"+this.model.get("id"),this.invalidationKeys=[this.cacheKey,"trip_"+this.model.trip.get("id"),"trip_list","session"],t.isToRefresh?this.isToRefresh=!0:this.isToRefresh&&delete this.isToRefresh},_setUrl:function(){this.url="/mapi/trips/{trip_id}/trip_items/{item_id}/flight_group.json",this.url=this.url.supplant({trip_id:this.model.trip.get("id"),item_id:this.model.get("id")})},toJSON:function(){return}});return n}),define("models/flight_group",["jquery","underscore","backbone","proxies/air_trip_item_proxy","models/trip_item","helpers","parsers/flight_group_parser","collections/air_reservations_list","proxies/flight_group_proxy","collections/phone_number_list"],function(e,t,n,r,i,s,o,u,a,f){var l=i.extend({initialize:function(e,n){n&&(t.extend(this,{trip:n.model.trip}),this.set(n.model.attributes,{silent:n.silent})),t.extend(this,o),this.proxy=new a({},{model:this}),this.reservations=new u,this.phoneNumbers=new f},hasMultipleReservations:function(){return this.reservations.length>1},invalidateCache:function(){return this.proxy.invalidateCache()}});return l}),define("collections/trip_list",["jquery","underscore","collections/collection","models/trip","proxies/trip_list_proxy"],function(e,t,n,r,i){var s=n.extend({model:r,initialize:function(e,t){this.proxy=new i({},{collection:this})},getActiveList:function(){var e=this.models.filter(function(e){return e.isActive()});return new s(e)},getPastList:function(){var e=this.models.filter(function(e){return!e.isActive()});return new s(e)},parse:function(e){var n=t(e).map(function(e){var t=new r;return t.set(t.parse(e),{silent:!0}),t});return n}});return s}),define("controllers/offline_controller",["jquery","underscore","mediator","namespace","controllers/controller","models/flight_group","collections/trip_list","trips_manager"],function(e,t,n,r,i,s,o,u){var a=i.extend({_handleOffline:function(){e("body").addClass("offline")},_handleOnline:function(){e("body").removeClass("offline")},initialize:function(){t.bindAll(this),document.addEventListener("offline",function(){n.publish("offline:offline")},!1),document.addEventListener("online",function(){n.publish("offline:online")},!1),this._initSubscriptions()},_initSubscriptions:function(){n.subscribe("proxy:cacheRemove",this.startBackgroundCache),n.subscribe("session:success",this.startBackgroundCache),n.subscribe("session:invalid",this.cleanUpCache),n.subscribe("networkerror",this.showNoNetworkUI),n.subscribe("offline:offline",this._handleOffline),n.subscribe("offline:online",this._handleOnline)},backgroundCache:function(){r.user!==null&&r.isOnline===!0&&(r.session.fetch({success:function(e){var t=r.session.getTripList(),n;t.fetch(),n=r.session.get("most_relevant_trip_id");if(n!==!1){var i=u.getTrips().get(n);i&&(u.getTrips().get(n).fetch(),u.getTrips().getTripItems(n,function(e){for(var t=0;t<e.models.length;t++){var n=e.models[t],r=new s;n.get("type").toLowerCase()==="air"&&(r.initialize(null,{model:e.models[t]}),r.fetch())}}))}}}),e("body").removeClass("load"))},showNoNetworkUI:function(){e(".no-connection").show()},cleanUpCache:function(){this._clearPrefixedCache("session"),this._clearPrefixedCache("trip_"),this._clearPrefixedCache("following_trip")},_clearPrefixedCache:function(e){var t;for(t in localStorage)localStorage.hasOwnProperty(t)&&t.search(e)===0&&localStorage.removeItem(t)},startBackgroundCache:function(){e("body").removeClass("load"),setTimeout(this.backgroundCache,3e3)}});return a}),define("text!modules/header/header.tmpl",[],function(){return'<div class="header">\n	<div class="primary-actions">\n	{{#if backAction}}\n		<button class="button back left"><span class="btn_icon_back_25px button-icon"></span></button>\n	{{/if}}\n	{{#each leftButtons}}\n		<button class="button left {{name}}">\n			<span class="{{iconClass}}"></span>\n		</button>\n	{{/each}}\n	</div>\n	<div class="titles">\n		{{#unless titleText}}\n		<span class="title logo_tripcase">&nbsp;</span>\n		{{/unless}}\n	{{#if titleText}}\n		{{#if isFollowingTrip}}\n			<span class="traveler-name {{#if icon}}with-{{icon}}-icon{{/if}}">{{{travelerName}}}</span>\n		{{/if}}\n		<span class="title {{#if icon}}with-{{icon}}-icon{{/if}}">{{{titleText}}}</span>\n		{{#if subtitleText}}<span class="sub-title">{{{subtitleText}}}</span>{{/if}}\n	{{/if}}\n	</div>\n	<div class="secondary-actions">\n	{{#each rightButtons}}\n		<button class="button right {{name}}">\n			{{#if text}}{{text}}{{/if}}\n			{{#if iconURL}}<span class="{{iconURL}}"></span>{{/if}}\n		</button>\n	{{/each}}\n	</div>\n</div>\n\n'}),define("modules/header/header_component",["namespace","jquery","underscore","backbone","mediator","handlebars","text!./header.tmpl"],function(e,t,n,r,i,s,o){var u=r.Model.extend({defaults:{leftButtons:[],rightButtons:[],backAction:null,backParams:null,icon:null,titleText:null,subtitleText:null},hasBackAction:function(){return this.get("backAction")}}),a=r.View.extend({template:s.compile(o),className:"app-header",target:t("#viewport"),appPage:t("#app-page"),renderedToTarget:!1,model:new u,initialize:function(){},events:{"vclick .back":"back"},back:function(e){e.preventDefault();var t=this.model.get("backAction"),r=this.model.get("backParam");return this.$el.hasClass("sidemenu-slide-out")?i.publish("sidemenu:toggle"):t&&(n.isArray(t)&&n.isFunction(t[0])?t[0].call(t[1],[]):i.publish(t,r)),!1},serialize:function(){return this.model.toJSON()},render:function(){return this._resizeHeaderHeight(),this.renderedToTarget?(this.delegateEventsForButtons(),this.$el.html(this.template(this.serialize()))):this.renderToTarget()},delegateEventsForButtons:function(){var e=this,t=n.compact(n.union(this.model.get("leftButtons"),this.model.get("rightButtons"))),r=function(e,t){return function(n){n.preventDefault(),i.publish(e,t)}},s;e.undelegate();for(var o=0;o<t.length;o+=1)s=e._getTargetClassName(t[o]),e.delegate("vclick",s,r(t[o].action,t[o].param))},_getTargetClassName:function(t){var n=this._prefixPeriodForProperCSS(t.name);return n=this._replaceSpacesForProperCSS(n),this.$(".primary-actions").off(),e.isBlackberry&&t.action&&(t.action.match(":back")||t.action==="sidemenu:toggle")&&(n=".primary-actions"),n},_prefixPeriodForProperCSS:function(e){return"."+e},_replaceSpacesForProperCSS:function(e){return e.replace(/ /,".")},renderToTarget:function(){this.target.prepend(this.$el.html(this.template(this.serialize()))),this.delegateEvents(),this.renderedToTarget=!0},delegate:function(e,t,r){var i,s;if(typeof e!="string")throw new TypeError("View#delegate: first argument must be a string");if(arguments.length===2)i=t;else{if(arguments.length!==3)throw new TypeError("View#delegate: only two or three arguments are allowed");s=t;if(typeof s!="string")throw new TypeError("View#delegate: second argument must be a string");i=r}if(typeof i!="function")throw new TypeError("View#delegate: handler argument must be function");return e+=".delegate"+this.cid,i=n(i).bind(this),s?this.$el.on(e,s,i):this.$el.on(e,i)},undelegate:function(){return this.$el.unbind(".delegate"+this.cid)},show:function(){this.model.hasBackAction()&&window.device&&window.device.platform==="Blackberry"&&this.delegate("vclick",".primary-actions",this.back),this._resizeHeaderHeight(),this.appPage.addClass("with-header"),this.$el.show()},hide:function(){this.appPage.removeClass("with-header"),this.$el.hide()},_resizeHeaderHeight:function(){var e=this.model.get("isTallHeader")?"addClass":"removeClass";t("#app-page")[e]("app-page--tall"),this.$el.find(".header")[e]("header--tall")}});return a}),define("controllers/ui/header_controller",["namespace","jquery","underscore","mediator","modules/header/header_component","trips_manager","helpers","strings"],function(e,t,n,r,i,s,o,u){var a=function(){this.initialize()};return a.prototype={initialize:function(){n.bindAll(this),this._initSubscriptions(),this.component=new i},_initSubscriptions:function(){r.subscribe("header:updateHeader",this.update),r.subscribe("session:success",this.show),r.subscribe("forgot_password:show",this.show),r.subscribe("session:invalid",this.hide),r.subscribe("session:login",this.hide),r.subscribe("sign_up:show",this.show),r.subscribe("terms:show",this.show),r.subscribe("terms:prompt",this.show),r.subscribe("trips:index",this.home),r.subscribe("trip_items:index",this.indexTripItem),r.subscribe("trip_items:index:change",this.onTripItemChange),r.subscribe("trip_items:feed",this.indexTripItem),r.subscribe("trip_items:feed:change",this.onTripItemChange),r.subscribe("trip_items:add",this.addTripItem),r.subscribe("trip_items:back_info_add",this.addTripItem),r.subscribe("trip_items:show",this.showTripItem),r.subscribe("following_trip_header:index",this.setTripItemsHeader),r.subscribe("vehicles:add",function(e){r.publish("header:updateHeader",{title:u.AddCarRental})},this),r.subscribe("cruise:add",function(e){r.publish("header:updateHeader",{title:u.AddCruise})},this),r.subscribe("food:add",function(e){r.publish("header:updateHeader",{title:u.AddRestaurant})},this),r.subscribe("attraction:add",function(e){r.publish("header:updateHeader",{title:u.AddAttraction})},this),r.subscribe("activity:add",function(e){r.publish("header:updateHeader",{title:u.AddActivity})},this),r.subscribe("ferry:add",function(e){r.publish("header:updateHeader",{title:u.AddFerry})},this),r.subscribe("groundtransportation:add",function(e){r.publish("header:updateHeader",{title:u.AddGroundTransportation})},this),r.subscribe("meeting:add",function(e){r.publish("header:updateHeader",{title:u.AddMeeting})},this),r.subscribe("rail:add",function(e){r.publish("header:updateHeader",{title:u.AddRail})},this)},update:function(e){e.title=e.title||this.component.model.get("titleText"),this.component.model.clear(),e.backAction&&this.component.model.set("backAction",e.backAction),e.backParams&&this.component.model.set("backParams",e.backParams),e.icon&&this.component.model.set("icon",e.icon),e.title&&this.component.model.set("titleText",e.title),e.subtitle&&this.component.model.set("subtitleText",e.subtitle),e.leftButtons&&this.component.model.set("leftButtons",e.leftButtons),e.rightButtons&&this.component.model.set("rightButtons",e.rightButtons),this.component.render()},getTitle:function(){return this.component.model.get("titleText")},home:function(){var e={leftButtons:[{name:"menu",iconClass:"btn_icon_menu_25px button-icon",action:"sidemenu:toggle"}],rightButtons:[{name:"trip-item-refresh",iconURL:"button-icon btn_icon_refresh_25px",action:"trips:refresh"}]};this.show(e)},indexTripItem:function(e){var t=s.getTrips().get(e.tripId);typeof t!="undefined"?this.setTripItemsHeader(t):r.publish("trips:index")},onTripItemChange:function(e){var t=s.getTrips().get(e.tripId);typeof t!="undefined"&&this.setTripItemsHeader(t)},getRefreshMessage:function(e){return e.getTripFeedView()?"tripFeed:refresh":"itinerary:refresh"},setTripItemsHeader:function(e){var t={subtitleText:o.dateHelpers.startEndDateWithDayMonthDate(e.get("start_time"),e.get("end_time")),titleText:e.get("name"),travelerName:e.get("traveler_name"),isFollowingTrip:e.isFollowing(),isTallHeader:e.isFollowing(),leftButtons:[{name:"menu",iconClass:"btn_icon_menu_25px button-icon",action:"sidemenu:toggle"}],rightButtons:[{name:"trip-item-refresh",iconURL:"button-icon btn_icon_refresh_25px",action:this.getRefreshMessage(e)}]};this.show(t)},addTripItem:function(e){var t=e===undefined?s.getCurrentTripId():e.tripId,n=s.getTrips().get(t),r={backAction:"back:history",titleText:u.AddAnItem};this.show(r)},showTripItem:function(e){var t=this,n=s.getTripItems(e.tripId,function(n){var r,i=n.get(e.itemId),o=i.get("type").toLowerCase(),u={titleText:i.getTitle(),subtitleText:i.getSubtitle(),backAction:"back:history"};o!=="air"&&(o==="hotel"?r="hotels:edit":o==="vehicle"?r="vehicles:edit":r="generic_item:edit",s.getTrip(e.tripId).isFollowing()?u.rightButtons=undefined:u.rightButtons=[{name:"trip-item-edit",iconURL:"button-icon btn_icon_edit_25px",action:r,param:{itemId:e.itemId,tripId:e.tripId}}],t.show(u))})},itinerary:function(e){var t=n.extend({leftButtons:[{name:"menu",iconClass:"btn_icon_menu_25px button-icon",action:"sidemenu:toggle"}],rightButtons:[{name:"trip-item-edit",iconURL:"button-icon btn_icon_edit_25px",action:"itinerary:refresh"}]},e);this.show(t)},show:function(e){this.component.model.clear(),e!==undefined&&this.component.model.set(e),this.component.render(),this.component.show()},hide:function(){this.component.hide()}},a}),define("text!views/errors/error_popup.tmpl",[],function(){return'<div class="standard-form-panel error-popup">\n	<div class="error-title-group group">\n		<div class="icon_alert_25px general-icon"></div>\n		<div class="message"><p>{{title}}</p></div>\n	</div>\n	<div class="error-message-group">\n		{{{parseErrors errors}}}\n	</div>\n	<div class="button-group">\n		<input id="submit" type="submit" value="{{t "OK"}}"/>\n	</div>\n</div>\n<div class="full-screen-underlay"></div>\n'}),define("views/errors/errors_popup_view",["namespace","jquery","underscore","backbone","handlebars","mediator","text!./error_popup.tmpl"],function(e,t,n,r,i,s,o){var u=r.View.extend({events:{"click #submit":"onSubmit"},template:i.compile(o),initialize:function(){n.bindAll(this,"render"),s.subscribe("popup:remove",this.removePopup,this),this.model.on("change",this.render),this.$viewport=t("#viewport")},render:function(){return this.isEmptyModel()||this.renderPopup(),this},isEmptyModel:function(){return!this.model.has("errors")},renderPopup:function(){var e=this.template(this.serialize());this.$el.html(e),this.$el.appendTo(this.$viewport),this.delegateEvents(this.events)},serialize:function(){return this.model.toJSON()},removePopup:function(){this.$el.remove()},onSubmit:function(){this.removePopup(),this.trigger("complete")}});return u}),define("controllers/ui/error_popup_controller",["namespace","jquery","underscore","backbone","mediator","controllers/controller","views/errors/errors_popup_view","strings"],function(e,t,n,r,i,s,o,u){var a=s.extend({initialize:function(){this.model=new r.Model,this.view=new o({model:this.model}),i.subscribe("error:trigger",this.onClearSetShow,this)},onClearSetShow:function(e,t,n){if(e==="form_validation"||e==="service")this.onClearFormFields(),this.onSetFormFields(t),this.onShow(t,n)},onClearFormFields:function(){var e=t(".error");e.length&&n.each(e,function(e){t(e).removeClass("error")},this),this.model.clear()},onSetFormFields:function(e){n.each(e,function(e){if(e.fieldName!==undefined){var n=t("#"+e.fieldName);n.parent().parent().addClass("error")}},this)},onShow:function(e,t){var r=this,i=[],s=t||u.Error;n.each(e,function(e){r._handleCallback("complete",e.complete),e.message.length!==0&&i.push(e.message)},this),this.model.set({errors:i,title:s})},_handleCallback:function(e,t){typeof t=="function"&&this.view.on(e,n.once(t))}});return a}),function(e,t,n){function f(e){var t={},r=/^jQuery\d+$/;return n.each(e.attributes,function(e,n){n.specified&&!r.test(n.name)&&(t[n.name]=n.value)}),t}function l(e,r){var i=this,s=n(i);if(i.value==s.attr("placeholder")&&s.hasClass("placeholder"))if(s.data("placeholder-password")){s=s.hide().next().show().attr("id",s.removeAttr("id").data("placeholder-id"));if(e===!0)return s[0].value=r;s.focus()}else i.value="",s.removeClass("placeholder"),i==t.activeElement&&i.select()}function c(){var e,t=this,r=n(t),i=r,s=this.id;if(t.value==""){if(t.type=="password"){if(!r.data("placeholder-textinput")){try{e=r.clone().attr({type:"text"})}catch(o){e=n("<input>").attr(n.extend(f(this),{type:"text"}))}e.removeAttr("name").data({"placeholder-password":!0,"placeholder-id":s}).bind("focus.placeholder",l),r.data({"placeholder-textinput":e,"placeholder-id":s}).before(e)}r=r.removeAttr("id").hide().prev().attr("id",s).show()}r.addClass("placeholder"),r[0].value=r.attr("placeholder")}else r.removeClass("placeholder")}var r="placeholder"in t.createElement("input"),i="placeholder"in t.createElement("textarea"),s=n.fn,o=n.valHooks,u,a;r&&i?(a=s.placeholder=function(){return this},a.input=a.textarea=!0):(a=s.placeholder=function(){var e=this;return e.filter((r?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":l,"blur.placeholder":c}).data("placeholder-enabled",!0).trigger("blur.placeholder"),e},a.input=r,a.textarea=i,u={get:function(e){var t=n(e);return t.data("placeholder-enabled")&&t.hasClass("placeholder")?"":e.value},set:function(e,r){var i=n(e);return i.data("placeholder-enabled")?(r==""?(e.value=r,e!=t.activeElement&&c.call(e)):i.hasClass("placeholder")?l.call(e,!0,r)||(e.value=r):e.value=r,i):e.value=r}},r||(o.input=u),i||(o.textarea=u),n(function(){n(t).delegate("form","submit.placeholder",function(){var e=n(".placeholder",this).each(l);setTimeout(function(){e.each(c)},10)})}),n(e).bind("beforeunload.placeholder",function(){n(".placeholder").each(function(){this.value=""})}))}(this,document,jQuery),define("jquery.placeholder",function(){}),define("text!templates/util/external_url_viewer.tmpl",[],function(){return'<div class="app-header">\n	<button class="button single-header-action">{{t "BackToYourTrip"}}</button>\n</div>\n<div style="position: absolute; top:43px; bottom: 0; right: 0; left: 0">\n	<iframe src="{{url}}" seamless="seamless" height="100%" width="100%"></iframe>\n</div>\n'}),define("modules/external_url_viewer",["jquery","backbone","handlebars","underscore","helpers","text!templates/util/external_url_viewer.tmpl"],function(e,t,n,r,i,s){var o=t.View.extend({initialize:function(){r.bindAll(this)},id:"web-view",events:{"click .single-header-action":"hide"},template:n.compile(s),render:function(t){this.undelegateEvents();var n=this.template(t);this.$el.html(n).show(),e("body").append(this.el),e("#viewport").hide(),this.delegateEvents(),i.viewportResize()},hide:function(){var t=this;this.remove(),e("#viewport").show("fast",function(){t.trigger("hide")})}}),u=function(){var e=this;this.isChildBrowserAvailable=!1,this.isChildBrowserAvailable=window.plugins&&window.plugins.childBrowser,this.isChildBrowserAvailable&&(this.childBrowser=window.plugins.childBrowser,this.childBrowser.onClose=function(){e.trigger("hide")},this.childBrowser.onLocationChange=function(t){e.trigger("locationChange",t)}),this.view=new o,this.view.on("hide",function(){this.trigger("hide")},this)};return u.prototype.open=function(e){this._open(e)},u.prototype.openInBrowser=function(e){this._openInBrowser(e)},u.prototype.close=function(){this.isChildBrowserAvailable?this._closeChildBrowser():this._closeWebView()},u.prototype._closeChildBrowser=function(){this.childBrowser.close()},u.prototype._closeWebView=function(){this.view.hide()},u.prototype._open=function(e){this.isChildBrowserAvailable?this._openInChildBrowser(e):this._openInApp(e)},u.prototype._openInBrowser=function(e){this.isChildBrowserAvailable?this._openInChildBrowser(e):this._openInNewWindow(e)},u.prototype._openInNewWindow=function(e){window.open(e,"_system")},u.prototype._openInApp=function(e){this.view.render({url:e})},u.prototype._openInChildBrowser=function(e){this.childBrowser.showWebPage(e,{showLocationBar:!0})},r.extend(u.prototype,t.Events),u}),define("session_storage_facade",[],function(){var e,t={destroy:function(e){this.isPrivateBrowsing()||sessionStorage.removeItem(e)},read:function(e){var t;return this.isPrivateBrowsing()||(t=sessionStorage.getItem(e)),t},write:function(e,t){this.isPrivateBrowsing()||sessionStorage.setItem(e,t)},isPrivateBrowsing:function(){return e===undefined&&this.init(),e},init:function(){e=function(){var e="privateBrowsing",t=window.sessionStorage,n=!1;try{t.setItem(e,"1"),t.removeItem(e)}catch(r){r.code===22&&t.length===0?n=!0:n=!1}return n}()}};return t}),define("views/session/login_view",["namespace","jquery","underscore","backbone","mediator","helpers","analytics","jquery.placeholder","strings","modules/external_url_viewer","config","session_storage_facade"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h=r.View.extend({template:"session",className:"fill",events:{"submit #login-form":"_onSubmit","vclick .submit:not(:disabled)":"_onSubmit","vclick #sign-up":"_onSignUp","vclick #forgot-password":"_onForgotPassword","vclick #terms-conds":"_onTermsCond","vclick #facebook":"_facebookLogin"},_initFacebookLogin:function(){this.on("afterrender",this.popErrors,this),e.isWrapped&&(this.externalURLViewer=new f)},initialize:function(){n.bindAll(this),this.model.on("change",function(){this.render()},this),this.model.on("complete",function(){this.$el.find(".submit").attr("disabled",!1)},this),this.model.on("error",function(e,t){this.$el.find(".submit").attr("disabled",!1),i.publish("error:trigger","form_validation",t)},this),t("input").placeholder(),this._initFacebookLogin()},serialize:function(){return n.defaults(this.model.toJSON(),{email:this.model.getUserEmail(),fullScreen:e.isFullScreen})},render:function(e){return e(this).render().then(function(e){t(e).find("input").placeholder(),s.hideURLBar(),this.adjusted||this.adjustMinHeight()})},popErrors:function(){var t=e.flash.getErrors(),n=[];if(typeof t!="undefined"&&t.length>0){while(t.length)n.push({message:t.shift()});i.publish("error:trigger","service",n)}},adjustMinHeight:function(){var e=t("#app-page"),n=parseInt(e.css("min-height"),10);e.css("min-height",n>475?n:475),this.adjusted=!0},_onSubmit:function(t){t.preventDefault(),c.destroy("lastUserEmail"),this.$el.find(".submit").attr("disabled","disabled"),this.$el.find("input").blur();var n={email:this.$el.find("#username").val(),password:this.$el.find("#password").val()};return e.isOnline?this.model.set(n)!==!1&&(i.publish("session:submit"),o.trackEvent("Session","Login",e)):(i.publish("error:trigger","service",[{message:a.ErrorOffline}]),this.$el.find(".submit").attr("disabled",!1)),!1},_onSignUp:function(e){e.preventDefault(),i.publish("sign_up:show")},_onForgotPassword:function(e){e.preventDefault(),i.publish("forgot_password:show")},_onTermsCond:function(t){t.preventDefault(),i.publish("terms:show"),o.trackEvent("Terms","Login",e)},_onChildBrowserLocationChange:function(t){var n=window.document.createElement("a");n.href=decodeURIComponent(t),this._loginFailed(n)?(this.closeChildBrowser(),this.addErrorMessageToFlashFromHash(n.hash),this.popErrors()):this._loginSucceeded(n)?(this.closeChildBrowser(),e.controllers.session.navigateHome()):this._invalidLoginFlowURL(n)&&(this.closeChildBrowser(),e.flash.addError(a.ErrorFacebookLoginFailed),this.popErrors())},_loginFailed:function(e){return e.hash.match(/^#login\/failure/)},_loginSucceeded:function(e){return e.hash.match(/^#login\/success/)},_invalidLoginFlowURL:function(e){return e.href.match(/tripcase.com/)&&e.pathname.match(/tdot|touch2|web2/)},_facebookLogin:function(t){if(e.isOnline){o.trackEvent("Facebook","Login",e);if(e.isWrapped){var n=l.facebookAuthURL+"?referrer=wrapped";t.preventDefault(),this.externalURLViewer.off(),this.externalURLViewer.on("locationChange",this._onChildBrowserLocationChange),this.externalURLViewer.open(n)}else s.changeLocation(l.facebookAuthURL)}else i.publish("error:trigger","service",[{message:a.ErrorOffline}])},addErrorMessageToFlashFromHash:function(t){var n=t.substring(15);e.flash.addErrorFromURI(n)},closeChildBrowser:function(){e.isWrapped&&(this.externalURLViewer.close(),this.externalURLViewer.off("locationChange",this._onChildBrowserLocationChange))}});return h}),define("proxies/session_proxy",["proxies/proxy"],function(e){var t=e.extend({syncConfig:function(e,t){e==="read"?this.url="/mapi/sessions/startup.json":this.url="/mapi/sessions.json",this.cacheKey="session",this.cacheTTL=24,this.invalidationKeys=[this.cacheKey],e==="delete"?t.dataType="text":t.dataType="json",e==="read"||e==="create"?this.cacheForceSave=!0:this.cacheForceSave=!1}});return t}),define("parsers/user_parser",["underscore","backbone"],function(e,t){var n={parse:function(e){return this.clear({silent:!0}),this.parseUser(e)},parseUser:function(e){return this.id=e.id,e}};return n}),define("proxies/user_proxy",["proxies/proxy"],function(e){var t=e.extend({syncConfig:function(e,t){this.url="/mapi/users.json"}});return t}),define("models/user",["jquery","underscore","models/model","parsers/user_parser","proxies/user_proxy","helpers","strings"],function(e,t,n,r,i,s,o){var u=n.extend({name:"user",initialize:function(e,n){t.extend(this,r),this.proxy=new i({},{model:this})},getName:function(){return this.get("name")},getEmail:function(){return this.get("email")},getId:function(){return this.get("id")},validate:function(e){var n=6,r=[],i=!1;if(e.customer_id!==undefined)return null;if(e.error!==undefined)return null;(e.first_name.length<=0||s.validate.isSpacesOnly(e.first_name))&&r.push({fieldName:"firstname",message:o.ErrorFirstNameBlank}),(e.last_name.length<=0||s.validate.isSpacesOnly(e.last_name))&&r.push({fieldName:"lastname",message:o.ErrorLastNameBlank}),e.email.length<=0||s.validate.isSpacesOnly(e.email)?r.push({fieldName:"email",message:o.ErrorEmailBlank}):s.validate.isEmailFormat(e.email)||r.push({fieldName:"email",message:o.ErrorEmailInvalid});if(e.password.length<=0||s.validate.isSpacesOnly(e.password))r.push({fieldName:"password",message:o.ErrorPasswordBlank}),i=!0;return e.password_confirmation.length<=0||s.validate.isSpacesOnly(e.password_confirmation)?(r.push({fieldName:"passwordconfirm",message:o.ErrorConfirmPasswordBlank}),i=!0):e.password!==e.password_confirmation&&r.push({fieldName:"passwordconfirm",message:o.ErrorConfirmPasswordMatch}),e.password.length<n&&e.password_confirmation.length<n&&i===!1&&r.push({fieldName:"password",message:o.ErrorPasswordLength},{fieldName:"passwordconfirm",message:""}),t.any(r)?r:null}});return u}),define("parsers/session_parser",["underscore","backbone","models/upgrade_error","models/user","models/trip","collections/trip_list"],function(e,t,n,r,i,s){var o={parse:function(e){this.clear({silent:!0});var t=this._parseSession(e);return t},_parseSession:function(e,t){if(e.error)return e;var n={};return this.user=this._parseUser(e.user),this.trips=this._parseTrips(e.trips),this.otherEventsMeta=this._parseOtherEventsMeta(e.other_event_types),this.expenseCategories=this._parseExpenseCategories(e.expense_categories),this.expensePaymentTypes=this._parseExpensePaymentTypes(e.expense_payment_types),n.most_relevant_trip_id=this._parseMostRelevantTrip(e.most_relevant),this.upgradeError=this._parseUpgradeError(e.update),n.id=1,n},isUpgradeError:function(e){return!!e.invalid_version},hasServiceError:function(t){return e.isArray(t)&&t.length},hasApplicationError:function(e){if(e.error)return!0},_parseUpgradeError:function(t){return e.isUndefined(t)?null:new n(t)},_parseUser:function(e){var t=new r;return t.set(t.parse(e),{silent:!0}),t},_parseTrips:function(t,n){var r=this,o=new s;if(!t)return o;var u=e(t).map(function(e){var t=new i;return t.set(t.parse(e),{silent:!0}),t});return o.add(u,{silent:!0}),o},_parseMostRelevantTrip:function(e){var t=e&&e.trip;return t&&t.id},_parseOtherEventsMeta:function(t){var n={};return n&&e.each(t,function(e){n[e.named_type]=e}),n},_parseExpenseCategories:function(t){return e.map(t,function(e){return e.name})},_parseExpensePaymentTypes:function(t){return e.map(t,function(e){return e.name})}};return o}),function(e){typeof define=="function"&&define.amd?define("jquery.cookie",["jquery"],e):e(jQuery)}(function(e){function n(e){return u.raw?e:encodeURIComponent(e)}function r(e){return u.raw?e:decodeURIComponent(e)}function i(e){return n(u.json?JSON.stringify(e):String(e))}function s(e){e.indexOf('"')===0&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{e=decodeURIComponent(e.replace(t," "))}catch(n){return}try{return u.json?JSON.parse(e):e}catch(n){}}function o(t,n){var r=u.raw?t:s(t);return e.isFunction(n)?n(r):r}var t=/\+/g,u=e.cookie=function(t,s,a){if(s!==undefined&&!e.isFunction(s)){a=e.extend({},u.defaults,a);if(typeof a.expires=="number"){var f=a.expires,l=a.expires=new Date;l.setDate(l.getDate()+f)}return document.cookie=[n(t),"=",i(s),a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}var c=t?undefined:{},h=document.cookie?document.cookie.split("; "):[];for(var p=0,d=h.length;p<d;p++){var v=h[p].split("="),m=r(v.shift()),g=v.join("=");if(t&&t===m){c=o(g,s);break}!t&&(g=o(g))!==undefined&&(c[m]=g)}return c};u.defaults={},e.removeCookie=function(t,n){return e.cookie(t)!==undefined?(e.cookie(t,"",e.extend({},n,{expires:-1})),!0):!1}}),define("views/ui/popup_view",["underscore","jquery","backbone","mediator","handlebars"],function(e,t,n,r,i){var s=n.View.extend({initialize:function(e){e&&(this.presenter=e.presenter,this.collection=e.collection,this.template=e.template),r.subscribe("popup:remove",this.removePopup,this),this.$viewport=t("#viewport")},render:function(e){return this.renderPopup(),this.$el.show(),this.$el.addClass("pop-up"),this},renderPopup:function(){this.$el.html(i.compile(this.template)(this.serialize())),this.$viewport.append(this.$el),this.delegateEvents()},serialize:function(){return this.presenter},events:{"vclick #cancel":"onCancel","vclick #continue":"onContinue"},onCancel:function(e){e.preventDefault(),this.removePopup(),this.trigger("cancel")},onContinue:function(e){e.preventDefault(),this.removePopup(),this.trigger("complete")},removePopup:function(){this.$el.remove()}});return s}),define("text!templates/logout_confirm.tmpl",[],function(){return'<div class="trip-items standard-form-panel error-popup">\n	<div class="error-title-group">\n		<div class="general-icon icon_alert_25px"></div>\n		<div class="message"><p>{{t "Logout"}}</p></div>\n	</div>\n	<div class="error-message-group">\n		<ul>\n			<li>{{t "LogoutConfirm"}}</li>\n		</ul>\n	</div>\n	<div class="button-group display-box">\n		<div class="flex-8">\n			<input id="continue" type="submit" value="{{t "Logout"}}" class="submit warning-button"></span><span class="loader light">{{t "Loading"}}</span></input>\n		</div>\n		<div class="flex-1"></div>\n		<div class="flex-8">\n			<input id="cancel" type="submit" value="{{t "Cancel"}}" class="submit cancel-button"><span class="loader light">{{t "Loading"}}</span></input>\n		</div>\n	</div>\n</div>\n<div class="full-screen-underlay"></div>\n'}),define("models/session",["jquery","underscore","namespace","mediator","models/model","proxies/session_proxy","parsers/session_parser","collections/trip_list","models/upgrade_error","helpers","strings","jquery.cookie","views/ui/popup_view","text!templates/logout_confirm.tmpl","local_storage_facade","session_storage_facade"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){var m=i.extend({initialize:function(e,n){t.bindAll(this),t.extend(this,o),this.proxy=new s({},{model:this}),this._initSubscriptions()},_initSubscriptions:function(){r.subscribe("trips:listRefreshed",this._resetCache,this),r.subscribe("session:logout",this.loginReset,this)},createSession:function(e){var n=this;e.success=t.wrap(e.success,function(e,t,i){r.publish("session:success",t,i),t.trigger("success",t,i),e.call(n,t,i)}),this.unset("error",{silent:!0}),this.unset("id",{silent:!0});var i=this.validate(this.attributes);i||this.save(null,e)},checkActiveSession:function(e){e=e||{},this.fetch({success:function(t,n){r.publish("session:success",t,n),t.trigger("success",t),typeof e.success=="function"&&e.success.apply(this,arguments)}})},validate:function(e){var n=[];return e.error?(n.push({message:e.error}),n):this.hasUser()?null:(e.email||n.push({message:l.ErrorEmailBlank}),e.password||n.push({message:l.ErrorPasswordBlank}),!!e.email&&!f.validate.isEmailFormat(e.email)&&n.push({message:l.ErrorEmailInvalid}),t.any(n)?n:null)},hasError:function(){return this.error},hasUser:function(){return!!this.user},hasUpgradeError:function(){return!t.isNull(this.upgradeError)},hasNoSession:function(){return this.isNew()},isLoggedOut:function(){var t=e.cookie("loggedin")==="0";return this.hasNoSession&&t},promptLogout:function(){var e=this,t=new h({template:p,presenter:{}});t.render(),t.on("complete",function(){r.publish("session:logout")})},loginReset:function(){this.destroySession(),this.clearClientSessionData()},clearClientSessionData:function(){e.cookie("loggedin",null),e.cookie("remember_me_token",null),this.clear({silent:!0}),v.write("lastUserEmail",this.getUserEmail()),this.user=undefined,this.trips&&this.trips.reset(),this.otherEventsMeta=[],this.expenseCategories=[],this.expensePaymentTypes=[]},destroySession:function(){var e=this,t={};t.success=function(){r.publish("session:invalid")},t.error=t.success,n.isOnline?(this.set({id:1},{silent:!0}),this.destroy(t)):r.publish("session:invalid")},getUser:function(){return this.user},getUserEmail:function(){var e="";return this.user?e=this.user.get("email"):v.read("lastUserEmail")&&(e=v.read("lastUserEmail")),e},getMemberships:function(){return this.user&&this.user.get("program_memberships")},getTripList:function(){return this.trips||new u},setTripList:function(e){this.trips=e},getTrip:function(e){var t=e.replace(/[^\d].*/g,"");return this.getTripList().get(t)},getOtherEventsList:function(){return t.values(this.otherEventsMeta)},getOtherEventForType:function(e){return this.otherEventsMeta[e.toLowerCase()]},getOtherEventIconUrlForType:function(e){var t=this.getOtherEventForType(e);return t.icon_url},getExpensePaymentTypes:function(){return this.expensePaymentTypes},getExpenseCategories:function(){return this.expenseCategories},_resetCache:function(){d.write(this.proxy.cacheKey+"cachettl",0)}});return m}),define("controllers/session_controller",["underscore","namespace","mediator","views/session/login_view","models/session","controllers/controller","analytics"],function(e,t,n,r,i,s,o){var u=s.extend({initialize:function(){e.bindAll(this),t.session=this.model,this._initSubscriptions(),this._layout=t.getLayout("login")},model:t.session||new i,_initSubscriptions:function(){n.subscribe("session:invalid",this.sessionInvalid),n.subscribe("session:login",this.login),n.subscribe("session:submit",this.createSession),n.subscribe("session:promptlogout",this.logout)},sessionInvalid:function(){n.publish("walk_through:show")},login:function(){t.router.navigate("/signin"),this.setView(new r({model:this.model}))},logout:function(){this.model.promptLogout(),t.router.navigate("/"),o.trackEvent("Session","Logout",t)},createSession:function(e){this.model.createSession({context:this.model,complete:function(){this.trigger("complete")},success:this.navigateHome})},navigateHome:function(){t.router.navigate("home"+(new Date).getTime(),{trigger:!0})}});return u}),define("views/trips/summary_list_view",["namespace","jquery","backbone","strings"],function(e,t,n,r){var i=n.View.extend({className:"trip-group",template:"trips/trip",tagName:"li",initialize:function(e){this.model.isAmexDTR()&&this.$el.addClass("amex")},events:{click:"onSelect"},cleanup:function(){this.off()},serialize:function(){return this.model.toJSON()},onSelect:function(e){e.preventDefault(),this.trigger("trip:select")}}),s=n.View.extend({template:"trips/trip_list",className:"mytrips-page",attributes:{"data-timing-category":"appload","data-timing-name":"triplist"},events:{"vclick .js-load-past-following-trips":"loadPastFollowingTrips"},initialize:function(){this.isActiveTrips=!0},loadPastFollowingTrips:function(e){e.preventDefault(),t("body").addClass("load"),this.$el.find(".js-load-past-following-trips li span").remove(),this.trigger("following_trips:load")},isInView:function(){return t.contains(t("#app-page")[0],this.el)},cleanup:function(){this.isPastFollowingTripsLoaded=!1},render:function(e){var t=e(this),n=this._prepareView(t);return n.render({isEmpty:this.isEmpty,isFollowingTrips:!!this.collection.isFollowing,showPastFollowingTripsLoadButton:this._showPastFollowingTripsLoadButton(),emptyMessage:this._getEmptyTripsMessage()})},_showPastFollowingTripsLoadButton:function(){var t=!1;return this.collection.isFollowing&&!this.isPastFollowingTripsLoaded&&e.isOnline&&(t=!0),t},_prepareView:function(e){return this.isEmpty=!0,this.collection.each(function(t){if(t.isFollowing()||t.get("active")===this.isActiveTrips)this.isEmpty=!1,e.insert(".list-panel",this._createTripSummaryItemView(t))},this),e},_createTripSummaryItemView:function(e){var t,n=this;return t=(new i({model:e})).on("trip:select",function(){n.trigger("trip:select",this.model)}),t},_getEmptyTripsMessage:function(){var e=r.NoActiveTrips;return this.isActiveTrips||(e=r.NoPastTrips),this.collection.isFollowing&&(e=r.NotFollowingAnyTrips,this.isPastFollowingTripsLoaded&&(e=r.NoFollowingTrips)),e},switchTrips:function(e,t){this.setTrips(e,t),this.render()},setTrips:function(e,t){this.isActiveTrips=!!t,this.collection=e},showAllFollowingTrips:function(e){this.isPastFollowingTripsLoaded=!0,this.switchTrips(e),this.$el.find(".js-load-past-following-trips").remove()}});return s}),define("views/trips/create_new_trip_bar_view",["namespace","jquery","underscore","backbone","mediator","layoutmanager"],function(e,t,n,r,i){var s=r.View.extend({template:"trips/create_new_trip_nav",events:{"click #create-trip":"onCreateTrip","click #manage-trips":"onManageTrips"},onCreateTrip:function(e){e.stopPropagation(),i.publish("trips:create")},onManageTrips:function(e){e.stopPropagation(),i.publish("manage_trip:show")}});return s}),define("modules/segmented_button/models/segmented_button_model",["jquery","underscore","backbone"],function(e,t,n){var r=n.Model.extend({defaults:{cssStyle:null,textLabel:null,action:null},initialize:function(e){if(!e||!e.cssStyle||!e.textLabel)throw"InvalidConstructArgs"}});return r}),define("modules/segmented_button/collections/segmented_button_collection",["jquery","underscore","backbone","modules/segmented_button/models/segmented_button_model"],function(e,t,n,r){var i=n.Collection.extend({model:r});return i}),define("modules/segmented_button/views/segmented_button_bar_view",["jquery","underscore","backbone","mediator","layoutmanager"],function(e,t,n,r){var i=n.View.extend({events:{"vclick div":"onClickSelect"},tagName:"li",template:"components/segmented_button_bar/segmented_button_item",cleanup:function(){this.off()},serialize:function(){return this.model.toJSON()},onClickSelect:t.debounce(function(t){var n=this.model.get("action");t.preventDefault(),n!==undefined&&r.publish(n,this.model);var i=e(t.currentTarget).closest("ul").find(".selected");i.removeClass("selected"),e(t.currentTarget).addClass("selected")},400)}),s=n.View.extend({className:"segmented-button-bar",template:"components/segmented_button_bar/segmented_button_bar",render:function(e){var t=e(this);this.collection.each(function(e){t.insert("ul",new i({model:e}))});var n=t.render();return this.styleName!==undefined&&(this.$el.find("ul").removeClass(),this.$el.find("ul").addClass(this.styleName)),n},setStyle:function(e){this.styleName=e}});return s}),define("controllers/ui/segmented_button_controller",["namespace","jquery","underscore","backbone","mediator","controllers/controller","modules/segmented_button/collections/segmented_button_collection","modules/segmented_button/views/segmented_button_bar_view","layoutmanager"],function(e,t,n,r,i,s,o,u){var a=s.extend({initialize:function(){this.collection=new o,this.view=new u({collection:this.collection})},setContent:function(e){this.collection.reset(e,{silent:!0})},attachToLayout:function(e,t){e.setViews({".nav":this.view}),t!==undefined&&this.view.setStyle(t)}});return a}),define("models/trips/rename_trip_model",["backbone","underscore","strings","models/trip"],function(e,t,n,r){var i=e.Model.extend({url:"/mapi/trips.json",MAX_NAME_SIZE:50,validate:function(e){var i=[];return t.isEmpty(e.name)&&i.push({fieldName:"tripname",message:n.ErrorTripNameBlank}),e.name!==undefined&&e.name.length>r.MAX_NAME_SIZE&&i.push({fieldName:"tripname",message:n.ErrorTripNameTooLong}),t.any(i)?i:null},getName:function(){return this.get("name")},getTripId:function(){return this.get("tripId")},setName:function(e){this.set({name:e},{silent:!0})},setTripId:function(e){this.set({tripId:e},{silent:!0})}});return i}),define("views/trips/rename_trip_view",["namespace","jquery","underscore","backbone","mediator","layoutmanager"],function(e,t,n,r,i){var s=r.View.extend({template:"rename_trip/rename_trip_confirm",events:{"submit #rename-trip-form":"onSubmit"},initialize:function(){this.model.on("error",function(e,t){i.publish("error:trigger","form_validation",t)},this)},onSubmit:function(e){e.preventDefault();var t=this.$el.find("#tripname").val(),n=this.model.set({name:t});n!==!1&&this.trigger("rename_trip_submit")},serialize:function(){return this.model.toJSON()}});return s}),define("text!templates/trip_items/confirm_delete_trip_item.tmpl",[],function(){return'<div class="trip-items standard-form-panel error-popup">\n		<div class="error-title-group">\n		<div class="general-icon icon_alert_25px"></div>\n		<div class="message"><p>{{t "DeleteQuestion"}}</p></div>\n	</div>\n\n	<div class="error-message-group">\n		<p>{{t "DeleteAreYouSureYouWant"}}</p>\n		<div class="info">\n			<p class="item-title">{{masthead}}</p>\n			<p>{{subhead}}</p>\n			<p>{{startAction}} {{timeFromDateTime start_time}} {{t "On"}} {{dateMonth start_date}}</p>\n		</div>\n	</div>\n\n	<div class="button-group display-box">\n		<div class="flex-8">\n			<input id="continue" type="submit" value="{{t "Delete"}}" class="submit warning-button"></span><span class="loader light">{{t "Loading"}}</span></input>\n		</div>\n		<div class="flex-1"></div>\n		<div class="flex-8">\n			<input id="cancel" type="submit" value="{{t "Cancel"}}" class="submit cancel-button"><span class="loader light">{{t "Loading"}}</span></input>\n		</div>\n	</div>\n</div>\n<div class="full-screen-underlay"></div>\n'}),define("text!templates/trip_items/confirm_delete_imported_trip_item.tmpl",[],function(){return'\n<div class="trip-items standard-form-panel error-popup">\n		<div class="error-title-group">\n		<div class="general-icon icon_alert_25px"></div>\n		<div class="message"><p>{{t "DeleteQuestion"}}</p></div>\n	</div>\n\n	<div class="error-message-group">\n		<p>{{t "DeleteLinkedWarning"}} <span class="item-title">{{identifier}}</span></p>\n	</div>\n\n	<div class="button-group display-box">\n		<div class="flex-8">\n			<input id="continue" type="submit" value="{{t "Delete"}}" class="submit warning-button"></span><span class="loader light">{{t "Loading"}}</span></input>\n		</div>\n		<div class="flex-1"></div>\n		<div class="flex-8">\n			<input id="cancel" type="submit" value="{{t "Cancel"}}" class="submit cancel-button"><span class="loader light">{{t "Loading"}}</span></input>\n		</div>\n	</div>\n</div>\n<div class="full-screen-underlay"></div>\n'}),define("text!templates/trips/confirm_delete_trip.tmpl",[],function(){return'<div class="trip-items standard-form-panel error-popup">\n		<div class="error-title-group">\n		<div class="general-icon icon_alert_25px"></div>\n		<div class="message"><p>{{t "DeleteQuestion"}}</p></div>\n	</div>\n\n	<div class="error-message-group">\n		<p>{{t "DeleteTripWarning"}}</p>\n	</div>\n\n	<div class="button-group display-box">\n		<div class="flex-8">\n			<input id="continue" type="submit" value="{{t "Delete"}}" class="submit warning-button"></span><span class="loader light">{{t "Loading"}}</span></input>\n		</div>\n		<div class="flex-1"></div>\n		<div class="flex-8">\n			<input id="cancel" type="submit" value="{{t "Cancel"}}" class="submit cancel-button"><span class="loader light">{{t "Loading"}}</span></input>\n		</div>\n	</div>\n</div>\n<div class="full-screen-underlay"></div>\n'}),define("text!templates/trips/share_delete_confirm.tmpl",[],function(){return'<div class="trip-items standard-form-panel error-popup">\n		<div class="error-title-group">\n		<div class="general-icon icon_alert_25px"></div>\n		<div class="message"><p>{{t "DeleteEmailAddr"}}</p></div>\n	</div>\n\n	<div class="error-message-group">\n		<p>{{t "DeleteEmailAddrWarning"}} <span class="item-title">{{email}}</span></p>\n	</div>\n\n	<div class="button-group display-box">\n		<div class="flex-8">\n			<input id="continue" type="submit" value="{{t "Delete"}}" class="submit warning-button"></span><span class="loader light">{{t "Loading"}}</span></input>\n		</div>\n		<div class="flex-1"></div>\n		<div class="flex-8">\n			<input id="cancel" type="submit" value="{{t "Cancel"}}" class="submit cancel-button"><span class="loader light">{{t "Loading"}}</span></input>\n		</div>\n	</div>\n</div>\n<div class="full-screen-underlay"></div>'}),define("text!templates/contacts/confirm_delete_contact.tmpl",[],function(){return'<div class="trip-items standard-form-panel error-popup">\n		<div class="error-title-group">\n		<div class="general-icon icon_alert_25px"></div>\n		<div class="message"><p>{{t "DeleteContact"}}?</p></div>\n	</div>\n\n	<div class="error-message-group">\n		<p>{{t "DeleteContactWarning"}}\n			<span class="item-title">\n			{{#if fullName}}\n				{{fullName}}\n			{{else}}\n				{{email}}\n			{{/if}}\n			</span>\n		</p>\n	</div>\n\n	<div class="button-group display-box">\n		<div class="flex-8">\n			<input id="continue" type="submit" value="{{t "Delete"}}" class="submit warning-button"></span><span class="loader light">{{t "Loading"}}</span></input>\n		</div>\n		<div class="flex-1"></div>\n		<div class="flex-8">\n			<input id="cancel" type="submit" value="{{t "Cancel"}}" class="submit cancel-button"><span class="loader light">{{t "Loading"}}</span></input>\n		</div>\n	</div>\n</div>\n<div class="full-screen-underlay"></div>'}),define("text!templates/trips/confirm_follow_trip_unfollow.tmpl",[],function(){return'<div class="trip-items standard-form-panel error-popup">\n  <div class="error-title-group">\n    <div class="general-icon icon_alert_25px"></div>\n    <div class="message"><p>{{t "UnfollowTripConfirmTitle"}}</p></div>\n  </div>\n\n  <div class="error-message-group">\n    <p>{{t "UnfollowTripConfirmDescription1"}}{{traveler_name}}{{t "UnfollowTripConfirmDescription2"}} "{{name}}"?</p>\n  </div>\n\n  <div class="button-group display-box">\n    <div class="flex-8">\n      <input id="continue" type="submit" value="{{t "Unfollow"}}" class="submit warning-button"></span><span class="loader light">{{t "Loading"}}</span></input>\n    </div>\n    <div class="flex-1"></div>\n    <div class="flex-8">\n      <input id="cancel" type="submit" value="{{t "Cancel"}}" class="submit cancel-button"><span class="loader light">{{t "Loading"}}</span></input>\n    </div>\n  </div>\n</div>\n<div class="full-screen-underlay"></div>\n'}),define("parsers/connection_parser",["underscore"],function(e){var t={parse:function(e){return this.clear({silent:!0}),this.parseConnection(e)},parseConnection:function(e){return e}};return t}),define("proxies/arrival_update_proxy",["jquery","proxies/proxy"],function(e,t){var n=t.extend({syncConfig:function(t,n){this.method=t,this.method==="create"||this.method==="update"?this.url="/mapi/trip_contacts/create_by_email.json":this.method==="delete"&&(this.url="/mapi/trip_contacts/destroy_by_contact.json?"+e.param(this._getAttrs()),n.dataType="text")},_getAttrs:function(){var e,t;return this.method==="create"?(e={},e.trip_item_id=this.model.get("trip_item_id"),e.emails=this.model.get("email"),e.v="2"):this.method==="delete"&&(e={},e.trip_item_id=this.model.get("trip_item_id"),e.contact_id=this.model.get("id")),e},toJSON:function(){return this._getAttrs()}});return n}),define("models/arrival_update",["jquery","underscore","models/model","parsers/connection_parser","proxies/arrival_update_proxy","helpers"],function(e,t,n,r,i,s){var o=n.extend({initialize:function(e,n){t.extend(this,r),this.proxy=new i(null,{model:this})},validate:function(e,n){if(e[0])return!1;var r=[];return t.isEmpty(e.email)?r.push("Email can't be blank"):s.validate.isEmailFormat(e.email)||r.push("Email is invalid"),t.any(r)?r:null}});return o}),define("parsers/trip_contact_parser",["underscore","models/arrival_update"],function(e,t){var n={parse:function(e){this.clear({silent:!0});var n=e.arrival_updates;for(var r=0;r<n.length;r++)this.arrival_updates.add(new t({trip_item_id:n[r].trip_item_id,contact_id:e.id,email:e.email,id:e.id}));return this.parseTripContact(e)},parseTripContact:function(e){return e}};return n}),define("proxies/trip_contact_proxy",["jquery","proxies/proxy"],function(e,t){var n=t.extend({syncConfig:function(t,n){this.url="/mapi/trip_contacts.json",this.method=t,this.method==="read"?this.url="/mapi/trip_contacts.json":this.method==="delete"&&(this.url="/mapi/trip_contacts/destroy_by_trip_contact.json?"+e.param(this._getAttrs()))},_getAttrs:function(){var e;return this.method==="read"?e={trip_id:this.model.getTripId(),email:this.model.get("email")}:this.method==="delete"&&(e={trip_id:this.model.getTripId(),contact_id:this.model.id}),e},toJSON:function(){return this._getAttrs()}});return n}),define("collections/arrival_updates_list",["jquery","underscore","models/arrival_update","collections/collection"],function(e,t,n,r){var i=r.extend({model:n,initialize:function(e,t){t=t||{},this.contact=t.contact}});return i}),define("proxies/trip_contact_itinerary_proxy",["proxies/proxy","jquery"],function(e,t){var n=e.extend({syncConfig:function(e,n){this.method=e,this.method==="create"||this.method==="update"?this.url="/mapi/trip_contacts/create_by_email.json":this.method==="delete"&&(this.url="/mapi/trip_contacts/destroy_by_contact.json?"+t.param(this._getAttrs()),n.dataType="text")},_getAttrs:function(){var e,t,n;return this.method==="create"?e={trip_id:this.model.contact.collection.trip.id,emails:this.model.contact.get("email"),v:2}:this.method==="delete"&&(e={trip_id:this.model.contact.getTripId()},this.model.contact.id&&(e.contact_id=this.model.contact.id)),e},toJSON:function(){return this._getAttrs()}});return n}),define("models/trip_contact_itinerary",["jquery","underscore","backbone","models/model","proxies/trip_contact_itinerary_proxy"],function(e,t,n,r,i){var s=r.extend({initialize:function(e,t){this.contact=t.contact,this.proxy=new i({},{model:this})},destroy:function(){this.id="fake",r.prototype.destroy.apply(this,arguments)},save:function(){delete this.id,r.prototype.save.apply(this,arguments)}});return s}),define("models/trip_contact",["jquery","underscore","backbone","models/model","parsers/trip_contact_parser","proxies/trip_contact_proxy","collections/arrival_updates_list","models/trip_contact_itinerary","helpers"],function(e,t,n,r,i,s,o,u,a){var f=r.extend({initialize:function(e,n){t.extend(this,i),this.arrival_updates=new o(null),this.proxy=new s({},{model:this}),this.itinerary=new u(null,{contact:this})},validate:function(e){var n=[];return t.isEmpty(e.email)?n.push("Email can't be blank"):a.validate.isEmailFormat(e.email)||n.push("Email is invalid"),t.any(n)?n:null},getTripId:function(){return this.collection.getTripId()},displayName:function(){return this.get("name")},shareItinerary:function(e){this.itinerary.save(null,e)},unshareItinerary:function(e){this.itinerary.destroy(e)}});return f}),define("parsers/contact_parser",[],function(){var e={parse:function(e){return this.clear({silent:!0}),this._parseContact(e)},_parseContact:function(e){return e.fullName=this._generateFullName(e),e},_generateFullName:function(e){var t;return e.first_name&&(t=e.first_name),e.last_name&&(t?t=t+" "+e.last_name:t=e.last_name),t}};return e}),define("proxies/contact_proxy",["proxies/proxy"],function(e){var t=e.extend({syncConfig:function(e,t){this.method=e,this.method==="create"?this.url="/mapi/contacts.json":this.url="/mapi/contacts/"+this.model.get("id")+".json"}});return t}),define("models/contact",["underscore","models/model","parsers/contact_parser","proxies/contact_proxy","strings","helpers"],function(e,t,n,r,i,s){var o=t.extend({initialize:function(){e.extend(this,n),this.proxy=new r({},{model:this}),this.set("fullName",this._generateFullName(this.toJSON())),this.set("cid",this.cid)},validate:function(t){var n=[];return(!t.email||s.validate.isSpacesOnly(t.email))&&n.push({fieldName:"email",message:i.ErrorEmailBlank}),e.any(n)?n:null}});return o}),define("views/delete_confirm_popup_factory",["underscore","namespace","views/ui/popup_view","text!templates/trip_items/confirm_delete_trip_item.tmpl","text!templates/trip_items/confirm_delete_imported_trip_item.tmpl","text!templates/trips/confirm_delete_trip.tmpl","text!templates/trips/share_delete_confirm.tmpl","text!templates/contacts/confirm_delete_contact.tmpl","text!templates/trips/confirm_follow_trip_unfollow.tmpl","models/trip","models/trip_item","models/source","trip_item_presenter_factory","models/trip_contact","models/contact"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){var v={createPopup:function(t){var v,m,g;return t instanceof l?(v=r,m=e.extend({},h.getPresenter({model:t}))):t instanceof c?(v=i,m=e.extend({},t.toJSON())):t instanceof f?(t.can("unfollow")?v=a:v=s,m=t.toJSON()):t instanceof p?(v=o,m=t.toJSON()):t instanceof d&&(v=u,m=t.toJSON()),g=new n({presenter:m,template:v}),g}};return v}),define("views/trips/edit_trip_view",["jquery","underscore","mediator","backbone","trip_item_presenter_factory","views/delete_confirm_popup_factory","strings"],function(e,t,n,r,i,s,o){var u=r.View.extend({template:"trips/edit_trip",events:{"vclick .rename":"onRename","vclick #id-trip-option":"onRename","vclick .delete-trip-item":"onDeleteTripItem","vclick .delete-link":"onDeleteLink","vclick .delete-trip":"onDeleteTrip","vclick .expandable-item":"toggleSubItems"},className:"edit-trip-panel",toggleSubItems:function(t){var n=e(t.currentTarget);n.hasClass("open")?(n.find(".icon_arrow_down_solid").removeClass("icon_arrow_down_solid").addClass("icon_arrow_solid"),n.find(".link-text").html(o.ViewItems),n.next().hide(),n.removeClass("open")):(n.find(".icon_arrow_solid").removeClass("icon_arrow_solid").addClass("icon_arrow_down_solid"),n.find(".link-text").html(o.HideItems),n.next().show(),n.addClass("open"))},initialize:function(e){this.model=e.model,this.viewModel={sources:new r.Collection(e.model.sources.models),tripItems:new r.Collection(e.model.tripItems.models),manualTripItems:e.model.manualTripItems}},onRename:function(e){n.publish("trips:rename",{tripId:this.model.id})},onDeleteTrip:function(e){var t=s.createPopup(this.model);t.render(),t.on("complete",this._deleteTrip,this)},onDeleteLink:function(t){t.stopPropagation();var n=e(t.currentTarget).data("link-id");this.modelToDelete=this.model.sources.get(n),this.viewModel.sources.remove(this.modelToDelete,{silent:!0});var r=s.createPopup(this.modelToDelete);r.render(),r.on("complete",this._deleteTripEntity,this)},onDeleteTripItem:function(t){var n=e(t.currentTarget).data("trip-item-id");this.modelToDelete=this.model.tripItems.get(n),this.viewModel.tripItems.remove(this.modelToDelete,{silent:!0});var r=s.createPopup(this.modelToDelete);r.render(),r.on("complete",this._deleteTripEntity,this)},_deleteTripEntity:function(){var t=this;this.modelToDelete.destroy({wait:!0,cache_mode:this.modelToDelete.proxy.CACHE_MODE_DEFER,success:function(e,n){t.model.set(t.model.parse(n))}}),this.render(),e("body").removeClass("load")},_deleteTrip:function(){var e=this;this.model.destroy({success:function(){n.publish("trips:index")}})},serialize:function(){var e=this.serializeManualTripItems(),t=this.serializeImportedSources();return{manualTripItems:e,sources:t}},serializeManualTripItems:function(){var e;return e=t.map(this.viewModel.manualTripItems(),function(e){return i.getPresenter({model:e})}),e},serializeImportedSources:function(){var e=this,t=[];return this.viewModel.sources.forEach(function(n,r,s){var o=n.get("identifier"),u=[];e.viewModel.tripItems.forEach(function(e,t,n){var r;e.get("itinerary_locator")===o&&(r=i.getPresenter({model:e}),u.push(r))}),t.push({id:n.id,identifier:o,items:u})}),t}});return u}),define("views/ui/autosuggest_view",["jquery","underscore","handlebars","backbone"],function(e,t,n,r){var i=r.View.extend({className:"autosuggest-wrapper",initialize:function(r){t.extend(this,r),this.$container=e("#app-page"),this.resultTemplate=n.compile(this.resultTemplate),this.checkFixedToolbar(),this.reset(),t(this.collections).each(function(e){e.on("reset",this.reset,this)},this)},checkFixedToolbar:function(){var t=e(".fixed-toolbar"),n="has-fixed-toolbar";t.length&&this.$el.addClass(n)},reset:function(){this.$input=e(this.input),this.$anchor=e(this.anchor),this._bindInputEvent(),this._appendToView(),this._sortCollections(),this._showSuggestions()},_sortCollections:function(){this.sortedCollections={},t(this.collections).each(function(e,t){this.sortIterator?this.sortedCollections[t]=e.sortBy(this.sortIterator):this.sortedCollections[t]=e.toArray()},this)},_bindInputEvent:function(){var e=this;this.$input.unbind("keyup").keyup(function(){e._showSuggestions(e.$input.val())})},_appendToView:function(){var e=this;this.$el.hide().remove(),this.$el.css("top",this.$anchor.offset().top),this.$el.bind("vmousedown",function(){e.$input.blur()}),this.$container.append(this.$el)},_showSuggestions:function(e){var t=e&&e.length;t||!this.autoHideResult?(t?this.suggestions=this._filterCollections(e):this.suggestions=this.sortedCollections,this.suggestionsHtml=this._renderSuggestionsTemplate(),this.$el.html(this.suggestionsHtml).scrollTop(0).show(),this._bindSuggestionSelectEvents()):this.$el.hide()},_filterCollections:function(e){var n,r,i,s=this,o={};return e=e.toLowerCase(),t(this.sortedCollections).each(function(i,u){o[u]=t(i).filter(function(i){return r=t(s.searchKeys).find(function(t){return n=i.get(t),n&&n.toLowerCase().indexOf(e)===0}),r})}),o},_renderSuggestionsTemplate:function(){var e=this,n="autosuggest-popup",i={};return t(this.suggestions).each(function(e,t){i[t]=(new r.Collection(e)).toJSON(),i.hasContext=i.hasContext||!!i[t].length}),this.isPopup&&i.hasContext?this.$el.addClass(n):this.$el.removeClass(n),this.resultTemplate(i)},_bindSuggestionSelectEvents:function(){var n=this;t(this.selectEvents).each(function(t,r){e(r).bind("vclick",function(e){t(e),n.autoHideResult&&n.$el.hide()})})},cleanup:function(){this.$input.unbind()}});return i}),define("text!templates/trips/share_autosuggest_result.tmpl",[],function(){return'{{#if hasContext}}\n<ul class="autosuggest-list">\n{{#if tripcaseContacts}}\n	{{#each tripcaseContacts}}\n	<li class="autosuggest-suggestion suggested-contact" data-email="{{email}}" data-gaaction="AutoFillContact">\n		{{#if fullName}}\n		<p class="tc-label-medium text-ellipsis">{{capitalize fullName}}</p>\n		<p class="text-ellipsis">{{email}}</p>\n		{{else}}\n		<p class="tc-label-medium text-ellipsis">{{email}}</p>\n		{{/if}}\n	</li>\n	{{/each}}\n{{/if}}\n{{#if phoneContacts}}\n	<li class="autosuggest-header">{{t "PhoneContacts"}}</li>\n	{{#each phoneContacts}}\n	<li class="autosuggest-suggestion suggested-contact" data-email="{{email}}" data-gaaction="AutoFillPhone">\n		{{#if fullName}}\n		<p class="tc-label-medium text-ellipsis">{{capitalize fullName}}</p>\n		<p class="text-ellipsis">{{email}}</p>\n		{{else}}\n		<p class="tc-label-medium text-ellipsis">{{email}}</p>\n		{{/if}}\n	</li>\n	{{/each}}\n{{/if}}\n</ul>\n{{/if}}'}),define("views/trips/share_list_view",["namespace","jquery","underscore","mediator","backbone","helpers","strings","models/trip_contact","analytics","views/ui/autosuggest_view","text!templates/trips/share_autosuggest_result.tmpl"],function(e,t,n,r,i,s,o,u,a,f,l){var c=i.View.extend({id:"share-results",template:"trips/share_list",events:{"vclick div .item-content":"onViewEmailDetails","vclick button":"onAddEmail"},initialize:function(e){this.tripContacts=e.tripContactsList,this.tripcaseContacts=e.tripcaseContactsList,this.phoneContacts=e.phoneContactsList,this.tripContacts.on("reset",function(){this.render(),this.autosuggestView.reset()},this),this.on("afterrender",this._onAfterRender,this)},_onAfterRender:function(){this.tripContacts.fetch(),this.tripcaseContacts.fetch(),this.autosuggestView=new f({collections:{tripcaseContacts:this.tripcaseContacts,phoneContacts:this.phoneContacts},searchKeys:["first_name","last_name","email"],input:"#email",anchor:"#suggested-contacts",resultTemplate:l,sortIterator:this.tripcaseContacts.sortIterator,autoHideResult:!0,isPopup:!0,selectEvents:{".suggested-contact":function(n){var r=t(n.currentTarget).data("gaaction")||"AutoFillContact",i=t(n.currentTarget).data("email");n.preventDefault(),t("#email").val(i),a.trackEvent("Share",r,e)}}})},onViewEmailDetails:function(t){t.preventDefault();if(!n.isEmpty(t.target.id)){var r=parseInt(t.target.id,10);this.tripContacts.selectedContact=this.tripContacts.find(function(e){return e.get("id")===r}),this.trigger("editEmailShare"),a.trackEvent("Share","ShowEmail",e,this.tripContacts.trip.id)}},onAddEmail:function(t){t.preventDefault();var n=this.$el.find("#email").blur(),i=n.val().trim();s.validate.isEmailFormat(i)?this._emailNotInList(i)?(this.tripContacts.selectedContact=new u({email:i,share_itinerary:!1},{collection:this.tripContacts}),this.tripContacts.add(this.tripContacts.selectedContact),this.trigger("editEmailShare"),a.trackEvent("Share","AddEmail",e,this.tripContacts.trip.id)):r.publish("error:trigger","form_validation",[{message:o.ErrorEmailAlreadyShared+i}]):r.publish("error:trigger","form_validation",[{message:o.ErrorEmailInvalid,complete:function(){n.focus()}}])},_emailNotInList:function(e){var t=this.tripContacts.find(function(t){return t.get("email")===e});return t===undefined},serialize:function(){return this.tripContacts.toJSON()}});return c}),define("views/trips/create_trip_view",["namespace","jquery","underscore","backbone","mediator","strings","layoutmanager"],function(e,t,n,r,i,s){var o=r.View.extend({events:{"submit #create-trip-form":"onSubmit"},template:"trips/create_trip",initialize:function(){this.model.on("error",this._showError,this)},onSubmit:function(e){e.preventDefault();var t=this._getFormData();this.model.set(t)!==!1&&this.trigger("create_trip_submit")},_showError:function(e,t){i.publish("error:trigger","form_validation",t)},_getFormData:function(){return{name:this.$el.find("#tripname").val()}},setMyTripsEmpty:function(e){e?this.template="trips/create_trip_empty":this.template="trips/create_trip"}});return o}),define("machina",["underscore"],function(e){if(!e.deepExtend){var t={"*":function(e,t,n){e[t]=n},object:function(e,t,n){e[t]=i(e[t]||{},n)},array:function(n,i,s){n[i]=[],e.each(s,function(e,s){t[r(e)](n[i],s,e)},this)}},n=function(t){return e.isArray(t)?"array":e.isDate(t)?"date":e.isRegExp(t)?"regex":typeof t},r=function(e){var r=n(e);return t[r]?r:"*"},i=function(n){return e.each(s.call(arguments,1),function(i){e.each(i,function(e,i){t[r(e)](n,i,e)})}),n};e.mixin({deepExtend:i})}var s=[].slice,o="transition",u="handler",a=function(t){var n={};return e.each(t,function(e){n[e]=[]}),n},f=function(t){var n=t;return e.isArray(t)&&(n=a(t)),n},l={getHandlerNames:function(t){return e.uniq(e.flatten(e.map(t.states,function(t){return e.keys(t)})))},findProvider:function(){return window.postal?"postal":window.amplify?"amplify":undefined},makeFsmNamespace:function(){var e=0;return function(){return"fsm."+e++}}(),getDefaultOptions:function(){return{initialState:"uninitialized",eventListeners:{"*":[]},states:{},eventQueue:[],messaging:function(){var e=l.makeFsmNamespace();return{provider:l.findProvider(),eventNamespace:e+".events",handlerNamespace:e,subscriptions:[]}}()}},standardEventTransforms:{Handling:function(e){var t=e;return t.eventType=t[1],delete t[1],t},Handled:function(e){var t=e;return t.eventType=t[1],delete t[1],t},Transitioned:function(e){var t=e;return t.oldState=t[1],t.newState=t[2],delete t[1],delete t[2],t},InvalidState:function(e){var t=e;return t.currentState=t[1],t.attemptedState=t[2],delete t[1],delete t[2],t},NoHandler:function(e){var t=e;return t.eventType=t[1],delete t[1],t}}},c={},h=function(){var t={},n=function(e){e.messaging.subscriptions.push(postal.subscribe(e.messaging.handlerNamespace,"*",function(e,t){this.handle.call(this,t.topic,e)}).withContext(e))},r=function(n){n.messaging.eventPublisher=function(){var r=arguments[0],i=e.deepExtend({},s.call(arguments,1));t[r]&&(i=t[r](i)),postal.publish(n.messaging.eventNamespace,r,i)},n.on("*",n.messaging.eventPublisher)};return{wireUp:function(e){n(e),r(e)},addEventTransforms:function(n){e.deepExtend(t,n)}}};c.postal=new h,c.postal.addEventTransforms(l.standardEventTransforms);var p=function(){var t={},n=function(t){e.each(l.getHandlerNames(t),function(e){t.messaging.subscriptions.push(amplify.subscribe(t.messaging.handlerNamespace+"."+e,t,function(t){this.handle.call(this,e,t)}))})},r=function(n){n.messaging.eventPublisher=function(){var r=arguments[0],i=e.deepExtend({},s.call(arguments,1));t[r]&&(i=t[r](i)),amplify.publish(n.messaging.eventNamespace+"."+r,i)},n.on("*",n.messaging.eventPublisher)};return{wireUp:function(e){n(e),r(e)},addEventTransforms:function(n){e.deepExtend(t,n)}}};c.amplify=new p,c.amplify.addEventTransforms(l.standardEventTransforms);var d=function(t){var n,r,i=l.getDefaultOptions();t&&(t.eventListeners&&(t.eventListeners=f(t.eventListeners)),t.messaging&&(t.messaging=e.extend({},i.messaging,t.messaging))),n=e.extend(i,t||{}),r=n.initialState,delete n.initialState,e.extend(this,n),this.messaging.provider&&c[this.messaging.provider]&&c[this.messaging.provider].wireUp(this),this.state=undefined,this._priorAction="",this._currentAction="",r&&this.transition(r),v.eventListeners.fireEvent("newFsm",this)};d.prototype.fireEvent=function(t){var n=arguments;e.each(this.eventListeners["*"],function(e){try{e.apply(this,s.call(n,0))}catch(t){console&&typeof console.log!="undefined"&&console.log(t.toString())}}),this.eventListeners[t]&&e.each(this.eventListeners[t],function(e){try{e.apply(this,s.call(n,1))}catch(t){console&&typeof console.log!="undefined"&&console.log(t.toString())}})},d.prototype.handle=function(e){var t=this.states,n=this.state,r=s.call(arguments,0),i;this.currentActionArgs=r,t[n]&&(t[n][e]||t[n]["*"])?(i=t[n][e]?e:"*",this._currentAction=n+"."+i,this.fireEvent.apply(this,["Handling"].concat(r)),t[n][i].apply(this,r.slice(1)),this.fireEvent.apply(this,["Handled"].concat(r)),this._priorAction=this._currentAction,this._currentAction="",this.processQueue(u)):this.fireEvent.apply(this,["NoHandler"].concat(r)),this.currentActionArgs=undefined},d.prototype.transition=function(e){if(this.states[e]){var t=this.state;this.state=e,this.states[e]._onEnter&&this.states[e]._onEnter.call(this),this.fireEvent.apply(this,["Transitioned",t,this.state]),this.processQueue(o);return}this.fireEvent.apply(this,["InvalidState",this.state,e])},d.prototype.processQueue=function(t){var n=t===o?function(e){return e.type===o&&(!e.untilState||e.untilState===this.state)}:function(e){return e.type===u},r=e.filter(this.eventQueue,n,this);this.eventQueue=e.difference(this.eventQueue,r),e.each(r,function(e,t){this.handle.apply(this,e.args)},this)},d.prototype.deferUntilTransition=function(e){if(this.currentActionArgs){var t={type:o,untilState:e,args:this.currentActionArgs};this.eventQueue.push(t),this.fireEvent.apply(this,["Deferred",this.state,t])}},d.prototype.deferUntilNextHandler=function(){if(this.currentActionArgs){var e={type:o,args:this.currentActionArgs};this.eventQueue.push(e),this.fireEvent.apply(this,["Deferred",this.state,e])}},d.prototype.on=function(e,t){this.eventListeners[e]||(this.eventListeners[e]=[]),this.eventListeners[e].push(t)},d.prototype.off=function(t,n){this.eventListeners[t]&&(this.eventListeners[t]=e.without(this.eventListeners[t],n))};var v={Fsm:d,busProviders:c,utils:l,on:function(e,t){if(this.eventListeners[e]){this.eventListeners[e].push(t);return}throw new Error("Invalid Event Name '"+e+"'.")},off:function(t,n){throw this.eventListeners[t]&&(this.eventListeners[t]=e.without(this.eventListeners[t],n)),new Error("Invalid Event Name '"+t+"'.")},eventListeners:{fireEvent:function(t){var n=0,r,i=arguments;this[t]&&e.each(this[t],function(e){e.apply(null,s.call(i,1))})},newFsm:[]}};return v}),define("proxies/trip_contacts_list_proxy",["proxies/proxy"],function(e){var t=e.extend({syncConfig:function(e,t){this.url="/mapi/trips/"+this.collection.getTripId()+"/contacts.json"},_getAttrs:function(){return{trip_id:this.collection.getTripId()}},toJSON:function(){return this._getAttrs()}});return t}),define("collections/trip_contacts_list",["jquery","underscore","proxies/trip_contacts_list_proxy","models/trip_contact","collections/collection"],function(e,t,n,r,i){var s=i.extend({model:r,initialize:function(e,t){t=t||{},this.trip=t.trip,this.proxy=new n({},{collection:this})},getTripId:function(){return this.trip.id}});return s}),define("views/trips/share_email_details_view",["namespace","jquery","underscore","backbone","mediator","trips_manager","models/arrival_update","analytics","views/delete_confirm_popup_factory"],function(e,t,n,r,i,s,o,u,a){var f=r.View.extend({events:{"vclick #delete":"onDeleteEmail","click [type=checkbox]:not(:disabled)":"disableInput","click [name=itinerary_shared]:not(:disabled)":"onItinerary","click [name=arrival-item]:not(:disabled)":"onFlight"},template:"trips/share_email_details",initialize:function(){this._presentTripData()},_presentTripData:function(){var e=s.getCurrentTrip().getTripItems(),t=e.length,n,i,o,u=[],a,f,l;a=this.model.get("email"),f=this.model.get("share_itinerary"),l=this.model.get("arrival_updates");for(n=0;n<t;n++)i=e.at(n),this._isNotifyableAir(i)&&(o={airline_code:i.getAirlineCode(),arrival_airport:i.getArrivalAirportName(),arrival_airport_code:i.getArrivalAirportCode(),arrival_city:i.getArrivalCity(),flight_number:i.getFlightNumber(),id:i.id,scheduled_arrival:i.getScheduledArrival(),shared:this._presentSharedTripItem(i.id,l)},u.push(o));this.shareModel=new r.Model,this.shareModel.set({email:a,itinerary_shared:f,shareItems:u})},_isNotifyableAir:function(e){var t=e.getType()==="Air",n=!0,r=!1;return t&&(n=!e.isPast(),r=e.isCancelled()),t&&n&&!r},_presentSharedTripItem:function(e,t){var n,r,i;if(t===undefined)n=!1;else for(r=0,i=t.length;r<i;r++)if(t[r].id===e){n=!0;break}return n},onDeleteEmail:function(e){e.preventDefault();var t=a.createPopup(this.model);t.render(),t.on("complete",this._deleteEmail,this)},_deleteEmail:function(){this.model.destroy({wait:!0}),u.trackEvent("Share","RemoveEmail",e,this.model.id)},enableInputCallback:function(e){t("[data-id="+e+"]").removeAttr("disabled")},disableInput:function(e){var t=e.target;t.setAttribute("disabled","disabled")},onItinerary:function(t){var n=this;t.target.checked?(this.model.shareItinerary({success:function(e,t){n._setInitialID(t)},complete:function(){n.enableInputCallback(t.target.dataset.id)}}),u.trackEvent("Share","UnShareItinerary",e,this.model.id)):(this.model.unshareItinerary({complete:function(){n.enableInputCallback("itinerary")}}),u.trackEvent("Share","ShareItinerary",e,this.model.id))},onFlight:function(t){var n=t.target,r=this;if(n.checked)this.model.arrival_updates.create({trip_item_id:n.dataset.id,email:this.model.get("email")},{success:function(e,t){r._setInitialID(t)},complete:function(){r.enableInputCallback(n.dataset.id)}}),u.trackEvent("Share","AddNotify",e,this.model.id);else{var i=new o({id:this.model.id,trip_item_id:n.dataset.id});i.destroy({complete:function(){r.enableInputCallback(n.dataset.id)}}),u.trackEvent("Share","RemoveNotify",e,this.model.id)}},_setInitialID:function(e){var t=this;if(!this.model.id){var r=n.find(e,function(e){return e.email===t.model.get("email")});this.model.id=r.id}},serialize:function(){return this.shareModel.toJSON()}});return f}),define("proxies/contacts_proxy",["proxies/proxy"],function(e){var t=e.extend({syncConfig:function(){this.url="/mapi/contacts.json"}});return t}),define("collections/contacts",["collections/collection","models/contact","proxies/contacts_proxy"],function(e,t,n){var r=e.extend({model:t,initialize:function(){this.proxy=new n({},{collection:this})},getSortedContacts:function(){return this.sortBy(this.sortIterator)},sortIterator:function(e){var t=(e.get("first_name")||"").toLowerCase(),n=(e.get("last_name")||"").toLowerCase(),r=e.get("email").toLowerCase(),i=t+n+r;return i}});return r}),define("modules/phone_contacts",["backbone","models/contact","collections/contacts"],function(e,t,n){var r=function(){this.phoneContacts=[],this.getParams=null};return r.prototype.getPhoneContacts=function(){function s(e){var r,s,o,u,a,f,l,c,h;i.phoneContacts=new n,a=e.length;for(r=0;r<a;r++){o=e[r],l=o.emails;if(l){f=l.length,o.name&&o.name.givenName?c=o.name.givenName:c=null,o.name&&o.name.familyName?h=o.name.familyName:h=null;for(s=0;s<f;s++)u={first_name:c,last_name:h,email:l[s].value},i.phoneContacts.add(new t(u))}}i.getParams.success&&i.getParams.success(i.phoneContacts)}function o(){i.getParams.error&&i.getParams.error()}var e=["name","emails"],r=new ContactFindOptions,i=this;r.filter="",r.multiple=!0,navigator.contacts.find(e,s,o,r)},r.prototype.getList=function(e){this.getParams=e,window.ContactFindOptions&&navigator.contacts?this.getPhoneContacts():this.getParams.error&&this.getParams.error()},r}),define("workflows/share_workflow",["jquery","underscore","machina","backbone","namespace","mediator","strings","collections/trip_contacts_list","views/trips/share_list_view","views/trips/share_email_details_view","modules/phone_contacts","collections/contacts","trips_manager"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){var p=new n.Fsm({initialState:"uninitialized",name:"share",states:{uninitialized:{initialize:function(e){this.params=e||this.params,this.controller=this.params.controller,this.tripContactsList=new u(null,{trip:h.getCurrentTrip()}),this.tripContactsList.on("destroy",function(){this.transition("showShareList")},this),this.transition("showShareList")}},showShareList:{_onEnter:function(){var e=this;this.tripcaseContactsList=new c,this.phoneContactsList=new r.Collection,this.viewAddContactList=new a({tripContactsList:this.tripContactsList,tripcaseContactsList:this.tripcaseContactsList,phoneContactsList:this.phoneContactsList}),this.viewAddContactList.on("editEmailShare",function(){e.transition("editShareOptions")}),this.controller.setView(this.viewAddContactList),this.controller._updateHeader(o.Share,"back:history"),this.phoneContacts=new l,this.phoneContacts.getList({success:function(t){e.phoneContactsList.reset(t.models)}})},back:function(){this.transition("uninitialized"),s.publish("back:history"),delete this.tripContactsList}},editShareOptions:{_onEnter:function(){var e=this;this.viewShareEmailDetail=new f({model:this.tripContactsList.selectedContact}),this.viewShareEmailDetail.on("complete",function(){e.transition("showShareList")}),this.controller.setView(this.viewShareEmailDetail),this.controller._updateHeader(o.Share,"share_workflow:back")},back:function(){this.transition("showShareList")}}}});return s.subscribe("share_workflow:back",function(){p.handle("back")}),p}),define("controllers/trips_controller",["namespace","jquery","underscore","backbone","analytics","mediator","controllers/controller","views/trips/summary_list_view","views/trips/create_new_trip_bar_view","controllers/ui/segmented_button_controller","strings","trips_manager","models/trips/rename_trip_model","views/trips/rename_trip_view","views/trips/edit_trip_view","views/trips/share_list_view","helpers","views/trips/create_trip_view","models/trip","collections/following_trips","workflows/share_workflow"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w){var E="active",S="past",x="following",T=o.extend({initialize:function(){n.bindAll(this),this.activePastTrips=c.getTrips(),this.followingTrips=c.getFollowingTrips(),this.tripScopeBar=new f,this.tripScopeBar.selectedTab=E,this.CreateManageNavBarView=new a,this.SummaryListView=new u({collection:this.activePastTrips}),this._initSubscriptions()},_initSubscriptions:function(){s.subscribe("trips:index",this.tripsIndex),s.subscribe("trips:edit",this.edit),s.subscribe("trips:share",this.share),s.subscribe("trips:rename",this.rename),s.subscribe("trips:create",this.create),s.subscribe("trips:refresh",this.refresh),s.subscribe("device:resume",this.resume),s.subscribe("trips:showActive",this.switchToActiveTab),s.subscribe("trips:showPast",this.switchToPastTab),s.subscribe("trips:showFollowing",this.switchToFollowingTab),s.subscribe("trips:select",this._showTrip)},_showTrip:function(t){var n="trips/"+t.get("id");e.router.navigate(n,{trigger:!0})},_showFollowingTrip:function(t){var n="following_trips/"+t.get("id");e.router.navigate(n,{trigger:!0})},tripsIndex:function(){this.clearCurrentTrip(),this.showSelectedTab({active:!0,past:!0,following:!0})},edit:function(t){var n=c.getCurrentTrip();this._layout=e.getLayout("simple"),this.setView(new d({model:n})),this._updateHeader(n.get("name"),"back:history",{subtitle:m.dateHelpers.startEndDateWithDayMonthDate(n.get("start_time"),n.get("end_time"))})},share:function(t){this._layout=e.getLayout("simple"),w.transition("uninitialized"),w.handle("initialize",{controller:this,model:c.getCurrentTrip()})},rename:function(t){var n=this,r=c.getTrips().get(t.tripId);this.renameModel=new h,this.renameModel.setTripId(t.tripId),this.renameModel.setName(r.getName()),this.renameView=new p({model:this.renameModel}),this.renameView.on("rename_trip_submit",function(){r.set({name:n.renameModel.getName()}),r.save(null,{success:function(){s.publish("back:history")}})}),this._layout=e.getLayout("simple"),this.setView(this.renameView),this._updateHeader(l.RenameTrip,"back:history"),i.trackEvent("EditTrip","RenameTrip",e,r.id)},create:function(){var t=this,n=!1;this.createModel=new y,this.createView=new g({model:this.createModel}),this.createView.on("create_trip_submit",function(){t.createModel.save(null,{success:function(e,t){var n={tripId:e.getTripId(),titleText:e.getName()};c.getTrips().add(e),c.setCurrentTripId(e.getTripId()),s.publish("trip_items:add",n)}})}),c.getTrips().length<=0?(n=!0,this._updateHeader(l.CreateATrip,null,{leftButtons:[{name:"menu",iconClass:"btn_icon_menu_25px button-icon",action:"sidemenu:toggle"}]})):this._updateHeader(l.CreateATrip,"back:history"),this.createView.setMyTripsEmpty(n),this._layout=e.getLayout("simple"),this.setView(this.createView),i.trackEvent("MyTrips","CreateTrip",e),t._createTripOverlay()},_fetchTrips:function(e){function i(e){n&&r&&(n=r=!1,e.success.call(this))}var t=this,n=!1,r=!1;this.showLoading(),this.SummaryListView.cleanup(),this.followingTrips.fetch({isToRefresh:e.isRefresh,fetchActiveTrips:!0,success:function(){r=!0,i.call(t,e)}}),this.activePastTrips.fetch({isToRefresh:e.isRefresh,success:function(){n=!0,i.call(t,e)}})},_createTripOverlay:function(){s.publish("overlay:trigger",{templateFilename:"overlay_create_trip",storageKeyName:"create_trip",analyticsEvent:"CreateTrip"})},showTrips:function(e){this.SummaryListView.setTrips(e,this.tripScopeBar.selectedTab===E),this._setTripsListView()},showActive:function(t){var n=this;i.trackEvent("MyTrips","ActiveTrips",e),this.tripScopeBar.selectedTab=E,s.publish("trips:tripToggle",!0),t?(this.showLoading(),this.activePastTrips.fetch({isRefresh:!1,success:function(t){n.showTrips(t)}})):this.showTrips(this.activePastTrips)},showPast:function(t){var n=this;i.trackEvent("MyTrips","PastTrips",e),this.tripScopeBar.selectedTab=S,s.publish("trips:tripToggle",!1),t?(this.showLoading(),this.activePastTrips.fetch({isRefresh:!1,success:function(t){n.showTrips(t)}})):this.showTrips(this.activePastTrips)},showFollowing:function(t){var n=this;i.trackEvent("MyTrips","FollowingTrips",e),this.tripScopeBar.selectedTab=x,t?(this.showLoading(),this.followingTrips.fetch({fetchActiveTrips:!0,success:function(t){n.showTrips(t)}})):this.showTrips(this.followingTrips)},showSelectedTab:function(e){var t=this.tripScopeBar.selectedTab;e=e||{},t===x?this.showFollowing(!!e.following):t===S?this.showPast(!!e.past):this.showActive(!!e.active)},switchToActiveTab:function(){this.tripScopeBar.selectedTab!==E&&this.showActive(!1)},switchToPastTab:function(){this.tripScopeBar.selectedTab!==S&&this.showPast(!1)},switchToFollowingTab:function(){this.tripScopeBar.selectedTab!==x&&this.showFollowing(!0)},loadPastFollowingTrips:function(){var t=this;i.trackEvent("MyTrips","PastFollowingTrips",e),this.followingTrips.fetch({localCache:!1,add:!0,success:function(e){t.SummaryListView.showAllFollowingTrips(e)}})},clearCurrentTrip:function(){c.setCurrentTripId(undefined)},_setTripsListView:function(){this._layout=e.getLayout("nav_subnav"),this._setSegmentedButtonView(this),this._layout.setViews({".sub-nav":this.CreateManageNavBarView,".content":this.SummaryListView}),this.tripScopeBar.selectedTab===x&&delete this._layout.views[".sub-nav"],this._layout.render(function(e){t("#app-page").html(e)}),this._setTripsListViewListeners()},_setTripsListViewListeners:function(){this.SummaryListView.off("trip:select"),this.SummaryListView.off("following_trips:load"),this.SummaryListView.on("trip:select",function(t){var n;this.tripScopeBar.selectedTab===E?(n="ViewActiveTrip",this._showTrip(t)):this.tripScopeBar.selectedTab===S?(n="ViewPastTrip",this._showTrip(t)):(n="ViewFollowingTrip",this._showFollowingTrip(t)),i.trackEvent("MyTrips",n,e)},this),this.SummaryListView.on("following_trips:load",this.loadPastFollowingTrips,this)},_setSegmentedButtonView:function(e){var t=[{cssStyle:"mytrips-summary-segmented-button active",textLabel:l.ActiveTrips,action:"trips:showActive"},{cssStyle:"mytrips-summary-segmented-button past",textLabel:l.PastTrips,action:"trips:showPast"},{cssStyle:"mytrips-summary-segmented-button following",textLabel:l.FollowingTrips,action:"trips:showFollowing"}];for(var n=0;n<t.length;n++)t[n].cssStyle.match(e.tripScopeBar.selectedTab)&&(t[n].cssStyle+=" selected");e.tripScopeBar.setContent(t),e.tripScopeBar.attachToLayout(e._layout,"mytrips-summary-segmented-bar")},refresh:function(){this._fetchTrips({isRefresh:!0,success:function(){this.showSelectedTab(),s.publish("trips:listRefreshed")}}),i.trackEvent("MyTrips","Refresh",e)},resume:function(){var e,t=this;this.SummaryListView.isInView()&&!this.isFetchingData&&(this.isFetchingData=!0,e=this.tripScopeBar.selectedTab,e===x?this._fetchTrips({isRefresh:!0,success:function(){t.showFollowing(!1),t.isFetchingData=!1,s.publish("trips:listRefreshed")}}):(this.followingTrips.invalidateCache(),this.activePastTrips.fetch({isToRefresh:!0,success:function(){t.showSelectedTab(),t.isFetchingData=!1,s.publish("trips:listRefreshed")}})))}});return T}),function(e){var t,n,r=function(e,t){if(typeof document.addEventListener!="function"&&!s.isIE8())return;var r=!1;try{r=e instanceof Element}catch(u){r=!!e&&r.nodeType===1}!r&&typeof e!="string"&&(t=e);var a=this,f=a.classes,l=a.settings=s.merge(a.defaults,{attachTo:e},t||{}),c=a.container=s.make("div",{"class":f.container}),h=a.calendars=[],p=n().day(l.weekStart),d,v=[],m,g,y,b,w,E=[],S,x=0,T=l.months;s.isIE8()&&s.addClassName(c,"ie8"),x=7;while(x--)v.push(p.format(l.columnHeaderFormat)),p.add("days",1);o(a);if(typeof l.subscribe=="object")for(x in l.subscribe)l.subscribe.hasOwnProperty(x)&&a.subscribe(x,l.subscribe[x]);a._sel=[],!l.selected||a.setSelected(l.selected,!1),l.viewStartDate?d=n(l.viewStartDate,l.format):a._sel.length>0?d=n(a._sel[0]):d=n(),a.viewStartDate=d.date(1);var N={past:l.months-1,"today-past":l.months-1,any:l.months>2?Math.floor(l.months/2):0,"today-future":0,future:0}[this.settings.direction];N&&n().month()==n(a.viewStartDate).month()&&(a.viewStartDate=n(a.viewStartDate).subtract({M:N}).date(1));if(typeof l.blackout=="function")a.blackout=l.blackout;else if(!l.blackout)a.blackout=function(){return!1};else{var C=i(l.blackout,l.parseSplitDelimiter,l.format);a.blackout=function(e){e=n(e).yearDay();if(e<1||!a._sel)return!1;var t=C.length;while(t--)if(C[t].yearDay()===e)return!0;return!1}}a.direction=a.directions[l.direction]?a.directions[l.direction]:a.directions.any,T=Math.max(l.months,1);while(T--){m=s.make("div",{"class":f.calendar},c),m.setAttribute("data-cal-index",T),l.months>1&&(T==Math.max(l.months-1,1)?s.addClassName(m,f.monthFirst):T===0?s.addClassName(m,f.monthLast):s.addClassName(m,f.monthMiddle)),g=s.make("div",{"class":f.title},m),l.useYearNav||s.addClassName(g,f.disableYearNav),s.make("a",{"class":f.previousYear},g),s.make("a",{"class":f.previousMonth},g),s.make("a",{"class":f.nextYear},g),s.make("a",{"class":f.nextMonth},g),y=s.make("span",{"class":f.caption},g),b=s.make("div",{"class":f.header},m),x=0;do S=s.make("span",{},b),S.innerHTML=v[x];while(++x<7);w=s.make("div",{"class":f.days},m),x=0,E=[];while(x++<42)E.push(s.make("span",{},w));h.push({caption:y,days:E}),T&&s.make("div",{"class":f.monthSeparator},c)}a.draw(),s.addEvent(c,"mousedown",function(e,t){var r;if(s.hasClassName(t,f.nextMonth))return!a.disableNext&&a.publish("view-changed",a,["next-month"])!==!1&&(a.viewStartDate.add("months",1),a.draw()),!1;if(s.hasClassName(t,f.previousMonth))return!a.disablePreviousMonth&&a.publish("view-changed",a,["previous-month"])!==!1&&(a.viewStartDate.subtract("months",1),a.draw()),!1;if(s.hasClassName(t,f.nextYear))return!a.disableNext&&a.publish("view-changed",a,["next-year"])!==!1&&(a.viewStartDate.add("years",1),a.draw()),!1;if(s.hasClassName(t,f.previousYear))return!a.disablePreviousMonth&&a.publish("view-changed",a,["previous-year"])!==!1&&(a.viewStartDate.subtract("years",1),a.draw()),!1;if(s.hasClassName(t.parentNode,f.days)&&s.hasClassName(t,f.dayActive)&&(r=t.getAttribute("data-date"))){r=n(r,l.dayAttributeFormat).hours(12);if(a.publish("date-clicked",a,[r])!==!1)switch(l.mode){case"multiple":a.addSelected(r)||a.removeSelected(r);break;case"range":a.addSelected(r);break;case"single":default:a.addSelected(r)}return!1}return!1}),!(l.attachTo=s.$(l.attachTo))||l.attachTo.appendChild(c)};r.prototype={defaults:{attachTo:null,months:1,weekStart:0,direction:"any",directionScrolling:!0,viewStartDate:null,blackout:null,selected:null,mode:"single",dayOutOfMonthClickable:!1,format:null,subscribe:null,columnHeaderFormat:"dd",titleFormat:"MMMM, YYYY",dayNumberFormat:"D",dayAttributeFormat:"YYYY-MM-DD",parseSplitDelimiter:/,\s*|\s+-\s+/,rangeDelimiter:" - ",multipleDelimiter:", ",useYearNav:!0,dateClassMap:{}},classes:{container:"kalendae",calendar:"k-calendar",monthFirst:"k-first-month",monthMiddle:"k-middle-month",monthLast:"k-last-month",title:"k-title",previousMonth:"k-btn-previous-month",nextMonth:"k-btn-next-month",previousYear:"k-btn-previous-year",nextYear:"k-btn-next-year",caption:"k-caption",header:"k-header",days:"k-days",dayOutOfMonth:"k-out-of-month",dayInMonth:"k-in-month",dayActive:"k-active",daySelected:"k-selected",dayInRange:"k-range",dayToday:"k-today",monthSeparator:"k-separator",disablePreviousMonth:"k-disable-previous-month-btn",disableNextMonth:"k-disable-next-month-btn",disablePreviousYear:"k-disable-previous-year-btn",disableNextYear:"k-disable-next-year-btn",disableYearNav:"k-disable-year-nav"},disablePreviousMonth:!1,disableNextMonth:!1,disablePreviousYear:!1,disableNextYear:!1,directions:{past:function(e){return n(e).yearDay()>=t.yearDay()},"today-past":function(e){return n(e).yearDay()>t.yearDay()},any:function(e){return!1},"today-future":function(e){return n(e).yearDay()<t.yearDay()},future:function(e){return n(e).yearDay()<=t.yearDay()}},getSelectedAsDates:function(){var e=[],t=0,n=this._sel.length;for(;t<n;t++)e.push(this._sel[t].toDate());return e},getSelectedAsText:function(e){var t=[],n=0,r=this._sel.length;for(;n<r;n++)t.push(this._sel[n].format(e||this.settings.format||"YYYY-MM-DD"));return t},getSelectedRaw:function(){var e=[],t=0,r=this._sel.length;for(;t<r;t++)e.push(n(this._sel[t]));return e},getSelected:function(e){var t=this.getSelectedAsText(e);switch(this.settings.mode){case"range":return t.splice(2),t.join(this.settings.rangeDelimiter);case"multiple":return t.join(this.settings.multipleDelimiter);case"single":default:return t[0]}},isSelected:function(e){e=n(e).yearDay();if(e<1||!this._sel||this._sel.length<1)return!1;switch(this.settings.mode){case"range":var t=this._sel[0]?this._sel[0].yearDay():0,r=this._sel[1]?this._sel[1].yearDay():0;if(t===e||r===e)return 1;if(!t||!r)return 0;if(e>t&&e<r||t<r&&e<t&&e>r)return-1;return!1;case"multiple":var i=this._sel.length;while(i--)if(this._sel[i].yearDay()===e)return!0;return!1;case"single":default:return this._sel[0]&&this._sel[0].yearDay()===e}return!1},setSelected:function(e,t){var n,r=i(e,this.settings.parseSplitDelimiter,this.settings.format),s=i(this.getSelected(),this.settings.parseSplitDelimiter,this.settings.format);n=s.length;while(n--)this.removeSelected(s[n],t);n=r.length;while(n--)this.addSelected(r[n],t);t!==!1&&this.draw()},addSelected:function(e,t){e=n(e,this.settings.format).hours(12),this.settings.dayOutOfMonthClickable&&this.settings.mode!=="range"&&this.makeSelectedDateVisible(e);switch(this.settings.mode){case"multiple":if(!!this.isSelected(e))return!1;this._sel.push(e);break;case"range":this._sel.length!==1?this._sel=[e]:e.yearDay()>this._sel[0].yearDay()?this._sel[1]=e:this._sel=[e,this._sel[0]];break;case"single":default:this._sel=[e]}return this._sel.sort(function(e,t){return e.yearDay()-t.yearDay()}),this.publish("change",this,[e]),t!==!1&&this.draw(),!0},makeSelectedDateVisible:function(e){outOfViewMonth=n(e).date("1").diff(this.viewStartDate,"months"),outOfViewMonth<0?this.viewStartDate.subtract("months",1):outOfViewMonth>0&&outOfViewMonth>=this.settings.months&&this.viewStartDate.add("months",1)},removeSelected:function(e,t){e=n(e,this.settings.format).hours(12);var r=this._sel.length;while(r--)if(this._sel[r].yearDay()===e.yearDay())return this._sel.splice(r,1),this.publish("change",this,[e]),t!==!1&&this.draw(),!0;return!1},draw:function(){var r=n(this.viewStartDate).hours(12),i,o=this.classes,u,a,f,l=0,c,h=0,p,d,v,m=this.settings,g;c=this.calendars.length;do{i=n(r).date(1),i.day(i.day()<this.settings.weekStart?this.settings.weekStart-7:this.settings.weekStart),u=this.calendars[l],u.caption.innerHTML=r.format(this.settings.titleFormat),h=0;do a=u.days[h],f=[],d=this.isSelected(i),d&&f.push({"-1":o.dayInRange,1:o.daySelected,"true":o.daySelected}[d]),i.month()!=r.month()?f.push(o.dayOutOfMonth):f.push(o.dayInMonth),(!(this.blackout(i)||this.direction(i)||i.month()!=r.month()&&m.dayOutOfMonthClickable===!1)||d>0)&&f.push(o.dayActive),i.yearDay()===t.yearDay()&&f.push(o.dayToday),v=i.format(this.settings.dayAttributeFormat),m.dateClassMap[v]&&f.push(m.dateClassMap[v]),a.innerHTML=i.format(m.dayNumberFormat),a.className=f.join(" "),a.setAttribute("data-date",v),i.add("days",1);while(++h<42);r.add("months",1)}while(++l<c);if(m.directionScrolling){if(m.direction==="today-past"||m.direction==="past")g=r.add({m:1}).diff(n(),"months",!0),g<=0?(this.disableNextMonth=!1,s.removeClassName(this.container,o.disableNextMonth)):(this.disableNextMonth=!0,s.addClassName(this.container,o.disableNextMonth));else if(m.direction==="today-future"||m.direction==="future")g=r.subtract({m:1}).diff(n(),"months",!0),g>m.months?(this.disablePreviousMonth=!1,s.removeClassName(this.container,o.disablePreviousMonth)):(this.disablePreviousMonth=!0,s.addClassName(this.container,o.disablePreviousMonth));if(m.direction==="today-past"||m.direction==="past")g=r.add({m:12}).diff(n(),"months",!0),g<=-11?(this.disableNextYear=!1,s.removeClassName(this.container,o.disableNextYear)):(this.disableNextYear=!0,s.addClassName(this.container,o.disableNextYear));else if(m.direction==="today-future"||m.direction==="future")g=r.subtract({m:12}).diff(n(),"months",!0),g>11+m.months?(this.disablePreviousYear=!1,s.removeClassName(this.container,o.disablePreviousYear)):(this.disablePreviousYear=!0,s.addClassName(this.container,o.disablePreviousYear))}}};var i=function(e,t,r){var i=[];typeof e=="string"?e=e.split(t):s.isArray(e)||(e=[e]);var o=e.length,u=0;do e[u]&&i.push(n(e[u],r).hours(12));while(++u<o);return i};window.Kalendae=r;var s=r.util={isIE8:function(){return!!(/msie 8./i.test(navigator.appVersion)&&!/opera/i.test(navigator.userAgent)&&window.ActiveXObject&&XDomainRequest&&!window.msPerformance)},$:function(e){return typeof e=="string"?document.getElementById(e):e},$$:function(e){return document.querySelectorAll(e)},make:function(e,t,n){var r,i=document.createElement(e);if(!!t)for(r in t)t.hasOwnProperty(r)&&i.setAttribute(r,t[r]);return!n||n.appendChild(i),i},isVisible:function(e){return e.offsetWidth>0||e.offsetHeight>0},getStyle:function(e,t){var n;return e.currentStyle?n=e.currentStyle[t]:window.getComputedStyle&&(n=window.getComputedStyle(e,null)[t]),n},domReady:function(e){/in/.test(document.readyState)?setTimeout(function(){s.domReady(e)},9):e()},addEvent:function(e,t,n){var r=function(t){t=t||window.event;var r=t.target||t.srcElement,i=n.apply(e,[t,r]);return i===!1&&(t.preventDefault?t.preventDefault():(t.returnValue=!1,t.cancelBubble=!0)),i};return e.attachEvent?e.attachEvent("on"+t,r):e.addEventListener(t,r,!1),r},removeEvent:function(e,t,n){e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener(t,n,!1)},hasClassName:function(e,t){if(!(e=s.$(e)))return!1;var n=e.className;return n.length>0&&(n==t||(new RegExp("(^|\\s)"+t+"(\\s|$)")).test(n))},addClassName:function(e,t){if(!(e=s.$(e)))return;s.hasClassName(e,t)||(e.className+=(e.className?" ":"")+t)},removeClassName:function(e,t){if(!(e=s.$(e)))return;e.className=s.trimString(e.className.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)")," "))},isFixed:function(e){do if(s.getStyle(e,"position")==="fixed")return!0;while(e=e.offsetParent);return!1},scrollContainer:function(e){do{var t=s.getStyle(e,"overflow");if(t==="auto"||t==="scroll")return e}while((e=e.parentNode)&&e!=window.document.body);return null},getPosition:function(e,t){var n=e.offsetLeft,r=e.offsetTop,i={};if(!t)while(e=e.offsetParent)n+=e.offsetLeft,r+=e.offsetTop;return i[0]=i.left=n,i[1]=i.top=r,i},getHeight:function(e){return e.offsetHeight||e.scrollHeight},getWidth:function(e){return e.offsetWidth||e.scrollWidth},trimString:function(e){return e.replace(/^\s+/,"").replace(/\s+$/,"")},merge:function(){var e=arguments[0]===!0,t={},n=e?1:0,r=function(t,n){if(typeof n!="object")return;for(var r in n)n.hasOwnProperty(r)&&(e&&typeof t[r]=="object"&&typeof n[r]=="object"?_update(t[r],n[r]):t[r]=n[r]);return t};for(;n<arguments.length;n++)r(t,arguments[n]);return t},isArray:function(e){return Object.prototype.toString.call(e)=="[object Array]"}};typeof document.addEventListener=="function"&&r.util.domReady(function(){var e=s.$$(".auto-kal"),t=e.length,n,i,o;while(t--)n=e[t],o=n.getAttribute("data-kal"),i=o==null||o==""?{}:(new Function("return {"+o+"};"))(),n.tagName==="INPUT"?new r.Input(n,i):new r(s.merge(i,{attachTo:n}))}),r.Input=function(e,t){if(typeof document.addEventListener!="function"&&!s.isIE8())return;var n=this.input=s.$(e),i,o;if(!n||n.tagName!=="INPUT")throw"First argument for Kalendae.Input must be an <input> element or a valid element id.";var u=this,a=u.classes,f=u.settings=s.merge(u.defaults,t);f.attachTo=window.document.body,f.selected?i=!0:f.selected=n.value,r.call(u,f),f.closeButton&&(o=s.make("a",{"class":a.closeButton},u.container),s.addEvent(o,"click",function(){n.blur()})),i&&(n.value=u.getSelected());var l=u.container,c=!1;l.style.display="none",s.addClassName(l,a.positioned),s.addEvent(l,"mousedown",function(e,t){c=!0}),s.addEvent(window.document,"mousedown",function(e,t){c=!1}),s.addEvent(n,"focus",function(){u.setSelected(this.value),u.show()}),s.addEvent(n,"blur",function(){c&&s.isIE8()?(c=!1,n.focus()):u.hide()}),s.addEvent(n,"keyup",function(e){u.setSelected(this.value)});var h=s.scrollContainer(n);h&&s.addEvent(h,"scroll",function(e){n.blur()}),u.subscribe("change",function(){n.value=u.getSelected()})},r.Input.prototype=s.merge(r.prototype,{defaults:s.merge(r.prototype.defaults,{format:"MM/DD/YYYY",side:"bottom",closeButton:!0,offsetLeft:0,offsetTop:0}),classes:s.merge(r.prototype.classes,{positioned:"k-floating",closeButton:"k-btn-close"}),show:function(){var e=this.container,t=e.style,n=this.input,r=s.getPosition(n),i=s.scrollContainer(n),o=i?i.scrollTop:0,u=this.settings;t.display="";switch(u.side){case"left":t.left=r.left-s.getWidth(e)+u.offsetLeft+"px",t.top=r.top+u.offsetTop-o+"px";break;case"right":t.left=r.left+s.getWidth(n)+"px",t.top=r.top+u.offsetTop-o+"px";break;case"top":t.left=r.left+u.offsetLeft+"px",t.top=r.top-s.getHeight(e)+u.offsetTop-o+"px";break;case"bottom":default:t.left=r.left+u.offsetLeft+"px",t.top=r.top+s.getHeight(n)+u.offsetTop-o+"px"}t.position=s.isFixed(n)?"fixed":"absolute",this.publish("show",this)},hide:function(){this.container.style.display="none",this.publish("hide",this)}});var o=function(e){e||(e=this);var t=e.c_||{};e.publish=function(e,n,r){var i=t[e],s=i?i.length:0,o;while(s--){o=i[s].apply(n,r||[]);if(typeof o=="boolean")return o}},e.subscribe=function(e,n,r){return t[e]||(t[e]=[]),r?t[e].push(n):t[e].unshift(n),[e,n]},e.unsubscribe=function(e){var n=t[e[0]],r=e[1],i=n?n.length:0;while(i--)n[i]===r&&n.splice(i,1)}};if(!r.moment){if(!window.moment)throw"Kalendae requires moment.js. You must use kalendae.standalone.js if moment is not available on the page.";r.moment=window.moment}n=r.moment,n.fn.stripTime=function(){return this._d=new Date(Math.floor(this._d.valueOf()/864e5)*864e5),this},n.fn.yearDay=function(e){var t=Math.floor(this._d/864e5);return typeof e=="undefined"?t:this.add({d:e-t})},t=r.moment().stripTime(),typeof jQuery!="undefined"&&(typeof document.addEventListener=="function"||s.isIE8())&&(jQuery.fn.kalendae=function(e){return this.each(function(t,n){n.tagName==="INPUT"?$(n).data("kalendae",new r.Input(n,e)):$(n).data("kalendae",new r($.extend({},{attachTo:n},e)))}),this})}(),define("kalendae",function(e){return function(){var t,n;return t||e.Kalendae}}(this)),define("models/flight",["models/model","proxies/air_trip_item_proxy","parsers/trip_parser","underscore"],function(e,t,n,r){var i=e.extend({name:"flight",defaults:{tripId:null,airlineCode:"",departureDate:"",flightNumber:"",departureAirport:"",arrivalAirport:"",confirmationNumber:"",note:""},initialize:function(){r.extend(this,n),this.proxy=new t({},{model:this})},getTripId:function(){return this.get("tripId")}});return i}),define("views/trip_items/add_trip_item_view",["namespace","mediator","jquery","underscore","backbone","moment","kalendae","trip_item_presenter_factory","strings"],function(e,t,n,r,i,s,o,u,a){var f=i.View.extend({initialize:function(e){r.bindAll(this),n("#app-page").scrollTop(0),this.helpInfoBackMessage=e.helpInfoBackMessage},template:"trip_items/add/add_trip_item",events:{"vclick #for-business-help":"onHelpForBusiness","click #startLocationContainer":"onClickLocationPicker","click #start_date":"onClickStartDate","click #start_time":"onClickStartTime","click #endLocationContainer":"onClickLocationPicker","click #end_date":"onClickEndDate","click #end_time":"onClickEndTime","submit form":"submit"},startKal:null,endKal:null,onClickCheckbox:r.debounce(function(e){var t=this,r=n("#bothSame"),i=r.is(":checked");t._toggleEndLocation(i)},200),_toggleEndLocation:function(e){var t=n("#endLocationContainer"),r=e?"hide":"show",i=t.find("input");t[r].call(t),e&&i.val(n("#startLocationContainer").find("input").val())},onClickLocationPicker:function(e){e.preventDefault();var t=n(e.currentTarget).find("input").attr("name");this.trigger("clickLocationPicker",t)},onClickStartTime:function(e){var t=this,i=r.clone(this._timepickerDefaults);i.onShow=function(){n(".dwo").bind("click.timepicker",function(e){t.$timepicker.scroller("hide")})},this.$timepicker=n("#start_time").scroller(i),this.$timepicker.scroller("show")},onClickEndTime:function(){var e=this,t=r.clone(this._timepickerDefaults);t.onShow=function(){n(".dwo").bind("click.timepicker",function(t){e.$timepicker.scroller("hide")})},this.$timepicker=n("#end_time").scroller(t),this.$timepicker.scroller("show")},onClickStartDate:function(e){var t=this,r="datepicker-checkin",i="#"+r,u="#create-trip-form",f=s(n("#start_date").val());if(!n(i).length){var l=this.renderDpContainer(u,r,i);this.startKal=new o(r,{months:1,direction:"today-future",format:"ddd, MMM D, YYYY",dayOutOfMonthClickable:!0,subscribe:{change:function(){var e=this.getSelected();n("#start_date").val(e);var r=s(e),o=s(n("#end_date").val());if(r.diff(o,"days")>0){var f=r.add("days",1);n("#end_date").val(f.format(a.DateShortDayMonthDateYear)),t.checkoutKal&&t.checkoutKal.setSelected(f)}t.removeDatepicker(u,i)}}}),window.addEventListener("orientationchange",function(){t._positionDatepicker(i)})}return this.startKal.viewStartDate=f,this.startKal.setSelected(f),n(i).appendTo("body").show(),this._positionDatepicker(i),!1},renderDpContainerWithNoOverlay:function(e,t,r){this.makeDpContainer(e,t,r).appendTo(n(e))},renderDpContainer:function(t,r,i){if(e.isIceCreamSandwich)this.renderDpContainerWithNoOverlay(t,r,i);else{var s=n('<div class="dwo">').height(document.height);this.makeDpContainer(t,r,i,s).append(s).appendTo(n(t))}},makeDpContainer:function(e,t,r,i){var s=n('<div id="'+t+'">'),o=this,u=function(t){o.removeDatepicker(e,r,t)};return i?i.click(u):n(e).click(u),s},removeDatepicker:function(e,t,r){n(t).is(":visible")&&(n(t).hide().appendTo(n(e)),r&&r.stopPropagation())},onClickEndDate:function(e){var t=this,r="datepicker-checkout",i="#"+r,u="#create-trip-form",a=s(n("#end_date").val());if(!n(i).length){var f=this.renderDpContainer(u,r,i);this.endKal=new o(r,{months:1,direction:"today-future",format:"ddd, MMM D, YYYY",dayOutOfMonthClickable:!0,subscribe:{change:function(){n("#end_date").val(this.getSelected()),t.removeDatepicker(u,i)}},blackout:function(e){var t=s(n("#start_date").val()).startOf("day"),r=e.startOf("day"),i=r.diff(t,"days"),o=i<0;return o}}),window.addEventListener("orientationchange",function(){t._positionDatepicker(i)})}return this.endKal.viewStartDate=a,this.endKal.setSelected(a),n(i).appendTo("body").show(),this._positionDatepicker(i),!1},serialize:function(){var t=u.getPresenter(this),n=this.model.get("corporation"),r=e.session.user.get("corporation");return t.showForBusinessField=n||r,t.itemCorporation=n,t.userCorporation=r,t},render:function(e){var t=this,r=function(e){n(e).find("#bothSame").on("click",this.onClickCheckbox)},i=e(this);return i.render().then(r)},submit:function(e){e.preventDefault(),this.$el.find("input").blur(),this.trigger("save",this.getFormData())},getFormData:function(){return{values:n(this.$el.find("form")).serializeObject(),isBothSameChecked:this._isBothSameChecked()}},_positionDatepicker:function(e){var t=n(e+" > .kalendae"),r=t.height()<window.innerHeight?window.innerHeight/2-t.height()/2:10,i=window.innerWidth/2-t.width()/2;t.css({top:window.scrollY+r,left:i})},_isBothSameChecked:function(){return this.$("#bothSame").is(":checked")},_timepickerDefaults:{preset:"time",display:"modal",mode:"scroller",showLabel:!1,parseValue:function(e){var t=s(e,"h:mma");return[t.format("h")==="12"?"0":t.format("h"),t.format("m"),t.format("a")==="am"?0:1]},formatResult:function(e){return(e[0]==="0"?12:e[0])+":"+s(e[1].toString(),"m").format(a.DateMinutes)+(e[2]<1?"am":"pm")},onClose:function(){n(".dwo").off("click.timepicker")}},cleanup:function(){var e="#create-trip-form";n("#datepicker-checkin").hide().appendTo(e),n("#datepicker-checkout").hide().appendTo(e),this.$timepicker&&this.$timepicker.scroller("hide")},onHelpForBusiness:function(e){e.preventDefault(),t.publish("info_page:show_for_business",this.helpInfoBackMessage)}});return f}),define("views/flights/add/add_flight_view",["jquery","backbone","mediator","namespace","kalendae","moment","underscore","views/trip_items/add_trip_item_view","analytics","strings"],function(e,t,n,r,i,s,o,u,a,f){var l=u.extend({template:"trip_items/flight/add_flight",events:{"vclick #for-business-help":"onHelpForBusiness","click .cancel":"cancel","click .airlineCodeDisplay":"selectAirline","submit form":"submit","click input#departureDate":"onClickDate"},initialize:function(e){this.helpInfoBackMessage=e.helpInfoBackMessage,this.checkRecentAirlines()},checkRecentAirlines:function(){var e=t.Collection.extend({url:function(){return"/mapi/users/"+r.session.user.get("id")+"/used_airlines.json"}});r.recentAirlines||(r.recentAirlines=new e)},cancel:function(){n.publish("add:cancel")},onClickDate:function(){var t=this,n="datepicker",r="#"+n,o="#create-trip-form",u=s(e("#departureDate").val());e(o+" input").blur();if(!e(r).length){var a=function(){e(r).hide().appendTo(o)};e('<div class="dwo">').height(document.height).click(a),this.renderDpContainer(o,n,r),this.startKal=new i(n,{months:1,blackout:function(e){var t=s().subtract("days",3);return s(e)<t},format:"ddd, MMM D, YYYY",dayOutOfMonthClickable:!0,subscribe:{change:function(){e("#departureDate").val(this.getSelected()),t.removeDatepicker(o,r)}}}),window.addEventListener("orientationchange",this._positionDatepicker)}return this.startKal.viewStartDate=u,this.startKal.setSelected(u),e(r).appendTo("body").show(),this._positionDatepicker(),!1},selectAirline:function(){n.publish("add_flight_workflow:selectAirline"),n.publish("edit_flight_workflow:selectAirline")},serialize:function(){var e=this.model.toJSON(),t=this.model.get("corporation"),n=r.session.user.get("corporation");return e.departureDate=s(e.departureDate).format(),e.showForBusinessField=t||n,e.itemCorporation=t,e.userCorporation=n,e},submit:function(e){e.preventDefault(),this.$el.find("input").blur();var t=this.getFormData(),i=this._validateUserInput(t);o.isEmpty(i)?(n.publish("add_flight_workflow:save",t),n.publish("edit_flight_workflow:save",t),a.trackEvent("FlightAdd","Continue",r)):n.publish("error:trigger","form_validation",i)},getFormData:function(){return e(this.$el.find("form")).serializeObject()},_validateUserInput:function(e){var t=[];return o.isEmpty(e.airlineCode)&&t.push({fieldName:"airlineCode",message:f.ErrorAirlineBlank}),o.isEmpty(e.flightNumber)?t.push({fieldName:"flightNumber",message:f.ErrorFlightNumNumeric}):o.isNaN(parseInt(e.flightNumber,10))&&t.push({fieldName:"flightNumber",message:f.ErrorFlightNumNumeric}),t},_positionDatepicker:function(){var t=e("#datepicker > .kalendae"),n=t.height()<window.innerHeight?window.innerHeight/2-t.height()/2:10,r=window.innerWidth/2-t.width()/2;t.css({top:window.scrollY+n,left:r})},cleanup:function(){var t="#create-trip-form";e("#datepicker").hide().appendTo(t),this.$timepicker&&this.$timepicker.scroller("hide")},onHelpForBusiness:function(e){e.preventDefault(),n.publish("info_page:show_for_business",this.helpInfoBackMessage)}});return l}),define("views/flights/add/confirm_flight_view",["backbone","mediator"],function(e,t){var n=e.View.extend({template:"trip_items/flight/confirm_flight",events:{"click .submit":"save"},save:function(e){this.trigger("save"),t.publish("add_flight_workflow:save",e)},serialize:function(){return this.model.toJSON()}});return n}),define("views/flights/add/select_airport_view",["jquery","backbone","mediator"],function(e,t,n){var r=t.View.extend({template:"trip_items/flight/select_airport",events:{"click .submit":"save","click .arrival-airports li":"selectArrivalAirport","click .departure-airports li":"selectDepartureAirport"},save:function(){return n.publish("add_flight_workflow:save"),n.publish("edit_flight_workflow:save"),!1},selectDepartureAirport:function(t){var n=e(t.currentTarget).data("airport-item-index")-1;this.model.selectDepartureAirport(n),this.render()},selectArrivalAirport:function(t){var n=e(t.currentTarget).data("airport-item-index")-1;this.model.selectArrivalAirport(n),this.render()},serialize:function(){return this.model.toJSON()}});return r}),define("proxies/flight_path_proxy",["proxies/proxy","helpers"],function(e,t){var n=e.extend({syncConfig:function(){this.url="/mapi/services/flight_paths.json"},toJSON:function(){return{flight:t.underscorizeObjectKeys(this.model.toJSON())}}});return n}),define("parsers/flight_path_parser",["underscore","strings"],function(e,t){var n={parse:function(e){return this.response=e,this.parseFlightPaths()},parseFlightPaths:function(){var e,t;return t=this._checkFlightPathErrors(),t?e=t:(this._getFlightPaths(),this._setDefaultSelectedAirport(),e={flight_paths:this.paths,arrivalAirport:this.paths[0].arrival_airports[0],departureAirport:this.paths[0].departure_airport[0]}),e},_checkFlightPathErrors:function(){var n;if(!this.response||this.response.error||this.response.length&&e.isString(this.response[0]))n=this._returnError(t.ErrorNoFlightsFound);return n},_returnError:function(e){return{error:[{message:e}]}},_getFlightPaths:function(){var t,n,r=this,i=this._sortFlightPaths(this.response.flight_paths);this.paths=[],e(i).each(function(i){t=i.flight_airports,e(t).each(function(e,i){n=r._getDepartureArrivalAirports(t,e,i),n&&r.paths.push(n)})})},_sortFlightPaths:function(t){var n;return n=e(t).sortBy(function(e){return e.flight_airports.length*-1}),n},_getDepartureArrivalAirports:function(t,n,r){var i,s,o,u,a=n.departure_option==="true",f=r===0&&n.departure_option==="false"&&!!n.departure_time;if(a||f)s=this._getAirport(n),o=this._getArrivalAirports(t,r),f&&(u=e.clone(n),t.push(u)),i={departure_airport:[s],arrival_airports:o};return i},_getAirport:function(t){var n=e.find(this.response.airports,function(e){return e.iata_code===t.iata_code});return e.clone(e.defaults(t,n))},_getArrivalAirports:function(t,n){var r=this,i=[];return e(t.slice(n+1)).each(function(e){i.push(r._getAirport(e))}),i},_setDefaultSelectedAirport:function(){this.paths[0].departure_airport[0].selected=!0,this.paths[0].arrival_airports[0].selected=!0;for(var e=0;e<this.paths[0].arrival_airports.length;e+=1)this.paths[0].arrival_airports[e].relevant=!0}};return n}),define("models/flight_path",["models/model","proxies/flight_path_proxy","moment","underscore","strings","parsers/flight_path_parser"],function(e,t,n,r,i,s){var o=e.extend({name:"flight_path",defaults:{departureAirport:"",arrivalAirport:"",flightNumber:"",departureDate:n().format(),airlineCode:"",confirmationNumber:"",note:""},validate:function(e){var t=[];return r.isEmpty(e.airlineCode)&&t.push({fieldName:"airlineCode",message:i.ErrorAirlineBlank}),r.isEmpty(e.flightNumber)?t.push({fieldName:"flightNumber",message:i.ErrorFlightNumNumeric}):r.isNaN(parseInt(e.flightNumber,10))&&t.push({fieldname:"flightNumber",message:i.ErrorFlightNumNumeric}),r.isEmpty(e.departureDate)&&t.push({fieldName:"departureDate",message:i.ErrorDepartDateBlank}),r.any(t)?this.set({error:t},{silent:!0}):(this.unset("error",{silent:!0}),null)},initialize:function(e){this.proxy=new t({},{model:this}),r.extend(this,s)},initDefaultDate:function(e){var t=e&&e.get("default_date_and_times");t&&this.set({departureDate:t.flight_departure_date},{silent:!0})},hasNoFlights:function(){return this.get("flight_paths").length===0},hasOnlyOneFlightPath:function(){return this.get("flight_paths").length===1&&this.get("flight_paths")[0].arrival_airports.length===1},getFirstDepartureAirport:function(){return this.get("flight_paths")[0].departure_airport[0].iata_code},getFirstArrivalAirport:function(){return this.get("flight_paths")[0].arrival_airports[0].iata_code},getArrivalAirportSelection:function(){return this.get("arrivalAirport").iata_code},getArrivalAirportName:function(){return this.get("arrivalAirport").name},getArrivalCityName:function(){return this.get("arrivalAirport").general_location},getArrivalDateTime:function(){return this.get("arrivalAirport").arrival_time},getDepartureAirportSelection:function(){return this.get("departureAirport").iata_code},getDepartureAirportName:function(){return this.get("departureAirport").name},getDepartureCityName:function(){return this.get("departureAirport").general_location},getDepartureDateTime:function(){return this.get("departureAirport").departure_time},selectDepartureAirport:function(e){var t=this.get("flight_paths");r.each(t,function(e){r.each(e.arrival_airports,function(e){e.relevant=!1,e.selected=!1}),e.departure_airport[0].selected=!1}),t[e].departure_airport[0].selected=!0,this.set("departureAirport",t[e].departure_airport[0]),r.each(t[e].arrival_airports,function(e){e.relevant=!0}),t[e].arrival_airports[0].selected=!0,this.set("arrivalAirport",t[e].arrival_airports[0])},selectArrivalAirport:function(e){var t=this.get("flight_paths"),n=this;r.each(t,function(t){r.each(t.arrival_airports,function(t,r){t.selected=!1,t.relevant&&r===e&&(t.selected=!0,n.set("arrivalAirport",t))})})},getTripItemAttributes:function(){var e={departureDate:this.get("departureDate"),departureAirport:this.getDepartureAirportSelection(),departureAirportName:this.getDepartureAirportName(),departureCityName:this.getDepartureCityName(),departureDateTime:this.getDepartureDateTime(),arrivalAirport:this.getArrivalAirportSelection(),arrivalAirportName:this.getArrivalAirportName(),arrivalCityName:this.getArrivalCityName(),arrivalDateTime:this.getArrivalDateTime(),flightNumber:this.get("flightNumber"),airlineName:this.get("airlineName"),airlineCode:this.get("airlineCode"),confirmationNumber:this.get("confirmationNumber"),note:this.get("note"),for_business:this.get("for_business"),previous_trip_item_id:this.get("tripItemId")};return e}});return o}),define("modules/airline_select/airline_select_view",["namespace","jquery","mediator","backbone","analytics","underscore","trips_manager"],function(e,t,n,r,i,s,o){function u(e,t){var n,r,i,s,o;return t?(t.length===2&&e.where({iata_code:t}).length>0?o=e.where({iata_code:t})[0]:o=null,r=e.filter(function(e){return s=e.get("name").toUpperCase(),i=e.get("iata_code").toUpperCase(),s.indexOf(t)!==-1||i.indexOf(t)!==-1}),o&&t.length===2&&(r.splice(r.indexOf(o),1),r.unshift(o)),n=r.map(function(e){return e.toJSON()})):n=e.map(function(e){return e.toJSON()}),n}var a=r.Collection.extend({url:function(){return"/mapi/data/airlines.json"},toJSON:function(){var e=[];return this.filterBy&&this.filterBy.length>0&&(e=u(this,this.filterBy)),e}}),f=r.Collection.extend({url:function(){return"/mapi/users/"+e.session.user.get("id")+"/used_airlines.json"},toJSON:function(){var e=u(this,this.filterBy);return e}}),l=r.View.extend({className:"airline-results unfiltered",tagName:"div",template:"components/airline_select/airline_select_list",events:{"click #YOUR li":"selectYour","click #ALL li":"selectAll"},initialize:function(e){this.allAirlines=e.allAirlines,this.recentAirlines=e.recentAirlines,this.allAirlines.on("reset",function(){this.render()},this),this.recentAirlines.on("reset",function(){this.render()},this)},selectYour:function(t){this._handleSelection(t,this.recentAirlines),i.trackEvent("AirlineSelect","PickFromRecent",e,o.getCurrentTripId())},selectAll:function(t){this._handleSelection(t,this.allAirlines),i.trackEvent("AirlineSelect","PickFromAll",e,o.getCurrentTripId())},_handleSelection:function(e,r){e.preventDefault();var i=t(e.currentTarget).data("code"),s=r.find(function(e){return e.get("iata_code")===i});s=s.toJSON(),n.publish("add_flight_workflow:save",s),n.publish("edit_flight_workflow:save",s)},serialize:function(){return t(".airline-results").hasClass("unfiltered")?{allAirlines:!1,recentAirlines:this.recentAirlines.toJSON()}:{allAirlines:this.allAirlines.toJSON(),recentAirlines:!1}}}),c=r.View.extend({className:"search",events:{"input #search-term":"debouncedFilter","submit #airline-select-query":"onSubmit","keydown #search-term":"onKeyDown"},template:"components/airline_select/airline_select",initialize:function(e){this.allAirlines=e.allAirlines,this.recentAirlines=e.recentAirlines,this.resultsView=e.resultsView},dismissKeyboard:function(){(e.isIos||e.isAndroid)&&t("#search-term").blur()},onKeyDown:function(e){e.keyCode===13&&this.dismissKeyboard()},onSubmit:function(e){return e.preventDefault(e),this.dismissKeyboard(),!1},setFilteredState:function(e){e?t(".airline-results").removeClass("unfiltered"):t(".airline-results").addClass("unfiltered")},shouldFilter:function(e){return e.length!==1},debouncedFilter:s.debounce(function(e){this.onAirlineFiltering(e)},300),onAirlineFiltering:function(e){e.preventDefault(e);var t=this.$el.find("#search-term").val().toUpperCase();this.allAirlines.filterBy=t,this.recentAirlines.filterBy=t,this.shouldFilter(t)&&(this.setFilteredState(t),this.resultsView.render())}}),h=r.View.extend({initialize:function(){e.allAirlines||(e.allAirlines=new a),e.allAirlines.filterBy=undefined,e.recentAirlines||(e.recentAirlines=new f),e.recentAirlines.filterBy=undefined,this.resultsView=new l({allAirlines:e.allAirlines,recentAirlines:e.recentAirlines}),this.inputView=new c({allAirlines:e.allAirlines,recentAirlines:e.recentAirlines,resultsView:this.resultsView})},render:function(t){var n=t(this);return n.insert(this.inputView),n.insert(this.resultsView),e.allAirlines.length<=0&&e.allAirlines.fetch(),e.recentAirlines.fetch(),n.render()}});return h}),define("workflows/add_flight_workflow",["machina","mediator","kalendae","moment","views/flights/add/add_flight_view","views/flights/add/confirm_flight_view","views/flights/add/select_airport_view","models/flight_path","trips_manager","modules/airline_select/airline_select_view","analytics","strings","namespace"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){var p=new e.Fsm({initialState:"uninitialized",_userInputStore:function(e,t){var n=this.flightPath.get("airlineName");this.flightPath.clear({silent:!0}),this.flightPath.set({airlineName:n,airlineCode:e.airlineCode,flightNumber:e.flightNumber,departureDate:e.departureDate,confirmationNumber:e.confirmationNumber,for_business:!!e.for_business,note:e.note},t||{})},states:{uninitialized:{initialize:function(e){this.flightPath=new u,this.flight=e.model,this.controller=e.controller,this.transition("showingForm"),l.trackEvent("FlightAdd","Start",h,this.flight.getTripId())}},showingForm:{_onEnter:function(){this.flightPath.initDefaultDate(a.getCurrentTrip()),this.controller._updateHeader(c.AddFlight,"add_flight_workflow:back"),this.controller.setView(this.addView=new i({model:this.flightPath,helpInfoBackMessage:"add_flight_workflow:back_info_add"}))},selectDate:function(){this.transition("selectingDate")},selectAirline:function(){this.transition("selectingAirline")},save:function(e){var n=this;this._userInputStore(e),this.flightPath.has("error")?t.publish("error:trigger","form_validation",this.flightPath.get("error")):this.flightPath.fetch({success:function(e){e.has("error")?t.publish("error:trigger","form_validation",e.get("error")):n.transition("selectingOriginDestinationAirports")}})},back:function(){t.publish("back:history"),this.transition("uninitialized")},"*":function(){this.transition("showingForm")}},selectingDate:{_onEnter:function(){},save:function(){this.transition("showingForm")},back:function(){this.transition("showingForm")},"*":function(){this.transition("showingForm")}},selectingAirline:{_onEnter:function(){this._userInputStore(this.addView.getFormData(),{silent:!0}),this.controller._updateHeader(c.SelectAirline,"add_flight_workflow:back"),this.view=new f,this.controller.setView(this.view)},save:function(e){this.flightPath.set("airlineCode",e.iata_code,{silent:!0}),this.flightPath.set("airlineName",e.name,{silent:!0}),this.transition("showingForm")},back:function(){this.transition("showingForm")},"*":function(){this.transition("showingForm")}},selectingOriginDestinationAirports:{_onEnter:function(){this.controller._updateHeader(c.AddFlight,"add_flight_workflow:back"),this.flightPath.hasOnlyOneFlightPath()?this.transition("confirmingFlight"):(this.view=this.selectAirportView=this.selectAirportView||new o,this.view.model=this.flightPath,this.controller.setView(this.view))},save:function(e){this.transition("confirmingFlight")},back:function(){this.transition("showingForm")},"*":function(){this.transition("showingForm")}},confirmingFlight:{_onEnter:function(){this.controller._updateHeader(c.ConfirmFlight,"add_flight_workflow:back"),this.flight.set(this.flightPath.getTripItemAttributes()),this.view=this.confirmFlightView=this.confirmFlightView||new s,this.view.model=this.flight,this.controller.setView(this.view)},save:function(e){var t=this;this.flight.save(null,{cache_mode:this.flight.proxy.CACHE_MODE_DEFER,context:e.currentTarget,beforeSend:function(){this.setAttribute("disabled","disabled")},complete:function(){this.removeAttribute("disabled")},success:function(e,n){t.transition("complete"),l.trackEvent("FlightAdd","Complete",h,t.flight.get("id"))}})},back:function(){this.flightPath.hasOnlyOneFlightPath()?this.transition("showingForm"):this.transition("selectingOriginDestinationAirports")},"*":function(){this.transition("showingForm")}},complete:{_onEnter:function(){this.fireEvent("complete"),this.transition("uninitialized")}}}});return t.subscribe("add_flight_workflow:initialize",function(){p.handle("initialize")}),t.subscribe("add_flight_workflow:save",function(e){p.handle("save",e)}),t.subscribe("add_flight_workflow:back",function(){p.handle("back")}),t.subscribe("add_flight_workflow:selectDate",function(){p.handle("selectDate")}),t.subscribe("add_flight_workflow:selectAirline",function(){p.handle("selectAirline")}),t.subscribe("add_flight_workflow:back_info_add",function(){p.handle("showingForm")}),p}),define("views/trip_items/trip_item_imported_edit_view",["namespace","jquery","underscore","backbone","mediator","layoutmanager"],function(e,t,n,r,i){var s=r.View.extend({events:{"vclick #for-business-help":"onHelpForBusiness","submit #edit-flight-form":"onSave"},template:"trip_items/trip_item_imported_edit",initialize:function(e){this.helpInfoBackMessage=e.helpInfoBackMessage,this.model.on("change",function(){this.render()},this),this.model.on("error",function(e,t){i.publish("error:trigger","form_validation",t),this.model.clear({silent:!0})},this)},onSave:function(e){e.preventDefault();var n={};t.each(this.$el.find("form").serializeArray(),function(e,t){n[t.name]=t.value}),this.trigger("save",n)},serialize:function(){var t=this.model.toJSON(),n=this.model.get("corporation"),r=e.session.user.get("corporation");return t.showForBusinessField=n||r,t.itemCorporation=n,t.userCorporation=r,t},onHelpForBusiness:function(e){e.preventDefault(),i.publish("info_page:show_for_business",this.helpInfoBackMessage)}});return s}),define("views/flights/flight_list_view",["namespace","jquery","underscore","backbone","layoutmanager"],function(e,t,n,r){var i=r.View.extend({tagName:"ul",className:"flights-list action-list",template:"trip_items/flight/flight_list",events:{"click .flight-list-item-group":"onSelectItem"},initialize:function(e){e=e||{},this.isSeatMaps=e.isSeatMaps||!1},onSelectItem:function(e){e.preventDefault();var n=t(e.currentTarget).data("id"),r=t(e.currentTarget).data("seat_map_url");this.trigger("select_flight",n,r)},serialize:function(){var e={flights:this.collection.toJSON(),is_seat_maps:this.isSeatMaps};return e}});return i}),define("workflows/edit_flight_workflow",["backbone","machina","mediator","kalendae","moment","views/flights/add/add_flight_view","views/flights/add/confirm_flight_view","views/flights/add/select_airport_view","models/flight_path","models/flight","modules/airline_select/airline_select_view","models/air_trip_item","views/trip_items/trip_item_imported_edit_view","views/flights/flight_list_view","analytics","namespace","strings","trips_manager"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g){var y=new t.Fsm({initialState:"uninitialized",_hasFlightChangedFromOriginal:function(){var e=this.airTripItem.get("airline")!==this.flightPath.get("airlineName"),t=this.airTripItem.get("airline_code")!==this.flightPath.get("airlineCode"),n=parseInt(this.airTripItem.get("flight_number"),10)!==parseInt(this.flightPath.get("flightNumber"),10),r=i(this.airTripItem.get("scheduled_departure")).startOf("day").format()!==i(this.flightPath.get("departureDate")).startOf("day").format();return e||t||n||r},states:{uninitialized:{initialize:function(e){var t=g.getCurrentTrip();this.flightGroupModel=e.model,this.flightPath=new a,this.flight=new f,this.controller=e.controller,this.selectingFlightView=new p({collection:this.flightGroupModel.reservations}),this.editFlightView=new s({model:this.flightPath,helpInfoBackMessage:"edit_flight_workflow:back_info_edit"}),this.editFlightViewImported=new h({model:this.flightPath,helpInfoBackMessage:"edit_flight_workflow:back_info_edit"}),this.confirmFlightView=new o,this.newAirlineName=undefined,this.newAirlineCode=undefined,this.newFlightNumber=undefined,this.newDepartureDate=undefined,this.newConfirmationNumber=undefined,this.newNote=undefined;if(this.flightGroupModel.hasMultipleReservations())this.transition("selectingFlight");else{var n=this.flightGroupModel.reservations.first().id;this.airTripItem=t.tripItems.get(n),this.transition("showingForm")}d.trackEvent("FlightEdit","Start",v,t.get("id"))}},selectingFlight:{_onEnter:function(){this.selectingFlightView.off(),this.selectingFlightView.on("select_flight",function(e){y.handle("selectFlight",e)}),this.controller._updateHeader(m.SelectFlight,"back:history"),this.controller.setView(this.selectingFlightView)},selectFlight:function(e){var t=g.getCurrentTrip();this.airTripItem=t.tripItems.get(e),this.transition("showingForm"),d.trackEvent("FlightEdit","SelectFlight",v,t.get("id"))}},showingForm:{_onEnter:function(){var e=this;this.flightPath.clear({silent:!0}),this.flightPath.set({airlineName:this.newAirlineName||this.airTripItem.get("airline"),airlineCode:this.newAirlineCode||this.airTripItem.get("airline_code"),flightNumber:this.newFlightNumber||this.airTripItem.get("flight_number"),departureDate:this.newDepartureDate||this.airTripItem.get("scheduled_departure"),confirmationNumber:this.newConfirmationNumber||this.airTripItem.get("confirmation_number"),for_business:this.airTripItem.get("for_business"),corporation:this.airTripItem.get("corporation"),note:this.newNote||this.airTripItem.get("note")},{silent:!0}),this.controller._updateHeader(m.EditFlight,"edit_flight_workflow:back"),this.airTripItem.isImported()?(this.editFlightViewImported.on("save",function(t){e.handle("save",t)}),this.controller.setView(this.editFlightViewImported)):this.controller.setView(this.editFlightView)},selectDate:function(){this.transition("selectingDate")},selectAirline:function(){this.transition("selectingAirline")},save:function(e){var t={note:e.note,for_business:!!e.for_business};if(this.airTripItem.isImported())this.flightPath.set(t,{silent:!0});else{var r=this.flightPath.get("airlineName");this.newDepartureDate=i(e.departureDate).format(),this.newFlightNumber=e.flightNumber,this.newConfirmationNumber=e.confirmationNumber,this.newNote=e.note,t.airlineName=r,t.airlineCode=e.airlineCode,t.flightNumber=e.flightNumber,t.departureDate=e.departureDate,t.confirmationNumber=e.confirmationNumber,this.flightPath.set(t)}if(!this.flightPath.has("error")){var s=this;this.flightPath.fetch({silent:!0,success:function(e){e.has("error")?n.publish("error:trigger","form_validation",e.get("error")):s._hasFlightChangedFromOriginal()?s.transition("selectingOriginDestinationAirports"):s.transition("submitting"),s.airTripItem.isImported()?d.trackEvent("FlightEdit","CommitImported",v,s.airTripItem.getTripId(),s.airTripItem.get("id")):d.trackEvent("FlightEdit","CommitManual",v,s.airTripItem.getTripId(),s.airTripItem.get("id"))}})}else n.publish("error:trigger","form_validation",this.flightPath.get("error"))},back:function(){this.editFlightViewImported.off(),this.flightGroupModel.hasMultipleReservations()?this.transition("selectingFlight"):(this.transition("uninitialized"),n.publish("back:history"))}},selectingAirline:{_onEnter:function(){this.controller._updateHeader(m.SelectAirline,"edit_flight_workflow:back"),this.view=new l,this.controller.setView(this.view)},save:function(e){this.newAirlineCode=e.iata_code,this.newAirlineName=e.name,this.flightPath.set("airlineCode",e.iata_code,{silent:!0}),this.flightPath.set("airlineName",e.name,{silent:!0}),this.transition("showingForm")},"*":function(){this.transition("showingForm")}},selectingOriginDestinationAirports:{_onEnter:function(){this.controller._updateHeader(m.EditFlight,"edit_flight_workflow:back"),this.flightPath.hasOnlyOneFlightPath()?this.transition("submitting"):(this.view=this.selectAirportView=this.selectAirportView||new u,this.view.model=this.flightPath,this.controller.setView(this.view))},save:function(e){this.transition("submitting")},"*":function(){this.transition("showingForm")}},submitting:{_onEnter:function(){var e=this;this.airTripItem.set(this.flightPath.getTripItemAttributes(),{silent:!0}),this._hasFlightChangedFromOriginal()&&this.airTripItem.toNew();var t=this.airTripItem.attributes;t.airline=t.airlineName,t.airline_code=t.airlineCode,t.flight_number=t.flightNumber,t.scheduled_departure=t.departureDate,t.departure_airport=t.departureAirportName,t.departure_airport_code=t.departureAirport,t.confirmation_number=t.confirmationNumber,t.for_business=t.for_business,this.airTripItem.save(null,{success:function(t,n){e.transition("complete")},error:function(){e.transition("showingForm")}})},"*":function(){this.transition("showingForm")}},complete:{_onEnter:function(){var e=g.getCurrentTrip();this.fireEvent("complete"),this.transition("uninitialized"),this.editFlightViewImported.off(),d.trackEvent("FlightEdit","Complete",v,e.get("id"))}}}});return n.subscribe("edit_flight_workflow:save",function(e){y.handle("save",e)}),n.subscribe("edit_flight_workflow:initialize",function(){y.handle("initialize")}),n.subscribe("edit_flight_workflow:back",function(){y.handle("back")}),n.subscribe("edit_flight_workflow:selectDate",function(){y.handle("selectDate")}),n.subscribe("edit_flight_workflow:selectAirline",function(){y.handle("selectAirline")}),n.subscribe("edit_flight_workflow:back_info_edit",function(){y.transition("showingForm")}),y}),define("presenters/flight_group_presenter",["underscore","helpers","presenters/presenter","strings"],function(e,t,n,r){var i=n.extend({className:"flight-group",initialize:function(t){e.extend(this,t.flightGroup.toJSON()),this.air_reservations=t.flightGroup.reservations.toJSON(),this.number_of_stops=t.flightGroup.get("stops").length,this.detailMenuItems=this._getDetailMenuItems(),this.isWorldMate=t.flightGroup.isWorldMate()},_getDetailMenuItems:function(){var e=[{label:r.Weather,id:"weather-menu",icon:"icon_weather_45px"},{label:r.AltFlights,id:"alternate-flights-menu",icon:"icon_alt_flights_45px"}];return e}});return i}),define("views/flights/flight_detail_view",["config","namespace","jquery","underscore","backbone","analytics","mediator","presenters/flight_group_presenter","strings","moment","modules/external_url_viewer","trips_manager"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h=i.View.extend({events:{"vclick .map":"onMapPick","vclick .phone-actionable":"onPhonePick","vclick .weather":"onWeatherPick","vclick #canceled-alt-flight":"onAltFlight","vclick #weather-menu":"onWeatherPick","vclick #alternate-flights-menu":"onAltFlight","vclick #share-menu":"onClickShare","vclick #seats":"onClickSeats","vclick #worldmate":"onClickWorldMate"},className:"trip-component trip-item-detail flight",template:"trip_items/flight/flight_detail",initialize:function(){n("#app-page").scrollTop(0),this.model.on("change",function(){this.render()},this),this._initSubscriptions()},_initSubscriptions:function(){o.subscribe("flightdetail:refresh",this.onRefresh,this),o.subscribe("device:resume",this.onRefresh,this)},cleanup:function(){o.unsubscribe(null,null,this)},onMapPick:function(e){e.preventDefault();var t=n(e.currentTarget).data("index")-1,r=n(e.currentTarget).data("segment"),i=this.model.reservations.at(t);r==="depart"?o.publish("map:show",{itemId:i.id}):o.publish("map:show",{itemId:i.id,isEnd:!0})},onPhonePick:function(e){e.preventDefault();var t=n(e.currentTarget).data("index")-1,r=this.model.reservations.at(t);o.publish("phone_numbers:showPhoneNumbers",r)},onWeatherPick:function(e){e.preventDefault(),o.publish("weather:show",{tripItemId:this.model.id})},onClickSeats:function(e){e.preventDefault();var t=n(e.currentTarget).data("item_id"),r={itemId:t};o.publish("seatmaps:show",r)},onAltFlight:function(e){e.preventDefault(),o.publish("altflights:show",{itemId:this.model.id,collection:this.model.reservations})},onClickShare:function(){event.preventDefault(),o.publish("trips:share")},serialize:function(){return this.presenter=new u({flightGroup:this.model}),this.presenter},onRefresh:function(){s.trackEvent("FlightDetail","Refresh",t);var e=this;this.$el.isInView()&&this.model.fetch({isToRefresh:!0,success:function(){e.model.set({refresh_timestamp:f().valueOf()}),e._refreshOwningTrip()}})},_refreshOwningTrip:function(){var e=c.getCurrentTrip();e.fetch({isToRefresh:!0})},onClickWorldMate:function(){t.isOnline?(this.externalURLViewer=this.externalURLViewer||new l,this.externalURLViewer.open("http://www.worldmate.com")):o.publish("error:trigger","service",[{message:a.ErrorOffline}])}});return h}),define("controllers/flights_controller",["underscore","jquery","mediator","namespace","kalendae","moment","models/flight","controllers/controller","workflows/add_flight_workflow","workflows/edit_flight_workflow","views/flights/flight_detail_view","models/flight_group","models/flight_path","trips_manager","views/flights/add/confirm_flight_view","views/flights/flight_list_view","backbone","strings"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g){var y=u.extend({initialize:function(t){e.bindAll(this),this.model=null,this.flightGroupModel=new c,this._initSubscriptions()},_initSubscriptions:function(){n.subscribe("flights:add",this.add),n.subscribe("flights:edit",this.edit),n.subscribe("flights:show",this.show),this.flightGroupModel.on("change",this._setHeader)},setNavigationView:function(e){this._layout.view("#header",e)},show:function(e){var t=this;this._layout=r.getLayout("simple_with_loading"),this.showLoading(),p.getTripItems(e.trip.id,function(n){var r=n.get(e.id);t.flightGroupModel.initialize(null,{model:r,silent:!0}),t.flightGroupModel.fetch({silent:!0,success:function(e){t._setHeader(e),t.setView(new l({model:e}))}})})},_setHeader:function(e){var t=p.getCurrentTrip().isFollowing(),r=e.reservations.first(),i=r.startLocation.getAirportCode(),s=r.getDepartureCity(),o=e.reservations.last(),u=o.endLocation.getAirportCode(),a=o.getArrivalCity(),f=i+' <span class="general-icon icon_flight_detail_hdr_arrow"></span> '+u,l=s+" "+g.To+" "+a,c={backAction:"back:history",title:f,subtitle:l,rightButtons:[{name:"flight-refresh",iconURL:"button-icon btn_icon_refresh_25px",action:"flightdetail:refresh"}]};t||c.rightButtons.unshift({name:"flight-edit",iconURL:"button-icon btn_icon_edit_25px",action:"flights:edit",param:{tripId:e.get("trip_id"),itemId:e.get("id")}}),n.publish("header:updateHeader",c)},_parseForTripAndTripItem:function(t){var n=p.getCurrentTrip(),r=e.wrap(t.parse,function(e,r,i){var s=e.apply(t,[r,i]);return e.apply(n,[r,i]),n.set(s,{silent:!0}),s});return r},add:function(e){this.addParams=e;var t=this;this._layout=r.getLayout("simple"),this.model=new o,this.model.parse=this._parseForTripAndTripItem(this.model),this.changeURL("trips/"+e.tripId+"/trip_items/flight"),this.model.set("tripId",e.tripId),a.handle("initialize",{model:this.model,controller:this}),a.off("complete",this.onAddComplete),a.on("complete",this.onAddComplete)},onAddComplete:function(){n.publish("trip_items:index",this.addParams)},edit:function(e){this.editParams=e,this._layout=r.getLayout("simple"),this.changeURL("trips/"+e.tripId+"/trip_items/flight"),f.transition("uninitialized"),f.handle("initialize",{model:this.flightGroupModel,controller:this}),f.off("complete",this.onEditComplete),f.on("complete",this.onEditComplete)},onEditComplete:function(){n.publish("back:history",this.editParams)}});return y}),define("views/trip_items/trip_item_detail_view",["jquery","underscore","namespace","mediator","backbone","layoutmanager","trip_item_presenter_factory","modules/external_url_viewer","strings"],function(e,t,n,r,i,s,o,u,a){var f=i.View.extend({template:"trip_items/trip_item_detail",events:{"vclick .map":"onClickMap","vclick #hotel-co-menu":"onClickHotel","vclick #weather-menu":"onClickWeather","vclick #directions-menu":"onClickDirections","vclick #rental-co-menu":"onClickRental","vclick #share-menu":"onClickShare","vclick #alternate-flights-menu":"onClickAltFlights","vclick #worldmate":"onClickWorldMate"},className:"trip-component trip-item-detail",initialize:function(){e("#app-page").scrollTop(0)},onClickMap:function(t){var n=e(t.currentTarget).data("segment");n==="start"?r.publish("map:show",{itemId:this.model.id}):r.publish("map:show",{itemId:this.model.id,isEnd:!0})},onClickHotel:function(e){r.publish("hotels:locationDetails",{itemId:this.model.id})},onClickWeather:function(e){e.preventDefault(),r.publish("weather:show",{tripItemId:this.model.id})},onClickRental:function(e){r.publish("vehicles:locationDetails",{itemId:this.model.id})},onClickShare:function(e){e.preventDefault(),r.publish("trips:share")},onClickAltFlights:function(e){e.preventDefault(),r.publish("altflights:show",{itemId:this.model.id})},onClickDirections:function(e){r.publish("map:directions",{itemId:this.model.id})},onClickWorldMate:function(){n.isOnline?(this.externalURLViewer=this.externalURLViewer||new u,this.externalURLViewer.open("http://www.worldmate.com")):r.publish("error:trigger","service",[{message:a.ErrorOffline}])},serialize:function(){return o.getPresenter(this)}});return f}),(window.jQuery||window.Zepto)&&function(e){e.fn.Swipe=function(t){return this.each(function(){e(this).data("Swipe",new Swipe(e(this)[0],t))})}}(window.jQuery||window.Zepto),define("swipe",function(e){return function(){var t,n;return t||e.Swipe}}(this)),function(e,t){function r(e,t,n){var r=e.children(),i=!1;e.empty();for(var s=0,u=r.length;s<u;s++){var a=r.eq(s);e.append(a),n&&e.append(n);if(o(e,t)){a.remove(),i=!0;break}n&&n.detach()}return i}function i(t,n,r,u,a){var f=!1,l="table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, blockquote, select, optgroup, option, textarea, script, style",c="script";return t.contents().detach().each(function(){var h=this,p=e(h);if(typeof h=="undefined"||h.nodeType==3&&e.trim(h.data).length==0)return!0;if(p.is(c))t.append(p);else{if(f)return!0;t.append(p),a&&t[t.is(l)?"after":"append"](a),o(r,u)&&(h.nodeType==3?f=s(p,n,r,u,a):f=i(p,n,r,u,a),f||(p.detach(),f=!0)),f||a&&a.detach()}}),f}function s(t,n,r,i,s){var a=t[0];if(!a)return!1;var c=l(a),p=c.indexOf(" ")!==-1?" ":"　",d=i.wrap=="letter"?"":p,v=c.split(d),m=-1,g=-1,y=0,b=v.length-1;i.fallbackToLetter&&y==0&&b==0&&(d="",v=c.split(d),b=v.length-1);while(y<=b&&(y!=0||b!=0)){var w=Math.floor((y+b)/2);if(w==g)break;g=w,f(a,v.slice(0,g+1).join(d)+i.ellipsis),o(r,i)?(b=g,i.fallbackToLetter&&y==0&&b==0&&(d="",v=v[0].split(d),m=-1,g=-1,y=0,b=v.length-1)):(m=g,y=g)}if(m==-1||v.length==1&&v[0].length==0){var E=t.parent();t.detach();var S=s&&s.closest(E).length?s.length:0;E.contents().length>S?a=h(E.contents().eq(-1-S),n):(a=h(E,n,!0),S||E.detach()),a&&(c=u(l(a),i),f(a,c),S&&s&&e(a).parent().append(s))}else c=u(v.slice(0,m+1).join(d),i),f(a,c);return!0}function o(e,t){return e.innerHeight()>t.maxHeight}function u(t,n){while(e.inArray(t.slice(-1),n.lastCharacter.remove)>-1)t=t.slice(0,-1);return e.inArray(t.slice(-1),n.lastCharacter.noEllipsis)<0&&(t+=n.ellipsis),t}function a(e){return{width:e.innerWidth(),height:e.innerHeight()}}function f(e,t){e.innerText?e.innerText=t:e.nodeValue?e.nodeValue=t:e.textContent&&(e.textContent=t)}function l(e){return e.innerText?e.innerText:e.nodeValue?e.nodeValue:e.textContent?e.textContent:""}function c(e){do e=e.previousSibling;while(e&&e.nodeType!==1&&e.nodeType!==3);return e}function h(t,n,r){var i=t&&t[0],s;if(i){if(!r){if(i.nodeType===3)return i;if(e.trim(t.text()))return h(t.contents().last(),n)}s=c(i);while(!s){t=t.parent();if(t.is(n)||!t.length)return!1;s=c(t[0])}if(s)return h(e(s),n)}return!1}function p(t,n){return t?typeof t=="string"?(t=e(t,n),t.length?t:!1):t.jquery?t:!1:!1}function d(e){var t=e.innerHeight(),n=["paddingTop","paddingBottom"];for(var r=0,i=n.length;r<i;r++){var s=parseInt(e.css(n[r]),10);isNaN(s)&&(s=0),t-=s}return t}if(e.fn.dotdotdot)return;e.fn.dotdotdot=function(t){if(this.length==0)return e.fn.dotdotdot.debug('No element found for "'+this.selector+'".'),this;if(this.length>1)return this.each(function(){e(this).dotdotdot(t)});var s=this;s.data("dotdotdot")&&s.trigger("destroy.dot"),s.data("dotdotdot-style",s.attr("style")||""),s.css("word-wrap","break-word"),s.css("white-space")==="nowrap"&&s.css("white-space","normal"),s.bind_events=function(){return s.bind("update.dot",function(t,n){t.preventDefault(),t.stopPropagation(),f.maxHeight=typeof f.height=="number"?f.height:d(s),f.maxHeight+=f.tolerance;if(typeof n!="undefined"){if(typeof n=="string"||n instanceof HTMLElement)n=e("<div />").append(n).contents();n instanceof e&&(u=n)}v=s.wrapInner('<div class="dotdotdot" />').children(),v.contents().detach().end().append(u.clone(!0)).find("br").replaceWith("  <br />  ").end().css({height:"auto",width:"auto",border:"none",padding:0,margin:0});var a=!1,c=!1;return l.afterElement&&(a=l.afterElement.clone(!0),a.show(),l.afterElement.detach()),o(v,f)&&(f.wrap=="children"?c=r(v,f,a):c=i(v,s,v,f,a)),v.replaceWith(v.contents()),v=null,e.isFunction(f.callback)&&f.callback.call(s[0],c,u),l.isTruncated=c,c}).bind("isTruncated.dot",function(e,t){return e.preventDefault(),e.stopPropagation(),typeof t=="function"&&t.call(s[0],l.isTruncated),l.isTruncated}).bind("originalContent.dot",function(e,t){return e.preventDefault(),e.stopPropagation(),typeof t=="function"&&t.call(s[0],u),u}).bind("destroy.dot",function(e){e.preventDefault(),e.stopPropagation(),s.unwatch().unbind_events().contents().detach().end().append(u).attr("style",s.data("dotdotdot-style")||"").data("dotdotdot",!1)}),s},s.unbind_events=function(){return s.unbind(".dot"),s},s.watch=function(){s.unwatch();if(f.watch=="window"){var t=e(window),n=t.width(),r=t.height();t.bind("resize.dot"+l.dotId,function(){if(n!=t.width()||r!=t.height()||!f.windowResizeFix)n=t.width(),r=t.height(),h&&clearInterval(h),h=setTimeout(function(){s.trigger("update.dot")},100)})}else c=a(s),h=setInterval(function(){if(s.is(":visible")){var e=a(s);if(c.width!=e.width||c.height!=e.height)s.trigger("update.dot"),c=e}},500);return s},s.unwatch=function(){return e(window).unbind("resize.dot"+l.dotId),h&&clearInterval(h),s};var u=s.contents(),f=e.extend(!0,{},e.fn.dotdotdot.defaults,t),l={},c={},h=null,v=null;return f.lastCharacter.remove instanceof Array||(f.lastCharacter.remove=e.fn.dotdotdot.defaultArrays.lastCharacter.remove),f.lastCharacter.noEllipsis instanceof Array||(f.lastCharacter.noEllipsis=e.fn.dotdotdot.defaultArrays.lastCharacter.noEllipsis),l.afterElement=p(f.after,s),l.isTruncated=!1,l.dotId=n++,s.data("dotdotdot",!0).bind_events().trigger("update.dot"),f.watch&&s.watch(),s},e.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",fallbackToLetter:!0,lastCharacter:{},tolerance:0,callback:null,after:null,height:null,watch:!1,windowResizeFix:!0},e.fn.dotdotdot.defaultArrays={lastCharacter:{remove:[" ","　",",",";",".","!","?"],noEllipsis:[]}},e.fn.dotdotdot.debug=function(e){};var n=1,v=e.fn.html;e.fn.html=function(n){return n!=t&&!e.isFunction(n)&&this.data("dotdotdot")?this.trigger("update",[n]):v.apply(this,arguments)};var m=e.fn.text;e.fn.text=function(n){return n!=t&&!e.isFunction(n)&&this.data("dotdotdot")?(n=e("<div />").text(n).html(),this.trigger("update",[n])):m.apply(this,arguments)}}(jQuery),define("jquery.dotdotdot",["jquery"],function(){}),define("views/hotels/add/hotel_location_detail_view",["jquery","underscore","backbone","mediator","handlebars","presenters/trip_item/trip_item_hotel_presenter","swipe","strings","jquery.dotdotdot"],function(e,t,n,r,i,s,o,u){var a=n.View.extend({template:"trip_items/hotel/hotel_location_details",initialize:function(e){t.extend(this,e),this.model.on("change",function(){this.render()},this),this.on("afterrender",this.afterrender,this)},afterrender:function(){var t=this;t.swipe=new o(e(this.el).find(".swipe")[0],{callback:function(){t.$el.find("#of").html(t.swipe.getPos()+1)}}),e(".ellipsis").addClass("collapsed").dotdotdot({after:"a.read-more"})},events:{"vclick .map":"onClickMap","click .next":"nextPhoto","click .previous":"previousPhoto","vclick .read-more":"toggleReadMore"},onClickMap:function(e){e.preventDefault(),r.publish("map:show",{itemId:this.model.id})},nextPhoto:function(e){e.preventDefault(),this.swipe.next()},previousPhoto:function(e){e.preventDefault(),this.swipe.prev()},toggleReadMore:function(){var t=e(".ellipsis"),n;t.hasClass("collapsed")?(n=t.triggerHandler("originalContent"),t.append(n).removeClass("collapsed"),t.trigger("update"),e(".ellipsis .read-more").html(u.Collapse)):(t.addClass("collapsed"),t.trigger("update"),e(".ellipsis .read-more").html(u.ReadMore))},serialize:function(){var e=new s({model:this.model});return t.extend(this.model.toJSON(),{address:e.getAddress(),phoneNumbers:e.getPhoneNumbers(),generalInformation:e.getGeneralInformation(),photos:e.getGlamourShots(),property_amenities:e.getAmenities("Property"),room_amenities:e.getAmenities("Room"),start_location:e.start_location})}});return a}),define("proxies/hotel_location_details_proxy",["proxies/proxy"],function(e){var t=e.extend({syncConfig:function(){this.url="/mapi/services/hotel_location_detail.json"},_getAttrs:function(){return{property_id:this.model.get("property_id")}},toJSON:function(){return this._getAttrs()}});return t}),define("parsers/hotel_location_details_parser",["underscore","parsers/location_parser","models/phone_number"],function(e,t,n){var r={parse:function(e){this.clear({silent:!0});var t=this.parsePhoneNumbers(e.hotel_details.phones);return this.addPhoneNumbers(t),this.parseHotelLocationDetails(e)},parseHotelLocationDetails:function(e){var n=t.parseLocation(e),r=e.hotel_reservation,i=r&&r.hotel_property||e,s=i.address,o=i.hotel_details;return n.named_type=n.type="Hotel",n.start_date=e.start_time&&e.start_time.time,n.end_date=e.end_time&&e.end_time.time,n.confirmation_number=r&&r.confirmation_number,n.name=i.name,n.general_location=n.map_name=s.general_location,n.long_description=o.long_description,n.num_rooms=o.num_rooms,n.num_floors=o.num_floors,n.star_rating=o.awards&&o.awards[0]&&o.awards[0].rating,n.amenities=o.amenities,n.multi_media_objects=i.multi_media_objects,n},parsePhoneNumbers:function(t){var r=e.map(t,function(e){return new n({type:e.type,number:e.number})});return r}};return r}),define("models/hotel_location_details",["underscore","models/hotel_location","collections/phone_number_list","proxies/hotel_location_details_proxy","parsers/hotel_location_details_parser"],function(e,t,n,r,i){var s=t.extend({initialize:function(s,o){t.prototype.initialize.call(this,s,o),e.extend(this,i),this.phoneNumbers=new n,this.proxy=new r({},{model:this})},getPhoneNumbers:function(){return this.phoneNumbers},addPhoneNumbers:function(e){this.phoneNumbers.add(e)}});return s}),define("proxies/location_list_proxy",["proxies/proxy"],function(e){var t=e.extend({syncConfig:function(e,t){this.url="/mapi/trips/"+this.collection.getTripId()+"/trip_locations.json"},_getAttrs:function(){var e={};return this.collection.includesTraffic()&&(e.traffic=!0),e},toJSON:function(){return this._getAttrs()}});return t}),define("collections/location_list",["jquery","underscore","collections/collection","models/location","proxies/location_list_proxy"],function(e,t,n,r,i){var s=n.extend({model:r,initialize:function(e,t){t=t||{},this.trip=t.trip,this.traffic=t.traffic,this.proxy=new i({},{collection:this})},getTripId:function(){return this.trip&&this.trip.get("id")},includesTraffic:function(){return!!this.traffic}});return s}),define("views/trip_items/pick_location_view",["namespace","jquery","underscore","backbone","mediator","collections/location_list","analytics","strings"],function(e,t,n,r,i,s,o,u){var a=r.View.extend({template:"trip_items/add/pick_location",initialize:function(e){e.showOnlyItems=e.showOnlyItems||!1,e.listHeaderText=e.listHeaderText||u.SearchNearTripItem,n.extend(this,e),this.locationList=new s(null,{trip:this.trip}),this.locationList.on("reset",function(){this.render()},this),this.on("afterrender",function(){this.locationList.fetch()})},events:{"vclick #searchLocation":"onSearchLocation","vclick #myTripItemLocations .add.group.actionable":"onSearchNearTripItem","vclick #searchByGpsCoordinates":"onSearchByGpsCoordinates"},onSearchLocation:function(t){t.preventDefault(),i.publish("pick_location:search"),o.trackEvent("LocationSelect","EnterAddress",e)},onSearchNearTripItem:function(n){n.preventDefault(),i.publish("pick_location:select",{location:this.locationList.at(t(n.currentTarget).data("index")-1)}),o.trackEvent("LocationSelect","NearTripItem",e)},onSearchByGpsCoordinates:function(t){function n(e){var t=e.coords.latitude,n=e.coords.longitude;i.publish("pick_location:select",{location:new s.prototype.model({lat:t,lng:n})})}function r(e){var t="";e.code===e.PERMISSION_DENIED?t=u.ErrorLocationServicesOff:e.code===e.POSITION_UNAVAILABLE?t=u.ErrorLocationServicesUnable:e.code===e.TIMEOUT?t=u.ErrorLocationServicesTimeout:t=u.ErrorLocationServicesOff,i.publish("error:trigger","form_validation",[{message:t}])}t.preventDefault(),navigator.geolocation.getCurrentPosition(n,r),o.trackEvent("LocationSelect","CurrentLocation",e)},serialize:function(){var e=this.locationList.reject(function(e){return!e.get("type")});return e=n.map(e,function(e){return e.attributes.icon_type=function(e){switch(e.toLowerCase()){case"air":return"airplane";case"vehicle":return"car";case"lodging":return"hotel";case"food_drink":return"food";default:return e}}(e.attributes.type),e}),{listHeaderText:this.listHeaderText,showOnlyItems:this.showOnlyItems,myTripItemLocations:(new r.Collection(e)).toJSON()}}});return a}),define("proxies/geocoded_location_proxy",["underscore","proxies/proxy"],function(e,t){var n=t.extend({_toQueryString:function(){},syncConfig:function(e,t){this.url="/mapi/geocodes/find.json",this._includesTraffic()&&(this.url+="?traffic=true")},_getAttrs:function(){var t=e.pick(this.collection.location.toJSON(),"street","city","state","postal","country");return this.collection.traffic&&(t.traffic=!0),{location:t}},toJSON:function(){return this._getAttrs()}});return n}),define("parsers/geocoded_location_parser",["underscore","backbone"],function(e,t){var n={parse:function(e){return this.parseGeocodedLocation(e)},parseGeocodedLocation:function(t){return e.map(t,function(e){var t=e;return t.lat=e.latitude,t.lng=e.longitude,delete t.latitude,delete t.longitude,t})}};return n}),define("collections/geocoded_location_list",["jquery","underscore","collections/collection","models/location","proxies/geocoded_location_proxy","parsers/geocoded_location_parser"],function(e,t,n,r,i,s){return n=n.extend({model:r,initialize:function(e,n){n=n||(n={}),this.location=n.location,this.traffic=n.traffic,this.proxy=new i({},{collection:this}),t.extend(this.model,s)},hasExactMatch:function(){return this.isEmpty()?!1:this.hasOnlyOne()?!0:this.at(0).isExactMatch()},hasOnlyOne:function(){return this.length===1},getExactMatch:function(){return this.hasExactMatch()?this.at(0):null}}),n}),define("text!views/trip_items/prompts/did_you_mean/did_you_mean.tmpl",[],function(){return'<div class="trip-items standard-form-panel error-popup">\n		<div class="error-title-group">\n		<div class="general-icon icon_alert_25px"></div>\n		<div class="message"><p>{{t "DidYouMean"}}</p></div>\n	</div>\n\n	<div class="selection-group">\n		<ul>\n		{{#each_with_index locations}}\n			<li class="display-box">\n				<div class="flex-8">\n					<p class="item-title">{{street}}</p>\n					<p class="item-title">{{display_address_for city city=city county=county state=state postal_code=postal_code}}</p>\n				</div>\n				<input class="selectable flex-2  button continue" data-index="{{index}}" type="button" value="{{t "Select"}}" />\n			</li>\n		{{/each_with_index}}\n		</ul>\n	</div>\n\n	<div class="actions">\n		<button id="cancel" class="submit"><span>{{t "Cancel"}}</span></button>\n	</div>\n</div>\n<div class="full-screen-underlay"></div>\n'}),define("views/trip_items/prompts/did_you_mean/did_you_mean_view",["jquery","backbone","mediator","handlebars","text!./did_you_mean.tmpl"],function(e,t,n,r,i){var s=t.View.extend({render:function(){return this.renderPopup(),this.$el.show(),this},renderPopup:function(){this.$el.html(r.compile(i)({locations:(new t.Collection(this.collection.first(4))).toJSON()})),this.reappendToDom()},reappendToDom:function(){e(".content").append(this.$el),this.delegateEvents()},events:{"vclick #cancel":"onCancel","vclick .selectable":"onSelect"},onCancel:function(e){e.preventDefault(),this.$el.hide(),n.publish("pick_location_workflow:back")},onSelect:function(t){t.preventDefault(),this.$el.remove(),n.publish("search_for_location:complete",{location:this.collection.at(e(t.currentTarget).data("index")-1)})}});return s}),define("views/trip_items/search_for_location_view",["jquery","underscore","backbone","mediator","collections/geocoded_location_list","views/trip_items/prompts/did_you_mean/did_you_mean_view"],function(e,t,n,r,i,s){var o=n.View.extend({events:{"submit form":"submit","vclick #country":"onClickCountry"},initialize:function(t){this.isManualAdd=t.isManualAdd,this.geocodedLocationList=new i(null,{location:this.model}),this.geocodedLocationList.proxy._includesTraffic=e.noop},template:"trip_items/add/search_for_location",submit:function(e){e.preventDefault(),this.model.set(this.$("form").serializeObject());if(!this.model.has("error")){var t=this;this.geocodedLocationList.fetch({success:function(e){t.model.has("error")?r.publish("error:trigger","form_validation",t.model.get("error")):t.geocodedLocationList.hasExactMatch()?r.publish("search_for_location:complete",{location:t.geocodedLocationList.first()}):(new s({collection:t.geocodedLocationList})).render()}})}else r.publish("error:trigger","form_validation",this.model.get("error")),this.model.set(this.$("form").serializeObject(),{silent:!0})},onClickCountry:function(e){e.preventDefault(),this.model.set(this.$("form").serializeObject()),r.publish("search_for_location:pick_country")},render:function(e){return e(this).render()},serialize:function(){var e=this.model.toJSON();return t.extend(e,{is_manual_add:this.isManualAdd}),e}});return o}),define("modules/country_select/country_select_view",["jquery","mediator","backbone"],function(e,t,n){var r=n.Model.extend({}),i=n.Collection.extend({url:function(){return"/mapi/data/countries.json?search="+encodeURIComponent(this.query)},toJSON:function(e){return this.synced?this.map(function(t){return t.toJSON(e)}):{unsynced:!0}},synced:!1}),s=n.View.extend({className:"country-results",tagName:"ul",initialize:function(){this.collection.on("reset",function(){this.render()},this)},template:"components/country_select/country_select_list",events:{"click .country":"select"},select:function(n){n.preventDefault(),t.publish("search_for_location:select_country",this.collection.at(e(n.currentTarget).data("index")-1).toJSON())},serialize:function(){return{items:this.collection.toJSON()}}}),o=n.View.extend({className:"search",initialize:function(){},events:{"submit form":"_submit","vclick .search-submit":"_submit"},template:"components/country_select/country_select",_submit:function(e){e.preventDefault(e);var t=this,n;n=this.$el.find('input[name="search-term"]').val(),this.collection.query=n,this.collection.fetch({success:function(e){},beforeSend:function(){t.collection.synced=!0}})}}),u=n.View.extend({initialize:function(){this.collection=new i,this.inputView=new o({collection:this.collection}),this.resultsView=new s({collection:this.collection})},render:function(e){var t=e(this);return t.insert(this.inputView),t.insert(this.resultsView),t.render()}});return u}),define("workflows/search_for_location_workflow",["jquery","underscore","backbone","machina","mediator","views/trip_items/search_for_location_view","modules/country_select/country_select_view","helpers","models/location","strings"],function(e,t,n,r,i,s,o,u,a,f){var l=new r.Fsm({initialState:"uninitialized",name:"search for location",states:{uninitialized:{initialize:function(e){t.extend(this,e),t.bindAll(this),this.title=e.title||f.SearchForLocation,this.isManualAdd=e.isManualAdd,this.setView=this.setView||this.controller.setView,this.locationModel=e.cachedLocationUserInput||new a({countryName:"United States"}),this.transition("showingForm")}},showingForm:{_onEnter:function(){this.controller._updateHeader(this.title,"search_for_location:back"),this.setView(new s({model:this.locationModel,isManualAdd:this.isManualAdd}))},complete:function(e){this.fireEvent("complete",e)},back:function(){this.transition("uninitialized"),this.fireEvent("cancel")},pickCountry:function(){this.transition("pickingCountry")}},pickingCountry:{_onEnter:function(){this.controller._updateHeader(f.SelectCountry,"search_for_location:back"),this.setView(new o)},back:function(){this.transition("showingForm")},selectCountry:function(e){this.locationModel.set("countryName",e.name,{silent:!0}),this.transition("showingForm")}}}});return i.subscribe("search_for_location:back",function(){l.handle("back")}),i.subscribe("search_for_location:pick_country",function(){l.handle("pickCountry")}),i.subscribe("search_for_location:select_country",function(e){l.handle("selectCountry",e)}),i.subscribe("search_for_location:submit",function(e){l.handle("submit",e)}),i.subscribe("search_for_location:complete",function(e){l.handle("complete",e)}),l}),define("workflows/pick_location_workflow",["underscore","machina","backbone","mediator","namespace","views/trip_items/pick_location_view","workflows/search_for_location_workflow","helpers","models/trip_item","strings","trips_manager"],function(e,t,n,r,i,s,o,u,a,f,l){var c=new t.Fsm({initialState:"uninitialized",name:"pick location",states:{uninitialized:{initialize:function(t){t.listHeaderText=t.listHeaderText||f.listHeaderText,t.showOnlyItems=t.showOnlyItems||!1,e.extend(this,t),e.bindAll(this),this.title=t.title||"Select a Location",this.setView=this.setView||this.controller.setView,this.transition("showingForm")}},showingForm:{_onEnter:function(){this.controller._updateHeader(this.title,"pick_location:back"),this.setView(new s({trip:this.trip||l.getCurrentTrip(),locationList:this.locationList,listHeaderText:this.listHeaderText,showOnlyItems:this.showOnlyItems}))},search:function(){this.transition("searchingLocation")},select:function(e){this.transition("uninitialized"),this.fireEvent("complete",e)},back:function(){this.transition("uninitialized"),this.fireEvent("cancel")}},searchingLocation:{_onEnter:function(){var e=this;o.transition("uninitialized"),o.handle("initialize",{title:e.title,cachedLocationUserInput:e.cachedLocationUserInput,setView:e.setView,controller:e.controller})},cancel:function(){this.transition("showingForm")},complete:function(e){this.transition("uninitialized"),this.fireEvent("complete",e)}}}});return o.on("complete",function(e){c.handle("complete",e)}),o.on("cancel",function(e){c.handle("cancel")}),r.subscribe("pick_location:back",function(){c.handle("back")}),r.subscribe("pick_location:save",function(e){c.handle("save",e)}),r.subscribe("pick_location:select",function(e){c.handle("select",e)}),r.subscribe("pick_location:search",function(e){c.handle("search",e)}),c}),define("proxies/hotel_location_list_proxy",["proxies/proxy"],function(e){var t=e.extend({syncConfig:function(){this.url="/mapi/geocodes/search_hotels.json"},_getAttrs:function(){return{location:{lat:this.collection.lat,lng:this.collection.lng,hotel_name:this.collection.hotel_name||""}}},toJSON:function(){return this._getAttrs()}});return t}),define("collections/hotel_location_list",["collections/collection","models/hotel_location","proxies/hotel_location_list_proxy"],function(e,t,n){var r=e.extend({model:t,initialize:function(e,t){this.hotel_name=t.hotel_name,this.lat=t.lat,this.lng=t.lng,this.hasChanged=!1,this.proxy=new n({},{collection:this}),this.synced=!1},setLocation:function(e){this.lat!==e.lat||this.lng!==e.lng?(this.lat=e.lat,this.lng=e.lng,this.hasChanged=!0):this.hasChanged=!1},toJSON:function(e){return this.synced?this.map(function(t){return t.toJSON(e)}):{unsynced:!0}}});return r}),function(e){function t(t,n){function D(){var e=document.body,t=document.documentElement;return Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight)}function P(t){h=e("li.dw-v",t).eq(0).index(),p=e("li.dw-v",t).eq(-1).index(),c=v.height,d=r}function H(e){var t=v.headerText;return t?typeof t=="function"?t.call(i,e):t.replace(/{value}/i,e):""}function B(){r.temp=A&&r.val!==null&&r.val!=t.val()||r.values===null?v.parseValue(t.val()?t.val():"",r):r.values.slice(0),r.setValue(!0)}function j(t,n,s,o,u){v.validate.call(i,S,s),e(".dww ul",S).each(function(i){var o=e(this),a=e('li[data-val="'+r.temp[i]+'"]',o),f=a.index(),l=F(a,f,i,u),c=i==s||s===undefined;(f!=l||c)&&r.scroll(e(this),l,c?t:.2,n,i)}),r.change(o)}function F(e,t,n,i){if(!e.hasClass("dw-v")){var s=e,o=e,u=0,a=0;while(s.prev().length&&!s.hasClass("dw-v"))s=s.prev(),u++;while(o.next().length&&!o.hasClass("dw-v"))o=o.next(),a++;(a<u&&a&&!i==1||!u||!s.hasClass("dw-v")||i==1)&&o.hasClass("dw-v")?(e=o,t+=a):(e=s,t-=u),r.temp[n]=e.attr("data-val")}return t}function I(){var t=0,n=0,r=e(window).width(),i=e(window).height(),s=e(window).scrollTop(),o=e(".dwo",S),u=e(".dw",S),a,f;e(".dwc",S).each(function(){a=e(this).outerWidth(!0),t+=a,n=a>n?a:n}),a=t>r?n:t,u.width(a),a=u.outerWidth(),f=u.outerHeight(),u.css({left:(r-a)/2,top:s+(i-f)/2}),o.height(0).height(D())}function q(e){var t=+e.data("pos"),n=t+1;u(e,n>p?h:n,1)}function R(e){var t=+e.data("pos"),n=t-1;u(e,n<h?p:n,2)}var r=this,i=t,t=e(i),a,v=e.extend({},M),m,S,T={},k={},A=t.is("input"),O=!1;r.enable=function(){v.disabled=!1,A&&t.prop("disabled",!1)},r.disable=function(){v.disabled=!0,A&&t.prop("disabled",!0)},r.scroll=function(e,t,n,r,i){function o(e,t,n,r){return n*Math.sin(e/r*(Math.PI/2))+t}var s=(m-t)*v.height;e.attr("style",(n?C+"-transition:all "+n.toFixed(1)+"s ease-out;":"")+(N?C+"-transform:translate3d(0,"+s+"px,0);":"top:"+s+"px;"));if(n&&r!==undefined){var u=0;clearInterval(T[i]),T[i]=setInterval(function(){u+=.1,e.data("pos",Math.round(o(u,r,t-r,n))),u>=n&&(clearInterval(T[i]),e.data("pos",t))},100),clearTimeout(k[i]),k[i]=setTimeout(function(){v.mode=="mixed"&&!e.hasClass("dwa")&&e.closest(".dwwl").find(".dwwb").fadeIn("fast")},n*1e3)}else e.data("pos",t)},r.setValue=function(e,n,i){var s=v.formatResult(r.temp);r.val=s,r.values=r.temp.slice(0),O&&e&&j(i),n&&A&&t.val(s).trigger("change")},r.validate=function(e,t,n,r){j(e,t,n,!0,r)},r.change=function(t){var n=v.formatResult(r.temp);v.display=="inline"?r.setValue(!1,t):e(".dwv",S).html(H(n)),t&&v.onChange.call(i,n,r)},r.hide=function(){if(v.onClose.call(i,r.val,r)===!1)return!1;e(".dwtd").prop("disabled",!1).removeClass("dwtd"),t.blur(),S&&S.remove(),O=!1,e(window).unbind(".dw")},r.show=function(){if(v.disabled||O)return!1;var n=v.height,o=v.rows*n;B();var l='<div class="'+v.theme+'">'+(v.display=="inline"?'<div class="dw dwbg dwi"><div class="dwwr">':'<div class="dwo"></div><div class="dw dwbg"><div class="dwwr">'+(v.headerText?'<div class="dwv"></div>':""));for(var c=0;c<v.wheels.length;c++){l+='<div class="dwc'+(v.mode!="scroller"?" dwpm":" dwsc")+(v.showLabel?"":" dwhl")+'"><div class="dwwc dwrc"><table cellpadding="0" cellspacing="0"><tr>';for(var h in v.wheels[c]){l+='<td><div class="dwwl dwrc">'+(v.mode!="scroller"?'<div class="dwwb dwwbp" style="height:'+n+"px;line-height:"+n+'px;"><span>+</span></div><div class="dwwb dwwbm" style="height:'+n+"px;line-height:"+n+'px;"><span>&ndash;</span></div>':"")+'<div class="dwl">'+h+'</div><div class="dww dwrc" style="height:'+o+"px;min-width:"+v.width+'px;"><ul>';for(var p in v.wheels[c][h])l+='<li class="dw-v" data-val="'+p+'" style="height:'+n+"px;line-height:"+n+'px;">'+v.wheels[c][h][p]+"</li>";l+='</ul><div class="dwwo"></div></div><div class="dwwol"></div></div></td>'}l+="</tr></table></div></div>"}l+=(v.display!="inline"?'<div class="dwbc"><span class="dwbw dwb-s"><a href="#" class="dwb">'+v.setText+'</a></span><span class="dwbw dwb-c"><a href="#" class="dwb">'+v.cancelText+"</a></span></div>":'<div class="dwcc"></div>')+"</div></div></div>",S=e(l),j(),v.display!="inline"?S.appendTo("body"):t.is("div")?t.html(S):S.insertAfter(t),O=!0,a.init(S,r),v.display!="inline"&&(e(".dwb-s a",S).click(function(){return r.setValue(!1,!0),r.hide(),v.onSelect.call(i,r.val,r),!1}),e(".dwb-c a",S).click(function(){return r.hide(),v.onCancel.call(i,r.val,r),!1}),e("input,select").each(function(){e(this).prop("disabled")||e(this).addClass("dwtd")}),e("input,select").prop("disabled",!0),I(),e(window).bind("resize.dw",I)),S.delegate(".dwwl","DOMMouseScroll mousewheel",function(t){if(!v.readonly){t.preventDefault(),t=t.originalEvent;var n=t.wheelDelta?t.wheelDelta/120:t.detail?-t.detail/3:0,r=e("ul",this),i=+r.data("pos"),s=Math.round(i-n);P(r),u(r,s,n<0?1:2)}}).delegate(".dwb, .dwwb",L,function(t){e(this).addClass("dwb-a")}).delegate(".dwwb",L,function(t){if(!v.readonly){t.preventDefault(),t.stopPropagation();var n=e(this).closest(".dwwl").find("ul"),r=e(this).hasClass("dwwbp")?q:R;P(n),clearInterval(f),f=setInterval(function(){r(n)},v.delay),r(n)}}).delegate(".dwwl",L,function(t){!g&&v.mode!="clickpick"&&!v.readonly&&(t.preventDefault(),g=!0,y=e("ul",this).addClass("dwa"),v.mode=="mixed"&&e(".dwwb",this).fadeOut("fast"),x=+y.data("pos"),P(y),b=s(t),E=new Date,w=b,r.scroll(y,x))}),v.onShow.call(i,S,r)},r.init=function(s){a=e.extend({defaults:{},init:l},e.scroller.themes[s.theme?s.theme:v.theme]),e.extend(v,a.defaults,n,s),r.settings=v,m=Math.floor(v.rows/2);var u=e.scroller.presets[v.preset];t.unbind(".dw");if(u){var f=u.call(i,r);e.extend(v,f,n,s),e.extend(_,f.methods)}t.data("dwro")!==undefined&&(i.readOnly=o(t.data("dwro"))),O&&r.hide(),v.display=="inline"?r.show():(B(),A&&v.showOnFocus&&(t.data("dwro",i.readOnly),i.readOnly=!0,t.bind("focus.dw",r.show)))},r.values=null,r.val=null,r.temp=null,r.init(n)}function n(e){for(var t in e)if(T[e[t]]!==undefined)return!0;return!1}function r(){var e=["Webkit","Moz","O","ms"];for(var t in e)if(n([e[t]+"Transform"]))return"-"+e[t].toLowerCase();return""}function i(e){return a[e.id]}function s(e){return k?e.originalEvent?e.originalEvent.changedTouches[0].pageY:e.changedTouches[0].pageY:e.pageY}function o(e){return e===!0||e=="true"}function u(t,n,r,i,s){var o=t.closest(".dwwr").find("ul").index(t);n=n>p?p:n,n=n<h?h:n;var u=e("li",t).eq(n);d.temp[o]=u.attr("data-val"),d.validate(i?n==s?.1:Math.abs((n-s)*.1):0,s,o,r)}var a={},f,l=function(){},c,h,p,d,v=new Date,m=v.getTime(),g=!1,y=null,b,w,E,S,x,T=document.createElement("modernizr").style,N=n(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"])&&"webkitPerspective"in document.documentElement.style,C=r(),k="ontouchstart"in window,L=k?"touchstart":"mousedown",A=k?"touchmove":"mousemove",O=k?"touchend":"mouseup",M={width:70,height:40,rows:3,delay:300,disabled:!1,readonly:!1,showOnFocus:!0,showLabel:!0,wheels:[],theme:"",headerText:"{value}",display:"modal",mode:"scroller",preset:"",setText:"Set",cancelText:"Cancel",onShow:l,onClose:l,onSelect:l,onCancel:l,onChange:l,formatResult:function(e){var t="";for(var n=0;n<e.length;n++)t+=(n>0?" ":"")+e[n];return t},parseValue:function(e,t){var n=t.settings.wheels,e=e.split(" "),r=[],i=0;for(var s=0;s<n.length;s++)for(var o in n[s]){if(n[s][o][e[i]]!==undefined)r.push(e[i]);else for(var u in n[s][o]){r.push(u);break}i++}return r},validate:l},_={init:function(e){return e===undefined&&(e={}),this.each(function(){this.id||(m+=1,this.id="scoller"+m),a[this.id]=new t(this,e)})},enable:function(){return this.each(function(){var e=i(this);e&&e.enable()})},disable:function(){return this.each(function(){var e=i(this);e&&e.disable()})},isDisabled:function(){var e=i(this[0]);if(e)return e.settings.disabled},option:function(e,t){return this.each(function(){var n=i(this);if(n){var r={};typeof e=="object"?r=e:r[e]=t,n.init(r)}})},setValue:function(e,t,n){return this.each(function(){var r=i(this);r&&(r.temp=e,r.setValue(!0,t,n))})},getInst:function(){return i(this[0])},getValue:function(){var e=i(this[0]);if(e)return e.values},show:function(){var e=i(this[0]);if(e)return e.show()},hide:function(){return this.each(function(){var e=i(this);e&&e.hide()})},destroy:function(){return this.each(function(){var t=i(this);t&&(t.hide(),e(this).unbind(".dw"),delete a[this.id],e(this).is("input")&&(this.readOnly=o(e(this).data("dwro"))))})}};e(document).bind(A,function(e){if(g){e.preventDefault(),w=s(e);var t=x+(b-w)/c;t=t>p+1?p+1:t,t=t<h-1?h-1:t,d.scroll(y,t)}}),e(document).bind(O,function(t){if(g){t.preventDefault(),y.removeClass("dwa");var n=new Date-E,r=x+(b-w)/c;r=r>p+1?p+1:r,r=r<h-1?h-1:r;if(n<300){var i=(w-b)/n,s=i*i/.0012;w-b<0&&(s=-s)}else var s=w-b;u(y,Math.round(x-s/c),0,!0,Math.round(r)),g=!1,y=null}clearInterval(f),e(".dwb-a").removeClass("dwb-a")}),e.fn.scroller=function(t){if(_[t])return _[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t=="object"||!t)return _.init.apply(this,arguments);e.error("Unknown method")},e.scroller={setDefaults:function(t){e.extend(M,t)},presets:{},themes:{}}}(jQuery),define("mobiscroll.core",["jquery"],function(){}),function(e){var t=new Date,n={dateFormat:"mm/dd/yy",dateOrder:"mmddy",timeWheels:"hhiiA",timeFormat:"hh:ii A",startYear:t.getFullYear()-100,endYear:t.getFullYear()+1,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortYearCutoff:"+10",monthText:"Month",dayText:"Day",yearText:"Year",hourText:"Hours",minuteText:"Minutes",secText:"Seconds",ampmText:"&nbsp;",stepHour:1,stepMinute:1,stepSecond:1,separator:" "},r=function(t){function D(e,t,n){return h[t]!==undefined?+e[h[t]]:n!==undefined?n:E[p[t]]?E[p[t]]():p[t](E)}function P(e,t){return Math.floor(e/t)*t}function H(e){var t=e.getHours();return t=b&&t>=12?t-12:t,P(t,S)}function B(e){return P(e.getMinutes(),x)}function j(e){return P(e.getSeconds(),T)}function F(e){return y&&e.getHours()>11?1:0}function I(e){var t=D(e,"h",0);return new Date(D(e,"y"),D(e,"m"),D(e,"d"),D(e,"ap")?t+12:t,D(e,"i",0),D(e,"s",0))}var r=e(this),i={},s;if(r.is("input")){switch(r.attr("type")){case"date":s="yy-mm-dd";break;case"datetime":s="yy-mm-ddTHH:ii:ssZ";break;case"datetime-local":s="yy-mm-ddTHH:ii:ss";break;case"month":s="yy-mm",i.dateOrder="mmyy";break;case"time":s="HH:ii:ss"}var o=r.attr("min"),u=r.attr("max");o&&(i.minDate=e.scroller.parseDate(s,o)),u&&(i.maxDate=e.scroller.parseDate(s,u))}var a=e.extend({},n,i,t.settings),f=0,l=[],c=[],h={},p={y:"getFullYear",m:"getMonth",d:"getDate",h:H,i:B,s:j,ap:F},d=a.preset,v=a.dateOrder,m=a.timeWheels,g=v.match(/D/),y=m.match(/a/i),b=m.match(/h/),w=d=="datetime"?a.dateFormat+a.separator+a.timeFormat:d=="time"?a.timeFormat:a.dateFormat,E=new Date,S=a.stepHour,x=a.stepMinute,T=a.stepSecond,N=a.minDate,C=a.maxDate;s=s?s:w;if(d.match(/date/i)){e.each(["y","m","d"],function(e,t){var e=v.search(new RegExp(t,"i"));e>-1&&c.push({o:e,v:t})}),c.sort(function(e,t){return e.o>t.o?1:-1}),e.each(c,function(e,t){h[t.v]=e});var k={};for(var L=0;L<3;L++)if(L==h.y){f++,k[a.yearText]={};var A=N?N.getFullYear():a.startYear,O=C?C.getFullYear():a.endYear;for(var M=A;M<=O;M++)k[a.yearText][M]=v.match(/yy/i)?M:(M+"").substr(2,2)}else if(L==h.m){f++,k[a.monthText]={};for(var M=0;M<12;M++)k[a.monthText][M]=v.match(/MM/)?a.monthNames[M]:v.match(/M/)?a.monthNamesShort[M]:v.match(/mm/)&&M<9?"0"+(M+1):M+1}else if(L==h.d){f++,k[a.dayText]={};for(var M=1;M<32;M++)k[a.dayText][M]=v.match(/dd/i)&&M<10?"0"+M:M}l.push(k)}if(d.match(/time/i)){c=[],e.each(["h","i","s"],function(e,t){var e=m.search(new RegExp(t,"i"));e>-1&&c.push({o:e,v:t})}),c.sort(function(e,t){return e.o>t.o?1:-1}),e.each(c,function(e,t){h[t.v]=e});var k={};for(var L=0;L<3;L++)if(L==h.h){h.h=f++,k[a.hourText]={};for(var M=0;M<(b?12:24);M+=S)k[a.hourText][M]=b&&M==0?12:m.match(/hh/i)&&M<10?"0"+M:M}else if(L==h.i){h.i=f++,k[a.minuteText]={};for(var M=0;M<60;M+=x)k[a.minuteText][M]=m.match(/ii/)&&M<10?"0"+M:M}else if(L==h.s){h.s=f++,k[a.secText]={};for(var M=0;M<60;M+=T)k[a.secText][M]=m.match(/ss/)&&M<10?"0"+M:M}if(y){h.ap=f++;var _=m.match(/A/);k[a.ampmText]={0:_?"AM":"am",1:_?"PM":"pm"}}l.push(k)}return t.setDate=function(e,t,n){for(var r in h)this.temp[h[r]]=e[p[r]]?e[p[r]]():p[r](e);this.setValue(!0,t,n)},t.getDate=function(e){return I(e)},{wheels:l,headerText:function(n){return e.scroller.formatDate(w,I(t.temp),a)},formatResult:function(t){return e.scroller.formatDate(s,I(t),a)},parseValue:function(t){var n=new Date,r=[];try{n=e.scroller.parseDate(s,t,a)}catch(i){}for(var o in h)r[h[o]]=n[p[o]]?n[p[o]]():p[o](n);return r},validate:function(n,r){var i=t.temp,s={m:0,d:1,h:0,i:0,s:0,ap:0},o={m:11,d:31,h:P(b?11:23,S),i:P(59,x),s:P(59,T),ap:1},u=N||C?["y","m","d","ap","h","i","s"]:r==h.y||r==h.m||r===undefined?["d"]:[],f=!0,l=!0;e.each(u,function(t,r){if(h[r]!==undefined){var u=s[r],c=o[r],d=31,m=D(i,r),y=e("ul",n).eq(h[r]),b,w;r=="d"&&(b=D(i,"y"),w=D(i,"m"),d=32-(new Date(b,w,32)).getDate(),c=d,g&&e("li",y).each(function(){var t=e(this),n=t.data("val"),r=(new Date(b,w,n)).getDay();t.html(v.replace(/[my]/gi,"").replace(/dd/,n<10?"0"+n:n).replace(/d/,n).replace(/DD/,a.dayNames[r]).replace(/D/,a.dayNamesShort[r]))})),f&&N&&(u=N[p[r]]?N[p[r]]():p[r](N)),l&&C&&(c=C[p[r]]?C[p[r]]():p[r](C));if(r!="y"){var E=e('li[data-val="'+u+'"]',y).index(),S=e('li[data-val="'+c+'"]',y).index();e("li",y).removeClass("dw-v").slice(E,S+1).addClass("dw-v"),r=="d"&&e("li",y).removeClass("dw-h").slice(d).addClass("dw-h"),m<u&&(m=u),m>c&&(m=c)}f&&(f=m==u),l&&(l=m==c);if(a.invalid&&r=="d"){var x=[];a.invalid.dates&&e.each(a.invalid.dates,function(e,t){t.getFullYear()==b&&t.getMonth()==w&&x.push(t.getDate()-1)});if(a.invalid.daysOfWeek){var T=(new Date(b,w,1)).getDay();e.each(a.invalid.daysOfWeek,function(e,t){for(var n=t-T;n<d;n+=7)n>=0&&x.push(n)})}a.invalid.daysOfMonth&&e.each(a.invalid.daysOfMonth,function(e,t){t=(t+"").split("/"),t[1]?t[0]-1==w&&x.push(t[1]-1):x.push(t[0]-1)}),e.each(x,function(t,n){e("li",y).eq(n).removeClass("dw-v")})}}})},methods:{getDate:function(t){var n=e(this).scroller("getInst");if(n)return n.getDate(t?n.temp:n.values)},setDate:function(t,n,r){return n==undefined&&(n=!1),this.each(function(){var i=e(this).scroller("getInst");i&&i.setDate(t,n,r)})}}}};e.scroller.presets.date=r,e.scroller.presets.datetime=r,e.scroller.presets.time=r,e.scroller.formatDate=function(t,r,i){if(!r)return null;var s=e.extend({},n,i),o=function(e){var n=0;while(c+1<t.length&&t.charAt(c+1)==e)n++,c++;return n},u=function(e,t,n){var r=""+t;if(o(e))while(r.length<n)r="0"+r;return r},a=function(e,t,n,r){return o(e)?r[t]:n[t]},f="",l=!1;for(var c=0;c<t.length;c++)if(l)t.charAt(c)=="'"&&!o("'")?l=!1:f+=t.charAt(c);else switch(t.charAt(c)){case"d":f+=u("d",r.getDate(),2);break;case"D":f+=a("D",r.getDay(),s.dayNamesShort,s.dayNames);break;case"o":f+=u("o",(r.getTime()-(new Date(r.getFullYear(),0,0)).getTime())/864e5,3);break;case"m":f+=u("m",r.getMonth()+1,2);break;case"M":f+=a("M",r.getMonth(),s.monthNamesShort,s.monthNames);break;case"y":f+=o("y")?r.getFullYear():(r.getYear()%100<10?"0":"")+r.getYear()%100;break;case"h":var h=r.getHours();f+=u("h",h>12?h-12:h==0?12:h,2);break;case"H":f+=u("H",r.getHours(),2);break;case"i":f+=u("i",r.getMinutes(),2);break;case"s":f+=u("s",r.getSeconds(),2);break;case"a":f+=r.getHours()>11?"pm":"am";break;case"A":f+=r.getHours()>11?"PM":"AM";break;case"'":o("'")?f+="'":l=!0;break;default:f+=t.charAt(c)}return f},e.scroller.parseDate=function(t,r,i){var s=new Date;if(!t||!r)return s;r=typeof r=="object"?r.toString():r+"";var o=e.extend({},n,i),u=s.getFullYear(),a=s.getMonth()+1,f=s.getDate(),l=-1,c=s.getHours(),h=s.getMinutes(),p=0,d=-1,v=!1,m=function(e){var n=E+1<t.length&&t.charAt(E+1)==e;return n&&E++,n},g=function(e){m(e);var t=e=="@"?14:e=="!"?20:e=="y"?4:e=="o"?3:2,n=new RegExp("^\\d{1,"+t+"}"),i=r.substr(w).match(n);return i?(w+=i[0].length,parseInt(i[0],10)):0},y=function(e,t,n){var i=m(e)?n:t;for(var s=0;s<i.length;s++)if(r.substr(w,i[s].length).toLowerCase()==i[s].toLowerCase())return w+=i[s].length,s+1;return 0},b=function(){w++},w=0;for(var E=0;E<t.length;E++)if(v)t.charAt(E)=="'"&&!m("'")?v=!1:b();else switch(t.charAt(E)){case"d":f=g("d");break;case"D":y("D",o.dayNamesShort,o.dayNames);break;case"o":l=g("o");break;case"m":a=g("m");break;case"M":a=y("M",o.monthNamesShort,o.monthNames);break;case"y":u=g("y");break;case"H":c=g("H");break;case"h":c=g("h");break;case"i":h=g("i");break;case"s":p=g("s");break;case"a":d=y("a",["am","pm"],["am","pm"])-1;break;case"A":d=y("A",["am","pm"],["am","pm"])-1;break;case"'":m("'")?b():v=!0;break;default:b()}u<100&&(u+=(new Date).getFullYear()-(new Date).getFullYear()%100+(u<=o.shortYearCutoff?0:-100));if(l>-1){a=1,f=l;do{var S=32-(new Date(u,a-1,32)).getDate();if(f<=S)break;a++,f-=S}while(!0)}c=d==-1?c:d&&c<12?c+12:!d&&c==12?0:c;var x=new Date(u,a-1,f,c,h,p);if(x.getFullYear()!=u||x.getMonth()+1!=a||x.getDate()!=f)throw"Invalid date";return x}}(jQuery),define("mobiscroll.datetime",["mobiscroll.core"],function(){}),define("views/hotels/add/add_hotel_view",["namespace","jquery","underscore","backbone","mediator","kalendae","moment","strings","mobiscroll.datetime","views/trip_items/add_trip_item_view"],function(e,t,n,r,i,s,o,u,a,f){var l=f.extend({template:"trip_items/hotel/add_hotel",events:{"vclick #for-business-help":"onHelpForBusiness","submit form":"submit","vclick .location":"selectLocation","click input#start_date":"onClickCheckinDate","click input#end_date":"onClickCheckoutDate","click #start_time":"selectCheckInTime","click #end_time":"selectCheckOutTime"},checkinKal:null,checkoutKal:null,initialize:function(e){this.helpInfoBackMessage=e.helpInfoBackMessage},cancel:function(){i.publish("add:cancel")},selectLocation:function(e){e.preventDefault(),i.publish("add_hotel_workflow:select_location"),i.publish("edit_hotel_workflow:select_location")},serialize:function(){var t=this.model.toJSON(),n=this.model.get("corporation"),r=e.session.user.get("corporation");return t.showForBusinessField=n||r,t.itemCorporation=n,t.userCorporation=r,this.model.isNew()||(t.isBeingEdited=!0),this.model.isManualAdd&&(t.isManualAdd=!0),t},onClickCheckinDate:function(){var e=this,n="datepicker-checkin",r="#"+n,i="#create-trip-form",a=o(t("#start_date").val());if(!t(r).length){var f=function(){t(r).hide().appendTo(i)},l=t('<div class="dwo">').height(document.height).click(f),c=this.renderDpContainer(i,n,r);this.startKal=new s(n,{months:1,direction:"today-future",format:"ddd, MMM D, YYYY",dayOutOfMonthClickable:!0,subscribe:{change:function(){var n=this.getSelected();t("#start_date").val(n);var s=o(n),a=o(t("#end_date").val());if(s.diff(a,"days")>0){var f=s.add("days",1);t("#end_date").val(f.format(u.DateMediumLongDate)),e.checkoutKal&&e.checkoutKal.setSelected(f)}e.removeDatepicker(i,r)}}}),window.addEventListener("orientationchange",function(){e._positionDatepicker(r)})}return this.startKal.viewStartDate=a,this.startKal.setSelected(a),t(r).appendTo("body").show(),this._positionDatepicker(r),!1},onClickCheckoutDate:function(){var e=this,n="datepicker-checkout",r="#"+n,i="#create-trip-form",u=o(t("#end_date").val());if(!t(r).length){var a=function(){t(r).hide().appendTo(i)},f=t('<div class="dwo">').height(document.height).click(a),l=this.renderDpContainer(i,n,r);this.checkoutKal=new s(n,{months:1,direction:"today-future",format:"ddd, MMM D, YYYY",dayOutOfMonthClickable:!0,subscribe:{change:function(){t("#end_date").val(this.getSelected()),e.removeDatepicker(i,r)}},blackout:function(e){var n=o(t("#start_date").val()).startOf("day"),r=e.startOf("day"),i=r.diff(n,"days"),s=i<0;return s}}),window.addEventListener("orientationchange",function(){e._positionDatepicker(r)})}return this.checkoutKal.viewStartDate=u,this.checkoutKal.setSelected(u),t(r).appendTo("body").show(),this._positionDatepicker(r),!1},selectCheckInTime:function(e){var r=this,i=n.clone(this._timepickerDefaults);i.onShow=function(){t(".dwo").bind("click.timepicker",function(e){r.$timepicker.scroller("hide")})},this.$timepicker=t("#start_time").scroller(i),this.$timepicker.scroller("show")},selectCheckOutTime:function(){var e=this,r=n.clone(this._timepickerDefaults);r.onShow=function(){t(".dwo").bind("click.timepicker",function(t){e.$timepicker.scroller("hide")})},this.$timepicker=t("#end_time").scroller(r),this.$timepicker.scroller("show")},submit:function(e){e.preventDefault(),this.$el.find("input").blur();var t=this.getFormData();i.publish("add_hotel_workflow:save",t),i.publish("edit_hotel_workflow:save",t)},getFormData:function(){return t(this.$el.find("form")).serializeObject()},_positionDatepicker:function(e){var n=t(e+" > .kalendae"),r=n.height()<window.innerHeight?window.innerHeight/2-n.height()/2:10,i=window.innerWidth/2-n.width()/2;n.css({top:window.scrollY+r,left:i})},_timepickerDefaults:{preset:"time",display:"modal",mode:"scroller",showLabel:!1,parseValue:function(e){var t=o(e,"h:mma");return[t.format("h")==="12"?"0":t.format("h"),t.format("m"),t.format("a")==="am"?0:1]},formatResult:function(e){return(e[0]==="0"?12:e[0])+":"+o(e[1].toString(),"m").format("mm")+(e[2]<1?"am":"pm")},onClose:function(){t(".dwo").off("click.timepicker")}},cleanup:function(){var e="#create-trip-form";t("#datepicker-checkin").hide().appendTo(e),t("#datepicker-checkout").hide().appendTo(e),this.$timepicker&&this.$timepicker.scroller("hide")},onHelpForBusiness:function(e){e.preventDefault(),i.publish("info_page:show_for_business",this.helpInfoBackMessage)}});return l}),define("views/hotels/add/hotel_list_view",["jquery","backbone","mediator"],function(e,t,n){var r=t.View.extend({className:"search",initialize:function(){},events:{"submit form":"_submit","vclick .search-submit":"_submit"},template:"trip_items/hotel/hotel_search",_submit:function(e){e.preventDefault(e);var t=this,n;n=this.$el.find('input[name="search-term"]').val(),this.collection.hotel_name=n,this.collection.fetch({success:function(e){},beforeSend:function(){t.collection.synced=!0}})}}),i=t.View.extend({initialize:function(){this.collection.on("reset",function(){this.collection.synced=!0,this.render()},this)},template:"trip_items/hotel/hotel_locations_index",events:{"vclick .actionable":"onSelect"},onSelect:function(t){t.preventDefault();if(e(t.currentTarget).hasClass("nudgeable"))return this.onNudge();n.publish("add_hotel_workflow:save",e(t.currentTarget).data("property_id")),n.publish("edit_hotel_workflow:save",e(t.currentTarget).data("property_id"))},onNudge:function(){n.publish("add_hotel_workflow:nudge")},serialize:function(){return{locations:this.collection.toJSON()}}}),s=t.View.extend({initialize:function(){this.inputView=new r({collection:this.collection}),this.resultsView=new i({collection:this.collection})},render:function(e){var t=e(this);return t.insert(this.inputView),t.insert(this.resultsView),t.render()}});return s}),define("workflows/add_hotel_workflow",["namespace","underscore","machina","mediator","helpers","workflows/pick_location_workflow","workflows/search_for_location_workflow","collections/hotel_location_list","views/hotels/add/add_hotel_view","views/hotels/add/hotel_list_view","models/generic_trip_item","models/location","trips_manager","analytics","strings"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){var v=i.dateHelpers,m=new n.Fsm({initialState:"uninitialized",title:"Add Hotel",backAction:"add_hotel_workflow:back",_userInputStore:function(){var e=this.addHotelView.getFormData();return this.validateAndSaveHotelTripItem(e,{silent:!0})},saveHotelTripItem:function(){var e=this;if(!this.hotel.isManualAdd)this.hotel.save(null,{success:function(t,n){e.transition("complete")},error:function(){console.log("error",arguments)},silent:!0});else{var t=new l(this.hotel.attributes,{trip:this.hotel.trip,start_location:this.hotel.startLocation,type:"lodging"});t.save(null,{success:function(t,n){e.transition("complete")},silent:!0})}},validateAndSaveHotelTripItem:function(e,t){t=t||{};var n=this.hotel.set({start_date:v.formattedCombineDateAndTime(e.start_date,e.start_time,"YYYY-MM-DDTHH:mm:ss"),start_time:v.formattedCombineDateAndTime(e.start_date,e.start_time,"YYYY-MM-DDTHH:mm:ss"),end_date:v.formattedCombineDateAndTime(e.end_date,e.end_time,"YYYY-MM-DDTHH:mm:ss"),end_time:v.formattedCombineDateAndTime(e.end_date,e.end_time,"YYYY-MM-DDTHH:mm:ss"),confirmation_number:e.confirmation_number,phone_number:e.phone_number,for_business:!!e.for_business,note:e.note},t)&&!t.silent;n!==!1&&this.saveHotelTripItem()},states:{uninitialized:{initialize:function(t){this.title=d.AddLodging,this.hotel=t.model,this.geocodedLocation={lat:32,lng:-97},this.hotelLocationList=null,this.hotelSelection=null,this.controller=t.controller,this.transition("showingForm"),this.hotel.on("error",function(e,t){r.publish("error:trigger","form_validation",t)},this),p.trackEvent("HotelAdd","Start",e,this.hotel.trip.get("id"))}},showingForm:{_onEnter:function(){this.controller._updateHeader(d.AddLodging,"add_hotel_workflow:back"),this.view=new a({helpInfoBackMessage:"add_hotel_workflow:back_info_add"}),this.addHotelView=this.view,this.addHotelView.model=this.hotel,this.controller._layout=e.getLayout("simple"),this.controller.setView(this.view),window.el=this.hotel},selectLocation:function(){this.transition("selectingLocation")},save:function(t){this.validateAndSaveHotelTripItem(t),p.trackEvent("HotelAdd","Complete",e,this.hotel.trip.get("id"))},back:function(){this.transition("uninitialized"),s.off("complete"),s.off("cancel"),delete this.cachedLocationUserInput,r.publish("back:history")}},selectingLocation:{_onEnter:function(){this._userInputStore(),this.cachedLocationUserInput=this.cachedLocationUserInput||new c({countryName:h.getCurrentTrip().getDestinationCountry()}),s.handle("initialize",{title:this.title,cachedLocationUserInput:this.cachedLocationUserInput,controller:this.controller})},back:function(){this.controller._updateHeader(this.title,this.backAction),this.transition("showingForm")},cancel:function(){this.transition("showingForm")},complete:function(e){this.cachedLocationUserInput=e.location&&e.location.collection&&e.location.collection.location?e.location.collection.location:this.cachedLocationUserInput,this.geocodedLocation=e.location,this.transition("showingHotelResults")}},showingHotelResults:{_onEnter:function(){this.hotel.isManualAdd=!1,this.controller._updateHeader(this.title,this.backAction),this.hotelLocationList=this.hotelLocationList||new u,this.hotelLocationList.setLocation({lat:this.geocodedLocation.get("lat"),lng:this.geocodedLocation.get("lng")}),this.hotelLocationList.hotel_name!==undefined&&(delete this.hotelLocationList.hotel_name,this.hotelLocationList.synced=!1),this.view=new f({collection:this.hotelLocationList}),this.controller.setView(this.view),this.hotelLocationList.hasChanged&&this.hotelLocationList.fetch({beforeSend:function(){}})},nudge:function(){this.transition("addingManualLocation")},save:function(e){this.hotelSelection=this.hotelLocationList.get(e),this.hotel.set({address_lines:this.hotelSelection.get("address_lines"),general_location:this.hotelSelection.get("general_location"),name:this.hotelSelection.get("name")},{silent:!0}),this.hotel.startLocation.set(this.hotelSelection.toJSON()),this.transition("showingForm")},back:function(){this.transition("selectingLocation")}},addingManualLocation:{_onEnter:function(){var e=this;this.hotel.isManualAdd=!0,o.transition("uninitialized"),o.handle("initialize",{title:e.title,cachedLocationUserInput:e.cachedLocationUserInput,controller:e.controller,isManualAdd:!0},this)},cancel:function(){this.transition("showingHotelResults")},complete:function(e){this.cachedLocationUserInput=e.location.collection.location||this.cachedLocationUserInput;var n=this.cachedLocationUserInput.get("name"),r=t.extend(e.location.attributes,{name:n});this.hotel.startLocation.set(r),this.hotel.set({address_lines:this.hotel.startLocation.getAddressLines(),general_location:e.location.get("general_location"),name:n},{silent:!0}),this.transition("showingForm")}},complete:{_onEnter:function(){delete this.cachedLocationUserInput,this.fireEvent("complete"),this.transition("uninitialized")}}}});return s.on("cancel",function(){m.handle("cancel")}),s.on("complete",function(e){m.handle("complete",e)}),o.on("cancel",function(){m.state==="addingManualLocation"&&m.handle("cancel")}),o.on("complete",function(e){m.state==="addingManualLocation"&&m.handle("complete",e)}),r.subscribe("add_hotel_workflow:back",function(){m.handle("back")}),r.subscribe("add_hotel_workflow:save",function(e){m.handle("save",e)}),r.subscribe("add_hotel_workflow:select_location",function(e){m.handle("selectLocation",e)}),r.subscribe("add_hotel_workflow:nudge",function(){m.handle("nudge")}),r.subscribe("add_hotel_workflow:back_info_add",function(){m.transition("showingForm")}),m}),define("workflows/edit_hotel_workflow",["backbone","models/hotel_trip_item","views/hotels/add/add_hotel_view","views/trip_items/trip_item_imported_edit_view","analytics","namespace","machina","mediator","workflows/add_hotel_workflow","helpers","strings","underscore","models/generic_trip_item","workflows/pick_location_workflow","workflows/search_for_location_workflow"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){var v=f.dateHelpers,m=new o.Fsm({initialState:"uninitialized",name:"edit hotel",title:l.EditLodging,backAction:"edit_hotel_workflow:back",saveHotelTripItem:function(){a.saveHotelTripItem.call(this)},states:{uninitialized:{initialize:function(e){this.originalModel=e.model,this.hotel=this.originalModel.clone(),this.controller=e.controller,this.setView=this.setView||e.controller.setView,this.transition("showingForm"),this.hotel.on("error",function(e,t){u.publish("error:trigger","form_validation",t)},this),i.trackEvent("HotelEdit","Start",s,this.originalModel.getTripId(),this.originalModel.get("id"))}},showingForm:{_onEnter:function(){this.controller._updateHeader(l.EditLodging,"edit_hotel_workflow:back");if(this.hotel.isImported()){var e=new r({model:this.hotel,helpInfoBackMessage:"edit_hotel_workflow:back_info_edit"});this.setView(e),e.on("save",function(e){this.handle("save",e)},this)}else this.setView(new n({model:this.hotel,helpInfoBackMessage:"edit_hotel_workflow:back_info_edit"}))},save:function(e){this.hotel.isImported()?(this.hotel.set({note:e.note,for_business:!!e.for_business},{silent:!0}),a.saveHotelTripItem.call(this)):a.validateAndSaveHotelTripItem.call(this,e)},back:a.states.showingForm.back},complete:{_onEnter:function(){this.originalModel.set(this.hotel.attributes),this.fireEvent("complete"),this.transition("uninitialized"),i.trackEvent("HotelEdit","Complete",s,this.originalModel.getTripId(),this.originalModel.get("id"))}}}});return u.subscribe("edit_hotel_workflow:back",function(){m.handle("back")}),u.subscribe("edit_hotel_workflow:save",function(e){m.handle("save",e)}),u.subscribe("edit_hotel_workflow:select_location",function(e){m.handle("selectLocation",e)}),u.subscribe("edit_hotel_workflow:nudge",function(){m.handle("nudge")}),u.subscribe("edit_hotel_workflow:back_info_edit",function(){m.transition("showingForm")}),m}),define("controllers/hotels_controller",["underscore","mediator","namespace","controllers/controller","views/trip_items/trip_item_detail_view","models/hotel_trip_item","views/hotels/add/hotel_location_detail_view","models/hotel_location_details","trips_manager","workflows/add_hotel_workflow","workflows/edit_hotel_workflow","helpers"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h=r.extend({initialize:function(){e.bindAll(this),this._layout=n.getLayout("simple"),this.model=null,this._initSubscriptions()},_initSubscriptions:function(){t.subscribe("hotels:add",this.add),t.subscribe("hotels:edit",this.edit),t.subscribe("hotels:show",this.show),t.subscribe("hotels:locationDetails",this.locationDetails)},show:function(e){var t=this;a.getTripItems(e.trip.id,function(n){var r=n.get(e.id);t.setView(new i({model:r}))})},add:function(e){var t=a.getTrips().get(e.tripId);this.model=new s(null,{trip:t}),f.transition("uninitialized"),f.handle("initialize",{model:this.model,controller:this}),this.addParams=e,f.off("complete",this.onAddComplete),f.on("complete",this.onAddComplete,this)},onAddComplete:function(){t.publish("trip_items:index",this.addParams)},edit:function(e){var t=a.getCurrentTrip().getTripItems().get(e.itemId);l.transition("uninitialized"),l.handle("initialize",{model:t,controller:this}),this.editParams=e,l.off("complete",this.onEditComplete),l.on("complete",this.onEditComplete,this)},onEditComplete:function(){t.publish("back:history",this.editParams)},locationDetails:function(e){var t=a.getCurrentTrip().getTripItems().get(e.itemId),n=t.get("star_rating"),r=new o({model:t});this._updateHeader(t.get("name"),"back:history",{subtitle:n?c.createStarRating(n):null}),this.setView(r)}});return h}),define("views/vehicles/add/vehicle_list_view",["jquery","backbone","mediator"],function(e,t,n){var r=t.View.extend({className:"search",events:{"submit form":"_submit","vclick .search-submit":"_submit"},template:"trip_items/vehicle/vehicle_search",_submit:function(e){e.preventDefault(e);var t=this,n;n=this.$el.find('input[name="search-term"]').val(),this.collection.vendor_name=n,this.collection.fetch({success:function(e){},beforeSend:function(){t.collection.synced=!0}})}}),i=t.View.extend({initialize:function(){this.collection.on("reset",function(){this.collection.synced=!0,this.render()},this)},template:"trip_items/vehicle/vehicle_locations_index",events:{"vclick .actionable":"onSelect"},onSelect:function(t){t.preventDefault();var r;if(e(t.currentTarget).hasClass("nudgeable"))return this.onNudge();r=this.collection.at(e(t.currentTarget).data("index")-1),n.publish("add_vehicle_workflow:save",{location:r})},onNudge:function(){n.publish("add_vehicle_workflow:nudge")},serialize:function(){return{locations:this.collection.toJSON()}}}),s=t.View.extend({initialize:function(){this.inputView=new r({collection:this.collection}),this.resultsView=new i({collection:this.collection})},render:function(e){var t=e(this);return t.insert(this.inputView),t.insert(this.resultsView),t.render()}});return s}),define("proxies/vehicle_location_list_proxy",["underscore","proxies/proxy"],function(e,t){var n=t.extend({_getVendorName:function(){return this.collection.vendor_name||""},_getVendorCode:function(){return this.collection.vendor_code||""},syncConfig:function(){this.url="/mapi/geocodes/search_vehicle_locations.json"},_getAttrs:function(){var t={location:{lat:this.collection.lat,lng:this.collection.lng}},n=this._getVendorName(),r=this._getVendorCode();return e.isEmpty(n)||(t.location.vendor_name=n),e.isEmpty(r)||(t.location.vendor_code=r),t},toJSON:function(){return this._getAttrs()}});return n}),define("collections/vehicle_location_list",["jquery","underscore","collections/collection","models/vehicle_location","proxies/vehicle_location_list_proxy"],function(e,t,n,r,i){var s=n.extend({model:r,initialize:function(e,t){t=t||{},this.lat=t.lat,this.lng=t.lng,this.vendor_name=t.vendor_name,this.vendor_code=t.vendor_code,this.proxy=new i({},{collection:this})},setLocation:function(e){this.lat!==e.lat||this.lng!==e.lng?(this.lat=e.lat,this.lng=e.lng,this.hasChanged=!0):this.hasChanged=!1},setVendorCode:function(e){this.vendor_code!==e&&(this.vendor_code=e,this.hasChanged=!0)},clearVendorName:function(){this.vendor_name!==undefined&&delete this.vendor_name}});return s}),define("workflows/add_vehicle_workflow",["namespace","underscore","backbone","machina","mediator","helpers","moment","workflows/pick_location_workflow","workflows/search_for_location_workflow","views/trip_items/add_trip_item_view","views/vehicles/add/vehicle_list_view","collections/vehicle_location_list","models/generic_trip_item","models/location","analytics","strings","trips_manager"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m){var g=s.dateHelpers,y=new r.Fsm({initialState:"uninitialized",title:v.AddCarRental,backAction:"add_trip_item:back",validateAndSaveVehicleTripItem:function(e){var t,n;e.isBothSameChecked===!0&&this.vehicle.endLocation.set(this.vehicle.startLocation.toJSON(),{silent:!0}),this.vehicle.isManualAdd?n=this.vehicle.startLocation.get("name"):n=e.values.name,t=this.vehicle.set({confirmation_number:e.values.confirmation_number,phone_number:e.values.phone_number,end_date:g.formattedCombineDateAndTime(e.values.end_date,e.values.end_time,"YYYY-MM-DDTHH:mm:ss"),end_time:g.formattedCombineDateAndTime(e.values.end_date,e.values.end_time,"YYYY-MM-DDTHH:mm:ss"),name:n,note:e.values.note,for_business:!!e.values.for_business,start_date:g.formattedCombineDateAndTime(e.values.start_date,e.values.start_time,"YYYY-MM-DDTHH:mm:ss"),start_time:g.formattedCombineDateAndTime(e.values.start_date,e.values.start_time,"YYYY-MM-DDTHH:mm:ss")}),t!==!1&&this.saveVehicleTripItem()},saveVehicleTripItem:function(){var e=this;if(!this.vehicle.isManualAdd)this.vehicle.save(null,{success:function(t,n){e.transition("complete")},silent:!0});else{var t=new h(this.vehicle.attributes,{trip:this.vehicle.trip,start_location:this.vehicle.startLocation,end_location:this.vehicle.endLocation,type:"ground_transportation"});t.save(null,{success:function(t,n){e.transition("complete")},silent:!0})}},userInputStore:function(){var e=this.addVehicleView.getFormData(),t=e.values;t.is_both_same_checked=e.isBothSameChecked,t.start_date=g.formattedCombineDateAndTime(t.start_date,t.start_time,"YYYY-MM-DDTHH:mm:ss"),t.start_time=t.start_date,t.end_date=g.formattedCombineDateAndTime(t.end_date,t.end_time,"YYYY-MM-DDTHH:mm:ss"),t.end_time=t.end_date,this.vehicle.set(t,{silent:!0})},states:{uninitialized:{initialize:function(t){this.title=v.AddCarRental,this.vehicle=t.model,this.geocodedLocation={lat:32,lng:-97},this.vehicleLocationList=null,this.controller=t.controller,this.transition("showingForm"),this.vehicle.on("error",function(e,t){i.publish("error:trigger","form_validation",t)},this),d.trackEvent("VehicleAdd","Start",e,this.vehicle.trip.get("id"))}},showingForm:{_onEnter:function(){var t=this;this.controller._updateHeader(this.title,"add_trip_item:back"),this.view=new f({helpInfoBackMessage:"add_vehicle_workflow:back_info_add"}),this.addVehicleView=this.view,this.addVehicleView.model=this.vehicle,this.addVehicleView.on("save",function(e){t.handle("save",e)}),this.addVehicleView.on("clickLocationPicker",function(e){t.handle("selectLocation",e)}),this.controller._layout=e.getLayout("simple"),this.controller.setView(this.view)},selectLocation:function(e){this.locationModel=this.vehicle[e],this.transition("selectingLocation")},save:function(t){this.validateAndSaveVehicleTripItem(t),d.trackEvent("VehicleAdd","Complete",e,this.vehicle.trip.get("id"))},back:function(){this.transition("uninitialized"),u.off("complete"),u.off("cancel"),delete this.cachedLocationUserInput,i.publish("back:history")}},selectingLocation:{_onEnter:function(){this.userInputStore(),this.cachedLocationUserInput=this.cachedLocationUserInput||new p({countryName:m.getCurrentTrip().getDestinationCountry()}),u.handle("initialize",{title:this.title,cachedLocationUserInput:this.cachedLocationUserInput,controller:this.controller})},back:function(){this.controller._updateHeader(this.title,this.backAction),this.transition("showingForm")},cancel:function(){this.transition("showingForm")},complete:function(e){this.cachedLocationUserInput=e.location&&e.location.collection&&e.location.collection.location?e.location.collection.location:this.cachedLocationUserInput,this.geocodedLocation=e.location,this.transition("showingVehicleResults")}},showingVehicleResults:{_onEnter:function(){this.vehicle.isManualAdd=!1,this.controller._updateHeader(this.title,this.backAction),this.vehicleLocationList=this.vehicleLocationList||new c,this.vehicleLocationList.setLocation({lat:this.geocodedLocation.get("lat"),lng:this.geocodedLocation.get("lng")}),this.vehicleLocationList.setVendorCode(this.vehicle.getVendorCode()),this.vehicleLocationList.clearVendorName(),this.view=new l({collection:this.vehicleLocationList}),this.controller.setView(this.view),this.vehicleLocationList.hasChanged&&this.vehicleLocationList.fetch()},nudge:function(){this.transition("addingManualLocation")},save:function(e){this.locationModel.set(e.location.attributes,{silent:!0}),this.transition("showingForm")},back:function(){this.transition("selectingLocation")}},addingManualLocation:{_onEnter:function(){var e=this;this.vehicle.isManualAdd=!0,a.transition("uninitialized"),a.handle("initialize",{title:e.title,controller:e.controller,cachedLocationUserInput:this.cachedLocationUserInput,isManualAdd:!0},this)},cancel:function(){this.transition("showingVehicleResults")},complete:function(e){this.locationModel.set(t.extend(e.location.attributes,{name:e.location.collection.location.get("name")})),this.transition("uninitialized"),i.publish("groundtransportation:add",{original_model:this.vehicle,tripId:this.vehicle.trip.id})}},complete:{_onEnter:function(){delete this.cachedLocationUserInput,this.fireEvent("complete"),this.transition("uninitialized")}}}});return u.on("cancel",function(){y.handle("cancel")}),u.on("complete",function(e){y.handle("complete",e)}),a.on("cancel",function(){y.state==="addingManualLocation"&&y.handle("cancel")}),a.on("complete",function(e){y.state==="addingManualLocation"&&y.handle("complete",e)}),i.subscribe("add_trip_item:back",function(){y.handle("back")}),i.subscribe("add_vehicle_workflow:save",function(e){y.handle("save",e)}),i.subscribe("add_vehicle_workflow:nudge",function(){y.handle("nudge")}),i.subscribe("add_vehicle_workflow:back_info_add",function(){y.transition("showingForm")}),y}),define("workflows/edit_vehicle_workflow",["backbone","models/vehicle_trip_item","views/trip_items/add_trip_item_view","views/trip_items/trip_item_imported_edit_view","analytics","namespace","machina","mediator","workflows/add_vehicle_workflow","helpers","underscore","models/generic_trip_item","workflows/pick_location_workflow","workflows/search_for_location_workflow","strings"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){var v=f.dateHelpers,m=new o.Fsm({initialState:"uninitialized",name:"edit vehicle",title:"Edit Vehicle",backAction:"add_trip_item:back",saveVehicleTripItem:function(){a.saveVehicleTripItem.call(this)},states:{uninitialized:{initialize:function(e){this.originalModel=e.model,this.vehicle=this.originalModel.clone(),this.controller=e.controller,this.setView=this.setView||e.controller.setView,this.transition("showingForm"),i.trackEvent("VehicleEdit","Start",s,this.originalModel.getTripId(),this.originalModel.get("id")),this.vehicle.on("error",function(e,t){u.publish("error:trigger","form_validation",t)},this)}},showingForm:{_onEnter:function(){this.controller._updateHeader(d.EditCarRental,"edit_vehicle_workflow:back");var e;this.vehicle.isImported()?e=new r({model:this.vehicle,helpInfoBackMessage:"edit_vehicle_workflow:back_info_edit"}):e=new n({model:this.vehicle,helpInfoBackMessage:"edit_vehicle_workflow:back_info_edit"}),this.setView(e),e.on("save",function(e){this.handle("save",e)},this)},save:function(e){this.vehicle.isImported()?(this.vehicle.set({note:e.note,for_business:!!e.for_business},{silent:!0}),a.saveVehicleTripItem.call(this,e)):a.validateAndSaveVehicleTripItem.call(this,e)},back:a.states.showingForm.back},complete:{_onEnter:function(){this.originalModel.set(this.vehicle.attributes),this.fireEvent("complete"),this.transition("uninitialized"),i.trackEvent("VehicleEdit","Complete",s,this.originalModel.getTripId(),this.originalModel.get("id"))}}}});return u.subscribe("edit_vehicle_workflow:back",function(){m.handle("back")}),u.subscribe("edit_vehicle_workflow:save",function(e){m.handle("save",e)}),u.subscribe("edit_trip_item:click_location_picker",function(e){m.handle("selectLocation",e)}),u.subscribe("edit_vehicle_workflow:nudge",function(){m.handle("nudge")}),u.subscribe("edit_vehicle_workflow:back_info_edit",function(){m.transition("showingForm")}),m}),define("views/vehicles/vehicle_location_detail_view",["namespace","jquery","underscore","mediator","handlebars","backbone","presenters/trip_item/trip_item_vehicle_presenter","strings","jquery.dotdotdot"],function(e,t,n,r,i,s,o,u,a){var f=s.View.extend({template:"vehicles/vehicle_location_detail",initialize:function(e){n.extend(this,e),this.model.on("change",function(e,t){this.render()},this),this.on("afterrender",this.afterrender,this)},events:{"vclick .map":"onClickMap","vclick #continue":"onContinue","vclick .read-more":"toggleReadMore","vclick #pickup,#dropoff":"toggleLocation"},onContinue:function(e){e.preventDefault(),this.trigger("continue")},onClickMap:function(e){e.preventDefault();var n=t(e.currentTarget).data("segment"),i={itemId:this.model.id,isEnd:n==="end"};this.model.set({viewedLocationInMap:n},{silent:!0}),r.publish("map:show",i)},afterrender:function(){var e=this;t(".ellipsis").addClass("collapsed").dotdotdot({after:"a.read-more"})},toggleReadMore:function(){var e=t(".ellipsis"),n;e.hasClass("collapsed")?(n=e.triggerHandler("originalContent"),e.append(n).removeClass("collapsed"),e.trigger("update"),t(".ellipsis .read-more").html(u.Collapse)):(e.addClass("collapsed"),e.trigger("update"),t(".ellipsis .read-more").html(u.ReadMore))},toggleLocation:function(e){this.location=e.currentTarget.id==="pickup"?"start":"end",this.render(),this.trigger("afterrender")},serialize:function(){var e,t=new o({model:this.model});return this.location=this.location||this.model.get("viewedLocationInMap")||this.model.get("viewedLocation")||"start",this.model.unset("viewedLocationInMap",{silent:!0}),!t.end_info||this.location==="start"?e={item:n.extend(this.model.toJSON(),{location:this.location,returnAddress:t.getReturnAddress(),address:t.getAddress(),address_lines:t.start_location.address_lines,phoneNumbers:(new s.Collection(t.getPhoneNumbers())).toJSON(),generalInformation:t.getGeneralInformation(),shuttle_details:t.getShuttleDetails(),labels:t.labels,start_location:t.start_location,end_location:t.end_location})}:e={item:{location:this.location,address_lines:t.end_location.address_lines,phoneNumbers:t.end_info.phoneNumbers,operation_times:t.end_info.operation_times,generalInformation:t.end_info.general_information,shuttle_details:t.getEndShuttleDetails(),end_info:!0}},e}});return f}),define("controllers/vehicles_controller",["underscore","mediator","namespace","controllers/controller","models/vehicle_trip_item","views/trip_items/trip_item_detail_view","workflows/add_vehicle_workflow","workflows/edit_vehicle_workflow","views/vehicles/vehicle_location_detail_view","analytics","trips_manager"],function(e,t,n,r,i,s,o,u,a,f,l){var c=r.extend({initialize:function(){e.bindAll(this),this._layout=n.getLayout("simple"),this.model=null,this._initSubscriptions()},_initSubscriptions:function(){t.subscribe("vehicles:add",this.add),t.subscribe("vehicles:edit",this.edit),t.subscribe("vehicles:show",this.show),t.subscribe("vehicles:locationDetails",this.locationDetails)},show:function(e){var t=this;l.getTripItems(e.trip.id,function(n){var r=n.get(e.id);t.setView(new s({model:r}))}),f.trackEvent("Vehicles","Show",n)},add:function(e){var t=l.getTrips().get(e.tripId),r=t?t.id:undefined;this.addParams=e,this.model=new i(null,{trip:t}),o.transition("uninitialized"),o.handle("initialize",{model:this.model,controller:this}),o.off("complete",this.onAddComplete),o.on("complete",this.onAddComplete),f.trackEvent("Vehicles","Add",n,r)},onAddComplete:function(){t.publish("trip_items:index",this.addParams)},edit:function(e){var t=l.getCurrentTrip(),r=t.getTripItems().get(e.itemId);this.editParams=e,u.transition("uninitialized"),u.handle("initialize",{model:r,controller:this}),u.off("complete",this.onEditComplete),u.on("complete",this.onEditComplete),f.trackEvent("Vehicles","Edit",n,t.id,e.itemId)},onEditComplete:function(){t.publish("back:history",this.editParams)},locationDetails:function(e){var t=l.getCurrentTrip(),r=t.getTripItems().get(e.itemId),i=new a({model:r});this._updateHeader(r.get("name"),"back:history"),f.trackEvent("Vehicles","LocationDetails",n,t.id,e.itemId),this.setView(i)}});return c}),define("workflows/add_generic_workflow",["namespace","underscore","backbone","machina","mediator","workflows/pick_location_workflow","helpers","workflows/search_for_location_workflow","trips_manager","views/trip_items/add_trip_item_view","models/location","analytics"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h=o.dateHelpers,p=new r.Fsm({initialState:"uninitialized",backAction:"trip_items:add",setUserData:function(e,t){t={name:t.name,start_date:h.formattedCombineDateAndTime(t.start_date,t.start_time,"YYYY-MM-DDTHH:mm:ss"),start_time:h.formattedCombineDateAndTime(t.start_date,t.start_time,"YYYY-MM-DDTHH:mm:ss"),end_date:h.formattedCombineDateAndTime(t.end_date,t.end_time,"YYYY-MM-DDTHH:mm:ss"),end_time:h.formattedCombineDateAndTime(t.end_date,t.end_time,"YYYY-MM-DDTHH:mm:ss"),confirmation_number:t.confirmation_number,phone_number:t.phone_number,for_business:!!t.for_business,note:t.note},e.phoneNumbers.reset({number:t.phone_number},{silent:!0}),e.set(t,{silent:!0})},saveGenericTripItem:function(e,t){var n=this;e.validate(),e.has("error")?i.publish("error:trigger","form_validation",e.get("error")):e.save(null,{success:function(e,t){n.transition("complete")},silent:!0})},cacheLocationPickerInputFromCurrentLocation:function(){var e="US";a.getCurrentTrip()&&a.getCurrentTrip().getDestinationCountry()&&(e=a.getCurrentTrip().getDestinationCountry()),this.cachedLocationUserInput=this.cachedLocationUserInput||new l({countryName:e}),this.cachedLocationUserInput.clear({silent:!0}),this.cachedLocationUserInput.set({city:this.locationModel.get("city"),country:this.locationModel.get("country"),countryName:this.locationModel.get("country")||e,name:this.locationModel.get("name"),label:this.locationModel.get("label"),postal:this.locationModel.get("postal_code"),state:this.locationModel.get("state"),street:this.locationModel.get("street")},{silent:!0})},states:{uninitialized:{initialize:function(n){t.extend(this,n);var r;this.newTripItem=this.controller.model,this.title=e.controllers.header&&e.controllers.header.getTitle(),this.transition("showingForm"),r=this.newTripItem.trip?this.newTripItem.trip.get("id"):undefined,c.trackEvent(this.newTripItem.getType()+"Add","Start",e,r)}},showingForm:{_onEnter:function(){this.controller._updateHeader(this.title,"add_trip_item:back"),this.addView=new f({model:this.newTripItem,helpInfoBackMessage:"add_trip_item:back_info_add"}),this.controller.setView(this.addView),this.addView.on("save",function(e){this.handle("save",e)},this),this.addView.on("clickLocationPicker",function(e){this.handle("onClickLocationPicker",e,this.newTripItem)},this)},onClickLocationPicker:function(e,t){this.addView.getFormData().isBothSameChecked===!0&&(t.set({is_both_same_checked:!0},{silent:!0}),t.endLocation.set(this.newTripItem.startLocation.toJSON(),{silent:!0})),this.setUserData(t,this.addView.getFormData().values),this.locationModel=t[e],this.cacheLocationPickerInputFromCurrentLocation(),this.transition("addingManualLocation")},back:function(){this.transition("uninitialized"),delete this.cachedLocationUserInput,i.publish("back:history")},save:function(t){var n;t.isBothSameChecked===!0&&(this.newTripItem.set({is_both_same_checked:!0},{silent:!0}),this.newTripItem.endLocation.set(this.newTripItem.startLocation.toJSON(),{silent:!0})),this.setUserData(this.newTripItem,t.values),this.saveGenericTripItem(this.newTripItem,t.values),n=this.newTripItem.trip?this.newTripItem.trip.get("id"):undefined,c.trackEvent(this.newTripItem.getType()+"Add","Complete",e,n)}},addingManualLocation:{_onEnter:function(){this.controller._updateHeader(this.title,this.backAction),u.transition("uninitialized"),u.handle("initialize",{title:this.title,controller:this.controller,isManualAdd:!0,cachedLocationUserInput:this.cachedLocationUserInput},this)},cancel:function(){this.transition("showingForm")},complete:function(e){this.locationModel.set(t.extend(e.location.attributes,{name:e.location.collection.location.get("name")})),this.transition("showingForm")}},complete:{_onEnter:function(){delete this.cachedLocationUserInput,this.fireEvent("complete"),this.transition("uninitialized")}}}});return u.on("complete",function(e){p.state==="addingManualLocation"&&p.handle("complete",e)}),u.on("cancel",function(){p.state==="addingManualLocation"&&p.handle("cancel")}),i.subscribe("add_trip_item:back",function(){p.handle("back")}),i.subscribe("add_trip_item:back_info_add",function(){p.transition("showingForm")}),p}),define("workflows/edit_generic_workflow",["backbone","models/generic_trip_item","views/trip_items/add_trip_item_view","views/trip_items/trip_item_imported_edit_view","analytics","namespace","machina","mediator","workflows/add_generic_workflow","workflows/search_for_location_workflow","helpers","underscore"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h=l.dateHelpers,p=new o.Fsm({initialState:"uninitialized",name:"edit generic",title:"Edit Generic",backAction:"add_trip_item:back",setUserData:a.setUserData,cacheLocationPickerInputFromCurrentLocation:a.cacheLocationPickerInputFromCurrentLocation,states:{uninitialized:{initialize:function(e){this.title="Edit "+e.model.getTitle(),this.originalModel=e.model,this.generic=this.originalModel.clone(),this.controller=e.controller,this.setView=this.setView||e.controller.setView,this.transition("showingForm"),i.trackEvent(this.originalModel.getType()+"Edit","Start",s,this.originalModel.getTripId(),this.originalModel.get("id"))}},showingForm:{_onEnter:function(){this.controller._updateHeader(this.title,"edit_generic_workflow:back");var e;this.generic.isImported()?e=new r({model:this.generic,helpInfoBackMessage:"edit_generic_workflow:back_info_edit"}):e=new n({model:this.generic,helpInfoBackMessage:"edit_generic_workflow:back_info_edit"}),this.addView=e,this.setView(this.addView),this.addView.on("save",function(e){this.handle("save",e)},this),this.addView.on("clickLocationPicker",function(e){this.handle("onClickLocationPicker",e,this.generic)},this)},save:function(e){e.isBothSameChecked===!0&&(this.generic.set({is_both_same_checked:!0},{silent:!0}),this.generic.endLocation.set(this.generic.startLocation.toJSON(),{silent:!0})),this.generic.isImported()?(this.generic.set({note:e.note,for_business:!!e.for_business},{silent:!0}),a.saveGenericTripItem.call(this,this.generic)):(a.setUserData.apply(this,[this.generic,e.values]),a.saveGenericTripItem.call(this,this.generic))},onClickLocationPicker:a.states.showingForm.onClickLocationPicker,back:a.states.showingForm.back},addingManualLocation:a.states.addingManualLocation,complete:{_onEnter:function(){this.originalModel.merge(this.generic),this.fireEvent("complete"),this.transition("uninitialized"),i.trackEvent(this.originalModel.getType()+"Edit","Complete",s,this.originalModel.getTripId(),this.originalModel.get("id"))}}}});return f.on("complete",function(e){p.state==="addingManualLocation"&&p.handle("complete",e)}),f.on("cancel",function(){p.state==="addingManualLocation"&&p.handle("cancel")}),u.subscribe("edit_generic_workflow:back",function(){p.handle("back")}),u.subscribe("edit_trip_item:click_location_picker",function(e){p.handle("selectLocation",e)}),u.subscribe("edit_generic_workflow:back",function(){p.handle("back")}),u.subscribe("edit_generic_workflow:back_info_edit",function(){p.transition("showingForm")}),p}),define("controllers/generic_item_controller",["underscore","mediator","namespace","controllers/controller","workflows/add_generic_workflow","workflows/edit_generic_workflow","models/generic_trip_item","models/location","views/trip_items/trip_item_detail_view","trips_manager"],function(e,t,n,r,i,s,o,u,a,f){var l=r.extend({initialize:function(){e.bindAll(this),this._layout=n.getLayout("simple"),this.model=null,this._initSubscriptions(),this._initWorkflows()},_initWorkflows:function(){i.on("cancel",function(){window.history.back()})},_initSubscriptions:function(){var e=this;t.subscribe("trip_items:show",function(t){f.getTripItems(t.tripId,function(n){e.model=n.get(t.itemId),e.model.get("named_type")==="Generic"&&e.show(t)})}),t.subscribe("generic_item:edit",function(e){this.storeParamsAndEdit(e)},this),t.subscribe("cruise:add",function(e){this.storeParamsAndAdd(e,"cruise")},this),t.subscribe("food:add",function(e){this.storeParamsAndAdd(e,"food_drink")},this),t.subscribe("attraction:add",function(e){this.storeParamsAndAdd(e,"attraction")},this),t.subscribe("activity:add",function(e){this.storeParamsAndAdd(e,"activity")},this),t.subscribe("ferry:add",function(e){this.storeParamsAndAdd(e,"ferry")},this),t.subscribe("meeting:add",function(e){this.storeParamsAndAdd(e,"meeting")},this),t.subscribe("groundtransportation:add",function(e){this.storeParamsAndAdd(e,"ground_transportation")},this),t.subscribe("rail:add",function(e){this.storeParamsAndAdd(e,"rail")},this)},storeParamsAndAdd:function(t,n){this.addParams=t,this.add(e.extend(this.addParams,{type:n}))},add:function(t){t.original_model&&e.isFunction(t.original_model.toGenericItem)?this.model=t.original_model.toGenericItem():this.model=new o(null,{trip:f.getCurrentTrip(),type:t.type}),i.transition("uninitialized"),i.handle("initialize",{controller:this},t),i.off("complete",this.onAddComplete),i.on("complete",this.onAddComplete,this)},onAddComplete:function(){t.publish("trip_items:index",this.addParams)},storeParamsAndEdit:function(e){this.editParams=e,this.edit(this.editParams)},edit:function(e){s.transition("uninitialized"),s.handle("initialize",{model:this.model,controller:this}),s.off("complete",this.onEditComplete),s.on("complete",this.onEditComplete,this)},onEditComplete:function(){t.publish("back:history",this.editParams)},show:function(e){this.setView(new a({model:this.model}))}});return l}),define("modules/sidemenu/models/sidemenu_item_model",["jquery","underscore","backbone"],function(e,t,n){var r=n.Model.extend({defaults:{label:null,extraStyle:null,iconStyle:null,action:null,elId:""},initialize:function(e){if(!e||!e.style&&!e.label)throw"InvalidConstructArgs"}});return r}),define("modules/sidemenu/collections/sidemenu_collection",["jquery","underscore","backbone","modules/sidemenu/models/sidemenu_item_model"],function(e,t,n,r){var i=n.Collection.extend({model:r});return i}),define("text!modules/sidemenu/views/sidemenu_item.tmpl",[],function(){return'<div class="preview-icon {{iconStyle}} main-menu-icon" id={{elId}}></div>\n<div class="message"><p>{{label}}</p></div>\n<div class="next btn_arrow_dark button-icon"></div>'}),define("modules/sidemenu/views/sidemenu_item_view",["jquery","underscore","backbone","handlebars","mediator","text!./sidemenu_item.tmpl"],function(e,t,n,r,i,s){var o=n.View.extend({events:{vclick:"onClickSelect"},className:"menu-item-group group",tagName:"li",template:r.compile(s),initialize:function(){e("#app-page").scrollTop(0)},render:function(){var e=this.model.toJSON(),t=this.template(e);this.$el.html(t),this.applyExtraStyle()},applyExtraStyle:function(){var e=this.model.get("extraStyle");e!==undefined&&this.$el.addClass(e)},onClickSelect:function(e){e.preventDefault();var t=this.model.get("action");i.publish(t,this.model),this.visualDeselect(),this.visualSelect()},visualDeselect:function(){var n=e(".menu-item-group.group-selected");t.each(n,function(t){e(t).removeClass("group-selected")})},visualSelect:function(){this.$el.addClass("group-selected")}});return o}),define("modules/sidemenu/views/sidemenu_view",["jquery","underscore","backbone","modules/sidemenu/views/sidemenu_item_view","iscroll","helpers","mediator","layoutmanager"],function(e,t,n,r,i,s,o){var u=n.View.extend({tagName:"ul",initialize:function(){t.bindAll(this),this.disableOverlay=e('<div id="disable-overlay"></div>');var n=e("#sidemenu");n.append(this.$el),this.iScroller=null,this.collection.on("reset",this.render)},render:function(){var e=this;return e.clearScroller(),this.$el.empty(),this.collection.each(function(t){var n=new r({model:t});n.render(),e.$el.append(n.$el)}),setTimeout(function(){e.defineScroller()},0),this},clearScroller:function(){this.iScroller&&(this.iScroller.destroy(),this.iScroller=null)},defineScroller:function(){document.getElementById("sidemenu-scroll-wrapper")&&(this.iScroller=new i("sidemenu-scroll-wrapper",{hScrollbar:!1,vScrollbar:!1,useTransition:!0}))},show:function(){this.appPage=e("#app-page"),this.appHeader=e(".app-header"),e("#sidemenu-scroll-wrapper").show(),this.slideIt(!0)},slideIt:function(e){this.slideItCss(e),this.disableAppMainDiv(e)},slideItCss:function(t){var n="sidemenu-slide-out",r=e(this.appPage).find(".scroll-indicator"),i=e(".fixed-toolbar");t?(this.appPage.addClass(n),this.appHeader.addClass(n),r.addClass(n),i.addClass(n)):this.appPage&&this.appHeader&&(this.appPage.removeClass(n),this.appHeader.removeClass(n),r.removeClass(n),i.removeClass(n))},disableAppMainDiv:function(t){t?(e("#app-page").append(this.disableOverlay),this.disableOverlay.on("vmouseup",function(){o.publish("sidemenu:toggle")}),this.disableOverlay.on("vmousedown",function(e){e.preventDefault()})):(this.disableOverlay.detach(),this.disableOverlay.off())},hide:function(){var e=300;this.slideIt(!1),setTimeout(s.viewportResize,e)}});return u}),define("text!modules/sidemenu/views/sidemenu_trip_summary.tmpl",[],function(){return'<div class="trip-summary-icon"><img src="{{previewUrl}}" alt="{{name}}" height="38" width="38" /></div>\n<div class="trip-info-group">\n	<span class="trip-name">{{name}}</span>\n	<span class="trip-date">{{sidemenuSummaryDate}}</span>\n</div>\n<div class="next btn_arrow_dark button-icon"></div>\n'}),define("modules/sidemenu/views/sidemenu_trip_summary_view",["jquery","underscore","backbone","handlebars","mediator","moment","strings","text!./sidemenu_trip_summary.tmpl"],function(e,t,n,r,i,s,o,u){var a=n.View.extend({className:"trip-summary-group group",template:r.compile(u),events:{click:"onClicked"},initialize:function(){t.bindAll(this);var n=e("#sidemenu");n.append(this.$el),this.model.on("change",this.render)},render:function(){var e=this.model.toJSON(),t=this.template(e);return this.$el.html(t),this},show:function(){this.$el.show()},hide:function(){this.$el.hide()},onClicked:function(){i.publish("sidemenu:hide")}});return a}),define("text!modules/sidemenu/views/sidemenu_help.tmpl",[],function(){return'<ul>\n	<li id="help">{{t "Help"}}</li>\n	<li id="legal">{{t "LegalNotices"}}</li>\n</ul>\n'}),define("modules/sidemenu/views/sidemenu_help_view",["namespace","jquery","underscore","backbone","mediator","handlebars","text!./sidemenu_help.tmpl"],function(e,t,n,r,i,s,o){var u=r.View.extend({className:"menu-item-group group group-legal-help",events:{"vclick #help":"onHelp","vclick #legal":"onLegal"},template:s.compile(o),initialize:function(){n.bindAll(this);var e=t("#sidemenu");e.append(this.$el)},render:function(){var e={},t=this.template(e);return this.$el.html(t),this},show:function(){this.render(),this.$el.show()},hide:function(){this.$el.hide()},onHelp:function(){this.trigger("onClicked:Help")},onLegal:function(){this.trigger("onClicked:Legal")}});return u}),define("text!modules/sidemenu/views/sidemenu_profile_name.tmpl",[],function(){return'<div class="message"><p>{{name}}</p></div>'}),define("modules/sidemenu/views/sidemenu_profile_name_view",["namespace","jquery","underscore","backbone","mediator","handlebars","text!./sidemenu_profile_name.tmpl"],function(e,t,n,r,i,s,o){var u=r.View.extend({className:"menu-item-group group group-profile",events:{click:"onClicked"},template:s.compile(o),initialize:function(){n.bindAll(this);var e=t("#sidemenu");e.append(this.$el)},render:function(){var e={name:this.userName()},t=this.template(e);return this.$el.html(t),this},userName:function(){var t="";return e.user&&(t=e.user.get("name")),t},show:function(){this.render(),this.$el.show()},hide:function(){this.$el.hide()},onClicked:function(){i.publish("sidemenu:hide")}});return u}),define("text!modules/sidemenu/views/sidemenu_toolbar.tmpl",[],function(){return'<ul>\n	<li id="my-trips">\n		<div class="group-toolbar-icon icon_mainmenu_mytrips_45px main-menu-icon"></div>\n		{{t "Trips"}}\n	</li>\n	<li id="new-trip">\n		<div class="group-toolbar-icon icon_mainmenu_add_45px main-menu-icon"></div>\n		{{t "NewTrip"}}\n	</li>\n	<li id="contacts">\n		<div class="group-toolbar-icon icon_mainmenu_contacts_45px main-menu-icon"></div>\n		{{t "Contacts"}}\n	</li>\n	<li id="logout">\n		<div class="group-toolbar-icon icon_mainmenu_logout_45px main-menu-icon"></div>\n		{{t "Logout"}}\n	</li>\n</ul>'}),define("modules/sidemenu/views/sidemenu_toolbar_view",["namespace","jquery","underscore","backbone","mediator","handlebars","text!./sidemenu_toolbar.tmpl"],function(e,t,n,r,i,s,o){var u=r.View.extend({className:"toolbar-group",events:{"vclick #my-trips":"onMyTrips","vclick #new-trip":"onNewTrip","vclick #contacts":"onContacts","vclick #logout":"onLogout"},template:s.compile(o),initialize:function(){n.bindAll(this);var e=t("#sidemenu");e.append(this.$el)},render:function(){var e={},t=this.template(e);return this.$el.html(t),this},show:function(){this.render(),this.$el.show()},hide:function(){this.$el.hide()},onMyTrips:function(e){e.preventDefault(),this.trigger("onClicked:myTrips")},onNewTrip:function(e){e.preventDefault(),this.trigger("onClicked:newTrip")},onContacts:function(e){e.preventDefault(),this.trigger("onClicked:contacts")},onLogout:function(e){e.preventDefault(),this.trigger("onClicked:logout")}});return u}),define("models/trips/unfollow_trip_model",["jquery","underscore","backbone"],function(e,t,n){var r=n.Model.extend({url:function(){return"/mapi/trips/"+this.id+"/unsubscribe_follower_trip.json"}});return r}),define("controllers/ui/sidemenu_controller",["namespace","jquery","underscore","backbone","mediator","controllers/controller","modules/sidemenu/collections/sidemenu_collection","modules/sidemenu/views/sidemenu_view","modules/sidemenu/views/sidemenu_trip_summary_view","modules/sidemenu/views/sidemenu_help_view","modules/sidemenu/views/sidemenu_profile_name_view","modules/sidemenu/views/sidemenu_toolbar_view","trips_manager","views/delete_confirm_popup_factory","models/trips/unfollow_trip_model","analytics","helpers","strings"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g){var y=s.extend({initialize:function(){n.bindAll(this),this.profileNameView=new l,this.profileNameView.on("onClicked",this.onToggle),this.toolbarView=new c,this.toolbarView.on("onClicked:myTrips",this.onMyTrips),this.toolbarView.on("onClicked:newTrip",this.onCreateTrip),this.toolbarView.on("onClicked:contacts",this.onContacts),this.toolbarView.on("onClicked:logout",this.onLogout),this.tripSummary=new r.Model,this.tripSummaryView=new a({model:this.tripSummary}),this.tripSummaryView.on("onClicked",this.onToggle),this.menuCollection=new o,this.menuView=new u({collection:this.menuCollection}),this.helpView=new f,this.helpView.on("onClicked:Help",this.onHelp),this.helpView.on("onClicked:Legal",this.onTerms),this.isOpen=!1,this._initSubscriptions()},_setTripFeedShown:function(e){var t=h.getCurrentTrip();t.setTripFeedView(e)},_initSubscriptions:function(){i.subscribe("session:invalid",this.closeIt,this),i.subscribe("sidemenu:toggle",this.onToggle,this),i.subscribe("sidemenu:hide",this.onHide,this),i.subscribe("sidemenu:itinerary",this.onItinerary,this),i.subscribe("sidemenu:tripFeed",this.onTripFeed,this),i.subscribe("sidemenu:add_item",this.onAddItem,this),i.subscribe("sidemenu:edit_trip",this.onEditTrip,this),i.subscribe("sidemenu:share_itinerary",this.onShareItinerary,this),i.subscribe("sidemenu:alternate_flights",this.onAltFlights,this),i.subscribe("sidemenu:seat_maps",this.onSeatMaps,this),i.subscribe("sidemenu:weather",this.onWeather,this),i.subscribe("sidemenu:maps",this.onMaps,this),i.subscribe("sidemenu:tools",this.onTools,this),i.subscribe("sidemenu:benefits",this.onBenefits,this),i.subscribe("sidemenu:phoneNumbers",this.onPhoneNumbers,this),i.subscribe("sidemenu:terms",this.onTerms,this),i.subscribe("sidemenu:unfollow_trip",this.onUnfollowTrip,this),i.subscribe("offline:offline",this.setIsOffline,this),i.subscribe("offline:online",this.setIsOnline,this)},redefineMenuSize:function(){this.menuView.clearScroller(),this.menuView.defineScroller()},setIsOnline:function(){this.menuSetup(!0)},setIsOffline:function(){try{this.menuSetup(!1)}catch(e){}},onToggle:function(){this.isOpen===!0?(this.closeIt(),v.trackEvent("SideMenu","Close",e)):(this.openIt(),v.trackEvent("SideMenu","Open",e))},onHide:function(){this.closeIt()},closeIt:function(){this.isOpen&&(this.isOpen=!1,this.menuView.hide())},onTripFeedShown:function(){this._setTripFeedShown(!0)},onItineraryShown:function(){this._setTripFeedShown(!1)},openIt:function(){if(!this.isOpen){var e=this,t=function(){e.isOpen=!0};this.profileNameView.show(),this.toolbarView.show(),this.tripSummarySetup(),this.menuSetup(),this.menuView.show(),this.helpView.show(),setTimeout(t,400)}},tripSummarySetup:function(){var e=h.getCurrentTrip();e?(this.tripSummary.set(e.attributes),this.tripSummaryView.show()):this.tripSummaryView.hide()},menuSetup:function(e){var t=[];try{t=t.concat(this.menuTripItemsSetup(e)),this.menuCollection.reset(t)}catch(n){if(n==="InvalidConstructArgs")return!1}},menuTripItemsSetup:function(t){t=n.isBoolean(t)?t:e.isOnline;var r=[],i=h.getCurrentTrip(),s=!1,o=!1;if(i){s=i.hasAnyAirTripItems();var u=e.session.getMemberships();u!==undefined&&(o=!!n.where(u,{name:"AMEXBENEFITS"}).length)}return i&&i.hasNoTripItems()!==!0&&!i.isFollowing()&&(i.getTripFeedView()?r.push({label:g.SwitchToItinerary,iconStyle:"icon_mainmenu_itinerary_45px",action:"sidemenu:itinerary",elId:"sm_itin"}):r.push({label:g.SwitchToTripFeed,iconStyle:"icon_mainmenu_actionstream_45px",action:"sidemenu:tripFeed",elId:"sm_swts"})),i&&t&&!i.isFollowing()&&r.push({label:g.AddItem,iconStyle:"icon_mainmenu_add_45px",action:"sidemenu:add_item",elId:"sm_adit"},{label:g.EditTrip,iconStyle:"icon_mainmenu_edit_45px",action:"sidemenu:edit_trip",elId:"sm_edtr"}),i&&i.hasNoTripItems()!==!0&&t&&(i.isFollowing()||(r.push({label:g.Share,iconStyle:"icon_mainmenu_share_45px",action:"sidemenu:share_itinerary",elId:"sm_sitn",extraStyle:"group-profile-bevel"}),r.push({label:g.Tools,action:"sidemenu:tools",elId:"sm_tools",extraStyle:"group-profile"}),s&&i.active&&(r.push({label:g.AltFlights,iconStyle:"icon_mainmenu_alt_flights_45px",action:"sidemenu:alternate_flights",elId:"sm_altf"}),r.push({label:g.SeatMaps,iconStyle:"icon_mainmenu_seatmaps_45px",action:"sidemenu:seat_maps",elId:"sm_seat"})),r.push({label:g.Weather,iconStyle:"icon_mainmenu_weather_45px",action:"sidemenu:weather",elId:"sm_weat"}),r.push({label:g.Maps,iconStyle:"icon_mainmenu_maps_45px",action:"sidemenu:maps",elId:"sm_maps"}),o&&r.push({label:g.Benefits,iconStyle:"icon_mainmenu_amex_24px",action:"sidemenu:benefits",elId:"sm_amex"}),r.push({label:g.PhoneNumbers,iconStyle:"icon_mainmenu_phone_45px",action:"sidemenu:phoneNumbers",elId:"sm_phoneNumbers"}))),i&&i.can("unfollow")&&r.push({label:g.UnfollowTrip,iconStyle:"icon_mainmenu_unfollow_45px",action:"sidemenu:unfollow_trip",elId:"sm_unfollow"}),r},onItinerary:function(){var t=h.getCurrentTripId();this._setTripFeedShown(!1),this.closeIt(),i.publish("trip_items:index",{tripId:t}),v.trackEvent("SideMenu","SwitchToTripItinerary",e,t)},onTripFeed:function(){var t=h.getCurrentTripId();this._setTripFeedShown(!0),this.closeIt(),i.publish("trip_items:index",{tripId:t}),v.trackEvent("SideMenu","SwitchToTripFeed",e,t)},onAddItem:function(){this.closeIt(),i.publish("trip_items:add",{tripId:h.getCurrentTripId()}),v.trackEvent("SideMenu","AddItem")},onEditTrip:function(){var t=h.getCurrentTripId();this.closeIt(),i.publish("trips:edit",{tripId:t}),v.trackEvent("SideMenu","EditTrip",e,t)},onAltFlights:function(){var t=h.getCurrentTripId();this.closeIt(),i.publish("altflights:show"),v.trackEvent("SideMenu","AlternateFlights",e,t)},onSeatMaps:function(){var t=h.getCurrentTripId();this.closeIt(),i.publish("seatmaps:list",{tripId:t}),v.trackEvent("SideMenu","SeatMaps",e,t)},onWeather:function(){var t=h.getCurrentTripId();this.closeIt(),i.publish("weather:show"),v.trackEvent("SideMenu","Weather",e,t)},onPhoneNumbers:function(){var t=h.getCurrentTripId();this.closeIt(),i.publish("phone_numbers:showIndex"),v.trackEvent("SideMenu","PhoneNumbers",e,t)},onShareItinerary:function(){var t=h.getCurrentTripId();this.closeIt(),i.publish("trips:share"),v.trackEvent("SideMenu","ShareItinerary",e,t)},onHelp:function(){var t="http://support.tripcase.com";this.closeIt(),v.trackEvent("SideMenu","Help"),e.isOnline?i.publish("messages:external_url_in_browser",{url:t}):i.publish("error:trigger","service",[{message:g.ErrorOffline}])},onTerms:function(){this.closeIt(),i.publish("terms:show"),v.trackEvent("SideMenu","Terms",e)},onUnfollowTrip:function(){this.closeIt(),v.trackEvent("SideMenu","UnfollowTrip",e);var t=h.getCurrentTrip(),n=p.createPopup(t);n.render(),n.on("complete",this._unfollowTripConfirm,this),n.on("cancel",this._unfollowTripCancel,this)},_unfollowTripConfirm:function(){var t=h.getCurrentTrip(),n=new d({id:t.getTripId()});n.save(null,{success:function(t,n){t.has("error")?i.publish("error:trigger","form_validation",[{message:t.get("error")}]):h.getFollowingTrips().resetAndCache(n),i.publish("trips:index",e)}}),v.trackEvent("UnfollowTrip","Complete",e)},_unfollowTripCancel:function(){v.trackEvent("UnfollowTrip","Cancel",e)},onBenefits:function(){this.closeIt(),i.publish("amex_benefits:index"),v.trackEvent("SideMenu","Benefits",e)},onMaps:function(t){var n=h.getCurrentTripId(),r=this._getCurrentMostRelevantTripItem();this.closeIt(),i.publish("map:show",{itemId:r.id}),v.trackEvent("SideMenu","Maps",e,n,r.id)},_getCurrentMostRelevantTripItem:function(){var e=h.getCurrentTrip(),t,n;return e.isActive()?t=e.get("most_relevant_item"):t=0,n=e.tripItems.at(t),n},onTools:function(){this.closeIt(),v.trackEvent("SideMenu","Tools")},onMyTrips:function(){this.closeIt(),v.trackEvent("SideMenu","MyTrips"),i.publish("trips:index",e)},onCreateTrip:function(){this.closeIt(),v.trackEvent("SideMenu","CreateTrip",e),i.publish("trips:create")},onContacts:function(){this.closeIt(),v.trackEvent("SideMenu","Contacts",e),i.publish("contacts:show")},onLogout:function(){this.closeIt(),v.trackEvent("SideMenu","Logout",e),i.publish("session:promptlogout")}});return y}),define("views/trips/edit_trips_view",["jquery","underscore","backbone","layoutmanager"],function(e,t,n){var r=n.View.extend({className:"trip-group manage-trip",template:"trips/edit_trip_item",tagName:"li",cleanup:function(){this.off()},serialize:function(){return this.model.toJSON()}}),i=n.View.extend({className:"mytrips-page",template:"trips/trip_list",initialize:function(){this.isActiveShown=!0},render:function(e){var t=e(this),n=this;return this.collection.each(function(e){e.get("active")===n.isActiveShown&&t.insert(".list-panel",new r({model:e}))}),t.render({})},setActiveTrips:function(e){this.isActiveShown=e}});return i}),define("views/trips/combine_trip_name_view",["namespace","jquery","underscore","backbone","mediator","layoutmanager"],function(e,t,n,r,i){var s=r.View.extend({template:"trips/combine_trip_name",events:{"submit #name-trip-form":"onSubmit"},initialize:function(){this.model.on("error",function(e,t){i.publish("error:trigger","form_validation",t)},this)},serialize:function(){return this.model.toJSON()},onSubmit:function(e){e.preventDefault();var t=this.$el.find("#tripname").val(),n=this.model.set({name:t});n!==!1&&this.trigger("CombineTripName:submit")}});return s}),define("models/trips/combine_trip_name_model",["jquery","underscore","backbone","helpers","strings"],function(e,t,n,r,i){var s=n.Model.extend({validate:function(e){var n=[];return!e.name||e.name.length<=0?n.push({fieldName:"tripname",message:i.ErrorTripNameBlank}):r.validate.isSpacesOnly(e.name)?n.push({fieldName:"tripname",message:i.ErrorTripNameInvalid}):e.name.length>50&&n.push({fieldName:"tripname",message:i.ErrorTripNameTooLong}),t.any(n)?n:null}});return s}),define("models/trips/premerge_trips_model",["jquery","underscore","backbone"],function(e,t,n){var r=n.Model.extend({url:function(){return"/mapi/merge_trips/pre_merge.json?"+this.tripIdsParam},setTripIDs:function(e){var t,n="";for(t=0;t<e.length;t+=1)n+=e[t]+",";n=n.substr(0,n.length-1),this.tripIdsParam="trip_ids="+n}});return r}),define("models/car_trip_item",["jquery","underscore","backbone","models/trip_item","moment"],function(e,t,n,r,i){var s=r.extend({initialize:function(e,t){e&&this.set({item_title:e.vehicle_reservation.vendor.name,item_sub_title_mytrips:"Pick up at "+i(e.start_time.time).format("h:ma")+" on "+i(e.start_time.time).format("MMM DD")},{silent:!0})}});return s}),define("collections/trip_items",["jquery","underscore","backbone","models/trip_item","models/car_trip_item","models/hotel_trip_item","models/air_trip_item"],function(e,t,n,r,i,s,o){var u=n.Collection.extend({model:function(e,t){switch(e.type){case"Vehicle":return new i(e,t);case"Hotel":return new s(e,t);case"Air":return new o(e,t);default:return new r(e,t)}}});return u}),define("views/trips/combine_confirm_trip_items_view",["jquery","underscore","backbone","mediator","moment","helpers","strings","layoutmanager"],function(e,t,n,r,i,s,o){var u=n.View.extend({template:"trips/confirm_item",initialize:function(){this.model.on("change",function(){this.render()},this)},cleanup:function(){this.off()},serialize:function(){var e=this.model.toJSON();return t.extend(e,this.viewHelpers()),e},viewHelpers:function(){var e=this.model.get("type"),t={};return e==="Air"?t=this.viewHelpersAir():e==="Vehicle"?t=this.viewHelpersVehicle():e==="Hotel"?t=this.viewHelpersHotel():e==="Generic"&&(t=this.viewHelpersGeneric()),t},viewHelpersAir:function(){var e={},t=this.model.get("air_reservation").flight.airline.iata_code,n=this.model.get("air_reservation").flight.flight_number,r=this.model.get("air_reservation").flight.departure_airport.iata_code,s=this.model.get("start_time").time,u=i(s).format(o.DateTime),a=i(s).format(o.DateMonthDay);return e.item_title_mytrips=t+" "+o.Flight+" "+n+" "+o.From+" "+r,e.item_sub_title_mytrips=o.Departs+" "+u+" "+o.On+" "+a,e.icon="icon_airplane_45px",e},viewHelpersGeneric:function(){var e={},t=this.model.get("start_time").time,n=i(t).format(o.DateTime),r=i(t).format(o.DateMonthDay);e.item_title_mytrips=s.capitalize(s.deunderscorize(this.model.get("generic_reservation").type)),e.item_sub_title_mytrips=o.StartsAt+" "+n+" "+o.On+" "+r;var u;switch(this.model.get("generic_reservation").type.toLowerCase()){case"food_drink":u="icon_food_45px";break;case"ground_transportation":u="icon_ground_transportation_45px";break;case"rail":u="icon_rail_45px";break;case"ferry":u="icon_ferry_45px";break;case"activity":u="icon_activity_45px";break;case"attraction":u="icon_attraction_45px";break;case"cruise":u="icon_cruise_45px";break;case"meeting":u="icon_meeting_45px";break;case"lodging":u="icon_hotel_45px";break;default:u="icon_some_other_45px"}return e.icon=u,e},viewHelpersHotel:function(){var e={},t=this.model.get("start_time").time,n=i(t).format(o.DateTime),r=i(t).format(o.DateMonthDay);return e.item_title_mytrips=this.model.get("hotel_reservation").hotel_property.name,e.item_sub_title_mytrips=o.CheckInAt+" "+n+" "+o.On+" "+r,e.icon="icon_hotel_45px",e},viewHelpersVehicle:function(){var e={},t=this.model.get("start_time").time,n=i(t).format(o.DateTime),r=i(t).format(o.DateMonthDay);return e.item_title_mytrips=this.model.get("vehicle_reservation").vendor.name,e.item_sub_title_mytrips=o.PickUpAt+" "+n+" "+o.On+" "+r,e.icon="icon_car_45px",e}}),a=n.View.extend({template:"trips/confirm_items_list",events:{"submit #confirm-items-form":"onSubmit","vclick #confirm-items-form-submit":"onSubmit"},initialize:function(){this.collection.on("change",function(){this.render()},this),this.collection.on("reset",function(){this.render()},this)},render:function(e){var t=e(this);return this.collection.each(function(e){t.insert(".list-panel",new u({model:e}))}),t.render()},onSubmit:function(e){e.preventDefault(),this.trigger("ConfirmListOfItems:submit",this.collection.defaultTripName)}});return a}),define("proxies/merge_trips_proxy",["underscore","proxies/proxy"],function(e,t){var n=t.extend({syncConfig:function(t,n){var r=this.model.get("trip_ids").split(",");this.invalidationKeys=[],this.url="/mapi/merge_trips/merge.json";for(var i=0;i<r.length;i++)this.invalidationKeys.push("trip_"+r[i]);this.invalidationKeys=e.union(this.invalidationKeys,["trip_list","session"])}});return n}),define("models/trips/merge_trips_model",["jquery","underscore","models/model","proxies/merge_trips_proxy"],function(e,t,n,r){var i=n.extend({initialize:function(){this.proxy=new r({},{model:this})},setName:function(e){this.set({name:e})},setTripIDs:function(e){var t,n="";for(t=0;t<e.length;t+=1)n+=e[t]+",";n=n.substr(0,n.length-1),this.set({trip_ids:n})}});return i}),define("workflows/combine_trip_workflow",["namespace","jquery","underscore","machina","mediator","backbone","views/trips/combine_trip_name_view","models/trips/combine_trip_name_model","models/trips/premerge_trips_model","collections/trip_items","views/trips/combine_confirm_trip_items_view","models/trips/merge_trips_model","models/trip","analytics","strings","trips_manager"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){var m=new r.Fsm({initialState:"uninitialized",name:"combine trips",_selectedTripsAndIdsStore:function(){var e,n,r=t("[type=checkbox]"),i=r.length;this._selectedTripsAndIdsClear();for(e=0;e<i;e+=1)r[e].checked===!0&&(n=v.getTrips().get(r[e].value),this.selectedTrips.push(n),this.selectedTripIds.push(n.get("id")))},_selectedTripsAndIdsClear:function(){this.selectedTrips=[],this.selectedTripIds=[]},_selectedTripsAreEnough:function(){var e=!1;return this.selectedTripIds.length>=2&&(e=!0),e},_confirmAllTripsActive:function(e){var t,n=e.length,r,i=!0;for(t=0;t<n;t+=1){r=v.getTrips().get(e[t]);if(r.get("active")===!1){i=!1;break}}return i},states:{uninitialized:{initialize:function(t){this.controller=t.controller,this._selectedTripsAndIdsStore(),this._selectedTripsAreEnough()?this._confirmAllTripsActive(this.selectedTripIds)?(p.trackEvent("ManageTrips","CombineTrips",e),this.transition("preCombineTrips")):(p.trackEvent("Errors","ManageTripsCombine",e),i.publish("error:trigger","form_validation",[{message:d.ErrorCombineTripsNeedActive}])):(p.trackEvent("Errors","ManageTripsCombine",e),i.publish("error:trigger","form_validation",[{message:d.ErrorCombineTripsNeedMore}]))}},preCombineTrips:{_onEnter:function(){this.transition("confirmAndContinue")}},confirmAndContinue:{_onEnter:function(){var n=this,r,i,s;r=new a,i=new f,s=new l({collection:i}),s.on("ConfirmListOfItems:submit",function(e){n.defaultTripName=e,n.transition("nameEntry")}),r.setTripIDs(this.selectedTripIds),r.fetch({success:function(e,t){i.defaultTripName=t.suggested_name||"",i.reset(t.items)}}),this.controller._updateHeader(d.ConfirmAndContinue,"combine_trip:back"),this.controller._layout=e.getLayout("simple"),this.controller._layout.setViews({".content":s},!0),this.controller._layout.render(function(e){t("#app-page").html(e)})},back:function(){i.publish("manage_trip:show",this.selectedTripIds)}},nameEntry:{_onEnter:function(){var n=this,r,i;r=new u,this.defaultTripName&&r.set({name:this.defaultTripName},{silent:!0}),i=new o({model:r}),i.on("CombineTripName:submit",function(){n.newTripName=r.get("name"),n.handle("combineTrips")}),this.controller._updateHeader(d.NameCombinedTrip,"combine_trip:back"),this.controller._layout=e.getLayout("simple"),this.controller._layout.setViews({".content":i},!0),this.controller._layout.render(function(e){t("#app-page").html(e)})},combineTrips:function(){var e,t=this;e=new c,e.setTripIDs(this.selectedTripIds),e.setName(this.newTripName),e.save(null,{success:function(e){var n=new h(e.attributes);v.getTrips().removeTrips(t.selectedTrips),v.getTrips().addTrip(n),v.setCurrentTripId(n.get("id")),i.publish("combine_trip:complete",n)}})},back:function(){this.transition("confirmAndContinue")}}}});return i.subscribe("combine_trip:back",function(){m.handle("back")}),m}),define("workflows/delete_trip_workflow",["namespace","jquery","underscore","machina","mediator","analytics","strings","trips_manager"],function(e,t,n,r,i,s,o,u){var a=new r.Fsm({initialState:"uninitialized",name:"delete trips",_selectedTripsAndIdsStore:function(){var e,n,r=t("[type=checkbox]"),i=r.length;this._selectedTripsAndIdsClear();for(e=0;e<i;e+=1)r[e].checked===!0&&(n=u.getTrips().get(r[e].value),this.selectedTrips.push(n),this.selectedTripIds.push(n.get("id")))},_selectedTripsAndIdsClear:function(){this.selectedTrips=[],this.selectedTripIds=[]},states:{uninitialized:{initialize:function(t){this.controller=t.controller,this._selectedTripsAndIdsStore(),this.selectedTripIds.length<=0?(s.trackEvent("Errors","ManageTripsDelete",e),i.publish("error:trigger","form_validation",[{message:o.ErrorDeleteTripsNeedMore}])):(this.selectedTripIds.length>1?s.trackEvent("ManageTrips","DeleteMulti",e):s.trackEvent("ManageTrips","DeleteSingle",e),this.transition("confirmAndContinue"))}},confirmAndContinue:{_onEnter:function(){this.controller._updateHeader(o.ConfirmAndDelete,"delete_trip:back"),i.publish("confirm_list_of_trips:show",this.selectedTrips),i.subscribe("confirm_list_of_trips:submit",function(){this.transition("deleteTrips")},this)},back:function(){i.publish("manage_trip:show",this.selectedTripIds)}},deleteTrips:{_onEnter:function(){var e,t;u.getTrips().deleteSelected(this.selectedTripIds,{success:function(){i.publish("delete_trip:complete")}})}}}});return i.subscribe("delete_trip:back",function(){a.handle("back")}),a}),define("controllers/manage_trip_controller",["namespace","jquery","underscore","backbone","mediator","controllers/controller","views/trips/edit_trips_view","controllers/ui/segmented_button_controller","workflows/combine_trip_workflow","workflows/delete_trip_workflow","trips_manager","strings","layoutmanager"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h=s.extend({initialize:function(){n.bindAll(this),this.isActiveTripsShown=!0,i.subscribe("manage_trip:show",this.onShow,this),i.subscribe("trips:tripToggle",this.onTripToggle,this),i.subscribe("manage_trip:delete_trips",this.onDeleteTrips,this),i.subscribe("manage_trip:combine_trips",this.onCombineTrips,this)},onTripToggle:function(e){this.isActiveTripsShown=e},onShow:function(n){this.view=new o({collection:l.getTrips()}),this.view.setActiveTrips(this.isActiveTripsShown),this._layout=e.getLayout("nav"),this._layout.setViews({".content":this.view});var r=[{cssStyle:"mytrips-manage-segmented-button delete",iconSelector:"button-icon btn_icon_delete_blue_25px",textLabel:c.Delete,action:"manage_trip:delete_trips"},{cssStyle:"mytrips-manage-segmented-button combine",iconSelector:"button-icon btn_icon_combine_blue_25px",textLabel:c.CombineTrip,action:"manage_trip:combine_trips"}];this.tripActionBar=new u,this.tripActionBar.setContent(r),this.tripActionBar.attachToLayout(this._layout,"mytrips-manage-segmented-bar"),this._layout.render(function(e){t("#app-page").html(e)}),this._updateHeader(c.ManageTrips,"back:history"),this.changeURL("manage_trips"),n!==undefined&&this.preselectTrips(n)},preselectTrips:function(e){var r;n.each(e,function(e){r="#trip-"+e,t(r).prop("checked",!0)})},onDeleteTrips:function(){f.transition("uninitialized"),f.handle("initialize",{controller:this}),i.subscribe("delete_trip:complete",function(){i.publish("trips:index")})},onCombineTrips:function(){a.transition("uninitialized"),a.handle("initialize",{controller:this}),i.subscribe("combine_trip:complete",function(e){i.publish("trips:select",e)})}});return h}),define("views/session/sign_up_view",["namespace","jquery","underscore","backbone","mediator","helpers","analytics","strings","modules/external_url_viewer","config","views/session/login_view","layoutmanager"],function(e,t,n,r,i,s,o,u,a,f,l){var c=l.extend({events:{"vclick #facebook":"_facebookLogin","submit #sign-up-form":"onSubmit","vclick #return-to-sign-in-link":"onReturnToSignIn","vclick #terms-page":"onTerms"},template:"user/sign_up",initialize:function(){n.bindAll(this),this.model.on("error",function(e,t){i.publish("error:trigger","form_validation",t),this.model.clear({silent:!0})},this),this.on("afterrender",this.popErrors,this),e.isWrapped&&(this.externalURLViewer=new a),this._initFacebookLogin()},serialize:function(){return{}},render:function(e){return e(this).render().then(function(e){s.hideURLBar()})},onSubmit:function(e){e.preventDefault();var n=this.model.set({first_name:t("#firstname").val(),last_name:t("#lastname").val(),email:t("#email").val(),password:t("#password").val(),password_confirmation:t("#passwordconfirm").val(),newsletter_email_status:t("#get-news").is(":checked"),product_updates:t("#get-news").is(":checked")});n!==!1&&i.publish("sign_up:create")},onReturnToSignIn:function(e){e.preventDefault(),i.publish("session:login")},onTerms:function(t){t.preventDefault(),i.publish("terms:show"),o.trackEvent("Terms","SignUp",e)}});return c}),define("views/session/sign_up_confirm_view",["namespace","jquery","underscore","backbone","layoutmanager"],function(e,t,n,r){var i=r.View.extend({events:{"submit #sign-up-confirm-form":"onSubmit"},template:"user/sign_up_confirm",onSubmit:function(e){e.preventDefault(),this.trigger("sign_up_confim:submit")}});return i}),define("controllers/sign_up_controller",["namespace","jquery","underscore","backbone","mediator","controllers/controller","views/session/sign_up_view","models/user","views/session/sign_up_confirm_view","analytics","strings","layoutmanager"],function(e,t,n,r,i,s,o,u,a,f,l){var c=s.extend({initialize:function(){i.subscribe("sign_up:show",this.onShow,this),i.subscribe("sign_up:create",this.onCreate,this)},onShow:function(){this.model=new u,this.view=new o({model:this.model}),this._layout=e.getLayout("simple"),this.setView(this.view),this.changeURL("sign_up"),f.trackEvent("Signup","Start",e)},onCreate:function(){var e=this;this.model.save(null,{success:function(t){if(t.has("error")){var n=t.get("error"),r=[];r.push({fieldName:"email",message:n}),i.publish("error:trigger","form_validation",r),e.model.clear({silent:!0})}else e.confirmUser()}})},confirmUser:function(){var t=new a;t.on("sign_up_confim:submit",function(){i.publish("session:login")}),this._layout=e.getLayout("simple"),this.setView(t),this._updateHeader(l.AlmostThere),f.trackEvent("Signup","Complete",e)}});return c}),define("views/session/forgot_password_view",["namespace","jquery","underscore","backbone","mediator","layoutmanager"],function(e,t,n,r,i){var s=r.View.extend({events:{"submit #forgot-password-form":"onSubmit"},template:"user/forgot_password",initialize:function(){this.model.on("change",function(){this.render()},this),this.model.on("error",function(e,t){i.publish("error:trigger","form_validation",t),this.model.clear({silent:!0})},this)},onSubmit:function(e){e.preventDefault();var n=this.model.set({email:t("#email").val()});n!==!1&&i.publish("forgot_password:edit")}});return s}),define("proxies/forgot_password_proxy",["proxies/proxy"],function(e){var t=e.extend({url:"/mapi/users/forgot_password.json"});return t}),define("models/forgot_password",["jquery","underscore","backbone","models/model","proxies/forgot_password_proxy","helpers","strings"],function(e,t,n,r,i,s,o){var u=r.extend({initialize:function(e,t){this.proxy=new i({},{model:this})},validate:function(e){var n=[];return e.email.length<=0||s.validate.isSpacesOnly(e.email)?n.push({fieldName:"email",message:o.ErrorEmailBlank}):s.validate.isEmailFormat(e.email)||n.push({fieldName:"email",message:o.ErrorEmailInvalid}),t.any(n)?n:null}});return u}),define("views/session/forgot_password_confirm_view",["namespace","jquery","underscore","backbone","layoutmanager"],function(e,t,n,r){var i=r.View.extend({events:{"submit #forgot-password-confirm-form":"onSubmit"},template:"user/forgot_password_confirm",onSubmit:function(e){e.preventDefault(),this.trigger("forgot_password_confim:submit")},serialize:function(){var e=this.model.toJSON();return e}});return i}),define("controllers/forgot_password_controller",["namespace","jquery","underscore","backbone","mediator","controllers/controller","views/session/forgot_password_view","models/forgot_password","views/session/forgot_password_confirm_view","analytics","strings","layoutmanager"],function(e,t,n,r,i,s,o,u,a,f,l){var c=s.extend({initialize:function(){i.subscribe("forgot_password:show",this.onShow,this),i.subscribe("forgot_password:edit",this.onEdit,this)},onShow:function(){this.model=new u,this._layout=e.getLayout("simple"),this.setView(new o({model:this.model})),this.changeURL("forgot_password"),this._updateHeader(l.ForgotPassword,"back:history"),f.trackEvent("ForgotPassword","Start",e)},onEdit:function(){var e=this;this.model.save(null,{success:function(t){t.has("error")?(i.publish("error:trigger","form_validation",[{message:t.get("error")}]),e.model.clear({silent:!0})):e.confirmReset()}})},confirmReset:function(){var t=new r.Model({emailaddr:this.model.get("email")}),n=new a({model:t});this._layout=e.getLayout("simple"),this.setView(n),this._updateHeader(l.ForgotPasswordComplete),n.on("forgot_password_confim:submit",function(){i.publish("session:login")}),f.trackEvent("ForgotPassword","Complete",e)}});return c}),define("presenters/alt_flight_list_presenter",["underscore","helpers","presenters/presenter","strings"],function(e,t,n,r){var i=n.extend({getAirList:function(e){var t={original:this._getOriginalFlightInfo(e),flightInfo:this._getFlightList(e)};return t},_getOriginalFlightInfo:function(e){var t={departure_city:e.originalAirTripItem.getDepartureCity(),departure_airport:e.originalAirTripItem.getDepartureAirportCode(),arrival_city:e.originalAirTripItem.getArrivalCity(),arrival_airport:e.originalAirTripItem.getArrivalAirportCode(),airline_code:e.originalAirTripItem.getAirlineCode(),flight_number:e.originalAirTripItem.getFlightNumber(),scheduled_departure:e.originalAirTripItem.getScheduledDeparture()};return t},_getFlightList:function(e){var t=this,n=[],i;return e.map(function(e){i={},t._isMultiCarrier(e)?(i.airline_code="generic_airline_multi",i.airline=r.MultipleCarriers):(i.airline_code=e.getDepartureAirlineCode(),i.airline=e.getDepartureAirlineName()),i.departure_airport=e.getDepartureAirportCode(),i.scheduled_departure=e.getDepartureTime(),i.arrival_airport=e.getArrivalAirportCode(),i.scheduled_arrival=e.getArrivalTime(),i.number_of_stops=e.getNumberStops(),i.id=e.cid,n.push(i)}),n},_isMultiCarrier:function(e){var t=!1,n=e.flightSegments.first().getAirlineCode();return e.flightSegments.length>1&&e.flightSegments.forEach(function(e){e.getAirlineCode()!==n&&(t=!0)}),t}});return i}),define("views/flights/alt_flights_list_view",["namespace","jquery","underscore","backbone","presenters/alt_flight_list_presenter","mediator","layoutmanager","analytics"],function(e,t,n,r,i,s,o,u){var a=r.View.extend({events:{"click #originalAirline":"onOriginalAir","click #allAirlines":"onAllAir"},template:"trip_items/flight/alt_flight_original",initialize:function(){this.isOriginalAir=!this.collection.isForAllAirlines,this.presenter=new i,this.collection.on("reset",function(){this.render(),this.isOriginalAir===!1&&t("#allAirlines").attr("checked","checked")},this),this.on("afterrender",function(){this.isOriginalAir===!1&&t("#allAirlines").attr("checked","checked")})},onOriginalAir:function(){this.isOriginalAir===!1&&(this.trigger("toggleOriginalAirList"),u.trackEvent("AltFlights","ShowOriginal",e,this.collection.trip.id,this.collection.originalAirTripItem.id),this.isOriginalAir=!0)},onAllAir:function(){this.isOriginalAir===!0&&(this.trigger("toggleAllAirList"),u.trackEvent("AltFlights","ShowAll",e,this.collection.trip.id,this.collection.originalAirTripItem.id),this.isOriginalAir=!1)},serialize:function(){var e=this.presenter.getAirList(this.collection);return e}});return a}),define("proxies/flight_solution_list_proxy",["underscore","proxies/proxy"],function(e,t){var n=t.extend({syncConfig:function(e,t){this.url="/mapi/trips/air_availability.json"},_getAttrs:function(){var e,t=this.collection.originalAirTripItem;return e={departure_date:t.getDepartureDate(),departure_airport:t.getDepartureAirportCode(),departure_city:t.getDepartureCity(),arrival_airport:t.getArrivalAirportCode(),arrival_city:t.getArrivalCity(),mode:"alternate_flights"},!this.collection.isForAllAirlines&&t.has("airline_code")&&(e.airline_code=t.get("airline_code")),t.has("id")&&(e.trip_item_id=t.get("id")),e},toJSON:function(){return this._getAttrs()}});return n}),define("models/airline_detail",["jquery","underscore","backbone","models/model","collections/phone_number_list"],function(e,t,n,r,i){var s=r.extend({initialize:function(e,t){this.phoneNumbers=new i},addPhoneNumbers:function(e){this.phoneNumbers.add(e)},getPhoneNumbers:function(){return this.phoneNumbers.models}});return s}),define("collections/airline_detail_list",["jquery","underscore","collections/collection","models/airline_detail"],function(e,t,n,r){var i=n.extend({model:r});return i}),define("proxies/flight_solution_proxy",["underscore","proxies/air_trip_item_proxy"],function(e,t){var n=t.extend({syncConfig:function(e,t){this._setUrl(e),this.cacheKey="trip_item_"+this.model.get("id"),this.cacheTTL=24,this.invalidationKeys=[this.cacheKey,"trip_"+this.model.getTripId(),"trip_list","session"]},_getAttrsNamespace:function(){return"flights"},_getAttrs:function(){return this._prepareFlightSegments()},_prepareFlightSegments:function(){return this.model.flightSegments.map(function(e){return{flight_number:e.get("flight_number"),departure_airport:e.getDepartureAirportCode(),arrival_airport:e.getArrivalAirportCode(),airline_code:e.get("airline_code"),departure_date:e.get("departure_date")}})}});return n}),define("models/flight_solution",["jquery","underscore","backbone","models/model","proxies/flight_solution_proxy"],function(e,t,n,r,i){var s=r.extend({initialize:function(e,t){this.trip=t.trip,this.proxy=new i({},{model:this})},isNonStop:function(){return this.getNumberStops()===0},hasOnlyOneStop:function(){return this.getNumberStops()===1},getNumberStops:function(){var e=this;return this.numStops?this.numStops:(this.numStops=this.getNumberConnections(),this.flightSegments.each(function(t){e.numStops+=t.get("stops")}),this.numStops)},hasNoConnections:function(){return this.flightSegments.size()===1},hasMultipleConnections:function(){return this.getNumberConnections()>1},getNumberConnections:function(){return this.flightSegments.size()-1},getDepartureAirlineCode:function(){var e=this.flightSegments.first();return e.get("airline_code")},getDepartureAirlineName:function(){var e=this.flightSegments.first();return e.get("airline_name")},getDepartureFlightNumber:function(){var e=this.flightSegments.first();return e.get("flight_number")},getDepartureAirportCode:function(){var e=this.flightSegments.first(),t=e.getStartLocation();return t.get("airport_code")},getDepartureDate:function(){var e=this.flightSegments.first();return e.get("departure_date")},getDepartureTime:function(){var e=this.flightSegments.first();return e.get("departure_date")},getArrivalTime:function(){var e=this.flightSegments.last();return e.get("arrival_date")},getArrivalAirportCode:function(){var e=this.flightSegments.last(),t=e.getEndLocation();return t.get("airport_code")},getFlightSummary:function(){if(this.hasMultipleConnections())return"Multiple Connections";var e="{numberStops} {stops}".supplant({numberStops:this.getNumberStops(),stops:this.hasOnlyOneStop()?"stop":"stops"}),n=t.compact(this.flightSegments.map(function(e){if(e.hasPlaneChange())return e.getArrivalAirportCode()}));if(this.getNumberConnections()===1){var r=t.any(n)?", change planes at "+n.join(", "):"";return e+r}return this.getNumberStops()>0?e+", no plane change":"Nonstop"},isSoldOut:function(){return this.flightSegments.any(function(e){return e.isSoldOut()})},hasNoCabinAvailabilityData:function(){return this.flightSegments.detect(function(e){return!e.hasCabinAvailabilityData()})},getAvailabilitySummary:function(){if(this.hasNoCabinAvailabilityData())return"Seat availability is unknown";if(this.isSoldOut())return"Sold Out";if(this.getNumberConnections>0)return"Seats Available (see details)";var e=this.flightSegments.first(),n=e.getAvailableCabins(),r=t.map(n,function(e){return e.get("name").capitalize()});return"Seats Available ({cabins})".supplant({cabins:r.join(", ")})},getTrip:function(){return this.trip},getTripId:function(){return this.trip.get("id")}});return s}),define("models/cabin_availability",["jquery","underscore","backbone","models/model","moment"],function(e,t,n,r){var i=r.extend({getName:function(){return this.get("name")},getAvailability:function(){var e=this.get("available");return e&&parseInt(e,10)||0},isAvailable:function(){return this.getAvailability()>0}});return i}),define("collections/cabin_availablity_list",["jquery","underscore","collections/collection","models/cabin_availability"],function(e,t,n,r){var i=n.extend({model:r});return i}),define("parsers/flight_solution_parser",["backbone","underscore","collections/airline_detail_list","models/airline_detail","models/flight_solution","collections/trip_item_list","collections/cabin_availablity_list","models/air_trip_item","models/cabin_availability","parsers/location_parser","models/location","collections/phone_number_list"],function(e,t,n,r,i,s,o,u,a,f,l,c){return{parse:function(e){return this.parseFlightScheduleRequest(e)},parseFlightScheduleRequest:function(e){return this.airlineDetails=this.parseAirlineDetails(e.airline_details),this.flightSolutions=this.parseFlightSolutions(e.flight_solutions),this.attributes},parseAirlineDetails:function(e){var i=this,s=new n,o=t.map(e,function(e){var t=new r;return i.parseAirlineDetail(t,e),t});return s.add(o,{silent:!0}),s},parseAirlineDetail:function(e,t){var n={};n.name=t.name,n.iata_code=t.iata_code;var r=this.parsePhoneNumbers(t.phones);e.addPhoneNumbers(r),e.set(n,{silent:!0})},parseFlightSolutions:function(n){var r=this,s=new e.Collection(null,{model:i}),o=t.map(n,function(e){var t=new i({},{trip:r.trip});return r.parseFlightSolution(t,e),t});return s.add(o,{silent:!0}),s},parseFlightSolution:function(e,t){e.flightSegments=this.parseFlightSegments(t.flight_segments)},parseFlightSegments:function(e){var n=this,r=new s,i=t.map(e,function(e){var t=new u;return n.parseFlightSegment(t,e),t}),o=t.last(i);return o.set({last_segment:!0},{silent:!0}),r.add(i,{silent:!0}),r},parseFlightSegment:function(e,t){var n={};n.flight_number=t.flight_number,n.departure_date=t.scheduled_departure,n.arrival_date=t.scheduled_arrival,n.airline_code=t.airline.iata_code,n.airline_name=t.airline.name,n.stops=parseInt(t.stop_quantity,10),e.cabinAvailabilities=this.parseCabinAvailabilities(t.cabin_availability);var r=this.parseAirport(t.departure_airport);e.setStartLocation(r);var i=this.parseAirport(t.arrival_airport);e.setEndLocation(i);var s=this.getPhoneNumbersForAirlineCode(n.airline_code);e.addPhoneNumbers(s),e.set(n,{silent:!0})},parseCabinAvailabilities:function(e){var n=this,r=new o,i=t.map(e,function(e){var t=n.parseCabinAvailability(e);return new a(t)});return r.add(i,{silent:!0}),r},parseCabinAvailability:function(e){var t={};return t.name=e.name,t.available=parseInt(e.available,16),t},parseAirport:function(e){var t={name:e.name,closest_airport:{iata_code:e.iata_code},geo_code:{latitude:e.latitude,longitude:e.longitude},city:e.city};return this.parseLocation(t)},parseLocation:function(e,t){var n=f.parseLocation(e,t);return new l(n,{silent:!0})},getPhoneNumbersForAirlineCode:function(e){var t=this.airlineDetails.detect(function(t){return t.get("iata_code")===e});return t.getPhoneNumbers()},parsePhoneNumbers:function(e){var n=t.map(e,function(e){return new c.prototype.model({type:e.type,number:e.number})});return n}}}),define("collections/flight_solution_list",["jquery","underscore","collections/collection","proxies/flight_solution_list_proxy","parsers/flight_solution_parser","models/flight_solution"],function(e,t,n,r,i,s){var o=n.extend({initialize:function(e,t){this.originalAirTripItem=t.air_trip_item,this.trip=t.trip,this.isForAllAirlines=t.all_airlines,this.proxy=new r({},{collection:this})},parse:function(e,n){var r=new this.model;return t.extend(r,i),r.trip=this.trip,r.parse(e),this.airlineDetails=r.airlineDetails,r.flightSolutions.models}});return o}),define("views/flights/flight_schedule_list_view",["namespace","jquery","underscore","backbone","presenters/alt_flight_list_presenter","mediator","layoutmanager","analytics"],function(e,t,n,r,i,s,o,u){var a=r.View.extend({events:{"click #flightList > li":"onFlight"},template:"trip_items/flight/flight_schedule_list",initialize:function(){this.presenter=new i,this.collection.on("reset",function(){this.render(),this._emptyMessage()},this),this.on("afterrender",function(){this.collection.isFetched?this._emptyMessage():t("#empty-flights-message").hide()})},_emptyMessage:function(){var e=t("#empty-flights-message");this.collection.isEmpty()?e.show():e.hide()},serialize:function(){var e=this.presenter.getAirList(this.collection);return e},onFlight:function(n){var r=t(n.currentTarget).data("id"),i=this.collection.getByCid(r);this.trigger("select_flight",i),u.trackEvent("AltFlights","SelectFlight",e,this.collection.trip.id,this.collection.originalAirTripItem.id)}});return a}),define("views/flights/alt_flights_detail_view",["config","namespace","jquery","underscore","backbone","trips_manager","mediator","analytics","presenters/trip_item/trip_item_presenter"],function(e,t,n,r,i,s,o,u,a){var f=i.View.extend({initialize:function(){},template:"trip_items/flight/alt_flight_details",events:{"vclick .small.call":"onPhonePick","vclick button.submit":"onAddToTrip"},onPhonePick:function(e){e.preventDefault();var n=this.model.flightSegments.at(this._getSelectedIndex(e));o.publish("phone_numbers:showPhoneNumbers",n),u.trackEvent("AltFlights","Phone",t,this.model.getTripId())},onAddToTrip:function(e){var n=this;this.model.save(null,{cache_mode:this.model.proxy.CACHE_MODE_DEFER,context:e.currentTarget,beforeSend:function(){this.setAttribute("disabled","disabled")},complete:function(){this.removeAttribute("disabled")},success:function(e,t){s.getCurrentTrip().parseTrip(t),n.trigger("success")}}),u.trackEvent("AltFlights","AddToTrip",t,this.model.id)},_getSelectedIndex:function(e){return n(e.currentTarget).data("index")-1},serialize:function(){var e,t,n=this.model.flightSegments.map(function(e){var t=e.toJSON();return t.arrival_airport=e.getArrivalAirportCode(),t.departure_airport=e.getDepartureAirportCode(),t.arrival_city=e.getArrivalCity(),t.departure_city=e.getDepartureCity(),t.seats_available=e.getAvailabilitySummary(),t});return t=this.model.numStops,e={number_of_stops:t,start_date:this.model.getDepartureDate(),end_date:this.model.getArrivalTime(),flight_segments:n,isFollowingTrip:s.getCurrentTrip().isFollowing()},e}});return f}),define("views/flights/flight_list_empty_view",["namespace","jquery","underscore","backbone","mediator","layoutmanager"],function(e,t,n,r){var i=r.View.extend({template:"trip_items/flight/flight_schedule_list",serialize:function(){var e={allPastFlights:!0};return e}});return i}),define("workflows/altflights_workflow",["namespace","jquery","underscore","machina","mediator","backbone","strings","views/flights/alt_flights_list_view","views/flights/flight_list_view","collections/flight_solution_list","views/flights/flight_schedule_list_view","views/flights/alt_flights_detail_view","views/flights/flight_list_empty_view","helpers","trips_manager"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){var v=new r.Fsm({initialState:"uninitialized",name:"altflights",states:{uninitialized:{initialize:function(e){var t=d.getCurrentTrip().airTripItems();this.controller=e.controller,this._flightScheduleInitVars(),e.config&&e.config.collection&&e.config.collection.models.length>1?(this.collection=e.config.collection,this.transition("showFlightGroupFlights")):e.config&&e.config.itemId?(this.tripItemId=e.config.itemId,this.isFromTrip=!0,this.transition("showAltFlights")):t&&t.length===1?(this.tripItemId=t.first().id,this.isFromTrip=!0,this.transition("showAltFlights")):(this.tripItemId=undefined,this.isFromTrip=!1,this.transition("showTripFlights"))}},showFlightGroupFlights:{_onEnter:function(){var t=this;this.view=new a({collection:this.collection}),this.view.on("select_flight",function(e){t.tripItemId=e,t.previousState="showFlightGroupFlights",t.transition("showAltFlights")}),this.controller._layout=e.getLayout("simple_with_loading"),this.controller.setView(this.view),this._headerFlightGroup(this.collection)},back:function(){this.transition("uninitialized"),i.publish("back:history")}},showTripFlights:{_onEnter:function(){var t=this;this.airItemsCollection=d.getCurrentTrip().airTripItems({filter:function(e){return!e.isPast()}}),this.airItemsCollection.length===0?this.view=new h:(this.view=new a({collection:this.airItemsCollection}),this.view.on("select_flight",function(e){t.tripItemId=e,t.previousState="showTripFlights",t.transition("showAltFlights")})),this.controller._layout=e.getLayout("simple_with_loading"),this.controller.setView(this.view),this._headerTripFlights()},back:function(){this.transition("uninitialized"),i.publish("back:history")}},showAltFlights:{_onEnter:function(){var n=this,r,i;this._curTripItemIsPast()?(this.view=new h,this.controller._layout=e.getLayout("simple_with_loading"),this.controller.setView(this.view),this._headerAltFlights()):(this.flightSchedCollection===undefined&&(this.schedOriginalAirlineCollection=this._flightScheduleGet(!1),this.flightSchedCollection=this.schedOriginalAirlineCollection),r=new u({collection:this.flightSchedCollection}),i=new l({collection:this.flightSchedCollection}),i.on("select_flight",function(e){n.selectedAltFlight=e,n.transition("showFlightDetails")}),this.controller._layout=e.getLayout("alt_flights"),this.controller._layout.setViews({"#original":r,"#schedule":i},!0),this.controller._layout.render(function(e){t("#app-page").html(e)}).then(function(){p.hideURLBar(),r.trigger("afterrender"),i.trigger("afterrender")}),this._headerAltFlights(),this.controller.changeURL("trips/"+d.getCurrentTripId()+"/alt_flights/"+this.tripItemId,{replace:!0}),r.on("toggleOriginalAirList",function(){i=n._flightScheduleShow(n.schedOriginalAirlineCollection)}),r.on("toggleAllAirList",function(){n.schedAllAirlineCollection===undefined&&(n.schedAllAirlineCollection=n._flightScheduleGet(!0)),i=n._flightScheduleShow(n.schedAllAirlineCollection)}))},back:function(){this.isFromTrip?(this.transition("uninitialized"),i.publish("back:history")):(this._flightScheduleInitVars(),this.transition(this.previousState))}},showFlightDetails:{_onEnter:function(){var t=this,n=new c({model:this.selectedAltFlight});this.controller._layout=e.getLayout("simple"),this.controller.setView(n),this._headerFlightDetails(),n.on("success",function(){t.transition("complete")})},back:function(){this.transition("showAltFlights")}},complete:{_onEnter:function(){i.publish("trip_items:index",{tripId:d.getCurrentTripId()}),this.transition("uninitialized")}}},_flightScheduleInitVars:function(){this.flightSchedCollection=undefined,this.schedOriginalAirlineCollection=undefined,this.schedAllAirlineCollection=undefined,this.airItemsCollection=undefined},_curTripItemIsPast:function(){var e=d.getCurrentTrip(),t=e.getTripItem(this.tripItemId);return t.isPast()},_flightScheduleGet:function(e){var t=d.getCurrentTrip(),n=t.getTripItem(this.tripItemId),r;return r=new f(null,{all_airlines:e,air_trip_item:n,trip:t}),r.on("error",this._flightScheduleErrorHandler),r.fetch({success:function(){r.isFetched=!0}}),r},_flightScheduleErrorHandler:function(e,t){t=n.isArray(t)?t:n.isObject(t)?[{message:t.responseText}]:[{message:t}],i.publish("error:trigger","form_validation",t)},_flightScheduleShow:function(e){var t,n=this;return this.flightSchedCollection=e,t=new l({collection:this.flightSchedCollection}),t.on("select_flight",function(e){n.selectedAltFlight=e,n.transition("showFlightDetails")}),this.controller._layout.setViews({"#schedule":t},!0),t.render().then(function(){p.hideURLBar(),t.trigger("afterrender")}),t},_headerTripFlights:function(){this.controller._updateHeader(o.SelectFlight,"altflights:back")},_headerAltFlights:function(){this.controller._updateHeader(o.AltFlights,"altflights:back")},_headerFlightDetails:function(){var e=d.getCurrentTrip(),t=e.getTripItem(this.tripItemId),n=t.getDepartureAirportCode()+' <span class="general-icon icon_flight_detail_hdr_arrow"></span> '+t.getArrivalAirportCode(),r=t.getDepartureCity()+" "+o.To+" "+t.getArrivalCity();this.controller._updateHeader(n,"altflights:back",{subtitle:r})},_headerFlightGroup:function(e){var t=e.first(),n=t.startLocation.getAirportCode(),r=t.getDepartureCity(),i=e.last(),s=i.endLocation.getAirportCode(),u=i.getArrivalCity(),a=n+' <span class="general-icon icon_flight_detail_hdr_arrow"></span> '+s,f=r+" "+o.To+" "+u;this.controller._updateHeader(a,"back:history",{subtitle:f})}});return i.subscribe("altflights:back",function(){v.handle("back")}),v}),define("controllers/altflights_controller",["namespace","jquery","underscore","backbone","mediator","controllers/controller","strings","analytics","layoutmanager","workflows/altflights_workflow"],function(e,t,n,r,i,s,o,u,a,f){var l=s.extend({initialize:function(){n.bindAll(this),i.subscribe("altflights:show",this.onShow,this),i.subscribe("altflights:showdetails",this.onShowDetails,this)},onShow:function(t){f.transition("uninitialized"),f.handle("initialize",{controller:this,config:t}),u.trackEvent("AltFlights","Show",e)},onShowDetails:function(e){f.transition("showFlightDetails")}});return l}),define("controllers/push_controller",["controllers/controller","config","underscore","mediator","namespace","jquery"],function(e,t,n,r,i,s){var o=e.extend({initialize:function(){var e=this;n.bindAll(this),r.subscribe("session:success",function(){setTimeout(e.registerDevice,3e3)})},registerDevice:function(){var e=t.platforms[device.platform];if(e){var n=window.plugins.pushNotification;console.log("registering"),n.registerDevice(e.registerDeviceParams,this.registerDeviceSuccess,this.registerDeviceFail)}},registerDeviceSuccess:function(e){this.registerDeviceWithTripCase(e)},registerDeviceFail:function(e){console.warn("failed to register :%o",e)},registerDeviceWithTripCase:function(e){var n=t.platforms[device.platform];if(n)try{var r={device_token:e.deviceToken||e,device_type:n.deviceType,device_userId:i.user&&i.user.id,deviceName:device.model,deviceCordova:device.cordova,device_platform:device.platform,device_hwid:device.uuid,deviceVersion:device.version,pushAppId:n.appId,pushAppName:n.appName};if(!r.device_token||!r.device_hwid||!r.device_type||!r.device_userId||!r.device_type)throw"A required push registration param is empty.";var o="https://"+t.apiHost+"/mapi/sessions/register_device";console.log("posting to tripcase:"+o),console.log("req: "+JSON.stringify(r)),s.post(o,r,function(e){console.log("Resp from call: "+e)})}catch(u){console.log("Error: "+u)}}});return o}),define("proxies/terms_proxy",["proxies/proxy"],function(e){var t=e.extend({url:"/mapi/users/accept_terms.json"});return t}),define("models/terms",["models/model","proxies/terms_proxy"],function(e,t){var n=e.extend({initialize:function(e,n){this.proxy=new t({},{model:this})},accept:function(e){var t={success:e,error:e};this.save(null,t)}});return n}),define("text!templates/user/_terms.tmpl",[],function(){return'<h2>User Agreement</h2>\n<p>Last modified: March 18, 2014</p>\n<p><strong>This User Agreement ("Agreement") is between You and Sabre GLBL Inc. ("Company") for use of TripCase (the “Service”).</strong></p>\n<p><strong>YOU SHOULD READ CAREFULLY AND UNDERSTAND THIS AGREEMENT. YOUR USE OF THE SERVICE AND/OR REGISTRATION AND VERIFICATION OF YOUR ACCOUNT FOR USE OF THE SERVICES, CONSTITUTES YOUR ONGOING ACCEPTANCE OF THIS AGREEMENT IN YOUR BEHALF AND IN BEHALF OF ANY OF YOUR EMPLOYEES AND AGENTS TO WHOM YOU PROVIDE THE SERVICE. YOU ARE SOLELY RESPONSIBLE AND LIABLE FOR YOUR NON-COMPLIANCE AND THE NON-COMPLIANCE OF YOUR EMPLOYEES OR AGENTS WITH THIS AGREEMENT.YOU FURTHER REPRESENT THAT YOU ARE AUTHORIZED TO ACCEPT THESE TERMS AND CONDITIONS. IF YOU CANNOT ACCEPT THIS AGREEMENT, PLEASE DO NOT USE THE SERVICE.</strong></p>\n<ol class="decimal">\n	<li><strong>Service.</strong> TripCase is a trip-related information and messaging service, available from the Company either online through our website at www.tripcase.com or via mobile application. The Service provide users with the ability to store trip-related information into one location, share that information, and receive updates, services and offers related to their trips.  Company has no obligation to provide support, maintenance, upgrades, modifications or new releases to the Service under this Agreement.</li>\n	<li>\n		<strong>Use of Service</strong>\n		<ol class="alpha">\n			<li>Company grants You a limited right to use the Service for personal, noncommercial and lawful purposes only.</li>\n			<li>Restrictions. Except as expressly authorized by Company in writing or otherwise enabled by Company:\n			<ol class="roman">\n				<li>You will not access the Service in a manner or through an interface not provided or authorized by Company including but not limited to, any automated means (e.g., scripts or bots);</li>\n				<li>You will not copy, reproduce, duplicate sell, trace, resell or exploit the Service;</li>\n				<li>You will not reverse engineer, disassemble or decompile any portion of the Service or its software, except to the extent expressly permitted by applicable law, and then only after You have notified Company in writing of Your intended activities;</li>\n				<li>You will  not upload, transmit, post or otherwise share any content that violates or infringes upon the rights of any third party, including, without limitation, copyright, trademark, privacy, publicity or other personal or proprietary rights;</li>\n				<li>You will not modify, adapt or hack the Service or modify a website so as to falsely imply that it is associated with the Services. You will not create or submit unwanted email or other messages to any other Service users;</li>\n				<li>You will not transmit any worms or viruses or any code of a destructive nature through Your access or use of the Service;</li>\n				<li>You will not use the Service to upload, post, transmit, share, store or otherwise make available any content that we deem to be harmful, threatening, unlawful, defamatory, infringing, abusive, inflammatory, harassing, vulgar, obscene, fraudulent, invasive of privacy or publicity rights, hateful, or racially, ethnically or otherwise objectionable.;</li>\n				<li>You will not use the Service to upload, post, transmit, share or otherwise make available any unsolicited or unauthorized advertising, solicitations, promotional materials, "junk mail," "spam," "chain letters," "pyramid schemes," or any other form of solicitation;</li>\n				<li>You will not republish or syndicate the information available on the Service (including but not limited to information made accessible to non-paying users via any portion of the Service provided on a paid subscription basis);</li>\n				<li>You will not disrupt, overwhelm, attack, modify or interfere with the Service or its associated software, hardware and/or servers in any way, and You agree not to impede or interfere with others\' use of the Service;</li>\n				<li>You will not alter or tamper with any information or materials on or associated with the Service. Other than connecting to Company’s servers by http requests using a Web browser, You may not attempt to gain access to Company’s servers by any means - including, without limitation, by using administrator passwords or by masquerading as an administrator while using the Service or otherwise.</li>\n			</ol>\n		</li>\n		<li>You are solely responsible for up to date contact information to receive information from the Service.  Company will not be liable for information sent to a device that is associated with Your outdated mobile phone number or email address.  If You install any software or enable any service that stores information from the Service on any mobile device or computer, it is Your responsibility, prior to transfer of such device, to remove Your information or otherwise disable access to such software or service, in order to prevent unauthorized access to Your information or account.  Company reserves the right to provide You with information relating to Your trip and/or use of the Service, including emergency matters and messages from our suppliers regarding their respective services.</li>\n		<li>You are solely responsible for any activity and content (including, without limitation, data, text, information, screen names, graphics, photos, profiles, audio and video clips, and links to third-party content) that is displayed, published, uploaded or posted through Your user account (collectively, "User Content").  If You have reason to believe that Your account is no longer secure (e.g., loss, theft or unauthorized disclosure or use of Your access information or computer or mobile device used to access the Service), You are responsible for changing the affected access information.</li>\n		<li>You acknowledge that Company has not reviewed and does not endorse the content of all sites linked to from this Service and is not responsible for the content or actions of any other sites linked to or from this Service, including but not limited to your authentication via a third party social networking site such as Facebook, Google +, or Linked In, and Your use of such sites via the Service. Your linking to any other service or site is at Your sole risk. By linking this Service to another service or site, You expressly agree to the disclosure of User Content permitted by or required to support such linking.</li>\n		<li>In order for You to access travel itinerary and related data, You authorize Company to obtain such data on Your behalf and You represent that You have the right to control and access the data which You request and access through the Service.</li>\n		<li>In order for You to receive information, including advertisements, regarding additional products or services originating from Company or third parties, You authorize Company to send You promotional e-mails, messages, and offers through the Service.  You acknowledge that Company is not responsible for the content of such advertisements, e-mails, messages and offers.</li>\n	</ol>\n</li>\n<li>\n	<strong>Intellectual Property and Data</strong>\n	<ol class="alpha">\n		<li>Company retains all rights and ownership to copyright, trademark, trade secret and any other intellectual property rights in the Service and any derivative works thereof.  All content of the Service (except User Content as defined below), including but not limited to designs, text, graphics, pictures, video, information, applications, software, music, sound and other files, their selection and arrangement, and its “look and feel” (the "Service Content"), are the proprietary property of Company or its licensors with all rights reserved.  No Service Content may be modified, copied, distributed, framed, reproduced, republished, downloaded, displayed, posted, transmitted, or sold in any form or by any means, in whole or in part, without Vendor’s prior written permission. You do not acquire any rights in the Service or the Service Content, other than those rights expressly granted under this Agreement.</li>\n		<li>We do not assert ownership of the photos, profiles, (Your User Content.)  When You post User Content, You authorize and direct us to disclose User Content as necessary to provide the Service and make such copies thereof as we deem necessary in order to facilitate transmission, posting and storage of the User Content on the Services. By posting User Content, in connection with any part of the Service, You automatically grant and You represent and warrant that You have a right to grant to Company, and all other users an irrevocable, perpetual, non-exclusive, transferable, fully paid, worldwide license (with right to freely sublicense) to use, copy, modify, publicly perform, publicly display, reformat, translate, syndicate, republish, excerpt (in whole or in part) and distribute such User Content for any purpose, commercial, advertising or otherwise, on or in connection with the Service or the promotion thereof, and to prepare derivative works of, or incorporate into other works such User Content.  You may remove Your User Content from the Service at any time, but You acknowledge that Company may not be able to and has no obligation to restrict any use by any other person, including other users, and the license You have granted remains in effect.  The use of User Content by Company is subject to applicable laws and Vendor\'s data privacy policy available at travel.tripcase.com/privacy or its successor site.</li>\n		<li>If You provide Company with feedback, suggestions, testimonials, comments, ideas, ratings, reviews, bug reports, or any similar or related information ("Feedback"), You agree that (a) any and all right, title and interest to such Feedback will  become the exclusive property of Company, (b) Company will be able to use and share such Feedback without Your consent, only if Company does not use Your first and last name (c) If You give prior consent, Company will be able to use and share such Feedback, while including Your first and last name (d) Company will not be responsible for providing You with any compensation whatsoever regarding the Feedback, and (e) Company may already have contemplated or be contemplating the same or similar ideas as Your Feedback. If You do not agree with these terms regarding Feedback, or want to maintain ownership of any intellectual property contained in any specific Feedback, Your sole option and recourse is to not submit such specific Feedback to Company.</li>\n		<li><strong>We respect the intellectual property rights of others and we prohibit users from uploading, posting or otherwise transmitting on the Company/TripCase website or Service, any materials that violate another party\'s intellectual property rights. The Digital Millennium Copyright Act of 1998 (as amended, the "DMCA") provides recourse for copyright owners who believe that material appearing on the Internet infringes their rights under U.S. copyright law.  If You believe in good faith that materials hosted by Company infringe Your copyright, You may send us a notice requesting that the material be removed, or access to it blocked. Notices must meet the current statutory requirements imposed by the DMCA; see 17 U.S.C 512 for details. Notices with respect to the Site should be sent to Sabre GLBL Inc., 3150 Sabre Drive, Southlake, TX 76092, Attn: General Counsel. You should consult Your legal advisor before filing a notice.  Note, there can be penalties for false claims under the DMCA</strong>.</li>\n	</ol>\n</li>\n<li>\n	<strong>Fees and Optional Services</strong>\n	<ol class="alpha">\n		<li>The basic Service is provided to You at no additional charge from Company. You are solely responsible for any fees or charges incurred to access the Service through an Internet access provider or other third party, including without limitation charges incurred to receive SMS messages or other mobile access, which may be billed to You or deducted from Your prepaid balance by Your mobile provider. You agree that Company is not liable in any way for any third party charges. Company reserves the right to offer these Service and other services (Optional Service(s)) for a subscription or other fee. Any use of Optional Services will be governed by these terms and any additional terms specific to the applicable Optional Service(s) used by You.</li>\n		<li>Unless Company states in writing otherwise, all fees and charges for the Service are nonrefundable.</li>\n	</ol>\n</li>\n<li>\n	<strong>Disclaimers and Limitation of Liability</strong>\n	<ol class="alpha">\n		<li><strong>COMPANY MAKES NO REPRESENTATIONS OR WARRANTIES, EITHER EXPRESS OR IMPLIED, OF ANY KIND WITH RESPECT TO THE SERVICES, INCLUDING BUT NOT LIMITED TO THE ACCURACY OR COMPLETENESS OF ANY INFORMATION CONTAINED THEREIN OR PROVIDED BY OR THROUGH THE SERVICE.. THE SERVICE IS  PROVIDED "AS IS" WITH NO WARRANTY. YOU AGREE THAT YOUR USE OF THE SERVICE IS AT YOUR SOLE RISK. TO THE FULLEST EXTENT PERMISSIBLE UNDER APPLICABLE LAW, VENDOR EXPRESSLY DISCLAIMS ALL WARRANTIES OF ANY KIND, EXPRESS OR IMPLIED, WITH RESPECT TO THE SERVICES, INCLUDING WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, SATISFACTORY QUALITY, ACCURACY, TITLE AND NON-INFRINGEMENT, AND ANY WARRANTIES THAT MAY ARISE OUT OF COURSE OF PERFORMANCE, COURSE OF DEALING OR USAGE OF TRADE. COMPANY DOES NOT WARRANT THAT THE SERVICE WILL OPERATE IN COMBINATION WITH HARDWARE, SOFTWARE, SYSTEMS OR DATA NOT PROVIDED BY COMPANY OR THAT THE OPERATION OF THE SERVICE WILL BE UNINTERRUPTED OR FREE OF VIRUSES OR ERRORS.</strong></li>\n		<li><strong>THE SERVICE INCLUDES INFORMATION PROVIDED FROM A VARIETY OF SOURCES AND THIRD PARTIES. THE PROVIDERS OF SUCH INFORMATION AND/OR OTHER SERVICES ON TRIPCASE ARE INDEPENDENT CONTRACTORS AND NOT AGENTS OR EMPLOYEES OF COMPANY OR ITS AFFILIATES. COMPANY’S DISPLAY OF SUCH INFORMATION DOES NOT IN ANY WAY IMPLY, SUGGEST, OR CONSTITUTE ANY SPONSORSHIP OR APPROVAL BY COMPANY OF SUCH INFORMATION OR ITS PROVIDERS. YOU AGREE THAT COMPANY IS IN NO WAY RESPONSIBLE FOR THE ACCURACY, TIMELINESS, OR COMPLETENESS OF INFORMATION IT MAY OBTAIN FROM THESE THIRD PARTY SOURCES. YOUR INTERACTION WITH SUCH PROVIDERS IS AT YOUR OWN RISK. COMPANY AND ITS AFFILIATES WILL HAVE NO LIABILITY FOR THE ACTS, ERRORS, OMISSIONS, REPRESENTATIONS, WARRANTIES, BREACHES OR NEGLIGENCE OF ANY SUCH PROVIDERS OR FOR ANY PERSONAL INJURIES, DEATH, PROPERTY DAMAGE, OR OTHER DAMAGES OR EXPENSES RESULTING THEREFROM. COMPANY AND ITS AFFILIATES HAVE NO LIABILITY AND WILL MAKE NO REFUND IN THE EVENT OF ANY DELAY, CANCELLATION, OVERBOOKING, STRIKE, FORCE MAJEURE, OR OTHER CAUSES BEYOND OUR DIRECT CONTROL.</strong></li>\n		<li><strong>Limitation of Liability. IN NO EVENT WILL EITHER PARTY BE LIABLE FOR ANY INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL OR PUNITIVE DAMAGES, OR DAMAGES FOR LOSS OF PROFITS, REVENUE, BUSINESS, SAVINGS, DATA, USE OR COST OF SUBSTITUTE PROCUREMENT, INCURRED BY EITHER PARTY OR ANY THIRD PARTY, WHETHER IN AN ACTION IN CONTRACT OR TORT, EVEN IF THE OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES OR IF SUCH DAMAGES ARE FORESEEABLE. IN NO EVENT WILL COMPANY\'S LIABILITY FOR DAMAGES HEREUNDER EXCEED THE LESSER OF (I) AMOUNTS ACTUALLY PAID BY YOU TO COMPANY FOR THE SERVICE OR US$500. THE PARTIES ACKNOWLEDGE THAT THE LIMITATIONS OF LIABILITY IN THIS SECTION AND IN THE OTHER PROVISIONS OF THIS AGREEMENT AND THE ALLOCATION OF RISK HEREIN ARE AN ESSENTIAL ELEMENT OF THIS TRANSACTION BETWEEN THE PARTIES, WITHOUT WHICH COMPANY WOULD NOT HAVE ENTERED INTO THIS AGREEMENT. COMPANY’S PRICING REFLECTS THIS ALLOCATION OF RISK AND THE LIMITATION OF LIABILITY SPECIFIED HEREIN. SOME STATES/COUNTRIES DO NOT ALLOW THE EXCLUSION OR LIMITATION OF INCIDENTAL OR CONSEQUENTIAL DAMAGES, SO THE ABOVE LIMITATIONS AND/OR EXCLUSION OR LIMITATION OF LIABILITY MAY NOT APPLY TO YOU.</strong></li>\n	</ol>\n</li>\n<li><strong>Termination.</strong> This Agreement is effective until terminated by You or Company. Company may terminate this Agreement at any time upon (i) Your breach of any of the provisions hereof or (ii) upon electronic notice to You. Upon termination of this Agreement, You will cease all use of the Service.</li>\n<li>\n	<strong>General Terms</strong>\n	<ol class="alpha">\n		<li><strong>Applicable Law.</strong> This Agreement and all matters arising out of or relating thereto, except as governed by federal law, will be governed by the laws of the State of Texas without giving effect to any choice of law rule. This Agreement will not be governed by the United Nations Convention on Contracts for the International Sales of Goods, the application of which is expressly excluded. Any controversy, claim or dispute between the parties arising out of this Agreement may be tried solely in a state or federal court for Tarrant County, Texas, and the parties hereby irrevocably consent to the jurisdiction and venue of such courts.  Before resorting to this alternative, we strongly encourage You to first contact us directly to seek a resolution.</li>\n		<li><strong>Severability and Waiver.</strong> If any provision of this Agreement is held to be unenforceable, such provision will be enforced to the extent possible consistent with the stated intention of the parties, or, if incapable of such enforcement, will be deemed to be severed and deleted from this Agreement, while the remainder of this Agreement will continue in full force and effect. The waiver by either party of any default or breach of this Agreement will not constitute a waiver of any other or subsequent default or breach.</li>\n		<li><strong>No Assignment.</strong> You may not assign or otherwise dispose of this Agreement or any rights or obligations under this Agreement without the prior written consent of Vendor. Any purported assignment by You will be null and void. Subject to the foregoing, this Agreement will be binding upon and will inure to the benefit of the parties and their respective successors and assigns.</li>\n		<li><strong>Export Administration.</strong> You will comply fully with all relevant export laws and regulations of the United States, including, without limitation, the U.S. Export Administration Regulations (collectively "Export Controls"). Without limiting the generality of the foregoing, You will not, and You will require Your representatives not to, export, direct or transfer the Program, or any direct product thereof, to any destination, person or entity restricted or prohibited by the Export Controls.</li>\n		<li><strong>Entire Agreement.</strong> This Agreement constitutes the entire agreement between the parties and supersedes all prior or contemporaneous agreements or representations, written or oral, concerning the subject matter of this Agreement.</li>\n		<li><strong>Right to Modify.</strong>  Company reserves the right to modify or replace this Agreement at any time and in Company’s sole discretion. Company will indicate at the top of this Agreement the date such document was last updated. Any changes will be effective immediately upon posting the revised version (or such later effective date as may be indicated at the top of the revised Agreement). It is Your responsibility to regularly check the TripCase.com website to determine if there have been changes to this Agreement and to review such changes. Your continued use of the Service following the posting of any changes to the Agreement will mean Your acceptance of any such changes. If You do not agree to the changes, You must stop using the Service.</li>\n	</ol>\n</li>\n</ol>'}),define("text!templates/user/_privacy.tmpl",[],function(){return'<h2>TripCase Privacy Statement</h2>\n<p>Last modified: April 23, 2014</p>\n<p>TripCase (the "<strong>Service</strong>") is a trip-related information and messaging service, available from Sabre GLBL Inc. (the “<strong>Company</strong>”), either online through our website at www.tripcase.com or via our mobile application.  TripCase provides users with the ability to integrate all of their trip-related information into one location, share information regarding their trips, and receive valuable informational updates and deals related to their trips.</p>\n\n<h3>Introduction</h3>\n<p>We respect your privacy and are committed to protecting it. Please take a moment to familiarize yourself with our privacy practices. By accessing the Service, you agree to our privacy practices as set out in this privacy statement.</p>\n<p>This statement describes the information that the Service collects and how that information may be used by us.  This statement does not apply to information we collect through any means other than the Service, or to information collected on any other Company or third-party site that may link to or be accessible from the Service.  We encourage you to learn about the privacy practices of those third parties.</p>\n<p>Our servers and data centers for the Service are located in the U.S.  We may also subcontract processing to or share your personal information with third parties located in countries other than your home country.  If you are accessing the Service from outside the U.S., you agree that your personal information may be transferred to the U.S. or another country, which may have different privacy and data security protections than those of your own jurisdiction, to be processed and stored.  You expressly consent to your personal information being used as set out in this paragraph.</p>\n\n<h3>Safe Harbor</h3>\n<p>TripCase adheres to the US-EU and US-Swiss Safe Harbor Privacy Frameworks with respect to personal information about EU travelers that we receive via the Service in the United States, and has certified that it adheres to the Safe Harbor Privacy Principles. To learn more about the Safe Harbor program please visit http://www.export.gov/safeharbor/.</p>\n<p>Neither this Privacy Statement, nor our participation in the Safe Harbor program, applies to any travel supplier, such as an airline, car rental company or hotel, nor do they apply to any individual traveler’s employer or travel agency (for purposes hereof, a “travel arranger”) that obtains any related services from TripCase. We recommend that you review the privacy policies of your travel agency and of relevant travel suppliers. In addition, our participation in Safe Harbor does not apply to travelers in non-EU and non-Swiss jurisdictions.</p>\n\n<h3>Collection of Personal Information</h3>\n<p>Personal information is data that can be used to uniquely identify or contact a single person. We collect several types of personal information from and about users of the Service, including:</p>\n<ul>\n	<li>Personal information you provide to us when you register for the Service or thereafter, such as your name and email address;</li>\n	<li>Personal information provided to us prior to your registration with the Service by a travel company (such as a travel agency, airline or other travel provider, hotel, etc.) with which you have arranged travel;</li>\n	<li>Personal information included in any messaging you undertake through the Service, such as sharing of trip-related information; and</li>\n	<li>If you contact us, personal information you provide to us that details the nature of your question or problem.</li>\n</ul>\n<p>If you connect to the Service using credentials of a third party Social Networking Site ("SNS") such as Facebook, Google +, or LinkedIn, you authorize us to collect your authentication information, such as your name, e-mail address, and encrypted access credentials. We may store this information so that it can be used for the purposes explained in this statement, and it may also be used to verify your credentials with the SNS. The information available to TripCase from an SNS is affected by the privacy settings you establish at the SNS.  You understand and agree that an SNS’s use of information they collect from you is governed by their privacy policies, and TripCase’s use of such information is governed by this privacy statement.</p>\n<p>If you connect to any third party site other than an SNS using the credentials of your TripCase account for data sharing with that third party, you authorize the collection of your authentication information, such as your name, e-mail address, and encrypted access credentials, as well as any other personal information that third party site may choose to access. You do so at your own risk and understand and agree that the third party’s collection of such information is governed by their privacy policies, and TripCase’s use of such information is governed by this privacy statement.</p>\n\n<h3>Use of Personal Information</h3>\n<p>We use personal information in the following ways:</p>\n<ul>\n	<li>To present the Service and its contents in a suitable and effective manner for you and for your computer or mobile device;</li>\n	<li>To provide you with information, products or services that you request or otherwise elect to receive from us or from one of our strategic partners;</li>\n	<li>To notify you about changes to the Service;</li>\n	<li>To allow you to utilize the trip integration, sharing, and messaging features of the Service, if and when you choose to do so; and</li>\n	<li>To provide you with e-mail or other messaging regarding additional products or services you may be interested in, either from us or from one of our strategic partners, including promotional e-mails or messages.</li>\n</ul>\n\n<h3>Disclosure of Personal Information to Third Parties</h3>\n<p>We may from time-to-time make certain personal information available to strategic partners that work with the Company such as the following:</p>\n<ul>\n	<li>Various subsidiaries of the Company that support the Service ;</li>\n	<li>Third party service providers we use to support our business who provide services such as information processing, managing and enhancing customer data, providing customer service, assessing your interest in our products and services, and conducting customer research or satisfaction surveys;</li>\n	<li>Third party service providers we partner with to provide you offers of additional products or services based upon your trip-related information;</li>\n	<li>Your employer or travel agency with regard to those trips or portions of trips designated as business travel by you and as such, shared with your employer or travel agency via TripCase;</li>\n	<li>In the event of merger, acquisition, or any form of sale of some or all of the Company\'s assets, in which case personal information held by the Company about its customers will be among the assets transferred to the buyer.</li>\n</ul>\n<p>TripCase also enables you to share a particular item of content, on an individual basis, to third party services or other TripCase users by using the share functionality in the Service. Please note that sharing of such content on a third party service may be posted as activity on the Service, regardless of your account settings. To share an individual item of content to a third party service, you’ll be prompted to enter your access credentials for that third party service. TripCase may store your name, e-mail address, and an access token or similar credentials obtained from the third party service, so that you are able to share particular items of content, on that third party service, on an individual basis, without entering your access credentials again.</p>\n<p>We may also disclose your personal information to third parties to:</p>\n<ul>\n	<li>Comply with any court order or other legal obligation;</li>\n	<li>Enforce or apply our terms of use and any other agreements;</li>\n	<li>Protect the rights, property, or safety of the Company, our customers, or others. This may include exchanging information with other companies and organizations for the purposes of fraud protection and credit risk reduction; or</li>\n	<li>If you expressly opt in to such sharing.</li>\n</ul>\n\n<h3>Collection and Use of Non-Personal Information</h3>\n<p>We also collect non-personal information, or data in a form that cannot be used to uniquely identify or contact a single person. We may collect, use, transfer, and disclose non-personal information for any purposes. Non-personal information that we collect may include information regarding your activities on our website or our application, which may be aggregated and used to help us provide more useful information to our customers and to understand which parts of the Service are of most interest.</p>\n<p>If we combine non-personal information with personal information the combined information will be treated as personal information for the purposes of this Privacy Statement.</p>\n\n<h3>Location-Based Services</h3>\n<p>To provide location-based services to mobile application users of the Service, the Company or our partners may collect and use precise location data, such as the real-time geographic location of your device.  This location data is collected anonymously in a form that does not personally identify you and is used by the Company and our partners to provide location-based products and services.  We treat this location data as non-personal information.</p>\n\n<h3>Cookies and Other Technologies</h3>\n<p>The TripCase website, mobile application, email messages, and advertisements may use “cookies” and other technologies such as pixel tags and web beacons. These technologies help us to improve and to deliver a better and more personalized service by enabling us to:</p>\n<ul>\n	<li>Estimate our audience size and usage patterns;</li>\n	<li>Store information about your preferences, allowing us to customize the Service according to your individual interests;</li>\n	<li>Speed up your searches; and</li>\n	<li>Recognize you when you return to the Service’s online website.</li>\n</ul>\n<p>You may refuse to accept cookies by activating the appropriate settings on your browser. Check with your provider to find out how to disable cookies. For further details about how we utilize cookies and how to deactivate cookies, please see our [Cookies Policy] on our website. Please note that certain features of the Service will not be available once cookies are disabled.</p>\n<p>We treat information collected by cookies and other technologies as non-personal information. However, to the extent that Internet Protocol (IP) addresses or similar identifiers are considered personal information by local law, we also treat these identifiers as personal information. Similarly, to the extent that non-personal information is combined with personal information, we treat the combined information as personal information for the purposes of this Privacy Statement.</p>\n\n<h3>Accessing Your Personal Information</h3>\n<p>You may access, correct or delete your contact information and preferences through your TripCase account. For other personal information, we make good faith efforts to provide you with access so you can request that we correct the data if it is inaccurate or delete the data if the Company is not required to retain it by law or for legitimate business purposes. We may decline to process requests that are unreasonably repetitive, require disproportionate technical effort, jeopardize the privacy of others, are extremely impractical, or for which access is not otherwise required by local law.</p>\n\n<h3>Data Security</h3>\n<p>We have implemented reasonable measures designed to secure your personal information from accidental loss and from unauthorized access, use, alteration and disclosure.</p>\n<p>The safety and security of your information also depends on you. Any content, including personal information, that you contribute to be shared, published or displayed on the Service, or transmitted to other users of the Service, either via the Service or via social networking or other third party sites available through the Service, is visible to other users and can be read, collected, or used by them. We urge you to be careful about giving out information in public areas of the Service. You understand and acknowledge that, even after removal, copies of your content, including personal information, that you contribute to be shared, published or displayed on the Service, or transmitted to other users of the Service, may remain viewable in cached and archived pages, or might have been copied or stored by other users. Although we take efforts to protect your personal information, we cannot guarantee the security of your personal information transmitted to the Service. Any transmission of personal information is at your own risk.</p>\n\n<h3>Children Under the Age of 13</h3>\n<p>The Service is not intended for children under 13 years of age. We do not knowingly collect personal information from children under age 13. In the event that we learn that we have collected personal information from a child under age 13 without verification of parental consent, we will take steps to delete that personal information as soon as possible.</p>\n\n<h3>Changes to Our Privacy Statement</h3>\n<p>It is our policy to post any changes we make to our privacy practices on this page. The date the privacy statement was last revised is identified at the top of the privacy statement.</p>\n\n<h3>Contact Information</h3>\n<p>Please direct any questions or comments about this privacy statement and our privacy practices to us at:</p>\n<ul>\n	<li><a href="mailto:TripCasePrivacy@sabre.com">TripCasePrivacy@sabre.com</a>; or</li>\n	<li>3150 Sabre Drive, Southlake, Texas 76092 Attn: Privacy Office.</li>\n</ul>\n<p>If any European traveler experiences an issue regarding personal information that the European traveler cannot resolve directly with their travel arranger or TripCase, TripCase agrees to use the International Centre for Dispute Resolution/American Arbitration Association Safe Harbor Program, as its independent recourse mechanism. All disputes shall be finally settled under the International Dispute Resolution Procedures of the International Centre for Dispute Resolution, Safe Harbor Program by one or more arbitrators appointed in accordance with the said Procedures. The location of any in-person hearing will be Dallas, Texas, but TripCase also consents to any hearing being conducted by telephone or video conference.</p>\n<p>Please direct any questions or comments about the Service to us at www.tripcase.com/feedback</p>\n'}),define("text!templates/user/_cookies.tmpl",[],function(){return'<h2>COOKIES POLICY</h2>\n<p>Last modified: June 27, 2013</p>\n<ol>\n	<li>1. <span class="cookie-header">What is a cookie?</span>\n		<p>A cookie is a piece of data that is stored on a computer, tablet or other device ("device") used to browse the Internet so that that device can be recognized at a later time.</p>\n		<p>It is your choice whether or not you allow cookies to be placed on your device.  For specific information about managing and controlling cookies, please refer to <span class="cookie-header">Managing cookies</span> below.</p>\n	</li>\n	<li>2. <span class="cookie-header">Our cookies policy</span>\n		<p>The TripCase service (the "service") attempts to place certain cookies on your device when you visit the TripCase site. We have listed for you below the types of cookies we use, and what we use them for:</p>\n		<table class="cookie-table">\n			<tbody>\n				<tr>\n					<th class="cookie-table-header">Cookie Type</th>\n					<th class="cookie-table-header">Cookie Purpose</th>\n				</tr>\n				<tr>\n					<td class="cookie-table-data">Session cookies</td>\n					<td class="cookie-table-data">These cookies are used to track your session state as you interact with the service.</td>\n				</tr>\n				<tr>\n					<td class="cookie-table-data">Identity cookies</td>\n					<td class="cookie-table-data">These cookies are set at your request to have the application remember you the next time you return to the service using the device.</td>\n				</tr>\n				<tr>\n					<td class="cookie-table-data">Optimization cookies</td>\n					<td class="cookie-table-data">These cookies are used to track usage of the services we offer in order to improve the usability of our service.</td>\n				</tr>\n				<tr>\n					<td class="cookie-table-data">Advertising cookies</td>\n					<td class="cookie-table-data">These cookies are used to measure and improve the effectiveness of our advertising.</td>\n				</tr>\n			</tbody>\n		</table>\n		<p>In order to fully-utilize the service, your device should be set to accept cookies, as much of the service functionality only works via the use of cookies. Cookies placed when you visit the TripCase site do not harm your device in any way or recognize you personally as an individual; they only recognize the device or browser you are using. Cookies placed when you visit the TripCase site do not store any of your personal or sensitive information (such as your name, email address or travel details).</p>\n	</li>\n	<li>3. <span class="cookie-header">Managing cookies</span>\n		<ul>\n			<li><span class="cookie-header">What happens if I don\'t allow cookies?</span>\n				<p>If cookies aren\'t enabled on your device, your experience with the service or access to the service could be limited (for instance, you may not be use all the features of the service or access the service via a browser). </p>\n			</li>\n			<li><span class="cookie-header">How do I disable/enable cookies?</span>\n				<p>You can disable/enable cookies via your Internet browser or via settings on your mobile device. We have explained how you may do this via some of the main Internet browsers below. </p>\n\n				<label class="cookie-header-bold">Safari</label>\n				<ol>\n					<li>1. In the tools menu, select "preferences"</li>\n					<li>2. Select the "privacy"" icon</li>\n					<li>3. This will bring up options for cookies and you can choose to enable or disable them by clicking on the checkbox.</li>\n				</ol>\n\n				<label class="cookie-header-bold">Google Chrome</label>\n				<ol>\n					<li>1. In the settings menu, select  "show advanced settings" at the bottom of the page</li>\n					<li>2. Select the "content settings" button in the privacy section</li>\n					<li>3. The top section of the page that then appears tells you about cookies and allows you to set the cookies you want. It also allows you to clear any cookies currently stored.</li>\n				</ol>\n\n				<label class="cookie-header-bold">Mozilla Firefox</label>\n				<ol>\n					<li>1. In the tools menu, select "options"</li>\n					<li>2. Select the privacy tab in the options box</li>\n					<li>3. From the dropdown choose, "Use Custom Settings for History". This will bring up the options for cookies and you can choose to enable or disable them by clicking the checkbox.</li>\n				</ol>\n\n				<label class="cookie-header-bold">Internet Explorer 6+</label>\n				<ol>\n					<li>1. In the tools menu, select "Internet Options"</li>\n					<li>2. Click the "privacy" tab</li>\n					<li>3. You will see a privacy settings slider which has six settings that allow you to control the number of cookies that will be placed: Block All Cookies, High, Medium High, Medium (default level), Low, and Accept All Cookies.</li>\n				</ol>\n			</li>\n			<li><span class="cookie-header">How can I opt out of advertising cookies?</span>\n				<p>If you wish to prevent a third-party advertiser from collecting your information, you may either visit each ad network\'s website individually and opt out at that location, or you may visit the National Advertising Initiative (NAI) opt-out site to opt-out of all network advertising cookies.   Click here for the NAI gateway opt-out site:  http://www.networkadvertising.org/choices/Consumer Opt-out | NAI: Network Advertising Initiative.  This site will also allow you to review the third party advertising companies\' privacy statements.</p>\n			</li>\n		</ul>\n	</li>\n</ol>'}),define("views/user/terms_view",["namespace","jquery","underscore","backbone","mediator","analytics","strings","text!templates/user/_terms.tmpl","text!templates/user/_privacy.tmpl","text!templates/user/_cookies.tmpl","handlebars"],function(e,t,n,r,i,s,o,u,a,f,l){var c=r.View.extend({template:"user/terms",events:{"click #termsNav":"onNav","click #accept-terms":"onAccept","click #deny-terms":"onDeny"},initialize:function(e){l.registerPartial("TermsConditions",u),l.registerPartial("PrivacyPolicy",a),l.registerPartial("CookiesPolicy",f),this.openPage=e&&e.prompt?"prompt":"termsConditions"},onAccept:function(){e.isOnline?i.publish("terms:accept"):i.publish("error:trigger","service",[{message:o.ErrorOffline}])},onDeny:function(){e.isOnline?i.publish("terms:deny"):i.publish("error:trigger","service",[{message:o.ErrorOffline}])},checkURL:function(){this.openPage=window.location.hash;for(var e in document.termsNav.termsPage)e.value===this.openPage?e.checked="checked":e.removeAttribute("checked")},onNav:function(e){e.target.type==="radio"&&this.showPage(e.target.value);return},showPage:function(n){if(n===this.openPage)return;n?this.openPage=n:n=this.openPage,t(".terms-page").each(function(){this.id===n?t(this).show():t(this).hide()}),s.trackEvent("Terms",n,e)},serialize:function(){var e={};return e.prompt=this.openPage==="prompt",e}});return c}),define("controllers/terms_controller",["namespace","jquery","underscore","backbone","mediator","controllers/controller","models/terms","views/user/terms_view","analytics","strings","layoutmanager"],function(e,t,n,r,i,s,o,u,a,f){var l=s.extend({initialize:function(e){e=e||{},n.bindAll(this),this.terms=e.terms||new o,this._initSubscriptions()},_initSubscriptions:function(){i.subscribe("terms:show",this.onShow,this),i.subscribe("terms:prompt",this.onPrompt,this),i.subscribe("terms:accept",this.onAccept,this),i.subscribe("terms:deny",this.onDeny,this)},onShow:function(){this._layout=e.getLayout("simple"),this.setView(new u),this.changeURL("terms"),this._updateHeader(f.LegalNotices,"back:history"),a.trackEvent("Terms","Start",e)},onPrompt:function(){this._layout=e.getLayout("simple"),this.setView(new u({prompt:!0})),this._updateHeader(f.TermsConditions),a.trackEvent("Terms","Prompt",e)},onAccept:function(){this.terms.accept(function(){window.location.reload()}),a.trackEvent("Terms","Accepted",e)},onDeny:function(){i.publish("session:logout"),a.trackEvent("Terms","Denied",e)}});return l}),define("views/flights/seat_map_view",["config","namespace","jquery","underscore","backbone","mediator","strings"],function(e,t,n,r,i,s,o){var u=i.View.extend({className:"trip-component trip-item-detail seat-map",template:"trip_items/flight/seat_map",initialize:function(){this.setHeader()},setHeader:function(){var e=this.model.attributes.airline_code,t=this.model.attributes.flight_number,n=this.model.reservations.first(),r=n.startLocation.getAirportCode(),i=this.model.reservations.last(),u=i.endLocation.getAirportCode(),a=e+" "+t+", "+r+' <span class="general-icon icon_flight_detail_hdr_arrow"></span> '+u;s.publish("header:updateHeader",{backAction:"back:history",title:a,subtitle:o.SeatMap})},serialize:function(){var e={legendUrl:this.model.legendUrl,seatMapUrl:this.model.seatMapUrl};return e}});return u}),define("views/flights/flight_seat_map_list_empty_view",["namespace","jquery","underscore","backbone","mediator","layoutmanager"],function(e,t,n,r){var i=r.View.extend({template:"trip_items/flight/flight_schedule_list",serialize:function(){var e={noSeatMaps:!0};return e}});return i}),define("controllers/seatmaps_controller",["namespace","jquery","underscore","backbone","moment","mediator","controllers/controller","strings","analytics","layoutmanager","views/flights/seat_map_view","models/flight_group","views/flights/flight_seat_map_list_empty_view","views/flights/flight_list_view","trips_manager"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){var v=o.extend({initialize:function(){n.bindAll(this),s.subscribe("seatmaps:list",this.list),s.subscribe("seatmaps:show",this.show),this.flightGroupModel=new c},list:function(t){var n=this,r;this._layout=e.getLayout("simple_with_loading"),t&&t.tripId?r=d.getTrip(t.tripId):r=d.getCurrentTrip(),a.trackEvent("SeatMaps","Show",e,r.id),r.fetch({success:function(){var e=r.airTripItems({filter:function(e){return!e.isPast()}});e.length===0?n.setView(new h):(n.view=new p({collection:e,className:"seatmaps-list action-list",isSeatMaps:!0}),n.view.on("select_flight",function(e,t){t&&s.publish("seatmaps:show",{itemId:e})}),n.setView(n.view)),n._updateHeader(u.SelectFlight,"back:history")}})},show:function(n){this._layout=e.getLayout("simple_with_loading");var r=this,s=n.tripId||d.getCurrentTripId();a.trackEvent("SeatMaps","ShowDetails",e,s,n.itemId),d.getTripItems(s,function(s){var o=s.get(n.itemId);r.flightGroupModel.initialize(null,{model:o}),r.flightGroupModel.fetch({success:function(){var n=i().format("YYYY-MM-DDTHH:mm:ss"),s=r.flightGroupModel.attributes.end_time,o=function(e){var t,n=/src="(.*?)"/g;e?(t=e.match(n),r.flightGroupModel.legendUrl=t[0],r.flightGroupModel.seatMapUrl=t[1]):r.flightGroupModel.seatMap=undefined,r.setView(new l({model:r.flightGroupModel}))},u=r.flightGroupModel.get("seat_map_url");r._layout=e.getLayout("simple_with_loading"),r.showLoading(),n<s&&u?t.ajax({url:u,success:function(e){var t=e.indexOf("We're sorry.")!==-1?"":e;o(t)},error:function(){o()}}):o()}})})}});return v}),define("controllers/android_controller",["namespace","jquery","underscore","helpers","backbone","mediator","controllers/controller","analytics"],function(e,t,n,r,i,s,o,u){var a=o.extend({initialize:function(){n.bindAll(this),this.setupButtonListeners(),this._initSubscriptions(),this.menuButtonIsLocked=!1},setupButtonListeners:function(){document.addEventListener("backbutton",function(e){s.publish("android:backbutton",e)},!1),document.addEventListener("menubutton",function(e){s.publish("android:menubutton",e)},!1)},_initSubscriptions:function(){s.subscribe("android:menubutton",this.onMenuButton,this),s.subscribe("android:backbutton",this.onBackButton,this)},dismissModal:function(e){return e&&e.preventDefault&&e.preventDefault(),s.publish("popup:remove"),!1},exitApp:function(e){return e&&e.preventDefault&&e.preventDefault(),navigator.app&&navigator.app.exitApp&&navigator.app.exitApp(),!1},checkSession:function(){return e.session.id},getCurrentSideMenuState:function(){return t("#app-page").hasClass("sidemenu-slide-out")?"open":"closed"},closeSideMenu:function(e){return e&&e.preventDefault&&e.preventDefault(),s.publish("sidemenu:hide"),!1},adjustHardwareLocks:function(){var e=r.isModalVisible(),t=this.checkSession()?!1:!0;this.menuButtonIsLocked=t||e?!0:!1},onBackButton:function(t){var n=r.isModalVisible(),i=this.getCurrentSideMenuState(),o=!1,a=e.appStateMachine.state==="showingTrip";e.appStateMachine.state==="showingTripList"&&(o=!0),e.appStateMachine.state==="loggedOut"&&(o=!0),u.trackEvent("Android","BackButton",e);if(i==="open")return u.trackEvent("Android","BackClosedSideMenu",e),this.closeSideMenu(t);if(n)return u.trackEvent("Android","BackClosedPopup",e),this.dismissModal(t);if(o)return u.trackEvent("Android","BackAndExit",e),this.exitApp(t);a?(s.publish("trips:index"),u.trackEvent("Android","BackToTrips",e)):e.workflow?(e.workflow.handle("back"),u.trackEvent("Android","WorkflowBack",e)):(u.trackEvent("Android","BackPage",e),s.publish("back:history"))},onMenuButton:function(t){var n=r.isModalVisible();t&&t.preventDefault&&t.preventDefault(),this.adjustHardwareLocks(),u.trackEvent("Android","MenuButton",e);if(n)return u.trackEvent("Android","MenuClosedPopup",e),this.dismissModal(t);if(this.menuButtonIsLocked)return!1;s.publish("sidemenu:toggle"),u.trackEvent("Android","SideMenuToggled",e)}});return a}),define("controllers/launch_controller",["namespace","underscore","mediator","controllers/controller","analytics"],function(e,t,n,r,i){var s=r.extend({initialize:function(){return t.bindAll(this),this._initListeners(),this.initialized},_initListeners:function(){this.initialized=e.isWrapped?this.init():!1},init:function(){return e.isIos?this._initDefault()&&this._initIos():this._initDefault()},_initDefault:function(){try{return document.addEventListener("resume",this.onResume),document.addEventListener("pause",this.onPause),!0}catch(e){return!1}},_initIos:function(){if(!e.isIos)return!1;try{return document.addEventListener("active",this.onActive),document.addEventListener("resign",this.onResign),!0}catch(t){return!1}},onResume:function(t){return e.isWrapped?(n.publish("device:resume",t),i.trackEvent("App","Resumed",e),!0):!1},onActive:function(t){return e.isWrapped&&e.isIos?(i.trackEvent("App","Unlocked",e),!0):!1},onPause:function(t){return e.isWrapped?(i.trackEvent("App","Paused",e),!0):!1},onResign:function(t){return e.isWrapped&&e.isIos?(i.trackEvent("App","Locked",e),!0):!1}});return s}),define("async",[],function(){function n(e){var t,n;t=document.createElement("script"),t.type="text/javascript",t.async=!0,t.src=e,n=document.getElementsByTagName("script")[0],n.parentNode.insertBefore(t,n)}function r(t,n){var r=/!(.+)/,i=t.replace(r,""),s=r.test(t)?t.replace(/.+!/,""):e;return i+=i.indexOf("?")<0?"?":"&",i+s+"="+n}function i(){return t+=1,"__async_req_"+t+"__"}var e="callback",t=0;return{load:function(e,t,s,o){if(o.isBuild)s(null);else{var u=i();window[u]=s,n(r(e,u))}}}}),define("views/maps/map_view",["config","namespace","jquery","underscore","backbone","mediator","analytics","trips_manager","layoutmanager","async"],function(e,t,n,r,i,s,o,u){var a=i.View.extend({events:{"click #map-call":"onCall","click #map-directions":"onDirections"},className:"standard-form-panel",template:"maps/map",initialize:function(){var e=this;this.on("afterrender",function(){require(["async!https://maps.googleapis.com/maps/api/js?key=AIzaSyB3bok8pEJ9bX71nPHiccECokdDzmhx3r8&sensor=false"],function(t){e.mapRender()})})},onCall:function(e){e.preventDefault();var n=this.model.get("itemId"),r=u.getCurrentTrip(),i=r.tripItems.get(n);s.publish("phone_numbers:showPhoneNumbers",i),o.trackEvent("Map","PopupPhone",t,r.id,n)},onDirections:function(e){e.preventDefault();var n=this.model.get("itemId"),r=u.getCurrentTrip();s.publish("map:directions",{itemId:n,isFromMapPopup:!0}),o.trackEvent("Map","PopupDirections",t,r.id,n)},mapRender:function(){var t=this;this.latLngPos=new google.maps.LatLng(this.model.get("latitude"),this.model.get("longitude"));var r={center:this.latLngPos,mapTypeId:google.maps.MapTypeId.ROADMAP,panControl:!1,scaleControl:!0,scaleControlOptions:{position:google.maps.ControlPosition.BOTTOM_LEFT},scrollwheel:!1,zoom:13,zoomControl:!0};n("body").addClass("load"),this.map=new google.maps.Map(n("#map-panel")[0],r),this.markerImage=new google.maps.MarkerImage(e.assetPath+"assets/images/map_marker_blue_2x.png",null,null,new google.maps.Point(13,40),new google.maps.Size(25,40)),this.markerShadow=new google.maps.MarkerImage(e.assetPath+"assets/images/map_marker_blue_shadow_2x.png",null,null,new google.maps.Point(13,18),new google.maps.Size(42,18)),this.markerShape={coord:[1,8,9,0,16,0,24,8,24,13,13,40,12,40,1,13],type:"poly"},this.marker=new google.maps.Marker({animation:google.maps.Animation.DROP,"float":!0,icon:this.markerImage,map:this.map,position:this.latLngPos,shadow:this.markerShadow,shape:this.markerShape,optimized:!1,title:this.model.get("markerName")}),google.maps.event.addListener(this.marker,"click",function(){var e=t.model.get("action");e!==undefined&&s.publish(e)}),google.maps.event.addListener(this.map,"tilesloaded",function(){n("body").removeClass("load")})},serialize:function(){var e=this.model.toJSON();return e}});return a}),define("views/maps/map_directions_view",["helpers","namespace","jquery","underscore","backbone","mediator","strings","analytics","layoutmanager","trips_manager"],function(e,t,n,r,i,s,o,u,a,f){var l=i.View.extend({events:{"submit #map-directions-form":"onSubmit","vclick #start-pick-btn":"onStartPick","vclick #start":"onStartPick","vclick #end-pick-btn":"onEndPick","vclick #end":"onEndPick"},template:"maps/map_directions",initialize:function(){this.model.on("change",function(){this.render()},this)},serialize:function(){var e=this.model.toJSON();return e},onStartPick:function(e){e.preventDefault(),s.publish("map:pick_start")},onEndPick:function(e){e.preventDefault(),s.publish("map:pick_end")},onSubmit:function(e){var n;e.preventDefault(),n=this.model.toDirectionParams(),this._mappWebBrowser(n),u.trackEvent("Maps","GetDirections",t,f.getCurrentTripId(),this.tripItemId)},_mappWebBrowser:function(e){var n="http://maps.google.com/maps?saddr={startAddr}&daddr={endAddr}&f=d";t.isIos?n="http://maps.apple.com?saddr={startAddr}&daddr={endAddr}&f=d":t.isBlackberry&&(n+="&ui=maps"),n=n.supplant(e),t.isIos6&&(n=n.split("saddr=Current%20Location&").join(""),n=n.split("&daddr=Current%20Location").join("")),navigator.app&&navigator.app.loadUrl?navigator.app.loadUrl(n,{openExternal:!0}):window.open(n,"_system")}});return l}),define("models/direction",["underscore","models/model"],function(e,t){var n=t.extend({CURRENT_LOCATION:"My+Location",toDirectionParams:function(e){var t={};return t.startAddr=this.get("startAddr"),t.endAddr=this.get("endAddr"),this.isStartCurrentLocation()&&(t.startAddr=this.CURRENT_LOCATION),this.isEndCurrentLocation()&&(t.endAddr=this.CURRENT_LOCATION),t},isStartCurrentLocation:function(){return!this.has("startAddr")},isEndCurrentLocation:function(){return!this.has("endAddr")},setStartAsCurrentLocation:function(){this.unset("startAddr",{silent:!0})},setEndAsCurrentLocation:function(){this.unset("endAddr",{silent:!0})}});return n}),define("workflows/map_workflow",["namespace","jquery","underscore","machina","mediator","backbone","views/maps/map_view","views/maps/map_directions_view","workflows/pick_location_workflow","strings","models/direction"],function(e,t,n,r,i,s,o,u,a,f,l){var c=new r.Fsm({initialState:"uninitialized",name:"map",states:{uninitialized:{initialize:function(e){this.params=e||this.params,this.transition("showMap")}},showMap:{_onEnter:function(){this.controller=this.params.controller,this.controller.model=new s.Model(this.params.config),this.controller.view=new o({model:this.controller.model}),this.controller._layout=e.getLayout("simple_with_loading"),this.controller.setView(this.controller.view),this.controller._updateHeader(f.Map,"back:history",{rightButtons:[{name:"map-directions text-button",action:"map:pick_tripitem",text:f.Locations}]})},back:function(){t("body").removeClass("load"),this.transition("uninitialized"),a.off("complete"),a.off("cancel"),i.publish("back:history")}},pickTripItem:{_onEnter:function(){a.transition("uninitialized"),a.handle("initialize",{controller:this.controller,showOnlyItems:!0})},complete:function(e){var t=e.location.get("address_lines")||[],n=t[0]||"",r=t[1]||"",i=t[2]||"",s=this._locationNameParse(e.location);this.params.config.address1=n,this.params.config.address2=r,this.params.config.address3=i,this.params.config.latitude=e.location.get("lat"),this.params.config.longitude=e.location.get("lng"),this.params.config.markerName=s.name,this.params.config.name=s.name,this.controller.model.set(this.params.config),this.transition("showMap")},cancel:function(){this.transition("showMap")},back:function(){this.transition("uninitialized"),a.off("complete"),a.off("cancel"),i.publish("back:history")}},directions:{initialize:function(t){this.params=t,this.directionModel=new l({startName:f.MyCurrentLocation,startAddr:"Current%20Location"}),t.config&&this.directionModel.set({endName:t.config.name,endAddr:t.config.latitude+","+t.config.longitude}),this.directionView=new u({model:this.directionModel}),this.controller=t.controller,this.controller._layout=e.getLayout("simple"),this.controller.setView(this.directionView),this.controller._updateHeader(f.Directions,"map:back")},pickStart:function(){this.pickDirection="start",a.transition("uninitialized"),a.handle("initialize",{controller:this.controller,listHeaderText:f.StartAtLocation})},pickEnd:function(){this.pickDirection="end",a.transition("uninitialized"),a.handle("initialize",{controller:this.controller,listHeaderText:f.EndAtLocation})},complete:function(e){var t=this._locationNameParse(e.location),n={};this.pickDirection==="start"?(n.startName=t.name,n.startAddr=t.addr):(n.endName=t.name,n.endAddr=t.addr),this.directionModel.set(n),this._directionsRender(),this.controller._updateHeader(f.Directions,"map:back")},cancel:function(){this._directionsRender()},back:function(){this.transition("uninitialized"),a.off("complete"),a.off("cancel"),this.params.config.isFromMapPopup?this.transition("showMap"):i.publish("back:history")}}},_directionsRender:function(){this.controller.setView(this.directionView),this.controller._updateHeader(f.Directions,"back:history")},_mapRender:function(){this.controller._updateHeader(f.Map,"mapWorkflow:back",{rightButtons:[{name:"map-directions text-button",action:"map:pick_tripitem",text:f.Locations}]}),this.controller.setView(this.controller.view)},_locationNameParse:function(e){var t={};return e.get("street")!==undefined?(t.name=e.get("street")+" "+e.get("city")+e.get("state"),t.addr=e.get("lat")+","+e.get("lng")):e.get("name")!==undefined?(t.name=e.get("name"),t.addr=e.get("lat")+","+e.get("lng")):(t.name=f.MyCurrentLocation,t.addr="Current%20Location"),t}});return i.subscribe("map:back",function(){c.handle("back")}),i.subscribe("mapWorkflow:back",function(){c.handle("back")}),a.on("cancel",function(){c.handle("cancel")}),a.on("complete",function(e){c.handle("complete",e)}),c}),define("controllers/map_controller",["namespace","jquery","underscore","backbone","mediator","controllers/controller","workflows/map_workflow","analytics","trips_manager","layoutmanager","strings"],function(e,t,n,r,i,s,o,u,a,f,l){var c=s.extend({initialize:function(){n.bindAll(this),this._layout=e.getLayout("simple_with_loading"),i.subscribe("map:show",this.onShow,this),i.subscribe("map:directions",this.onDirections,this),i.subscribe("map:pick_tripitem",this.onPickItem,this),i.subscribe("map:pick_direction",this.onDirections,this),i.subscribe("map:pick_start",this.onPickStart,this),i.subscribe("map:pick_end",this.onPickEnd,this)},_getMapParams:function(e){this.tripItemId=e.itemId;var t=a.getCurrentTrip().tripItems.get(e.itemId),n=e.isEnd&&t.endLocation.isValid()?t.endLocation:t.startLocation,r=n.get("address_lines")||[];return e.longitude=n.get("lng"),e.latitude=n.get("lat"),e.markerName=n.get("name")||t.getTitle()||"",e.name=e.markerName,e.address1=r[0],e.address2=r[1],e.address3=r[2],e.phoneNumber="",e},onShow:function(t){e.isOnline?(this._layout=e.getLayout("simple_with_loading"),o.transition("uninitialized"),o.handle("initialize",{controller:this,config:this._getMapParams(t)}),u.trackEvent("Maps","Show",e,a.getCurrentTripId(),this.tripItemId)):i.publish("error:trigger","service",[{message:l.ErrorOffline}])},onDirections:function(t){o.transition("directions"),o.handle("initialize",{controller:this,config:this._getMapParams(t)}),u.trackEvent("Maps","Directions",e,a.getCurrentTripId(),this.tripItemId)},onPickItem:function(){t("body").removeClass("load"),this._layout=e.getLayout("simple"),o.transition("pickTripItem"),u.trackEvent("Maps","PickItem",e,a.getCurrentTripId(),this.tripItemId)},onPickStart:function(){o.handle("pickStart"),u.trackEvent("Maps","PickStart",e,a.getCurrentTripId(),this.tripItemId)},onPickEnd:function(){o.handle("pickEnd"),u.trackEvent("Maps","PickEnd",e,a.getCurrentTripId(),this.tripItemId)}});return c}),define("presenters/contacts_presenter",["underscore","helpers","presenters/presenter"],function(e,t,n){var r=n.extend({initialize:function(e){this.contacts=e},getContacts:function(){var e,n=this.contacts.getSortedContacts();return e=n.map(function(e){var n={id:e.get("id"),is_always_sharing:e.get("is_always_sharing"),cid:e.cid};return e.has("first_name")||e.has("last_name")?(n.mainLabel=t.capitalize(e.get("fullName")),n.subLabel=e.get("email")):n.mainLabel=e.get("email"),n}),e}});return r}),define("views/contacts/contacts_view",["namespace","mediator","helpers","backbone","jquery","presenters/contacts_presenter"],function(e,t,n,r,i,s){var o=r.View.extend({className:"contacts list-rows",tagName:"ul",events:{"vclick .contact":"_showContact","vclick #empty-import":"_showAddManual"},template:"contacts/contacts",initialize:function(){this.presenter=new s(this.collection),this.on("afterrender",this.afterrender,this)},serialize:function(){var t={};return t.isEmpty=this.collection.length===0,t.isWrapped=e.isWrapped,t.isEmpty||(t=this.presenter.getContacts()),t},afterrender:function(){n.scrollToTop()},cleanup:function(){},_showAddManual:function(e){e.preventDefault(),this.trigger("contact:add")},_showContact:function(e){e.preventDefault(),this.trigger("contact:clicked",{id:i(e.currentTarget).data("id")})}});return o}),define("presenters/contact_presenter",["helpers","presenters/presenter"],function(e,t){var n=t.extend({initialize:function(e){this.contact=e},getContact:function(){var t=this.contact.toJSON();return t.fullName=e.capitalize(this.contact.get("fullName")||""),t}});return n}),define("views/contacts/contact_view",["backbone","mediator","presenters/contact_presenter"],function(e,t,n){var r=e.View.extend({className:"contact list-rows",tagName:"ul",template:"contacts/contact",events:{"vclick #always-share-help":"onHelp"},initialize:function(){this.presenter=new n(this.model)},serialize:function(){return this.presenter.getContact()},onHelp:function(e){e.preventDefault(),t.publish("info_page:show_for_always_share","contacts_workflow:back_info_details")},cleanup:function(){}});return r}),define("views/contacts/edit_contact_view",["backbone","analytics","namespace","mediator","views/delete_confirm_popup_factory"],function(e,t,n,r,i){var s=e.View.extend({className:"contact list-rows",tagName:"ul",template:"contacts/edit_contact",events:{submit:"onSave","change #always-share":"onAlwaysShare","vclick #always-share-help":"onHelp","vclick #delete-contact":"onDelete"},initialize:function(e){this.helpInfoBackMessage=e.helpInfoBackMessage,this.model.on("error",function(e,t){r.publish("error:trigger","form_validation",t)},this)},showImportOverlay:function(){n.isWrapped&&r.publish("overlay:trigger",{templateFilename:"overlay_contacts_phone_import",storageKeyName:"contacts_phone_import",analyticsEvent:"ContactsPhoneImport"})},onAlwaysShare:function(){var e="AlwaysShareOff";this.$el.find("#always-share")[0].checked&&(e="AlwaysShareOn"),t.trackEvent("Contacts",e,n)},onSave:function(e){e.preventDefault();var t=this.$el.find("#firstname").val(),n=this.$el.find("#lastname").val(),r=this.$el.find("#email").val(),i=this.$el.find("#always-share")[0].checked;this.trigger("contact:submit",{first_name:t,last_name:n,email:r,is_always_sharing:i})},onHelp:function(e){e.preventDefault(),r.publish("info_page:show_for_always_share",this.helpInfoBackMessage)},onDelete:function(e){var t=this;e.preventDefault(),this.popup=i.createPopup(this.model),this.popup.render(),this.popup.on("complete",function(){t.trigger("contact:delete")})},serialize:function(){return this.model.toJSON()}});return s}),define("models/contact_collection",["underscore","models/model","parsers/contact_parser","proxies/contact_proxy"],function(e,t,n,r){var i=t.extend({initialize:function(){e.extend(this,n),this.proxy=new r({},{model:this}),this.set("contacts",[])},add:function(e){this.attributes.contacts.push(e.toJSON())},getCount:function(){return this.get("contacts").length},toJSON:function(){var e;return e=this.attributes,e}});return i}),define("text!templates/contacts/phone_contacts_autosuggest_result.tmpl",[],function(){return'{{#if hasContext}}\n<form action="#import-contacts" id="import-contacts-form">\n	<ul class="contacts list-rows">\n	{{#each phoneContacts}}\n		<li class="contact list-row-flat list-row-fixed-height-med" data-id="{{id}}">\n			<input data-cid="{{cid}}" type="checkbox" class="list-row-flat-checkbox tc-checkbox"/>\n			<div class="list-row-main">\n				{{#if fullName}}\n				<p class="tc-label-medium text-ellipsis">{{fullName}}</p>\n				<p class="tc-sublabel text-ellipsis">{{email}}</p>\n				{{else}}\n				<p class="tc-label-medium text-ellipsis">{{email}}</p>\n				{{/if}}\n			</div>\n		</li>\n	{{/each}}\n	</ul>\n</form>\n{{/if}}'}),define("views/contacts/contacts_import_list_view",["namespace","mediator","backbone","jquery","models/contact","models/contact_collection","analytics","strings","views/ui/autosuggest_view","presenters/contacts_presenter","text!templates/contacts/phone_contacts_autosuggest_result.tmpl"],function(e,t,n,r,i,s,o,u,a,f,l){var c=n.View.extend({className:"standard-form-panel",template:"contacts/contacts_import_list",initialize:function(e){this.contactsCount=e.contactsCount,this.presenter=new f(this.collection),this.on("afterrender",this.afterrender,this)},serialize:function(){var e={};return e.isEmpty=this.collection.length===0,e.isEmpty||(e=this.presenter.getContacts()),e},afterrender:function(){this._setupImportToolbarEvent(),this.autosuggestView=new a({collections:{phoneContacts:this.collection},searchKeys:["first_name","last_name","email"],input:"#search-contact",anchor:"#suggested-contacts",resultTemplate:l,sortIterator:this.collection.sortIterator,selectEvents:{".contact":r.noop}})},_setupImportToolbarEvent:function(){var e=this;this.$importToolbar=r("#import-toolbar"),this.$importToolbar.bind("vclick",function(t){e.onSubmit(t)}),this.$importToolbar.appendTo("#viewport")},cleanup:function(){this.$importToolbar.remove()},onSubmit:function(e){var t=200,n=25;e.preventDefault(),this.selectedContacts=this._getSelectedContacts(),this.selectedCount=this.selectedContacts.getCount(),this.selectedCount<=0?this._reportNoContactsToSave():this.selectedCount>n?this._reportTooManyContactsToSave():this.contactsCount+this.selectedCount>t?this._reportTooManyContactsTotal():this._saveContactsToServer()},_getSelectedContacts:function(){var e=this,t=r("input:checked"),n=new s;return t.each(function(t,i){var s=r(i).data("cid"),o=e.collection.getByCid(s);n.add(o)}),n},_reportNoContactsToSave:function(){t.publish("error:trigger","form_validation",[{message:u.ImportContactsNone}],u.ImportContactsNoneTitle),o.trackEvent("Contacts","ImportListNone",e)},_reportTooManyContactsToSave:function(){t.publish("error:trigger","form_validation",[{message:u.ImportContactsTooMany}],u.ImportContactsTooManyTitle),o.trackEvent("Contacts","ImportListTooMany",e)},_reportTooManyContactsTotal:function(){t.publish("error:trigger","form_validation",[{message:u.ImportContactsMaxLimit}],u.ImportContactsMaxLimitTitle),o.trackEvent("Contacts","ImportTooManyTotal",e)},_saveContactsToServer:function(){var t=this;this.selectedContacts.save(null,{success:function(e,n){t.trigger("contactsImport:success",{contacts:n,numAdded:t.selectedCount}),t.$importToolbar.remove()}}),o.trackEvent("Contacts","ImportsSent",e)}});return c}),define("views/contacts/contacts_import_success_view",["backbone","jquery","underscore"],function(e,t,n){var r=e.View.extend({className:"contact list-rows",tagName:"ul",events:{"vclick #dismiss":"_onClick"},template:"contacts/contact_import_success",initialize:function(e){this.importCount=e},serialize:function(){return{importCount:this.importCount}},cleanup:function(){},_onClick:function(e){e.preventDefault(),this.$el.hide()}});return r}),define("workflows/contacts_workflow",["namespace","backbone","jquery","machina","mediator","strings","analytics","views/contacts/contacts_view","collections/contacts","models/contact","views/contacts/contact_view","views/contacts/edit_contact_view","views/contacts/contacts_import_list_view","views/contacts/contacts_import_success_view","modules/phone_contacts"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){var v=new r.Fsm({initialState:"uninitialized",name:"contacts",states:{uninitialized:{initialize:function(t){this.controller=t.controller,this.contacts=new a,e.workflow=this}},showContacts:{_onEnter:function(){var t=this;this.viewContactsList=new u({collection:this.contacts}),this.importCount?(this.viewImportSuccess=new p(this.importCount),this.controller._layout=e.getLayout("contacts_list"),this.controller._layout.setViews({"#contact_import_count":this.viewImportSuccess,"#contact_list":this.viewContactsList},!0),this._setHeader(),this.controller._layout.render(function(e){n("#app-page").html(e)}).then(function(){t.viewContactsList.trigger("afterrender")}),this.importCount=undefined):(this.controller._layout=e.getLayout("simple_with_loading"),this.contacts.fetch({success:function(){t.controller.setView(t.viewContactsList)}}),this._setHeader(),this.controller.showLoading()),this.viewContactsList.on("contact:clicked",function(e){this.contactId=e.id,this.transition("showContactDetails")},this),this.viewContactsList.on("contact:add",function(e){this.transition("showContactAdd")},this)},back:function(){this.exit()}},showContactDetails:{_onEnter:function(){this.controller._layout=e.getLayout("simple"),this.contact=this.contacts.get(this.contactId),this.contactDetailView=new l({model:this.contact}),this.controller.setView(this.contactDetailView),this._setHeader(),o.trackEvent("Contacts","ShowDetail",e)},back:function(){this.transition("showContacts")}},showContactAdd:{_onEnter:function(){var t=this;this.contact=new f,this.contactAddView=new c({model:this.contact,helpInfoBackMessage:"contacts_workflow:back_info_add"}),this.controller._layout=e.getLayout("simple"),this.controller.setView(this.contactAddView),this._setHeader(),this.contactAddView.showImportOverlay(),o.trackEvent("Contacts","ContactAdd",e),this.contactAddView.on("contact:submit",function(n){t.handle("save",n),o.trackEvent("Contacts","AddedManual",e)})},save:function(e){var t=this;this.contact.save(e,{success:function(){t.transition("showContacts")}})},back:function(){this.transition("showContacts")}},showContactEdit:{_onEnter:function(){var t=this;this.contactValuesBeforeEdit=this.contact.toJSON(),this.contactEditView=new c({model:this.contact,helpInfoBackMessage:"contacts_workflow:back_info_edit"}),this.controller.setView(this.contactEditView),this._setHeader(),o.trackEvent("Contacts","ContactEdit",e),this.contactEditView.on("contact:submit",function(n){t.handle("save",n),o.trackEvent("Contacts","Edited",e)}),this.contactEditView.on("contact:delete",function(){t.handle("destroy")})},save:function(e){var t=this;this.contact.save(e,{success:function(){t.transition("showContactDetails")}})},destroy:function(){var e=this;this.contact.destroy({wait:!0,success:function(){e.transition("showContacts")}})},back:function(){this.contact.set(this.contactValuesBeforeEdit,{silent:!0}),this.transition("showContactDetails")}},showContactImport:{_onEnter:function(){var t=this,n=new d;n.getList({success:function(e){t.phoneContacts=e,t.handle("showPhoneContactList")},error:function(){t.handle("showPhoneContactError")}}),o.trackEvent("Contacts","ImportList",e)},showPhoneContactList:function(){var t=this;this.view=new h({collection:this.phoneContacts,contactsCount:this.contacts.length}),this.controller._layout=e.getLayout("simple"),this.controller.setView(this.view),this._setHeader(),this.view.on("contactsImport:success",function(e){t.contacts.reset(e.contacts),t.importCount=e.numAdded,t.transition("showContacts")})},showPhoneContactError:function(){var t=this;i.publish("error:trigger","form_validation",[{message:s.ImportContactsError,complete:function(){t.handle("back")}}],s.ImportContactsErrorTitle),o.trackEvent("Contacts","ImportListError",e)},back:function(){this.transition("showContactAdd")}}},exit:function(){e.workflow=null,this.transition("uninitialized"),i.publish("back:history")},_setHeader:function(){var t,n;switch(this.state){case"showContacts":n=[{name:"add-contacts",action:"contacts_workflow:add",iconURL:"button-icon btn_icon_add_25px"}],t=s.Contacts;break;case"showContactAdd":e.isWrapped&&(n=[{name:"import-contacts text-button",action:"contacts_workflow:import",text:s.ImportContact}]),t=s.AddContact;break;case"showContactDetails":n=[{name:"contact-edit",iconURL:"button-icon btn_icon_edit_25px",action:"contacts_workflow:edit"}],t=s.ContactDetails;break;case"showContactImport":t=s.ImportContacts;break;case"showContactEdit":t=s.EditContact}this.controller._updateHeader(t,"contacts_workflow:back",{rightButtons:n})}});return i.subscribe("contacts_workflow:back",function(){v.handle("back")}),i.subscribe("contacts_workflow:add",function(){v.transition("showContactAdd")}),i.subscribe("contacts_workflow:edit",function(){v.transition("showContactEdit")}),i.subscribe("contacts_workflow:import",function(){v.transition("showContactImport")}),i.subscribe("contacts_workflow:back_info_add",function(){v.transition("showContactAdd")}),i.subscribe("contacts_workflow:back_info_edit",function(){v.transition("showContactEdit")}),i.subscribe("contacts_workflow:back_info_details",function(){v.transition("showContactDetails")}),v}),define("controllers/contacts_controller",["namespace","mediator","controllers/controller","analytics","workflows/contacts_workflow","models/contact","backbone"],function(e,t,n,r,i){var s=n.extend({initialize:function(){this.workflow=i,t.subscribe("contacts:show",this.onShowContacts,this)},onShowContacts:function(){this._showContactsList(),r.trackEvent("Contacts","Show",e)},_showContactsList:function(){this.workflow.transition("uninitialized"),this.workflow.handle("initialize",{controller:this}),this.workflow.transition("showContacts")}});return s}),define("app_state_machine",["machina","mediator","backbone","underscore"],function(e,t,n,r){var i=window.appStateMachine=new e.Fsm({verifyState:function(){},currentView:null,getCurrentView:function(){var e,t=r.find(n.history.handlers,function(e){return e.route.test(n.history.fragment)?!0:!1});return t&&t.route&&(e=t.route.toString()),e==="/^trips$/"?this.currentView="trips":e==="/^trips/([^/]+)/trip_items/index$/"?this.currentView="trip":this.currentView="other",this.currentView},transitionToStateBasedOnView:function(e){e==="trips"?this.transition("showingTripList"):e==="trip"?this.transition("showingTrip"):this.transition("showingViewWithBackButton")},initialState:"loggedOut",states:{exit:{},loggedOut:{login:function(){var e=this.getCurrentView();this.transitionToStateBasedOnView(e)},changedView:function(){var e=this.getCurrentView();this.transitionToStateBasedOnView(e)},back:function(){this.transition("exit")},menu:function(){}},loadingData:{},modalOpen:{_onEnter:function(){},changedView:function(){var e=this.getCurrentView();this.transitionToStateBasedOnView(e)},back:function(){this.transition(this.priorState)},menu:function(){this.transition(this.priorState)}},menuOpen:{_onEnter:function(){},changedView:function(){var e=this.getCurrentView();this.transitionToStateBasedOnView(e)},back:function(){this.transition(this.priorState)},menu:function(){this.transition(this.priorState)}},showingTripList:{_onEnter:function(){},changedView:function(){var e=this.getCurrentView();this.transitionToStateBasedOnView(e)},back:function(){this.transition("uninitialized")},menu:function(){this.transition("menuOpen")}},showingTrip:{_onEnter:function(){},changedView:function(){var e=this.getCurrentView();this.transitionToStateBasedOnView(e)},back:function(){this.transition("showingTripList")},menu:function(){this.transition("menuOpen")}},showingViewWithBackButton:{_onEnter:function(){},changedView:function(){var e=this.getCurrentView();this.transitionToStateBasedOnView(e)},back:function(){},menu:function(){this.transition("menuOpen")}},showingChildBrowser:{}}});return t.subscribe("session:success",function(){i.handle("login")}),t.subscribe("session:invalid",function(){i.transition("loggedOut")}),t.subscribe("changedView",function(){i.handle("changedView")}),i}),define("views/overlay/overlay_view",["jquery","backbone","handlebars"],function(e,t,n){var r=t.View.extend({events:{"vclick .overlay-dismiss-fullscreen-js":"dismissOverlay","vclick .overlay-dismiss-button-js":"dismissOverlay"},id:"overlay",initialize:function(t){var n="templates/overlays/",r=".tmpl";this.templatePath=n+t.templateFilename+r,this.$underlay=e('<div class="full-screen-underlay">')},render:function(){var e="text!",t=this;n.templates?(this.compiledTemplate=n.templates[this.templatePath],this._render()):(this.templatePath=e+this.templatePath,require([this.templatePath],function(e){t.compiledTemplate=n.compile(e),t._render()}))},_render:function(){var t=this.compiledTemplate({});this.$el.html(t),this.$el.append(this.$underlay),e("#viewport").prepend(this.$el),this.$el.show()},dismissOverlay:function(e){e.preventDefault(),this.$el.remove()}});return r}),define("controllers/ui/overlay_controller",["namespace","underscore","mediator","controllers/controller","analytics","views/overlay/overlay_view","local_storage_facade"],function(e,t,n,r,i,s,o){var u=r.extend({initialize:function(){n.subscribe("overlay:trigger",this.onShow,this)},onShow:function(e){var t="overlay_",n=t+e.storageKeyName;this._wasOverlayEverSeen(n)||(this._renderView(e),this._setOverlayWasSeen(n),this._trackEvent(e.analyticsEvent))},_renderView:function(e){this.view=new s(e),this.view.render()},_wasOverlayEverSeen:function(e){var n,r;return r=o.read(e),n=!t.isEmpty(r),n},_setOverlayWasSeen:function(e){o.write(e,1)},_trackEvent:function(t){i.trackEvent("Overlay",t,e)}});return u}),define("views/walk_through/walk_through_page_view",["namespace","jquery","underscore","backbone","iscroll","helpers"],function(e,t,n,r,i,s){var o=r.View.extend({tagName:"ul",className:"walk-through-pages",template:"walk_through/walk_through_page",attributes:{"data-timing-category":"appload","data-timing-name":"walkthrough"},initialize:function(){n.bindAll(this,"resizeWalkThrough"),this.pageNumber=0,this.on("afterRender",this.afterRender,this),this.on("cleanup",this.cleanup,this)},afterRender:function(){this.resizeViewportHeight(),this.iScroll||(this.setupSwipe(),this.resizeWalkThrough(),t(window).on("resize.recalcContainer",n.debounce(this.resizeWalkThrough,300)))},cleanup:function(){t(window).off("resize.recalcContainer"),s.viewportResize()},setupSwipe:function(){var e=this;this.iScroll=new i(this.el.parentNode.id,{snap:".walk-through-page",momentum:!1,hScrollbar:!1,vScrollbar:!1,vScroll:!1,lockDirection:!0,onBeforeScrollStart:null,useTransition:!0,onScrollEnd:function(){e.onScrollEnd(this)}})},onScrollEnd:function(e){this.pageNumber=e.currPageX,this.trigger("page:change",this.pageNumber)},resizeWalkThrough:function(){this.resizeViewportHeight(),this.resizeWalkThroughPagesHeight(),this.resizeWalkThroughPagesWidth(),s.hideURLBar()},resizeWalkThroughPagesWidth:function(){var e=this.$el.find(".walk-through-page"),t=window.innerWidth;e.width(t),this.$el.width(t*4),this.iScroll.refresh(),this.iScroll.scrollToPage(this.pageNumber,0,0)},resizeWalkThroughPagesHeight:function(){var e=400,n=320,r=t(".page-0"),i="walk-through-landscape",s=".walk-through-page-header",o=".walk-through-tc-logo",u=".walk-through-page-caption";this.viewportHeight<e?(r.find(s).addClass(i),this.viewportHeight>n?r.find(o+","+u).removeClass(i):r.find(o+","+u).addClass(i)):t("."+i).removeClass(i)},resizeViewportHeight:function(){var n=t("#walk_through");this.viewportHeight=s.getViewportHeight(),!e.isFullScreen&&e.isIos&&t.browser.safari&&(this.viewportHeight=s.getViewportHeightOnIosSafari()),t("html, #app-page").css("min-height",this.viewportHeight),n.height(this.viewportHeight)}});return o}),define("views/walk_through/walk_through_toolbar_view",["namespace","jquery","underscore","backbone","mediator","layoutmanager","analytics"],function(e,t,n,r,i,s,o){var u=r.View.extend({events:{"vclick #sign-in":"onSignIn","vclick #sign-up":"onSignUp","vclick .tc-button":"onWalkThroughExit"},className:"walk-through-toolbar fixed-toolbar-on-dark-bg",template:"walk_through/walk_through_toolbar",initialize:function(){this.pageNumber=0},onSignIn:function(t){var n="Login_Page"+this.pageNumber;t.preventDefault(),i.publish("session:login"),o.trackEvent("WalkThrough",n,e)},onSignUp:function(t){var n="SignUp_Page"+this.pageNumber;t.preventDefault(),i.publish("sign_up:show"),o.trackEvent("WalkThrough",n,e)},onWalkThroughExit:function(e){e.preventDefault(),this.trigger("walk_through:exit")},setPageNumber:function(e){this.pageNumber=e}});return u}),define("views/walk_through/walk_through_page_indicator_view",["namespace","jquery","underscore","backbone"],function(e,t,n,r){var i=r.View.extend({template:"walk_through/walk_through_page_indicator",className:"walk-through-page-indicator",initialize:function(){this.pageNumber=0,this.on("afterRender",function(){t(".indicator-0").addClass("active-indicator")},this)},setPageNumber:function(e){this.pageNumber=e;var n=".indicator-"+e.toString();t(".active-indicator").removeClass("active-indicator"),t(n).addClass("active-indicator")}});return i}),define("controllers/ui/walk_through_controller",["namespace","jquery","underscore","mediator","controllers/controller","analytics","views/walk_through/walk_through_page_view","views/walk_through/walk_through_toolbar_view","views/walk_through/walk_through_page_indicator_view"],function(e,t,n,r,i,s,o,u,a){var f=i.extend({initialize:function(){r.subscribe("walk_through:show",this.onShow,this)},onShow:function(){var n=new a,r=new o,i=new u;this._layout=e.getLayout("walk_through"),this._layout&&(this._layout.setViews({"#walk-through-page-indicator-wrapper":n,"#walk-through-pages-wrapper":r,"#walk-through-toolbar-wrapper":i},!0),this._layout.render(function(e){t("#app-page").html(e)}).then(function(){n.trigger("afterRender"),r.trigger("afterRender"),i.trigger("afterRender")})),r.on("page:change",function(e){n.setPageNumber(e),i.setPageNumber(e)}),i.on("walk_through:exit",function(){n.trigger("cleanup"),r.trigger("cleanup"),i.trigger("cleanup")})}});return f}),define("views/info_page/info_page_view",["namespace","jquery","underscore","backbone","layoutmanager"],function(e,t,n,r){var i=r.View.extend({template:"info_pages/info_page",initialize:function(e){this.textStrings=e,this.on("afterrender",function(){var e="";this.textStrings.forEach(function(t){e+='<p class="instruction-info">'+t+"</p>"}),this.$el.find(".instruction").append(e)},this)}});return i}),define("controllers/ui/info_page_controller",["underscore","mediator","namespace","controllers/controller","analytics","views/info_page/info_page_view","strings"],function(e,t,n,r,i,s,o){var u=r.extend({initialize:function(){this._layout=n.getLayout("simple"),t.subscribe("info_page:show_for_business",this.onShowForBusiness,this),t.subscribe("info_page:show_for_link_booking",this.onShowForLinkBooking,this),t.subscribe("info_page:show_for_always_share",this.onShowForAlwaysShare,this),t.subscribe("info_page:show",this.onShow,this)},onShowForAlwaysShare:function(e){this.onShow({textStrings:[o.AlwaysShareHelp1,o.AlwaysShareHelp2,o.AlwaysShareHelp3],headerText:o.AlwaysShareHelp,backButtonMsg:e})},onShowForLinkBooking:function(){this.onShow({textStrings:[o.ImportBookingInstruct1,o.ImportBookingInstruct2,o.ImportBookingInstruct3,o.ImportBookingInstruct4],headerText:o.ImportBookingHelp,backButtonMsg:"trip_items:back_info_add"})},onShowForBusiness:function(e){this.onShow({textStrings:[o.BusinessHelp1,o.BusinessHelp2,o.BusinessHelp3,o.BusinessHelp4],headerText:o.BusinessHelp,backButtonMsg:e})},onShow:function(e){var t=new s(e.textStrings);this.setView(t),this._updateHeader(e.headerText,e.backButtonMsg)}});return u});var Timing,timingNodeInserted=function(e){if(e.animationName==="nodeInserted"){var t=e.target.getAttribute("data-timing-category"),n=e.target.getAttribute("data-timing-name"),r=e.target.getAttribute("data-timing-label");t&&n&&(t==="appload"?Timing.loadEnd(t,n,r):Timing.timeEnd(t,n,r))}};document.addEventListener("animationstart",timingNodeInserted,!1),document.addEventListener("MSAnimationStart",timingNodeInserted,!1),document.addEventListener("webkitAnimationStart",timingNodeInserted,!1),Timing={timers:{},pubsub:null,time:function(e,t,n){var r=Array.prototype.slice.call(arguments);if(!Timing._areArgumentsValid(r))throw new Error("Invalid arguments for `time`");var i=r.join(":"),s=window.performance.now();Timing.pubsub&&(Timing.timers[i]=s,Timing.pubsub.publish("time",[i,s],arguments))},timeEnd:function(e,t,n){var r=Array.prototype.slice.call(arguments);if(!Timing._areArgumentsValid(r))throw new Error("Invalid arguments for `timeEnd`");r=r.filter(function(e){return e!==null&&e!==undefined});var i=r.join(":"),s=window.performance.now();Timing.pubsub&&Timing.timers[i]&&(Timing.pubsub.publish("timeEnd",[i,s],arguments),Timing.pubsub.publish("timeDiff",[i,s-Timing.timers[i]],arguments),delete Timing.timers[i])},loadEnd:function(e,t,n){var r=Array.prototype.slice.call(arguments);if(!Timing._areArgumentsValid(r))return;r=r.filter(function(e){return e!==null&&e!==undefined});var i=r.join(":"),s=window.performance.now();Timing.pubsub&&(Timing.pubsub.publish("timeEnd",[i,s],arguments),Timing.pubsub.publish("timeDiff",[i,s],arguments))},log:function(){return},_areArgumentsValid:function(e){return typeof e[0]=="undefined"||typeof e[1]=="undefined"?(Timing.log("arguments invalid"),!1):!0}},define("timing",function(e){return function(){var t,n;return t||e.Timing}}(this)),define("../libs/timing/timing_pubsub",["jquery","timing"],function(e,t){var n=e({});t.pubsub={},t.pubsub.subscribe=function(e,t){n.on.apply(n,Array.prototype.slice.call(arguments))},t.pubsub.unsubscribe=function(e,t){n.off.apply(n,Array.prototype.slice.call(arguments))},t.pubsub.publish=function(e,t){n.trigger.apply(n,Array.prototype.slice.call(arguments))}}),define("../libs/timing/modules/timing_analytics",["config","mediator","analytics","../timing_pubsub"],function(e,t,n){var r=["appload","ajax"],i={init:function(){Timing.pubsub.subscribe("timeDiff",function(e,t,n){var s=t.split(":"),o=s[0],u=s[1],a=s[2];r.indexOf(o)!==-1&&(o==="appload"?i.handleAppLoad(o,u,n,a):i.handleTimingEvent(o,u,n,a)),Timing.log("analytics: "+t,n)})},handleAppLoad:function(e,r,i,s){t.getHistory().length>8?(Timing.log(t.getHistory()),Timing.log("mediator length > 8, ignoring")):n.trackTiming(e,r,parseInt(i),s)},handleTimingEvent:function(e,t,r,i){n.trackTiming(e,t,parseInt(r),i)}};return i}),define("../libs/timing_init",["config","../libs/timing/timing_pubsub","../libs/timing/modules/timing_analytics"],function(e,t,n){n.init(),e.debug&&(Timing.log=function(){console.log.apply(console,arguments)})}),define("app",["config","namespace","jquery","underscore","backbone","router","modules/flash","collections/trips","controllers/trip_items_controller","collections/following_trips","controllers/offline_controller","controllers/ui/header_controller","controllers/ui/error_popup_controller","controllers/session_controller","controllers/trips_controller","controllers/flights_controller","controllers/hotels_controller","controllers/vehicles_controller","controllers/generic_item_controller","controllers/ui/sidemenu_controller","controllers/manage_trip_controller","controllers/sign_up_controller","controllers/forgot_password_controller","controllers/altflights_controller","controllers/push_controller","controllers/terms_controller","controllers/seatmaps_controller","controllers/android_controller","controllers/launch_controller","controllers/map_controller","controllers/contacts_controller","app_state_machine","mediator","helpers","helpers/device","strings","layoutmanager","modernizr","analytics","controllers/ui/overlay_controller","controllers/ui/walk_through_controller","controllers/ui/info_page_controller","trips_manager","../libs/timing_init"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U){var z={initialize:function(){F.initialize(),r.bindAll(this,"startupController"),t.router=new s,t.config=e,t.tripsIsFeedView={},t.isOnline=!0,t.isWrapped=P.isWrapped(),t.isWebApp=P.isWebApp(),t.isFullScreen=t.isWrapped||t.isWebApp,t.appStateMachine=M,this.initFlash(),this.initLayouts(),this.initControllers(),this.initAppEventSubscriptions(),this.startAjaxLoadingListener(),this.initUIEnhancements(),this.initUAChecking(function(){this.initOfflineCheck(),this.trackAjaxCalls(["GET"]),window.app=t,window.mediator=_,t.controllers.launch=new L,i.history.start()},this)},initFlash:function(){t.flash=new o},initLayouts:function(){t.layouts={},t.getLayout=function(e){return t.layouts[e]||(t.layouts[e]=new i.LayoutManager({template:e,id:e}),t.layouts[e].setViews_original=t.layouts[e].setViews,t.layouts[e].setViews=function(e,t){t||_.publish("ajax:abort"),_.publish("popup:remove"),this.setViews_original(e)}),t.layouts[e]}},initControllers:function(){t.controllers.offline=new l,t.controllers.session=new p,t.controllers.header=new c,t.controllers.errorPopup=new h,t.controllers.overlayPopup=new I,t.controllers.infoPage=new R,t.controllers.walkthrough=new q,t.controllers.trips=new d,t.controllers.hotels=new m,t.controllers.vehicles=new g,t.controllers.generic_item=new y,t.controllers.sidemenu=new b,t.controllers.signup=new E,t.controllers.forgotPassword=new S,t.controllers.manageTrips=new w,t.controllers.map=new A,t.controllers.terms=new N,t.controllers.seatMaps=new C,t.controllers.contacts=new O,t.controllers.flights=new v,t.controllers.altflights=new x,t.controllers.trip_items=new a,P.isWrapped()&&window.plugins.pushNotification&&(t.controllers.push_controller=new T)},initAppEventSubscriptions:function(){_.subscribe("startupController!",this.startupController),_.subscribe("device:resume",this.resume),_.subscribe("session:success",function(e,r){n("#initial").remove(),D.viewportResize(),U.getTrips().resetAndCache(e.trips.models,r),U.getFollowingTrips().reset(),t.user=e.user,t.otherEventsMeta=e.otherEventsMeta}),_.subscribe("session:success",function(e){e&&e.upgradeError&&_.publish("upgradeerror",e.upgradeError)}),_.subscribe("upgradeerror",function(e){var t=function(){window.location=e.get("update_url")},n=e.getMessage(),r=H.UpgradeAvailableTitle;D.confirm(n,t,r)}),_.subscribe("session:invalid",function(){n("#initial").remove(),U.resetAllTrips(null,{silent:!0}),t.user=null}),_.subscribe("trip_items:index",function(e){U.setCurrentTripId(e.tripId)}),_.subscribe("trip_items:feed",function(e){U.setCurrentTripId(e.tripId)}),_.subscribe("trip_items:add",function(e){U.setCurrentTripId(e.tripId)}),_.subscribe("offline:offline",function(){t.isOnline=!1}),_.subscribe("offline:online",function(){t.isOnline=!0})},startAjaxLoadingListener:function(){var e;n("body").ajaxStart(function(t){var r=n(this);clearInterval(e),e=setInterval(function(){n.active<=0&&(r.removeClass("load"),clearInterval(e))},3e4),r.addClass("load")}).ajaxStop(function(t){n.active===0&&(clearInterval(e),n(this).removeClass("load"))})},trackAjaxCalls:function(e){e=e||["GET","PUT","DELETE","POST"];var i=window.xhrPool=[];n(document).ajaxSend(function(t,n,s){r.contains(e,s.type)&&i.push(n)}),n(document).ajaxComplete(function(e,t,n){i=r.reject(i,function(e){return e!==t})}),t.abortAllAjaxCalls=function(){n("body").removeClass("load"),r.each(i,function(e){e.abort()}),i=[]},_.subscribe("ajax:abort",function(){t.abortAllAjaxCalls()})},initUIEnhancements:function(){var e=window.innerWidth,t=n("body");t.on("vmousedown",".button",function(){n(this).addClass("active")}),t.on("vmouseout",".button",function(){n(this).removeClass("active")}),t.on("vmousedown",".mytrips-summary-segmented-button",function(){n(this).parents(".mytrips-summary-segmented-bar").find(".mytrips-summary-segmented-button").removeClass("selected"),n(this).addClass("selected")}),t.on("touchmove",".app-header",function(e){e.preventDefault()}),t.on("touchmove","#sidemenu-scroll-wrapper, .full-screen-underlay, .error-popup",function(e){e.preventDefault()}),D.viewportResize(),n(window).resize(function(){Math.abs(e-window.innerWidth)>50&&setTimeout(D.viewportResize,1e3),e=window.innerWidth})},initUAChecking:function(e,i){var s=this,o=function(){t.ua=navigator.userAgent.toLowerCase(),t.isAndroid=window.device.platform==="Android",t.isBlackberry=window.device.platform==="Blackberry",t.isIos=window.device.platform.match(/iPhone|iPod|iPad|iOS/i),t.isIos6=t.isIos&&window.device.version>="6"&&window.device.version<"7",t.isIos7=t.isIos&&window.device.version>="7",t.isIceCreamSandwich=t.isAndroid&&window.device.version>="4"&&window.device.version<="4.0.9",t.isIos||(t.isWebApp=!1),s.deviceHasOverflowScrollingSupport(),t.isBlackberry&&n("html").addClass("blackberry");if(t.isIos7&&(t.isWrapped||t.isFullScreen))n("html").addClass("status-bar");else if(t.isIos7){var e=document.querySelector("meta[name=apple-mobile-web-app-status-bar-style]");e.setAttribute("content","black-translucent")}t.isAndroid&&t.isWrapped&&window.device.version>="4.4.2"&&n("html").addClass("status-bar"),t.isAndroid&&(t.controllers.android=new k)};P.isWrapped()?(o(),e.call(i)):require(["cordova_polyfill"],r.wrap(o,function(t){t(),e.call(i)}))},initOfflineCheck:function(){navigator.network.connection.type===Connection.NONE&&_.publish("offline:offline")},deviceHasOverflowScrollingSupport:function(){var e=n("html");(!t.isIos6||t.isIos6&&t.iosVersion<6)&&e.removeClass("overflowscrolling")},startupController:function(e,n,r){t.controllers[e]||(t.controllers[e]=new n)},resume:function(){U.invalidateCache();var e=U.getCurrentTrip();typeof e!="undefined"&&e.invalidateCache()}};return z}),define("helpers/error_catcher",["helpers/app_agent","mediator","config"],function(e,t,n){try{RuntimeErrorHandler.prototype.getAdditionalErrorData=function(){return{appAgent:e.getAppAgent(),mediator:t.getHistory()}},n.debug&&(window.onerror=null)}catch(r){return}}),this.Handlebars=this.Handlebars||{},this.Handlebars.templates=this.Handlebars.templates||{},Handlebars.registerPartial("flight_schedule",Handlebars.template(function(e,t,n,r,i){function h(e,t){var r="",i,s,o;return r+='\n<div class="bubble-content">\n	<table class="flight-schedule">\n		<tbody>\n\n		<tr class="departure">\n			<th class="schedule-header" colspan="2">',(s=n.startAction)?i=s.call(e,{hash:{},data:t}):(s=e&&e.startAction,i=typeof s===a?s.call(e,{hash:{},data:t}):s),r+=f(i)+'</th>\n			<th class="schedule-header">'+f((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"TermGate",o):l.call(e,"t","TermGate",o)))+'</th>\n		</tr>\n		<tr class="departure">\n			<td class="time '+f((s=n.departureTimeClass||e&&e.departureTimeClass,o={hash:{},data:t},s?s.call(e,e&&e.cancelled,e&&e.scheduled_departure,e&&e.estimated_departure,o):l.call(e,"departureTimeClass",e&&e.cancelled,e&&e.scheduled_departure,e&&e.estimated_departure,o)))+'">\n				'+f((s=n.timeFromDateTime||e&&e.timeFromDateTime,o={hash:{},data:t},s?s.call(e,e&&e.estimated_departure,o):l.call(e,"timeFromDateTime",e&&e.estimated_departure,o)))+'\n			</td>\n			<td class="airport-code">',(s=n.departure_airport_code)?i=s.call(e,{hash:{},data:t}):(s=e&&e.departure_airport_code,i=typeof s===a?s.call(e,{hash:{},data:t}):s),r+=f(i)+'</td>\n			<td class="term-gate '+f((s=n.alertClassIf||e&&e.alertClassIf,o={hash:{},data:t},s?s.call(e,e&&e.departure_terminal_or_gate_change,o):l.call(e,"alertClassIf",e&&e.departure_terminal_or_gate_change,o)))+'">'+f((s=n.get_terminal_and_gate||e&&e.get_terminal_and_gate,o={hash:{},data:t},s?s.call(e,e&&e.departure_terminal,e&&e.departure_gate,o):l.call(e,"get_terminal_and_gate",e&&e.departure_terminal,e&&e.departure_gate,o)))+'\n			</td>\n		</tr>\n		<tr class="arrival">\n			<th class="schedule-header" colspan="2">Arrives</th>\n			<th class="schedule-header">'+f((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"TermGate",o):l.call(e,"t","TermGate",o)))+'</th>\n		</tr>\n		<tr class="arrival">\n			<td class="time '+f((s=n.arrivalTimeClass||e&&e.arrivalTimeClass,o={hash:{},data:t},s?s.call(e,e&&e.cancelled,e&&e.scheduled_arrival,e&&e.estimated_arrival,o):l.call(e,"arrivalTimeClass",e&&e.cancelled,e&&e.scheduled_arrival,e&&e.estimated_arrival,o)))+'">'+f((s=n.timeFromDateTime||e&&e.timeFromDateTime,o={hash:{},data:t},s?s.call(e,e&&e.estimated_arrival,o):l.call(e,"timeFromDateTime",e&&e.estimated_arrival,o)))+'\n			</td>\n			<td class="airport-code">',(s=n.arrival_airport_code)?i=s.call(e,{hash:{},data:t}):(s=e&&e.arrival_airport_code,i=typeof s===a?s.call(e,{hash:{},data:t}):s),r+=f(i)+'</td>\n			<td class="term-gate '+f((s=n.alertClassIf||e&&e.alertClassIf,o={hash:{},data:t},s?s.call(e,e&&e.arrival_terminal_or_gate_change,o):l.call(e,"alertClassIf",e&&e.arrival_terminal_or_gate_change,o)))+'">'+f((s=n.get_terminal_and_gate||e&&e.get_terminal_and_gate,o={hash:{},data:t},s?s.call(e,e&&e.arrival_terminal,e&&e.arrival_gate,o):l.call(e,"get_terminal_and_gate",e&&e.arrival_terminal,e&&e.arrival_gate,o)))+"\n			</td>\n		</tr>\n\n		</tbody>\n	</table>\n</div>\n",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,o,u,a="function",f=this.escapeExpression,l=n.helperMissing,c=this;return s=(o=n.if_equal||t&&t.if_equal,u={hash:{},inverse:c.noop,fn:c.program(1,h,i),data:i},o?o.call(t,t&&t.type,"Air",u):l.call(t,"if_equal",t&&t.type,"Air",u)),s||s===0?s:""})),Handlebars.registerPartial("cookies",Handlebars.template(function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<h2>COOKIES POLICY</h2>\n<p>Last modified: June 27, 2013</p>\n<ol>\n	<li>1. <span class="cookie-header">What is a cookie?</span>\n		<p>A cookie is a piece of data that is stored on a computer, tablet or other device ("device") used to browse the Internet so that that device can be recognized at a later time.</p>\n		<p>It is your choice whether or not you allow cookies to be placed on your device.  For specific information about managing and controlling cookies, please refer to <span class="cookie-header">Managing cookies</span> below.</p>\n	</li>\n	<li>2. <span class="cookie-header">Our cookies policy</span>\n		<p>The TripCase service (the "service") attempts to place certain cookies on your device when you visit the TripCase site. We have listed for you below the types of cookies we use, and what we use them for:</p>\n		<table class="cookie-table">\n			<tbody>\n				<tr>\n					<th class="cookie-table-header">Cookie Type</th>\n					<th class="cookie-table-header">Cookie Purpose</th>\n				</tr>\n				<tr>\n					<td class="cookie-table-data">Session cookies</td>\n					<td class="cookie-table-data">These cookies are used to track your session state as you interact with the service.</td>\n				</tr>\n				<tr>\n					<td class="cookie-table-data">Identity cookies</td>\n					<td class="cookie-table-data">These cookies are set at your request to have the application remember you the next time you return to the service using the device.</td>\n				</tr>\n				<tr>\n					<td class="cookie-table-data">Optimization cookies</td>\n					<td class="cookie-table-data">These cookies are used to track usage of the services we offer in order to improve the usability of our service.</td>\n				</tr>\n				<tr>\n					<td class="cookie-table-data">Advertising cookies</td>\n					<td class="cookie-table-data">These cookies are used to measure and improve the effectiveness of our advertising.</td>\n				</tr>\n			</tbody>\n		</table>\n		<p>In order to fully-utilize the service, your device should be set to accept cookies, as much of the service functionality only works via the use of cookies. Cookies placed when you visit the TripCase site do not harm your device in any way or recognize you personally as an individual; they only recognize the device or browser you are using. Cookies placed when you visit the TripCase site do not store any of your personal or sensitive information (such as your name, email address or travel details).</p>\n	</li>\n	<li>3. <span class="cookie-header">Managing cookies</span>\n		<ul>\n			<li><span class="cookie-header">What happens if I don\'t allow cookies?</span>\n				<p>If cookies aren\'t enabled on your device, your experience with the service or access to the service could be limited (for instance, you may not be use all the features of the service or access the service via a browser). </p>\n			</li>\n			<li><span class="cookie-header">How do I disable/enable cookies?</span>\n				<p>You can disable/enable cookies via your Internet browser or via settings on your mobile device. We have explained how you may do this via some of the main Internet browsers below. </p>\n\n				<label class="cookie-header-bold">Safari</label>\n				<ol>\n					<li>1. In the tools menu, select "preferences"</li>\n					<li>2. Select the "privacy"" icon</li>\n					<li>3. This will bring up options for cookies and you can choose to enable or disable them by clicking on the checkbox.</li>\n				</ol>\n\n				<label class="cookie-header-bold">Google Chrome</label>\n				<ol>\n					<li>1. In the settings menu, select  "show advanced settings" at the bottom of the page</li>\n					<li>2. Select the "content settings" button in the privacy section</li>\n					<li>3. The top section of the page that then appears tells you about cookies and allows you to set the cookies you want. It also allows you to clear any cookies currently stored.</li>\n				</ol>\n\n				<label class="cookie-header-bold">Mozilla Firefox</label>\n				<ol>\n					<li>1. In the tools menu, select "options"</li>\n					<li>2. Select the privacy tab in the options box</li>\n					<li>3. From the dropdown choose, "Use Custom Settings for History". This will bring up the options for cookies and you can choose to enable or disable them by clicking the checkbox.</li>\n				</ol>\n\n				<label class="cookie-header-bold">Internet Explorer 6+</label>\n				<ol>\n					<li>1. In the tools menu, select "Internet Options"</li>\n					<li>2. Click the "privacy" tab</li>\n					<li>3. You will see a privacy settings slider which has six settings that allow you to control the number of cookies that will be placed: Block All Cookies, High, Medium High, Medium (default level), Low, and Accept All Cookies.</li>\n				</ol>\n			</li>\n			<li><span class="cookie-header">How can I opt out of advertising cookies?</span>\n				<p>If you wish to prevent a third-party advertiser from collecting your information, you may either visit each ad network\'s website individually and opt out at that location, or you may visit the National Advertising Initiative (NAI) opt-out site to opt-out of all network advertising cookies.   Click here for the NAI gateway opt-out site:  http://www.networkadvertising.org/choices/Consumer Opt-out | NAI: Network Advertising Initiative.  This site will also allow you to review the third party advertising companies\' privacy statements.</p>\n			</li>\n		</ul>\n	</li>\n</ol>'})),Handlebars.registerPartial("privacy",Handlebars.template(function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<h2>TripCase Privacy Statement</h2>\n<p>Last modified: April 23, 2014</p>\n<p>TripCase (the "<strong>Service</strong>") is a trip-related information and messaging service, available from Sabre GLBL Inc. (the “<strong>Company</strong>”), either online through our website at www.tripcase.com or via our mobile application.  TripCase provides users with the ability to integrate all of their trip-related information into one location, share information regarding their trips, and receive valuable informational updates and deals related to their trips.</p>\n\n<h3>Introduction</h3>\n<p>We respect your privacy and are committed to protecting it. Please take a moment to familiarize yourself with our privacy practices. By accessing the Service, you agree to our privacy practices as set out in this privacy statement.</p>\n<p>This statement describes the information that the Service collects and how that information may be used by us.  This statement does not apply to information we collect through any means other than the Service, or to information collected on any other Company or third-party site that may link to or be accessible from the Service.  We encourage you to learn about the privacy practices of those third parties.</p>\n<p>Our servers and data centers for the Service are located in the U.S.  We may also subcontract processing to or share your personal information with third parties located in countries other than your home country.  If you are accessing the Service from outside the U.S., you agree that your personal information may be transferred to the U.S. or another country, which may have different privacy and data security protections than those of your own jurisdiction, to be processed and stored.  You expressly consent to your personal information being used as set out in this paragraph.</p>\n\n<h3>Safe Harbor</h3>\n<p>TripCase adheres to the US-EU and US-Swiss Safe Harbor Privacy Frameworks with respect to personal information about EU travelers that we receive via the Service in the United States, and has certified that it adheres to the Safe Harbor Privacy Principles. To learn more about the Safe Harbor program please visit http://www.export.gov/safeharbor/.</p>\n<p>Neither this Privacy Statement, nor our participation in the Safe Harbor program, applies to any travel supplier, such as an airline, car rental company or hotel, nor do they apply to any individual traveler’s employer or travel agency (for purposes hereof, a “travel arranger”) that obtains any related services from TripCase. We recommend that you review the privacy policies of your travel agency and of relevant travel suppliers. In addition, our participation in Safe Harbor does not apply to travelers in non-EU and non-Swiss jurisdictions.</p>\n\n<h3>Collection of Personal Information</h3>\n<p>Personal information is data that can be used to uniquely identify or contact a single person. We collect several types of personal information from and about users of the Service, including:</p>\n<ul>\n	<li>Personal information you provide to us when you register for the Service or thereafter, such as your name and email address;</li>\n	<li>Personal information provided to us prior to your registration with the Service by a travel company (such as a travel agency, airline or other travel provider, hotel, etc.) with which you have arranged travel;</li>\n	<li>Personal information included in any messaging you undertake through the Service, such as sharing of trip-related information; and</li>\n	<li>If you contact us, personal information you provide to us that details the nature of your question or problem.</li>\n</ul>\n<p>If you connect to the Service using credentials of a third party Social Networking Site ("SNS") such as Facebook, Google +, or LinkedIn, you authorize us to collect your authentication information, such as your name, e-mail address, and encrypted access credentials. We may store this information so that it can be used for the purposes explained in this statement, and it may also be used to verify your credentials with the SNS. The information available to TripCase from an SNS is affected by the privacy settings you establish at the SNS.  You understand and agree that an SNS’s use of information they collect from you is governed by their privacy policies, and TripCase’s use of such information is governed by this privacy statement.</p>\n<p>If you connect to any third party site other than an SNS using the credentials of your TripCase account for data sharing with that third party, you authorize the collection of your authentication information, such as your name, e-mail address, and encrypted access credentials, as well as any other personal information that third party site may choose to access. You do so at your own risk and understand and agree that the third party’s collection of such information is governed by their privacy policies, and TripCase’s use of such information is governed by this privacy statement.</p>\n\n<h3>Use of Personal Information</h3>\n<p>We use personal information in the following ways:</p>\n<ul>\n	<li>To present the Service and its contents in a suitable and effective manner for you and for your computer or mobile device;</li>\n	<li>To provide you with information, products or services that you request or otherwise elect to receive from us or from one of our strategic partners;</li>\n	<li>To notify you about changes to the Service;</li>\n	<li>To allow you to utilize the trip integration, sharing, and messaging features of the Service, if and when you choose to do so; and</li>\n	<li>To provide you with e-mail or other messaging regarding additional products or services you may be interested in, either from us or from one of our strategic partners, including promotional e-mails or messages.</li>\n</ul>\n\n<h3>Disclosure of Personal Information to Third Parties</h3>\n<p>We may from time-to-time make certain personal information available to strategic partners that work with the Company such as the following:</p>\n<ul>\n	<li>Various subsidiaries of the Company that support the Service ;</li>\n	<li>Third party service providers we use to support our business who provide services such as information processing, managing and enhancing customer data, providing customer service, assessing your interest in our products and services, and conducting customer research or satisfaction surveys;</li>\n	<li>Third party service providers we partner with to provide you offers of additional products or services based upon your trip-related information;</li>\n	<li>Your employer or travel agency with regard to those trips or portions of trips designated as business travel by you and as such, shared with your employer or travel agency via TripCase;</li>\n	<li>In the event of merger, acquisition, or any form of sale of some or all of the Company\'s assets, in which case personal information held by the Company about its customers will be among the assets transferred to the buyer.</li>\n</ul>\n<p>TripCase also enables you to share a particular item of content, on an individual basis, to third party services or other TripCase users by using the share functionality in the Service. Please note that sharing of such content on a third party service may be posted as activity on the Service, regardless of your account settings. To share an individual item of content to a third party service, you’ll be prompted to enter your access credentials for that third party service. TripCase may store your name, e-mail address, and an access token or similar credentials obtained from the third party service, so that you are able to share particular items of content, on that third party service, on an individual basis, without entering your access credentials again.</p>\n<p>We may also disclose your personal information to third parties to:</p>\n<ul>\n	<li>Comply with any court order or other legal obligation;</li>\n	<li>Enforce or apply our terms of use and any other agreements;</li>\n	<li>Protect the rights, property, or safety of the Company, our customers, or others. This may include exchanging information with other companies and organizations for the purposes of fraud protection and credit risk reduction; or</li>\n	<li>If you expressly opt in to such sharing.</li>\n</ul>\n\n<h3>Collection and Use of Non-Personal Information</h3>\n<p>We also collect non-personal information, or data in a form that cannot be used to uniquely identify or contact a single person. We may collect, use, transfer, and disclose non-personal information for any purposes. Non-personal information that we collect may include information regarding your activities on our website or our application, which may be aggregated and used to help us provide more useful information to our customers and to understand which parts of the Service are of most interest.</p>\n<p>If we combine non-personal information with personal information the combined information will be treated as personal information for the purposes of this Privacy Statement.</p>\n\n<h3>Location-Based Services</h3>\n<p>To provide location-based services to mobile application users of the Service, the Company or our partners may collect and use precise location data, such as the real-time geographic location of your device.  This location data is collected anonymously in a form that does not personally identify you and is used by the Company and our partners to provide location-based products and services.  We treat this location data as non-personal information.</p>\n\n<h3>Cookies and Other Technologies</h3>\n<p>The TripCase website, mobile application, email messages, and advertisements may use “cookies” and other technologies such as pixel tags and web beacons. These technologies help us to improve and to deliver a better and more personalized service by enabling us to:</p>\n<ul>\n	<li>Estimate our audience size and usage patterns;</li>\n	<li>Store information about your preferences, allowing us to customize the Service according to your individual interests;</li>\n	<li>Speed up your searches; and</li>\n	<li>Recognize you when you return to the Service’s online website.</li>\n</ul>\n<p>You may refuse to accept cookies by activating the appropriate settings on your browser. Check with your provider to find out how to disable cookies. For further details about how we utilize cookies and how to deactivate cookies, please see our [Cookies Policy] on our website. Please note that certain features of the Service will not be available once cookies are disabled.</p>\n<p>We treat information collected by cookies and other technologies as non-personal information. However, to the extent that Internet Protocol (IP) addresses or similar identifiers are considered personal information by local law, we also treat these identifiers as personal information. Similarly, to the extent that non-personal information is combined with personal information, we treat the combined information as personal information for the purposes of this Privacy Statement.</p>\n\n<h3>Accessing Your Personal Information</h3>\n<p>You may access, correct or delete your contact information and preferences through your TripCase account. For other personal information, we make good faith efforts to provide you with access so you can request that we correct the data if it is inaccurate or delete the data if the Company is not required to retain it by law or for legitimate business purposes. We may decline to process requests that are unreasonably repetitive, require disproportionate technical effort, jeopardize the privacy of others, are extremely impractical, or for which access is not otherwise required by local law.</p>\n\n<h3>Data Security</h3>\n<p>We have implemented reasonable measures designed to secure your personal information from accidental loss and from unauthorized access, use, alteration and disclosure.</p>\n<p>The safety and security of your information also depends on you. Any content, including personal information, that you contribute to be shared, published or displayed on the Service, or transmitted to other users of the Service, either via the Service or via social networking or other third party sites available through the Service, is visible to other users and can be read, collected, or used by them. We urge you to be careful about giving out information in public areas of the Service. You understand and acknowledge that, even after removal, copies of your content, including personal information, that you contribute to be shared, published or displayed on the Service, or transmitted to other users of the Service, may remain viewable in cached and archived pages, or might have been copied or stored by other users. Although we take efforts to protect your personal information, we cannot guarantee the security of your personal information transmitted to the Service. Any transmission of personal information is at your own risk.</p>\n\n<h3>Children Under the Age of 13</h3>\n<p>The Service is not intended for children under 13 years of age. We do not knowingly collect personal information from children under age 13. In the event that we learn that we have collected personal information from a child under age 13 without verification of parental consent, we will take steps to delete that personal information as soon as possible.</p>\n\n<h3>Changes to Our Privacy Statement</h3>\n<p>It is our policy to post any changes we make to our privacy practices on this page. The date the privacy statement was last revised is identified at the top of the privacy statement.</p>\n\n<h3>Contact Information</h3>\n<p>Please direct any questions or comments about this privacy statement and our privacy practices to us at:</p>\n<ul>\n	<li><a href="mailto:TripCasePrivacy@sabre.com">TripCasePrivacy@sabre.com</a>; or</li>\n	<li>3150 Sabre Drive, Southlake, Texas 76092 Attn: Privacy Office.</li>\n</ul>\n<p>If any European traveler experiences an issue regarding personal information that the European traveler cannot resolve directly with their travel arranger or TripCase, TripCase agrees to use the International Centre for Dispute Resolution/American Arbitration Association Safe Harbor Program, as its independent recourse mechanism. All disputes shall be finally settled under the International Dispute Resolution Procedures of the International Centre for Dispute Resolution, Safe Harbor Program by one or more arbitrators appointed in accordance with the said Procedures. The location of any in-person hearing will be Dallas, Texas, but TripCase also consents to any hearing being conducted by telephone or video conference.</p>\n<p>Please direct any questions or comments about the Service to us at www.tripcase.com/feedback</p>\n'})),Handlebars.registerPartial("terms",Handlebars.template(function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<h2>User Agreement</h2>\n<p>Last modified: March 18, 2014</p>\n<p><strong>This User Agreement ("Agreement") is between You and Sabre GLBL Inc. ("Company") for use of TripCase (the “Service”).</strong></p>\n<p><strong>YOU SHOULD READ CAREFULLY AND UNDERSTAND THIS AGREEMENT. YOUR USE OF THE SERVICE AND/OR REGISTRATION AND VERIFICATION OF YOUR ACCOUNT FOR USE OF THE SERVICES, CONSTITUTES YOUR ONGOING ACCEPTANCE OF THIS AGREEMENT IN YOUR BEHALF AND IN BEHALF OF ANY OF YOUR EMPLOYEES AND AGENTS TO WHOM YOU PROVIDE THE SERVICE. YOU ARE SOLELY RESPONSIBLE AND LIABLE FOR YOUR NON-COMPLIANCE AND THE NON-COMPLIANCE OF YOUR EMPLOYEES OR AGENTS WITH THIS AGREEMENT.YOU FURTHER REPRESENT THAT YOU ARE AUTHORIZED TO ACCEPT THESE TERMS AND CONDITIONS. IF YOU CANNOT ACCEPT THIS AGREEMENT, PLEASE DO NOT USE THE SERVICE.</strong></p>\n<ol class="decimal">\n	<li><strong>Service.</strong> TripCase is a trip-related information and messaging service, available from the Company either online through our website at www.tripcase.com or via mobile application. The Service provide users with the ability to store trip-related information into one location, share that information, and receive updates, services and offers related to their trips.  Company has no obligation to provide support, maintenance, upgrades, modifications or new releases to the Service under this Agreement.</li>\n	<li>\n		<strong>Use of Service</strong>\n		<ol class="alpha">\n			<li>Company grants You a limited right to use the Service for personal, noncommercial and lawful purposes only.</li>\n			<li>Restrictions. Except as expressly authorized by Company in writing or otherwise enabled by Company:\n			<ol class="roman">\n				<li>You will not access the Service in a manner or through an interface not provided or authorized by Company including but not limited to, any automated means (e.g., scripts or bots);</li>\n				<li>You will not copy, reproduce, duplicate sell, trace, resell or exploit the Service;</li>\n				<li>You will not reverse engineer, disassemble or decompile any portion of the Service or its software, except to the extent expressly permitted by applicable law, and then only after You have notified Company in writing of Your intended activities;</li>\n				<li>You will  not upload, transmit, post or otherwise share any content that violates or infringes upon the rights of any third party, including, without limitation, copyright, trademark, privacy, publicity or other personal or proprietary rights;</li>\n				<li>You will not modify, adapt or hack the Service or modify a website so as to falsely imply that it is associated with the Services. You will not create or submit unwanted email or other messages to any other Service users;</li>\n				<li>You will not transmit any worms or viruses or any code of a destructive nature through Your access or use of the Service;</li>\n				<li>You will not use the Service to upload, post, transmit, share, store or otherwise make available any content that we deem to be harmful, threatening, unlawful, defamatory, infringing, abusive, inflammatory, harassing, vulgar, obscene, fraudulent, invasive of privacy or publicity rights, hateful, or racially, ethnically or otherwise objectionable.;</li>\n				<li>You will not use the Service to upload, post, transmit, share or otherwise make available any unsolicited or unauthorized advertising, solicitations, promotional materials, "junk mail," "spam," "chain letters," "pyramid schemes," or any other form of solicitation;</li>\n				<li>You will not republish or syndicate the information available on the Service (including but not limited to information made accessible to non-paying users via any portion of the Service provided on a paid subscription basis);</li>\n				<li>You will not disrupt, overwhelm, attack, modify or interfere with the Service or its associated software, hardware and/or servers in any way, and You agree not to impede or interfere with others\' use of the Service;</li>\n				<li>You will not alter or tamper with any information or materials on or associated with the Service. Other than connecting to Company’s servers by http requests using a Web browser, You may not attempt to gain access to Company’s servers by any means - including, without limitation, by using administrator passwords or by masquerading as an administrator while using the Service or otherwise.</li>\n			</ol>\n		</li>\n		<li>You are solely responsible for up to date contact information to receive information from the Service.  Company will not be liable for information sent to a device that is associated with Your outdated mobile phone number or email address.  If You install any software or enable any service that stores information from the Service on any mobile device or computer, it is Your responsibility, prior to transfer of such device, to remove Your information or otherwise disable access to such software or service, in order to prevent unauthorized access to Your information or account.  Company reserves the right to provide You with information relating to Your trip and/or use of the Service, including emergency matters and messages from our suppliers regarding their respective services.</li>\n		<li>You are solely responsible for any activity and content (including, without limitation, data, text, information, screen names, graphics, photos, profiles, audio and video clips, and links to third-party content) that is displayed, published, uploaded or posted through Your user account (collectively, "User Content").  If You have reason to believe that Your account is no longer secure (e.g., loss, theft or unauthorized disclosure or use of Your access information or computer or mobile device used to access the Service), You are responsible for changing the affected access information.</li>\n		<li>You acknowledge that Company has not reviewed and does not endorse the content of all sites linked to from this Service and is not responsible for the content or actions of any other sites linked to or from this Service, including but not limited to your authentication via a third party social networking site such as Facebook, Google +, or Linked In, and Your use of such sites via the Service. Your linking to any other service or site is at Your sole risk. By linking this Service to another service or site, You expressly agree to the disclosure of User Content permitted by or required to support such linking.</li>\n		<li>In order for You to access travel itinerary and related data, You authorize Company to obtain such data on Your behalf and You represent that You have the right to control and access the data which You request and access through the Service.</li>\n		<li>In order for You to receive information, including advertisements, regarding additional products or services originating from Company or third parties, You authorize Company to send You promotional e-mails, messages, and offers through the Service.  You acknowledge that Company is not responsible for the content of such advertisements, e-mails, messages and offers.</li>\n	</ol>\n</li>\n<li>\n	<strong>Intellectual Property and Data</strong>\n	<ol class="alpha">\n		<li>Company retains all rights and ownership to copyright, trademark, trade secret and any other intellectual property rights in the Service and any derivative works thereof.  All content of the Service (except User Content as defined below), including but not limited to designs, text, graphics, pictures, video, information, applications, software, music, sound and other files, their selection and arrangement, and its “look and feel” (the "Service Content"), are the proprietary property of Company or its licensors with all rights reserved.  No Service Content may be modified, copied, distributed, framed, reproduced, republished, downloaded, displayed, posted, transmitted, or sold in any form or by any means, in whole or in part, without Vendor’s prior written permission. You do not acquire any rights in the Service or the Service Content, other than those rights expressly granted under this Agreement.</li>\n		<li>We do not assert ownership of the photos, profiles, (Your User Content.)  When You post User Content, You authorize and direct us to disclose User Content as necessary to provide the Service and make such copies thereof as we deem necessary in order to facilitate transmission, posting and storage of the User Content on the Services. By posting User Content, in connection with any part of the Service, You automatically grant and You represent and warrant that You have a right to grant to Company, and all other users an irrevocable, perpetual, non-exclusive, transferable, fully paid, worldwide license (with right to freely sublicense) to use, copy, modify, publicly perform, publicly display, reformat, translate, syndicate, republish, excerpt (in whole or in part) and distribute such User Content for any purpose, commercial, advertising or otherwise, on or in connection with the Service or the promotion thereof, and to prepare derivative works of, or incorporate into other works such User Content.  You may remove Your User Content from the Service at any time, but You acknowledge that Company may not be able to and has no obligation to restrict any use by any other person, including other users, and the license You have granted remains in effect.  The use of User Content by Company is subject to applicable laws and Vendor\'s data privacy policy available at travel.tripcase.com/privacy or its successor site.</li>\n		<li>If You provide Company with feedback, suggestions, testimonials, comments, ideas, ratings, reviews, bug reports, or any similar or related information ("Feedback"), You agree that (a) any and all right, title and interest to such Feedback will  become the exclusive property of Company, (b) Company will be able to use and share such Feedback without Your consent, only if Company does not use Your first and last name (c) If You give prior consent, Company will be able to use and share such Feedback, while including Your first and last name (d) Company will not be responsible for providing You with any compensation whatsoever regarding the Feedback, and (e) Company may already have contemplated or be contemplating the same or similar ideas as Your Feedback. If You do not agree with these terms regarding Feedback, or want to maintain ownership of any intellectual property contained in any specific Feedback, Your sole option and recourse is to not submit such specific Feedback to Company.</li>\n		<li><strong>We respect the intellectual property rights of others and we prohibit users from uploading, posting or otherwise transmitting on the Company/TripCase website or Service, any materials that violate another party\'s intellectual property rights. The Digital Millennium Copyright Act of 1998 (as amended, the "DMCA") provides recourse for copyright owners who believe that material appearing on the Internet infringes their rights under U.S. copyright law.  If You believe in good faith that materials hosted by Company infringe Your copyright, You may send us a notice requesting that the material be removed, or access to it blocked. Notices must meet the current statutory requirements imposed by the DMCA; see 17 U.S.C 512 for details. Notices with respect to the Site should be sent to Sabre GLBL Inc., 3150 Sabre Drive, Southlake, TX 76092, Attn: General Counsel. You should consult Your legal advisor before filing a notice.  Note, there can be penalties for false claims under the DMCA</strong>.</li>\n	</ol>\n</li>\n<li>\n	<strong>Fees and Optional Services</strong>\n	<ol class="alpha">\n		<li>The basic Service is provided to You at no additional charge from Company. You are solely responsible for any fees or charges incurred to access the Service through an Internet access provider or other third party, including without limitation charges incurred to receive SMS messages or other mobile access, which may be billed to You or deducted from Your prepaid balance by Your mobile provider. You agree that Company is not liable in any way for any third party charges. Company reserves the right to offer these Service and other services (Optional Service(s)) for a subscription or other fee. Any use of Optional Services will be governed by these terms and any additional terms specific to the applicable Optional Service(s) used by You.</li>\n		<li>Unless Company states in writing otherwise, all fees and charges for the Service are nonrefundable.</li>\n	</ol>\n</li>\n<li>\n	<strong>Disclaimers and Limitation of Liability</strong>\n	<ol class="alpha">\n		<li><strong>COMPANY MAKES NO REPRESENTATIONS OR WARRANTIES, EITHER EXPRESS OR IMPLIED, OF ANY KIND WITH RESPECT TO THE SERVICES, INCLUDING BUT NOT LIMITED TO THE ACCURACY OR COMPLETENESS OF ANY INFORMATION CONTAINED THEREIN OR PROVIDED BY OR THROUGH THE SERVICE.. THE SERVICE IS  PROVIDED "AS IS" WITH NO WARRANTY. YOU AGREE THAT YOUR USE OF THE SERVICE IS AT YOUR SOLE RISK. TO THE FULLEST EXTENT PERMISSIBLE UNDER APPLICABLE LAW, VENDOR EXPRESSLY DISCLAIMS ALL WARRANTIES OF ANY KIND, EXPRESS OR IMPLIED, WITH RESPECT TO THE SERVICES, INCLUDING WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, SATISFACTORY QUALITY, ACCURACY, TITLE AND NON-INFRINGEMENT, AND ANY WARRANTIES THAT MAY ARISE OUT OF COURSE OF PERFORMANCE, COURSE OF DEALING OR USAGE OF TRADE. COMPANY DOES NOT WARRANT THAT THE SERVICE WILL OPERATE IN COMBINATION WITH HARDWARE, SOFTWARE, SYSTEMS OR DATA NOT PROVIDED BY COMPANY OR THAT THE OPERATION OF THE SERVICE WILL BE UNINTERRUPTED OR FREE OF VIRUSES OR ERRORS.</strong></li>\n		<li><strong>THE SERVICE INCLUDES INFORMATION PROVIDED FROM A VARIETY OF SOURCES AND THIRD PARTIES. THE PROVIDERS OF SUCH INFORMATION AND/OR OTHER SERVICES ON TRIPCASE ARE INDEPENDENT CONTRACTORS AND NOT AGENTS OR EMPLOYEES OF COMPANY OR ITS AFFILIATES. COMPANY’S DISPLAY OF SUCH INFORMATION DOES NOT IN ANY WAY IMPLY, SUGGEST, OR CONSTITUTE ANY SPONSORSHIP OR APPROVAL BY COMPANY OF SUCH INFORMATION OR ITS PROVIDERS. YOU AGREE THAT COMPANY IS IN NO WAY RESPONSIBLE FOR THE ACCURACY, TIMELINESS, OR COMPLETENESS OF INFORMATION IT MAY OBTAIN FROM THESE THIRD PARTY SOURCES. YOUR INTERACTION WITH SUCH PROVIDERS IS AT YOUR OWN RISK. COMPANY AND ITS AFFILIATES WILL HAVE NO LIABILITY FOR THE ACTS, ERRORS, OMISSIONS, REPRESENTATIONS, WARRANTIES, BREACHES OR NEGLIGENCE OF ANY SUCH PROVIDERS OR FOR ANY PERSONAL INJURIES, DEATH, PROPERTY DAMAGE, OR OTHER DAMAGES OR EXPENSES RESULTING THEREFROM. COMPANY AND ITS AFFILIATES HAVE NO LIABILITY AND WILL MAKE NO REFUND IN THE EVENT OF ANY DELAY, CANCELLATION, OVERBOOKING, STRIKE, FORCE MAJEURE, OR OTHER CAUSES BEYOND OUR DIRECT CONTROL.</strong></li>\n		<li><strong>Limitation of Liability. IN NO EVENT WILL EITHER PARTY BE LIABLE FOR ANY INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL OR PUNITIVE DAMAGES, OR DAMAGES FOR LOSS OF PROFITS, REVENUE, BUSINESS, SAVINGS, DATA, USE OR COST OF SUBSTITUTE PROCUREMENT, INCURRED BY EITHER PARTY OR ANY THIRD PARTY, WHETHER IN AN ACTION IN CONTRACT OR TORT, EVEN IF THE OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES OR IF SUCH DAMAGES ARE FORESEEABLE. IN NO EVENT WILL COMPANY\'S LIABILITY FOR DAMAGES HEREUNDER EXCEED THE LESSER OF (I) AMOUNTS ACTUALLY PAID BY YOU TO COMPANY FOR THE SERVICE OR US$500. THE PARTIES ACKNOWLEDGE THAT THE LIMITATIONS OF LIABILITY IN THIS SECTION AND IN THE OTHER PROVISIONS OF THIS AGREEMENT AND THE ALLOCATION OF RISK HEREIN ARE AN ESSENTIAL ELEMENT OF THIS TRANSACTION BETWEEN THE PARTIES, WITHOUT WHICH COMPANY WOULD NOT HAVE ENTERED INTO THIS AGREEMENT. COMPANY’S PRICING REFLECTS THIS ALLOCATION OF RISK AND THE LIMITATION OF LIABILITY SPECIFIED HEREIN. SOME STATES/COUNTRIES DO NOT ALLOW THE EXCLUSION OR LIMITATION OF INCIDENTAL OR CONSEQUENTIAL DAMAGES, SO THE ABOVE LIMITATIONS AND/OR EXCLUSION OR LIMITATION OF LIABILITY MAY NOT APPLY TO YOU.</strong></li>\n	</ol>\n</li>\n<li><strong>Termination.</strong> This Agreement is effective until terminated by You or Company. Company may terminate this Agreement at any time upon (i) Your breach of any of the provisions hereof or (ii) upon electronic notice to You. Upon termination of this Agreement, You will cease all use of the Service.</li>\n<li>\n	<strong>General Terms</strong>\n	<ol class="alpha">\n		<li><strong>Applicable Law.</strong> This Agreement and all matters arising out of or relating thereto, except as governed by federal law, will be governed by the laws of the State of Texas without giving effect to any choice of law rule. This Agreement will not be governed by the United Nations Convention on Contracts for the International Sales of Goods, the application of which is expressly excluded. Any controversy, claim or dispute between the parties arising out of this Agreement may be tried solely in a state or federal court for Tarrant County, Texas, and the parties hereby irrevocably consent to the jurisdiction and venue of such courts.  Before resorting to this alternative, we strongly encourage You to first contact us directly to seek a resolution.</li>\n		<li><strong>Severability and Waiver.</strong> If any provision of this Agreement is held to be unenforceable, such provision will be enforced to the extent possible consistent with the stated intention of the parties, or, if incapable of such enforcement, will be deemed to be severed and deleted from this Agreement, while the remainder of this Agreement will continue in full force and effect. The waiver by either party of any default or breach of this Agreement will not constitute a waiver of any other or subsequent default or breach.</li>\n		<li><strong>No Assignment.</strong> You may not assign or otherwise dispose of this Agreement or any rights or obligations under this Agreement without the prior written consent of Vendor. Any purported assignment by You will be null and void. Subject to the foregoing, this Agreement will be binding upon and will inure to the benefit of the parties and their respective successors and assigns.</li>\n		<li><strong>Export Administration.</strong> You will comply fully with all relevant export laws and regulations of the United States, including, without limitation, the U.S. Export Administration Regulations (collectively "Export Controls"). Without limiting the generality of the foregoing, You will not, and You will require Your representatives not to, export, direct or transfer the Program, or any direct product thereof, to any destination, person or entity restricted or prohibited by the Export Controls.</li>\n		<li><strong>Entire Agreement.</strong> This Agreement constitutes the entire agreement between the parties and supersedes all prior or contemporaneous agreements or representations, written or oral, concerning the subject matter of this Agreement.</li>\n		<li><strong>Right to Modify.</strong>  Company reserves the right to modify or replace this Agreement at any time and in Company’s sole discretion. Company will indicate at the top of this Agreement the date such document was last updated. Any changes will be effective immediately upon posting the revised version (or such later effective date as may be indicated at the top of the revised Agreement). It is Your responsibility to regularly check the TripCase.com website to determine if there have been changes to this Agreement and to review such changes. Your continued use of the Service following the posting of any changes to the Agreement will mean Your acceptance of any such changes. If You do not agree to the changes, You must stop using the Service.</li>\n	</ol>\n</li>\n</ol>'})),this.Handlebars.templates["app/modules/header/header.tmpl"]=Handlebars.template(function(e,t,n,r,i){function l(e,t){return'\n		<button class="button back left"><span class="btn_icon_back_25px button-icon"></span></button>\n	'}function c(e,t){var r="",i,s;return r+='\n		<button class="button left ',(s=n.name)?i=s.call(e,{hash:{},data:t}):(s=e&&e.name,i=typeof s===u?s.call(e,{hash:{},data:t}):s),r+=a(i)+'">\n			<span class="',(s=n.iconClass)?i=s.call(e,{hash:{},data:t}):(s=e&&e.iconClass,i=typeof s===u?s.call(e,{hash:{},data:t}):s),r+=a(i)+'"></span>\n		</button>\n	',r}function h(e,t){return'\n		<span class="title logo_tripcase">&nbsp;</span>\n		'}function p(e,t){var r="",i,s;r+="\n		",i=n["if"].call(e,e&&e.isFollowingTrip,{hash:{},inverse:f.noop,fn:f.program(8,d,t),data:t});if(i||i===0)r+=i;r+='\n		<span class="title ',i=n["if"].call(e,e&&e.icon,{hash:{},inverse:f.noop,fn:f.program(9,v,t),data:t});if(i||i===0)r+=i;r+='">',(s=n.titleText)?i=s.call(e,{hash:{},data:t}):(s=e&&e.titleText,i=typeof s===u?s.call(e,{hash:{},data:t}):s);if(i||i===0)r+=i;r+="</span>\n		",i=n["if"].call(e,e&&e.subtitleText,{hash:{},inverse:f.noop,fn:f.program(11,m,t),data:t});if(i||i===0)r+=i;return r+="\n	",r}function d(e,t){var r="",i,s;r+='\n			<span class="traveler-name ',i=n["if"].call(e,e&&e.icon,{hash:{},inverse:f.noop,fn:f.program(9,v,t),data:t});if(i||i===0)r+=i;r+='">',(s=n.travelerName)?i=s.call(e,{hash:{},data:t}):(s=e&&e.travelerName,i=typeof s===u?s.call(e,{hash:{},data:t}):s);if(i||i===0)r+=i;return r+="</span>\n		",r}function v(e,t){var r="",i,s;return r+="with-",(s=n.icon)?i=s.call(e,{hash:{},data:t}):(s=e&&e.icon,i=typeof s===u?s.call(e,{hash:{},data:t}):s),r+=a(i)+"-icon",r}function m(e,t){var r="",i,s;r+='<span class="sub-title">',(s=n.subtitleText)?i=s.call(e,{hash:{},data:t}):(s=e&&e.subtitleText,i=typeof s===u?s.call(e,{hash:{},data:t}):s);if(i||i===0)r+=i;return r+="</span>",r}function g(e,t){var r="",i,s;r+='\n		<button class="button right ',(s=n.name)?i=s.call(e,{hash:{},data:t}):(s=e&&e.name,i=typeof s===u?s.call(e,{hash:{},data:t}):s),r+=a(i)+'">\n			',i=n["if"].call(e,e&&e.text,{hash:{},inverse:f.noop,fn:f.program(14,y,t),data:t});if(i||i===0)r+=i;r+="\n			",i=n["if"].call(e,e&&e.iconURL,{hash:{},inverse:f.noop,fn:f.program(16,b,t),data:t});if(i||i===0)r+=i;return r+="\n		</button>\n	",r}function y(e,t){var r,i;return(i=n.text)?r=i.call(e,{hash:{},data:t}):(i=e&&e.text,r=typeof i===u?i.call(e,{hash:{},data:t}):i),a(r)}function b(e,t){var r="",i,s;return r+='<span class="',(s=n.iconURL)?i=s.call(e,{hash:{},data:t}):(s=e&&e.iconURL,i=typeof s===u?s.call(e,{hash:{},data:t}):s),r+=a(i)+'"></span>',r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+='<div class="header">\n	<div class="primary-actions">\n	',o=n["if"].call(t,t&&t.backAction,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;s+="\n	",o=n.each.call(t,t&&t.leftButtons,{hash:{},inverse:f.noop,fn:f.program(3,c,i),data:i});if(o||o===0)s+=o;s+='\n	</div>\n	<div class="titles">\n		',o=n.unless.call(t,t&&t.titleText,{hash:{},inverse:f.noop,fn:f.program(5,h,i),data:i});if(o||o===0)s+=o;s+="\n	",o=n["if"].call(t,t&&t.titleText,{hash:{},inverse:f.noop,fn:f.program(7,p,i),data:i});if(o||o===0)s+=o;s+='\n	</div>\n	<div class="secondary-actions">\n	',o=n.each.call(t,t&&t.rightButtons,{hash:{},inverse:f.noop,fn:f.program(13,g,i),data:i});if(o||o===0)s+=o;return s+="\n	</div>\n</div>\n\n",s}),this.Handlebars.templates["app/modules/sidemenu/views/sidemenu_help.tmpl"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='<ul>\n	<li id="help">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"Help",u):a.call(t,"t","Help",u)))+'</li>\n	<li id="legal">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"LegalNotices",u):a.call(t,"t","LegalNotices",u)))+"</li>\n</ul>\n",s}),this.Handlebars.templates["app/modules/sidemenu/views/sidemenu_item.tmpl"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a="function",f=this.escapeExpression;return s+='<div class="preview-icon ',(u=n.iconStyle)?o=u.call(t,{hash:{},data:i}):(u=t&&t.iconStyle,o=typeof u===a?u.call(t,{hash:{},data:i}):u),s+=f(o)+' main-menu-icon" id=',(u=n.elId)?o=u.call(t,{hash:{},data:i}):(u=t&&t.elId,o=typeof u===a?u.call(t,{hash:{},data:i}):u),s+=f(o)+'></div>\n<div class="message"><p>',(u=n.label)?o=u.call(t,{hash:{},data:i}):(u=t&&t.label,o=typeof u===a?u.call(t,{hash:{},data:i}):u),s+=f(o)+'</p></div>\n<div class="next btn_arrow_dark button-icon"></div>',s}),this.Handlebars.templates["app/modules/sidemenu/views/sidemenu_profile_name.tmpl"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a="function",f=this.escapeExpression;return s+='<div class="message"><p>',(u=n.name)?o=u.call(t,{hash:{},data:i}):(u=t&&t.name,o=typeof u===a?u.call(t,{hash:{},data:i}):u),s+=f(o)+"</p></div>",s}),this.Handlebars.templates["app/modules/sidemenu/views/sidemenu_toolbar.tmpl"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='<ul>\n	<li id="my-trips">\n		<div class="group-toolbar-icon icon_mainmenu_mytrips_45px main-menu-icon"></div>\n		'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"Trips",u):a.call(t,"t","Trips",u)))+'\n	</li>\n	<li id="new-trip">\n		<div class="group-toolbar-icon icon_mainmenu_add_45px main-menu-icon"></div>\n		'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"NewTrip",u):a.call(t,"t","NewTrip",u)))+'\n	</li>\n	<li id="contacts">\n		<div class="group-toolbar-icon icon_mainmenu_contacts_45px main-menu-icon"></div>\n		'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"Contacts",u):a.call(t,"t","Contacts",u)))+'\n	</li>\n	<li id="logout">\n		<div class="group-toolbar-icon icon_mainmenu_logout_45px main-menu-icon"></div>\n		'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"Logout",u):a.call(t,"t","Logout",u)))+"\n	</li>\n</ul>",s}),this.Handlebars.templates["app/modules/sidemenu/views/sidemenu_trip_summary.tmpl"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a="function",f=this.escapeExpression;return s+='<div class="trip-summary-icon"><img src="',(u=n.previewUrl)?o=u.call(t,{hash:{},data:i}):(u=t&&t.previewUrl,o=typeof u===a?u.call(t,{hash:{},data:i}):u),s+=f(o)+'" alt="',(u=n.name)?o=u.call(t,{hash:{},data:i}):(u=t&&t.name,o=typeof u===a?u.call(t,{hash:{},data:i}):u),s+=f(o)+'" height="38" width="38" /></div>\n<div class="trip-info-group">\n	<span class="trip-name">',(u=n.name)?o=u.call(t,{hash:{},data:i}):(u=t&&t.name,o=typeof u===a?u.call(t,{hash:{},data:i}):u),s+=f(o)+'</span>\n	<span class="trip-date">',(u=n.sidemenuSummaryDate)?o=u.call(t,{hash:{},data:i}):(u=t&&t.sidemenuSummaryDate,o=typeof u===a?u.call(t,{hash:{},data:i}):u),s+=f(o)+'</span>\n</div>\n<div class="next btn_arrow_dark button-icon"></div>\n',s}),this.Handlebars.templates["app/views/errors/error_popup.tmpl"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f="function",l=this.escapeExpression,c=n.helperMissing;s+='<div class="standard-form-panel error-popup">\n	<div class="error-title-group group">\n		<div class="icon_alert_25px general-icon"></div>\n		<div class="message"><p>',(u=n.title)?o=u.call(t,{hash:{},data:i}):(u=t&&t.title,o=typeof u===f?u.call(t,{hash:{},data:i}):u),s+=l(o)+'</p></div>\n	</div>\n	<div class="error-message-group">\n		',o=(u=n.parseErrors||t&&t.parseErrors,a={hash:{},data:i},u?u.call(t,t&&t.errors,a):c.call(t,"parseErrors",t&&t.errors,a));if(o||o===0)s+=o;return s+='\n	</div>\n	<div class="button-group">\n		<input id="submit" type="submit" value="'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"OK",a):c.call(t,"t","OK",a)))+'"/>\n	</div>\n</div>\n<div class="full-screen-underlay"></div>\n',s}),this.Handlebars.templates["app/views/trip_items/prompts/did_you_mean/did_you_mean.tmpl"]=Handlebars.template(function(e,t,n,r,i){function p(e,t){var r="",i,s,o;return r+='\n			<li class="display-box">\n				<div class="flex-8">\n					<p class="item-title">',(s=n.street)?i=s.call(e,{hash:{},data:t}):(s=e&&e.street,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(i)+'</p>\n					<p class="item-title">'+l((s=n.display_address_for||e&&e.display_address_for,o={hash:{city:e&&e.city,county:e&&e.county,state:e&&e.state,postal_code:e&&e.postal_code},data:t},s?s.call(e,e&&e.city,o):c.call(e,"display_address_for",e&&e.city,o)))+'</p>\n				</div>\n				<input class="selectable flex-2  button continue" data-index="',(s=n.index)?i=s.call(e,{hash:{},data:t}):(s=e&&e.index,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(i)+'" type="button" value="'+l((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"Select",o):c.call(e,"t","Select",o)))+'" />\n			</li>\n		',r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f="function",l=this.escapeExpression,c=n.helperMissing,h=this;s+='<div class="trip-items standard-form-panel error-popup">\n		<div class="error-title-group">\n		<div class="general-icon icon_alert_25px"></div>\n		<div class="message"><p>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"DidYouMean",a):c.call(t,"t","DidYouMean",a)))+'</p></div>\n	</div>\n\n	<div class="selection-group">\n		<ul>\n		',o=(u=n.each_with_index||t&&t.each_with_index,a={hash:{},inverse:h.noop,fn:h.program(1,p,i),data:i},u?u.call(t,t&&t.locations,a):c.call(t,"each_with_index",t&&t.locations,a));if(o||o===0)s+=o;return s+='\n		</ul>\n	</div>\n\n	<div class="actions">\n		<button id="cancel" class="submit"><span>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Cancel",a):c.call(t,"t","Cancel",a)))+'</span></button>\n	</div>\n</div>\n<div class="full-screen-underlay"></div>\n',s}),this.Handlebars.templates["templates/amex/benefits.tmpl"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a="function",f=this.escapeExpression;return s+='<iframe id="amexBenefits" src="',(u=n.src)?o=u.call(t,{hash:{},data:i}):(u=t&&t.src,o=typeof u===a?u.call(t,{hash:{},data:i}):u),s+=f(o)+'" target="amexBenefits"></iframe>',s}),this.Handlebars.templates["templates/components/airline_select/airline_select.tmpl"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='				<form class="auto-suggest" id="airline-select-query">\n					<input type="text" id="search-term" placeholder="'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"AirlineSearch",u):a.call(t,"t","AirlineSearch",u)))+'" autocomplete="off" autocapitalize="off" autocorrect="off">\n				</form>',s}),this.Handlebars.templates["templates/components/airline_select/airline_select_list.tmpl"]=Handlebars.template(function(e,t,n,r,i){function c(e,t){var r="",i,s,o;r+='\n				<h2 class="component-subheader recentAirlines">'+a((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"RecentlySelected",o):f.call(e,"t","RecentlySelected",o)))+'</h2>\n				<ul id="YOUR" class="action-list recentAirlines">\n					',i=(s=n.each_with_index||e&&e.each_with_index,o={hash:{},inverse:l.noop,fn:l.program(2,h,t),data:t},s?s.call(e,e&&e.recentAirlines,o):f.call(e,"each_with_index",e&&e.recentAirlines,o));if(i||i===0)r+=i;return r+="\n				</ul>\n			",r}function h(e,t){var r="",i,s,o;return r+='\n					<li data-code="',(s=n.iata_code)?i=s.call(e,{hash:{},data:t}):(s=e&&e.iata_code,i=typeof s===u?s.call(e,{hash:{},data:t}):s),r+=a(i)+'">\n						<div class="item-icon airline-icon airline-'+a((s=n.lowercase||e&&e.lowercase,o={hash:{},data:t},s?s.call(e,e&&e.iata_code,o):f.call(e,"lowercase",e&&e.iata_code,o)))+'"></div>\n						<div class="item-label">\n							<abbr title="',(s=n.name)?i=s.call(e,{hash:{},data:t}):(s=e&&e.name,i=typeof s===u?s.call(e,{hash:{},data:t}):s),r+=a(i)+'">',(s=n.iata_code)?i=s.call(e,{hash:{},data:t}):(s=e&&e.iata_code,i=typeof s===u?s.call(e,{hash:{},data:t}):s),r+=a(i)+"</abbr>\n						</div>\n					</li>\n					",r}function p(e,t){var r="",i,s,o;r+="\n				",i=n["if"].call(e,e&&e.recentAirlines,{hash:{},inverse:l.noop,fn:l.program(5,d,t),data:t});if(i||i===0)r+=i;r+='\n				<ul id="ALL" class="action-list allAirlines">\n					',i=(s=n.each_with_index||e&&e.each_with_index,o={hash:{},inverse:l.noop,fn:l.program(2,h,t),data:t},s?s.call(e,e&&e.allAirlines,o):f.call(e,"each_with_index",e&&e.allAirlines,o));if(i||i===0)r+=i;return r+="\n				</ul>\n			",r}function d(e,t){var r="",i,s;return r+='\n				<h2 class="component-subheader allAirlines">'+a((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"AllAirlines",s):f.call(e,"t","AllAirlines",s)))+"</h2>\n				",r}function v(e,t){var r="",i;r+="\n				",i=n.unless.call(e,e&&e.recentAirlines,{hash:{},inverse:l.noop,fn:l.program(8,m,t),data:t});if(i||i===0)r+=i;return r+="\n			",r}function m(e,t){var r="",i,s;return r+='\n				<ul class="item-list" id="zero-results">\n					<li>\n						<div class="item-content">\n							<p class="help-text">'+a((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"SearchResultsZero",s):f.call(e,"t","SearchResultsZero",s)))+"</p>\n						</div>\n					</li>\n				</ul>\n				",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=n.helperMissing,l=this;s+="			",o=n["if"].call(t,t&&t.recentAirlines,{hash:{},inverse:l.noop,fn:l.program(1,c,i),data:i});if(o||o===0)s+=o;s+="\n			",o=n["if"].call(t,t&&t.allAirlines,{hash:{},inverse:l.noop,fn:l.program(4,p,i),data:i});if(o||o===0)s+=o;s+="\n			",o=n.unless.call(t,t&&t.allAirlines,{hash:{},inverse:l.noop,fn:l.program(7,v,i),data:i});if(o||o===0)s+=o;return s}),this.Handlebars.templates["templates/components/country_select/country_select.tmpl"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='\n<form>\n<div class="search-component">\n	<input class="search-query" id="search-term" name="search-term" size="16" type="text"  placeholder="'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"CountryNameOrCode",u):a.call(t,"t","CountryNameOrCode",u)))+'" autocomplete="off" autocapitalize="off" autocorrect="off">\n	<button class="search-submit" type="button"><span class="general-icon icon_arrow_solid">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"Search",u):a.call(t,"t","Search",u)))+"</span></button>\n</div>\n</form>\n",s}),this.Handlebars.templates["templates/components/country_select/country_select_list.tmpl"]=Handlebars.template(function(e,t,n,r,i){function c(e,t){return"\n	<!-- please enter a search term -->\n"}function h(e,t){var r="",i,s,o;r+="\n	",i=n.unless.call(e,e&&e.items,{hash:{},inverse:l.noop,fn:l.program(4,p,t),data:t});if(i||i===0)r+=i;r+="\n\n	",i=(s=n.each_with_index||e&&e.each_with_index,o={hash:{},inverse:l.noop,fn:l.program(6,d,t),data:t},s?s.call(e,e&&e.items,o):u.call(e,"each_with_index",e&&e.items,o));if(i||i===0)r+=i;return r+="\n",r}function p(e,t){var r="",i,s;return r+='\n	<li>\n		<div class="details">\n			<p>'+a((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"SearchResultsZero",s):u.call(e,"t","SearchResultsZero",s)))+"</p>\n		</div>\n	</li>\n	",r}function d(e,t){var r="",i,s,o;return r+='\n	<li>\n		<div class="details country" data-index="',(s=n.index)?i=s.call(e,{hash:{},data:t}):(s=e&&e.index,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=a(i)+'">\n			<span class="country-icon '+a((s=n.lowercase||e&&e.lowercase,o={hash:{},data:t},s?s.call(e,e&&e.iata_code,o):u.call(e,"lowercase",e&&e.iata_code,o)))+'"></span>\n			<div class="country_code">',(s=n.iata_code)?i=s.call(e,{hash:{},data:t}):(s=e&&e.iata_code,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=a(i)+'</div>\n			<div class="country_name">',(s=n.name)?i=s.call(e,{hash:{},data:t}):(s=e&&e.name,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=a(i)+"</div>\n		</div>\n	</li>\n	",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=n.helperMissing,a=this.escapeExpression,f="function",l=this;s+="\n\n",o=n["if"].call(t,t&&t.unsynced,{hash:{},inverse:l.program(3,h,i),fn:l.program(1,c,i),data:i});if(o||o===0)s+=o;return s+="\n\n",s}),this.Handlebars.templates["templates/components/segmented_button_bar/segmented_button_bar.tmpl"]=Handlebars.template(function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<ul class="mytrips-summary-segmented-bar"></ul>'}),this.Handlebars.templates["templates/components/segmented_button_bar/segmented_button_item.tmpl"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a="function",f=this.escapeExpression;return s+="<div class='",(u=n.cssStyle)?o=u.call(t,{hash:{},data:i}):(u=t&&t.cssStyle,o=typeof u===a?u.call(t,{hash:{},data:i}):u),s+=f(o)+"'><div class=\"",(u=n.iconSelector)?o=u.call(t,{hash:{},data:i}):(u=t&&t.iconSelector,o=typeof u===a?u.call(t,{hash:{},data:i}):u),s+=f(o)+'"></div><p>',(u=n.textLabel)?o=u.call(t,{hash:{},data:i}):(u=t&&t.textLabel,o=typeof u===a?u.call(t,{hash:{},data:i}):u),s+=f(o)+"</p></div>",s}),this.Handlebars.templates["templates/contacts/confirm_delete_contact.tmpl"]=Handlebars.template(function(e,t,n,r,i){function p(e,t){var r="",i,s;return r+="\n				",(s=n.fullName)?i=s.call(e,{hash:{},data:t}):(s=e&&e.fullName,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(i)+"\n			",r}function d(e,t){var r="",i,s;return r+="\n				",(s=n.email)?i=s.call(e,{hash:{},data:t}):(s=e&&e.email,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(i)+"\n			",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f="function",l=this.escapeExpression,c=n.helperMissing,h=this;s+='<div class="trip-items standard-form-panel error-popup">\n		<div class="error-title-group">\n		<div class="general-icon icon_alert_25px"></div>\n		<div class="message"><p>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"DeleteContact",a):c.call(t,"t","DeleteContact",a)))+'?</p></div>\n	</div>\n\n	<div class="error-message-group">\n		<p>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"DeleteContactWarning",a):c.call(t,"t","DeleteContactWarning",a)))+'\n			<span class="item-title">\n			',o=n["if"].call(t,t&&t.fullName,{hash:{},inverse:h.program(3,d,i),fn:h.program(1,p,i),data:i});if(o||o===0)s+=o;return s+='\n			</span>\n		</p>\n	</div>\n\n	<div class="button-group display-box">\n		<div class="flex-8">\n			<input id="continue" type="submit" value="'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Delete",a):c.call(t,"t","Delete",a)))+'" class="submit warning-button"></span><span class="loader light">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Loading",a):c.call(t,"t","Loading",a)))+'</span></input>\n		</div>\n		<div class="flex-1"></div>\n		<div class="flex-8">\n			<input id="cancel" type="submit" value="'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Cancel",a):c.call(t,"t","Cancel",a)))+'" class="submit cancel-button"><span class="loader light">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Loading",a):c.call(t,"t","Loading",a)))+'</span></input>\n		</div>\n	</div>\n</div>\n<div class="full-screen-underlay"></div>',s}),this.Handlebars.templates["templates/contacts/contact.tmpl"]=Handlebars.template(function(e,t,n,r,i){function h(e,t){var r="",i,s;return r+='\n	<div class="list-row-group">\n		<p class="tc-sublabel">Name</p>\n		<p class="tc-label text-ellipsis">',(s=n.fullName)?i=s.call(e,{hash:{},data:t}):(s=e&&e.fullName,i=typeof s===a?s.call(e,{hash:{},data:t}):s),r+=f(i)+"</p>\n	</div>\n	",r}function p(e,t){var r="",i,s;return r+=f((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"ON",s):l.call(e,"t","ON",s)))+" 	",r}function d(e,t){var r="",i,s;return r+=f((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"OFF",s):l.call(e,"t","OFF",s)))+" 	",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=n.helperMissing,c=this;s+='<li class="list-row">\n	',o=n["if"].call(t,t&&t.fullName,{hash:{},inverse:c.noop,fn:c.program(1,h,i),data:i});if(o||o===0)s+=o;s+='\n\n	<div class="list-row-group">\n		<p class="tc-sublabel">Email</p>\n		<p class="tc-label text-ellipsis">',(u=n.email)?o=u.call(t,{hash:{},data:i}):(u=t&&t.email,o=typeof u===a?u.call(t,{hash:{},data:i}):u),s+=f(o)+'</p>\n	</div>\n</li>\n<li class="list-row-flat">\n	<div class="list-row-flat-icon button-icon btn_icon_share_blue_25px"></div>\n	<div class="list-row-main">\n		<p class="tc-sublabel">Always Share</p>\n		<p class="tc-label">',o=n["if"].call(t,t&&t.is_always_sharing,{hash:{},inverse:c.program(5,d,i),fn:c.program(3,p,i),data:i});if(o||o===0)s+=o;return s+='</p>\n	</div>\n	<div id="always-share-help" class="list-row-flat-icon icon_info_20px general-icon"></div>\n</li>',s}),this.Handlebars.templates["templates/contacts/contact_import_success.tmpl"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='<li class="list-row-success">\n	<div class="list-row-flat-icon general-icon icon_success_45px"></div>\n	<div class="list-row-main">\n		<p class="tc-label-medium">\n			'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"ImportContactsSuccess1",u):a.call(t,"t","ImportContactsSuccess1",u)))+" "+f((o=n.pluralize||t&&t.pluralize,u={hash:{},data:i},o?o.call(t,t&&t.importCount,"ImportContactsSuccess2",u):a.call(t,"pluralize",t&&t.importCount,"ImportContactsSuccess2",u)))+" "+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"ImportContactsSuccess3",u):a.call(t,"t","ImportContactsSuccess3",u)))+'\n		</p>\n	</div>\n	<div id="dismiss" class="list-row-flat-icon general-icon icon_dismiss_gray_25px"></div>\n</li>',s}),this.Handlebars.templates["templates/contacts/contacts.tmpl"]=Handlebars.template(function(e,t,n,r,i){function l(e,t){var r="",i,s;return r+='\n	<li class="list-row-linked" id="empty-import">\n		<div class="list-row-main">\n			<p class="tc-label-medium">'+u((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"ContactsEmptyTitle",s):o.call(e,"t","ContactsEmptyTitle",s)))+'</p>\n			<p class="tc-sublabel">'+u((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"ContactsEmptyDescription",s):o.call(e,"t","ContactsEmptyDescription",s)))+'</p>\n		</div>\n		<div class="button-icon btn_arrow"></div>\n	</li>\n',r}function c(e,t){var r="",i;r+="\n	",i=n.each.call(e,e,{hash:{},inverse:f.noop,fn:f.program(4,h,t),data:t});if(i||i===0)r+=i;return r+="\n",r}function h(e,t){var r="",i,s;r+='\n	<li class="contact list-row-linked list-row-fixed-height-med" data-id="',(s=n.id)?i=s.call(e,{hash:{},data:t}):(s=e&&e.id,i=typeof s===a?s.call(e,{hash:{},data:t}):s),r+=u(i)+'">\n		<div class="list-row-main">\n			<p class="tc-label-medium text-ellipsis">',(s=n.mainLabel)?i=s.call(e,{hash:{},data:t}):(s=e&&e.mainLabel,i=typeof s===a?s.call(e,{hash:{},data:t}):s),r+=u(i)+"</p>\n			",i=n["if"].call(e,e&&e.subLabel,{hash:{},inverse:f.noop,fn:f.program(5,p,t),data:t});if(i||i===0)r+=i;r+="\n		</div>\n		",i=n["if"].call(e,e&&e.is_always_sharing,{hash:{},inverse:f.noop,fn:f.program(7,d,t),data:t});if(i||i===0)r+=i;return r+='\n		<div class="list-row-flat-icon button-icon btn_arrow"></div>\n	</li>\n	',r}function p(e,t){var r="",i,s;return r+='\n			<p class="tc-sublabel text-ellipsis">',(s=n.subLabel)?i=s.call(e,{hash:{},data:t}):(s=e&&e.subLabel,i=typeof s===a?s.call(e,{hash:{},data:t}):s),r+=u(i)+"</p>\n			",r}function d(e,t){return'\n			<div class="list-row-flat-icon general-icon icon_share_sm_gray"></div>\n		'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,o=n.helperMissing,u=this.escapeExpression,a="function",f=this;return s=n["if"].call(t,t&&t.isEmpty,{hash:{},inverse:f.program(3,c,i),fn:f.program(1,l,i),data:i}),s||s===0?s:""}),this.Handlebars.templates["templates/contacts/contacts_import_list.tmpl"]=Handlebars.template(function(e,t,n,r,i){function l(e,t){var r="",i,s;return r+='\n	<li class="list-row">'+a((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"ImportContactsEmpty",s):u.call(e,"t","ImportContactsEmpty",s)))+"</li>\n",r}function c(e,t){var r="",i,s;return r+='\n	<li class="searchbox">\n		<input type="text" id="search-contact" class="searchbox-input" placeholder="'+a((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"ContactsListFilterText",s):u.call(e,"t","ContactsListFilterText",s)))+'" autocomplete="off" autocapitalize="off" autocorrect="off">\n	</li>\n	<li id="suggested-contacts"></li>\n	<div id="import-toolbar" class="actions fixed-toolbar">\n		<button class="submit"><span>'+a((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"ImportContact",s):u.call(e,"t","ImportContact",s)))+'</span><span class="loader light">'+a((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"Loading",s):u.call(e,"t","Loading",s)))+"</span></button>\n	</div>\n",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=n.helperMissing,a=this.escapeExpression,f=this;s+='<ul class="contacts list-rows">\n',o=n["if"].call(t,t&&t.isEmpty,{hash:{},inverse:f.program(3,c,i),fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;return s+="\n</ul>",s}),this.Handlebars.templates["templates/contacts/edit_contact.tmpl"]=Handlebars.template(function(e,t,n,r,i){function p(e,t){var r="",i,s;return r+='value="',(s=n.first_name)?i=s.call(e,{hash:{},data:t}):(s=e&&e.first_name,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(i)+'"',r}function d(e,t){var r="",i,s;return r+='value="',(s=n.last_name)?i=s.call(e,{hash:{},data:t}):(s=e&&e.last_name,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(i)+'"',r}function v(e,t){var r="",i,s;return r+='value="',(s=n.email)?i=s.call(e,{hash:{},data:t}):(s=e&&e.email,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(i)+'"',r}function m(e,t){return'checked="checked"'}function g(e,t){var r="",i,s;return r+='\n			<p id="delete-contact" class="form-text-centered form-link">'+l((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"DeleteThisContact",s):c.call(e,"t","DeleteThisContact",s)))+"</p>\n		",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f="function",l=this.escapeExpression,c=n.helperMissing,h=this;s+='<form action="#edit-contact" id="edit-contact-form" class="standard-form-panel">\n	<div class="input-group">\n		<div class="label"><p>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"FirstName",a):c.call(t,"t","FirstName",a)))+'</p></div>\n		<div class="input-container">\n			<input ',o=n["if"].call(t,"first_name",{hash:{},inverse:h.noop,fn:h.program(1,p,i),data:i});if(o||o===0)s+=o;s+=' id="firstname" name="firstname" type="text" autocomplete="off" autocapitalize="off" autocorrect="off"/>\n		</div>\n	</div>\n	<div class="input-group">\n		<div class="label"><p>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"LastName",a):c.call(t,"t","LastName",a)))+'</p></div>\n		<div class="input-container">\n			<input ',o=n["if"].call(t,"last_name",{hash:{},inverse:h.noop,fn:h.program(3,d,i),data:i});if(o||o===0)s+=o;s+=' id="lastname" name="lastname" type="text" autocomplete="off" autocapitalize="off" autocorrect="off"/>\n		</div>\n	</div>\n	<div class="input-group">\n		<div class="label"><p>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Email",a):c.call(t,"t","Email",a)))+'</p></div>\n		<div class="input-container">\n			<input ',o=n["if"].call(t,t&&t.email,{hash:{},inverse:h.noop,fn:h.program(5,v,i),data:i});if(o||o===0)s+=o;s+=' id="email" name="email" type="text" autocomplete="off" autocapitalize="off" autocorrect="off"/>\n		</div>\n	</div>\n	<div class="input-group-checkbox">\n		<input type="checkbox" id="always-share" class="input-group-checkbox__checkbox" ',o=n["if"].call(t,t&&t.is_always_sharing,{hash:{},inverse:h.noop,fn:h.program(7,m,i),data:i});if(o||o===0)s+=o;s+='>\n		<div class="input-group-checkbox__icon button-icon btn_icon_share_blue_25px"></div>\n		<p class="input-group-checkbox__label input-group-checkbox__main">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"AlwaysShare",a):c.call(t,"t","AlwaysShare",a)))+'</p>\n		<div id="always-share-help" class="input-group-checkbox__right-button input-group-checkbox__nontoggle">\n			<div class="icon_info_20px general-icon"></div>\n		</div>\n	</div>\n\n	<div class="actions">\n		<button id="save-contact" type="submit" class="tc-button-blue tc-button-form"><span class="tc-button-form-label">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Save",a):c.call(t,"t","Save",a)))+'</span><span class="tc-button-form-loader loader light">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Loading",a):c.call(t,"t","Loading",a)))+"</span></button>\n		",o=n["if"].call(t,t&&t.email,{hash:{},inverse:h.noop,fn:h.program(9,g,i),data:i});if(o||o===0)s+=o;return s+="\n	</div>\n</form>",s}),this.Handlebars.templates["templates/contacts/phone_contacts_autosuggest_result.tmpl"]=Handlebars.template(function(e,t,n,r,i){function f(e,t){var r="",i;r+='\n<form action="#import-contacts" id="import-contacts-form">\n	<ul class="contacts list-rows">\n	',i=n.each.call(e,e&&e.phoneContacts,{hash:{},inverse:a.noop,fn:a.program(2,l,t),data:t});if(i||i===0)r+=i;return r+="\n	</ul>\n</form>\n",r}function l(e,t){var r="",i,s;r+='\n		<li class="contact list-row-flat list-row-fixed-height-med" data-id="',(s=n.id)?i=s.call(e,{hash:{},data:t}):(s=e&&e.id,i=typeof s===o?s.call(e,{hash:{},data:t}):s),r+=u(i)+'">\n			<input data-cid="',(s=n.cid)?i=s.call(e,{hash:{},data:t}):(s=e&&e.cid,i=typeof s===o?s.call(e,{hash:{},data:t}):s),r+=u(i)+'" type="checkbox" class="list-row-flat-checkbox tc-checkbox"/>\n			<div class="list-row-main">\n				',i=n["if"].call(e,e&&e.fullName,{hash:{},inverse:a.program(5,h,t),fn:a.program(3,c,t),data:t});if(i||i===0)r+=i;return r+="\n			</div>\n		</li>\n	",r}function c(e,t){var r="",i,s;return r+='\n				<p class="tc-label-medium text-ellipsis">',(s=n.fullName)?i=s.call(e,{hash:{},data:t}):(s=e&&e.fullName,i=typeof s===o?s.call(e,{hash:{},data:t}):s),r+=u(i)+'</p>\n				<p class="tc-sublabel text-ellipsis">',(s=n.email)?i=s.call(e,{hash:{},data:t}):(s=e&&e.email,i=typeof s===o?s.call(e,{hash:{},data:t}):s),r+=u(i)+"</p>\n				",r}function h(e,t){var r="",i,s;return r+='\n				<p class="tc-label-medium text-ellipsis">',(s=n.email)?i=s.call(e,{hash:{},data:t}):(s=e&&e.email,i=typeof s===o?s.call(e,{hash:{},data:t}):s),r+=u(i)+"</p>\n				",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,o="function",u=this.escapeExpression,a=this;return s=n["if"].call(t,t&&t.hasContext,{hash:{},inverse:a.noop,fn:a.program(1,f,i),data:i}),s||s===0?s:""}),this.Handlebars.templates["templates/info_pages/info_page.tmpl"]=Handlebars.template(function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div class="instruction"></div>\n'}),this.Handlebars.templates["templates/itinerary/itinerary.tmpl"]=Handlebars.template(function(e,t,n,r,i){function c(e,t){var r="",i;r+='\n<div class="itinerary-container">\n	',i=n.each.call(e,e&&e.days,{hash:{},inverse:l.noop,fn:l.program(2,h,t),data:t});if(i||i===0)r+=i;return r+="\n</div>\n",r}function h(e,t){var r="",i,s,o;r+='\n	<div class="itinerary-day">\n		<p class="itinerary-date">'+a((s=n.dayMonthDateYear||e&&e.dayMonthDateYear,o={hash:{},data:t},s?s.call(e,e&&e.value,o):f.call(e,"dayMonthDateYear",e&&e.value,o)))+'</p>\n		<div class="itinerary-items">\n			',i=n.each.call(e,e&&e.events,{hash:{},inverse:l.noop,fn:l.program(3,p,t),data:t});if(i||i===0)r+=i;return r+="\n		</div>\n	</div>\n	",r}function p(e,t){var i="",s,o,c;i+='\n			<div class="itinerary-item" data-trip-item-id="',(o=n.id)?s=o.call(e,{hash:{},data:t}):(o=e&&e.id,s=typeof o===u?o.call(e,{hash:{},data:t}):o),i+=a(s)+'" data-location="',(o=n.event_type)?s=o.call(e,{hash:{},data:t}):(o=e&&e.event_type,s=typeof o===u?o.call(e,{hash:{},data:t}):o),i+=a(s)+'">\n\n				<div class="bubble-icon--',(o=n.type)?s=o.call(e,{hash:{},data:t}):(o=e&&e.type,s=typeof o===u?o.call(e,{hash:{},data:t}):o),i+=a(s)+'"></div>\n				<div class="bubble ',(o=n.type)?s=o.call(e,{hash:{},data:t}):(o=e&&e.type,s=typeof o===u?o.call(e,{hash:{},data:t}):o),i+=a(s)+'">\n					<div class="bubble-details">\n\n						',s=(o=n.unless_equal||e&&e.unless_equal,c={hash:{},inverse:l.noop,fn:l.program(4,d,t),data:t},o?o.call(e,e&&e.type,"Air",c):f.call(e,"unless_equal",e&&e.type,"Air",c));if(s||s===0)i+=s;i+='\n\n						<div class="bubble-tags">\n							',s=n["if"].call(e,e&&e.for_business,{hash:{},inverse:l.noop,fn:l.program(6,v,t),data:t});if(s||s===0)i+=s;i+="\n							",s=n["if"].call(e,e&&e.airStatusMessage,{hash:{},inverse:l.noop,fn:l.program(8,m,t),data:t});if(s||s===0)i+=s;i+='\n						</div>\n\n						<div class="bubble-text">\n							<h2 class="bubble-title">',(o=n.masthead)?s=o.call(e,{hash:{},data:t}):(o=e&&e.masthead,s=typeof o===u?o.call(e,{hash:{},data:t}):o),i+=a(s)+'</h2>\n							<p class="bubble-sub-title">',(o=n.subhead)?s=o.call(e,{hash:{},data:t}):(o=e&&e.subhead,s=typeof o===u?o.call(e,{hash:{},data:t}):o),i+=a(s)+"</p>\n						</div>\n\n						",s=l.invokePartial(r.FlightSchedule,"FlightSchedule",e,n,r,t);if(s||s===0)i+=s;i+="\n\n						",s=n["if"].call(e,e&&e.note,{hash:{},inverse:l.noop,fn:l.program(10,g,t),data:t});if(s||s===0)i+=s;return i+='\n					</div>\n					<div class="bubble-marker"></div>\n				</div>\n			</div>\n			',i}function d(e,t){var r="",i,s;return r+='\n							<div class="bubble-head">\n								<time datetime="',(s=n.start_time)?i=s.call(e,{hash:{},data:t}):(s=e&&e.start_time,i=typeof s===u?s.call(e,{hash:{},data:t}):s),r+=a(i)+'">',(s=n.eventHead)?i=s.call(e,{hash:{},data:t}):(s=e&&e.eventHead,i=typeof s===u?s.call(e,{hash:{},data:t}):s),r+=a(i)+"</time>\n							</div>\n						",r}function v(e,t){var r="",i,s;return r+='\n							<div class="bubble-tag--business for-business">'+a((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"Business",s):f.call(e,"t","Business",s)))+"</div>\n							",r}function m(e,t){var r="",i,s;return r+='\n							<div class="bubble-tag--flight ',(s=n.airStatusClass)?i=s.call(e,{hash:{},data:t}):(s=e&&e.airStatusClass,i=typeof s===u?s.call(e,{hash:{},data:t}):s),r+=a(i)+'">',(s=n.airStatusMessage)?i=s.call(e,{hash:{},data:t}):(s=e&&e.airStatusMessage,i=typeof s===u?s.call(e,{hash:{},data:t}):s),r+=a(i)+"</div>\n							",r}function g(e,t){var r="",i,s,o;return r+='\n						<div class="bubble-note">\n							<p><em>'+a((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"Note",o):f.call(e,"t","Note",o)))+"</em>",(s=n.note)?i=s.call(e,{hash:{},data:t}):(s=e&&e.note,i=typeof s===u?s.call(e,{hash:{},data:t}):s),r+=a(i)+"</p>\n						</div>\n						",r}function y(e,t){var r="",i,s,o;r+='\n<ul class="list-rows">\n	<li class="list-row">\n		<p class="tc-label-medium">'+a((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"FollowerTimeLineEmptyTitle",o):f.call(e,"t","FollowerTimeLineEmptyTitle",o)))+"</p>\n		",i=n["if"].call(e,e&&e.tripCanShare,{hash:{},inverse:l.program(15,w,t),fn:l.program(13,b,t),data:t});if(i||i===0)r+=i;return r+="\n	</li>\n</ul>\n",r}function b(e,t){var r="",i,s;return r+='\n			<p class="tc-sublabel">'+a((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"ManuallyFollowedTimelineEmptyDescription",s):f.call(e,"t","ManuallyFollowedTimelineEmptyDescription",s)))+"</p>\n		",r}function w(e,t){var r="",i,s;return r+='\n			<p class="tc-sublabel">'+a((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"FollowerTimeLineEmptyDescription",s):f.call(e,"t","FollowerTimeLineEmptyDescription",s)))+"</p>\n		",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=this.merge(r,e.partials),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=n.helperMissing,l=this;o=n["if"].call(t,t&&t.days,{hash:{},inverse:l.program(12,y,i),fn:l.program(1,c,i),data:i});if(o||o===0)s+=o;return s+="\n",s}),this.Handlebars.templates["templates/layouts/alt_flights.tmpl"]=Handlebars.template(function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div id="original"></div>\n<div id="schedule"></div>\n<div class="loader light lg"></div>\n<div class="no-connection">No Network Connection</div>'}),this.Handlebars.templates["templates/layouts/contacts_list.tmpl"]=Handlebars.template(function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div id="contact_import_count"></div>\n<div id="contact_list"></div>\n<div class="loader light lg"></div>\n<div class="no-connection">No Network Connection</div>'}),this.Handlebars.templates["templates/layouts/login.tmpl"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+="<h1>"+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"TripCase",u):a.call(t,"t","TripCase",u)))+'</h1>\n<div class="content"></div>',s}),this.Handlebars.templates["templates/layouts/nav.tmpl"]=Handlebars.template(function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div class="nav" id="nav"></div>\n<div class="content"></div>\n'}),this.Handlebars.templates["templates/layouts/nav_subnav.tmpl"]=Handlebars.template(function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div class="nav" id="nav"></div>\n<div class="sub-nav" id="sub-nav"></div>\n<div class="content"></div>\n'}),this.Handlebars.templates["templates/layouts/simple.tmpl"]=Handlebars.template(function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div class="content"></div>\n'}),this.Handlebars.templates["templates/layouts/simple_with_loading.tmpl"]=Handlebars.template(function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div class="content"></div>\n<div class="loader light lg"></div>\n<div class="no-connection">No Network Connection</div>\n'}),this.Handlebars.templates["templates/layouts/trip_feed.tmpl"]=Handlebars.template(function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div id="carousel-header" class="carousel-header"></div>\n<div id="trip-cards"></div>\n<div id="trip-messages"></div>\n<div class="loader light lg"></div>\n<div class="no-connection">No Network Connection</div>\n'}),this.Handlebars.templates["templates/layouts/walk_through.tmpl"]=Handlebars.template(function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div id="walk-through-page-indicator-wrapper"></div>\n<div id="walk-through-pages-wrapper"></div>\n<div id="walk-through-toolbar-wrapper"></div>\n'}),this.Handlebars.templates["templates/logout_confirm.tmpl"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='<div class="trip-items standard-form-panel error-popup">\n	<div class="error-title-group">\n		<div class="general-icon icon_alert_25px"></div>\n		<div class="message"><p>'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"Logout",u):a.call(t,"t","Logout",u)))+'</p></div>\n	</div>\n	<div class="error-message-group">\n		<ul>\n			<li>'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"LogoutConfirm",u):a.call(t,"t","LogoutConfirm",u)))+'</li>\n		</ul>\n	</div>\n	<div class="button-group display-box">\n		<div class="flex-8">\n			<input id="continue" type="submit" value="'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"Logout",u):a.call(t,"t","Logout",u)))+'" class="submit warning-button"></span><span class="loader light">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"Loading",u):a.call(t,"t","Loading",u)))+'</span></input>\n		</div>\n		<div class="flex-1"></div>\n		<div class="flex-8">\n			<input id="cancel" type="submit" value="'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"Cancel",u):a.call(t,"t","Cancel",u)))+'" class="submit cancel-button"><span class="loader light">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"Loading",u):a.call(t,"t","Loading",u)))+'</span></input>\n		</div>\n	</div>\n</div>\n<div class="full-screen-underlay"></div>\n',s}),this.Handlebars.templates["templates/maps/map.tmpl"]=Handlebars.template(function(e,t,n,r,i){function p(e,t){var r="",i,s;return r+='\n			<div class="address">',(s=n.address1)?i=s.call(e,{hash:{},data:t}):(s=e&&e.address1,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(i)+"</div>\n		",r}function d(e,t){var r="",i,s;return r+='\n			<div class="address">',(s=n.address2)?i=s.call(e,{hash:{},data:t}):(s=e&&e.address2,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(i)+"</div>\n		",r}function v(e,t){var r="",i,s;return r+='\n			<div class="address">',(s=n.address3)?i=s.call(e,{hash:{},data:t}):(s=e&&e.address3,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(i)+"</div>\n		",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f="function",l=this.escapeExpression,c=this,h=n.helperMissing;s+='<div id="map-info" class="map-event-info-panel">\n	<div class="name-address-group">\n		<div class="name">',(u=n.name)?o=u.call(t,{hash:{},data:i}):(u=t&&t.name,o=typeof u===f?u.call(t,{hash:{},data:i}):u),s+=l(o)+"</div>\n		",o=n["if"].call(t,t&&t.address1,{hash:{},inverse:c.noop,fn:c.program(1,p,i),data:i});if(o||o===0)s+=o;s+="\n		",o=n["if"].call(t,t&&t.address2,{hash:{},inverse:c.noop,fn:c.program(3,d,i),data:i});if(o||o===0)s+=o;s+="\n		",o=n["if"].call(t,t&&t.address3,{hash:{},inverse:c.noop,fn:c.program(5,v,i),data:i});if(o||o===0)s+=o;return s+='\n	</div>\n	<div class="actions-group">\n		<div id="map-directions" class="map-button map-button-directions map-button-border-right">\n			<a>\n				<div class="button-icon btn_icon_directions_blue_25px"></div>\n				<div class="map-button-label">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Directions",a):h.call(t,"t","Directions",a)))+'</div>\n			</a>\n		</div>\n		<div id="map-call" class="map-button map-button-call">\n			<a>\n				<div class="button-icon btn_icon_call_blue_25px"></div>\n				<div class="map-button-label">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Call",a):h.call(t,"t","Call",a)))+'</div>\n			</a>\n		</div>\n	</div>\n</div>\n\n<div id="map-panel" class="map-panel"></div>\n',s}),this.Handlebars.templates["templates/maps/map_directions.tmpl"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c="function";return s+='<form action="#map-directions" id="map-directions-form" class="icon-action-list map-directions">\n	<ul id="pick-location-group" class="action-list">\n		<li id="start-group">\n			<label for="start">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"StartPoint",a):f.call(t,"t","StartPoint",a)))+'</label>\n			<input id="start" name="start" type="text" value="',(u=n.startName)?o=u.call(t,{hash:{},data:i}):(u=t&&t.startName,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+'" />\n		</li>\n		<li id="end-group">\n			<label for="end">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"EndPoint",a):f.call(t,"t","EndPoint",a)))+'</label>\n			<input id="end" name="end" type="text" value="'+l((u=n.if_not_blank||t&&t.if_not_blank,a={hash:{},data:i},u?u.call(t,t&&t.endName,"Untitled",a):f.call(t,"if_not_blank",t&&t.endName,"Untitled",a)))+'" />\n		</li>\n	</ul>\n\n	<div class="actions">\n		<button class="submit"><span>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"GetDirections",a):f.call(t,"t","GetDirections",a)))+'</span><span class="loader light">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Loading",a):f.call(t,"t","Loading",a)))+"</span></button>\n	</div>\n\n</form>\n",s}),this.Handlebars.templates["templates/overlays/overlay_action_view.tmpl"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='<div class="overlay-wrapper overlay-dismiss-fullscreen-js">\n	<div class="overlay-popup">\n		<div class="overlay-group-action-view-main">\n			<div class="overlay-icon overlay_action_view_arrow_01"></div>\n			<h1 class="overlay-header">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"OverlayActionViewMainHeader",u):a.call(t,"t","OverlayActionViewMainHeader",u)))+'</h1>\n			<div class="overlay-content-group">\n				<p>'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"OverlayActionViewMainContent",u):a.call(t,"t","OverlayActionViewMainContent",u)))+'</p>\n			</div>\n		</div>\n		<div class="overlay-group-action-view-details">\n			<div class="overlay-icon overlay_action_view_circle_01"></div>\n			<h1 class="overlay-header">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"OverlayActionViewDetailsHeader",u):a.call(t,"t","OverlayActionViewDetailsHeader",u)))+'</h1>\n			<div class="overlay-content-group">\n				<p>'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"OverlayActionViewDetailsContent",u):a.call(t,"t","OverlayActionViewDetailsContent",u)))+'</p>\n			</div>\n		</div>\n		<div class="overlay-group-action-view-items">\n			<h1 class="overlay-header">\n				<span class="overlay-icon overlay_action_view_arrow_02"></span>\n				'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"OverlayActionViewItemsHeader",u):a.call(t,"t","OverlayActionViewItemsHeader",u)))+'\n				<span class="overlay-icon overlay_action_view_arrow_03"></span>\n			</h1>\n			<div class="overlay-content-group">\n				<p>'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"OverlayActionViewItemsContent",u):a.call(t,"t","OverlayActionViewItemsContent",u)))+'</p>\n			</div>\n		</div>\n		<div class="overlay-group-action-view-messages">\n			<h1 class="overlay-header">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"OverlayActionViewMessagesHeader",u):a.call(t,"t","OverlayActionViewMessagesHeader",u)))+'</h1>\n			<div class="overlay-content-group">\n				<p>'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"OverlayActionViewMessagesContent",u):a.call(t,"t","OverlayActionViewMessagesContent",u)))+'</p>\n			</div>\n			<div class="overlay-icon overlay_action_view_arrow_04"></div>\n		</div>\n	</div>\n</div>\n',s}),this.Handlebars.templates["templates/overlays/overlay_contacts_phone_import.tmpl"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='<div class="overlay-wrapper overlay-dismiss-fullscreen-js">\n	<div class="overlay-popup">\n		<div class="overlay-group-import-contact">\n			<div class="overlay-icon overlay_contacts_arrow_01"></div>\n			<h1 class="overlay-header">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"OverlayImportContactMain",u):a.call(t,"t","OverlayImportContactMain",u)))+'</h1>\n			<div class="overlay-content-group">\n				<p>'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"OverlayImportContactMainContent",u):a.call(t,"t","OverlayImportContactMainContent",u)))+"</p>\n			</div>\n		</div>\n	</div>\n</div>\n",s}),this.Handlebars.templates["templates/overlays/overlay_create_trip.tmpl"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='<div class="overlay-wrapper overlay-dismiss-fullscreen-js">\n	<div class="overlay-popup">\n		<div class="overlay-group-create-trip">\n			<h1 class="overlay-header">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"OverlayCreateTripAuto1",u):a.call(t,"t","OverlayCreateTripAuto1",u)))+'</h1>\n			<div class="overlay-content-group">\n				<p>'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"OverlayCreateTripAuto2",u):a.call(t,"t","OverlayCreateTripAuto2",u)))+"</p>\n				<p>"+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"OverlayCreateTripAuto3",u):a.call(t,"t","OverlayCreateTripAuto3",u)))+'</p>\n			</div>\n			<p class="overlay-emphasized">trips@tripcase.com</p>\n		</div>\n		<div class="overlay-group-create-trip-continue">\n			<h1 class="overlay-header">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"OverlayCreateTripManual1",u):a.call(t,"t","OverlayCreateTripManual1",u)))+'</h1>\n			<div class="overlay-content-group">\n				<p>'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"OverlayCreateTripManual2",u):a.call(t,"t","OverlayCreateTripManual2",u)))+"</p>\n			</div>\n		</div>\n	</div>\n</div>\n",s}),this.Handlebars.templates["templates/phone_numbers/index.tmpl"]=Handlebars.template(function(e,t,n,r,i){function c(e,t){var r="",i,s;return r+='\n<div class="list-item add actionable" data-id="',(s=n.id)?i=s.call(e,{hash:{},data:t}):(s=e&&e.id,i=typeof s===u?s.call(e,{hash:{},data:t}):s),r+=a(i)+'">\n	<div class="details">\n		<div class="item-title action">\n			<div class="general-icon ',(s=n.icon)?i=s.call(e,{hash:{},data:t}):(s=e&&e.icon,i=typeof s===u?s.call(e,{hash:{},data:t}):s),r+=a(i)+'"></div>\n			',(s=n.item_title)?i=s.call(e,{hash:{},data:t}):(s=e&&e.item_title,i=typeof s===u?s.call(e,{hash:{},data:t}):s),r+=a(i)+'\n			<p class="caption"> ',(s=n.caption)?i=s.call(e,{hash:{},data:t}):(s=e&&e.caption,i=typeof s===u?s.call(e,{hash:{},data:t}):s),r+=a(i)+' </p>\n		</div>\n		<div class="button-icon btn_arrow"></div>\n	</div>\n</div>\n',r}function h(e,t){var r="",i,s;return r+='\n<ul class="phone-list">\n	<li class="phone-item-empty"><p class="caption"> '+a((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"NoPhoneTrip",s):f.call(e,"t","NoPhoneTrip",s)))+" </p></li>\n</ul>\n",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=n.helperMissing,l=this;o=n.each.call(t,t&&t.trip_items,{hash:{},inverse:l.program(3,h,i),fn:l.program(1,c,i),data:i});if(o||o===0)s+=o;return s+="\n",s}),this.Handlebars.templates["templates/phone_numbers/phone_number_list.tmpl"]=Handlebars.template(function(e,t,n,r,i){function h(e,t){var r="",i,s;r+='\n<li class="phone-item">\n	<dl class="inline phone">\n		',i=n["if"].call(e,e&&e.type,{hash:{},inverse:c.program(4,d,t),fn:c.program(2,p,t),data:t});if(i||i===0)r+=i;return r+='\n		<dd class="value">\n			<div class="phone-actionable phone-drop-down-button ',(s=n.type)?i=s.call(e,{hash:{},data:t}):(s=e&&e.type,i=typeof s===a?s.call(e,{hash:{},data:t}):s),r+=f(i)+'">\n				<a href="tel:',(s=n.number)?i=s.call(e,{hash:{},data:t}):(s=e&&e.number,i=typeof s===a?s.call(e,{hash:{},data:t}):s),r+=f(i)+'" class="button-icon btn_icon_call_25px"></a>\n			</div>\n			<span>',(s=n.number)?i=s.call(e,{hash:{},data:t}):(s=e&&e.number,i=typeof s===a?s.call(e,{hash:{},data:t}):s),r+=f(i)+"</span>\n		</dd>\n	</dl>\n</li>\n",r}function p(e,t){var r="",i,s;return r+='\n			<dt class="label">',(s=n.type)?i=s.call(e,{hash:{},data:t}):(s=e&&e.type,i=typeof s===a?s.call(e,{hash:{},data:t}):s),r+=f(i)+"</dt>\n		",r}function d(e,t){var r="",i,s;return r+='\n			<dt class="label">'+f((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"Main",s):l.call(e,"t","Main",s)))+"</dt>\n		",r}function v(e,t){var r="",i,s;return r+='\n<li class="phone-item-empty"><p class="caption"> '+f((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"NoPhone",s):l.call(e,"t","NoPhone",s)))+" </p></li>\n",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=n.helperMissing,c=this;s+='\n<div class="list-item trip-item"><div class="details">\n	<div class="item-title">\n		',(u=n.title)?o=u.call(t,{hash:{},data:i}):(u=t&&t.title,o=typeof u===a?u.call(t,{hash:{},data:i}):u),s+=f(o)+'\n	</div>\n</div></div>\n\n<ul class="phone-list">\n',o=n.each.call(t,t&&t.phone_numbers,{hash:{},inverse:c.program(6,v,i),fn:c.program(1,h,i),data:i});if(o||o===0)s+=o;return s+="\n</ul>\n",s}),this.Handlebars.templates["templates/rename_trip/rename_trip_confirm.tmpl"]=Handlebars.template(function(e,t,n,r,i){function p(e,t){var r="",i,s;return r+='value="',(s=n.name)?i=s.call(e,{hash:{},data:t}):(s=e&&e.name,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(i)+'"',r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f="function",l=this.escapeExpression,c=n.helperMissing,h=this;s+='<form action="#rename-trip" id="rename-trip-form" class="standard-form-panel">\n	<div class="input-group">\n		<div class="label"><p>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"TripName",a):c.call(t,"t","TripName",a)))+'</p></div>\n		<div class="input-container">\n			<input ',o=n["if"].call(t,t&&t.name,{hash:{},inverse:h.noop,fn:h.program(1,p,i),data:i});if(o||o===0)s+=o;return s+=' id="tripname" name="tripname" type="text" autocomplete="off" autocapitalize="off" autocorrect="off"/>\n		</div>\n	</div>\n\n	<div class="actions">\n		<button class="submit"><span>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Save",a):c.call(t,"t","Save",a)))+'</span><span class="loader light">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Loading",a):c.call(t,"t","Loading",a)))+"</span></button>\n	</div>\n</form>",s}),this.Handlebars.templates["templates/search_and_results.tmpl"]=Handlebars.template(function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div id="search" class="search"></div>\n<div id="results" class="results"></div>\n'}),this.Handlebars.templates["templates/session.tmpl"]=Handlebars.template(function(e,t,n,r,i){function p(e,t){var r="",i,s;return r+='\n	<a class="view-full" href="/login?site_pref=full">'+l((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"ViewFullSite",s):f.call(e,"t","ViewFullSite",s)))+"</a>\n	",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c="function",h=this;s+='<form action="#login" id="login-form">\n<fieldset>\n	<div class="input-container">\n		<label for="username" class="hidden">Username</label>\n		<input id="username" name="username" type="email" placeholder="'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Email",a):f.call(t,"t","Email",a)))+'" value="',(u=n.email)?o=u.call(t,{hash:{},data:i}):(u=t&&t.email,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+'" autocomplete="off" autocapitalize="off" autocorrect="off" />\n		<label for="password" class="hidden">Password</label>\n		<input id="password" name="password" type="password" placeholder="'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Password",a):f.call(t,"t","Password",a)))+'" value="',(u=n.password)?o=u.call(t,{hash:{},data:i}):(u=t&&t.password,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+'" autocomplete="off" autocapitalize="off" autocorrect="off" />\n	</div>\n	<button class="submit"><span class="label">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"SignIn",a):f.call(t,"t","SignIn",a)))+'</span><span class="loader">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Loading",a):f.call(t,"t","Loading",a)))+'</span></button>\n	<div class="horizontal-divider">\n		<span class="horizontal-divider-text-raised">or</span>\n		<hr class="horizontal-divider-dividers">\n	</div>\n	<button type="button" id="facebook">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"SignInWithFacebook",a):f.call(t,"t","SignInWithFacebook",a)))+'</button>\n</fieldset>\n<fieldset>\n	<div class="sign-up-group">\n		<button class="sign-up-btn" id="sign-up" type="button">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"SignUp",a):f.call(t,"t","SignUp",a)))+'</button>\n	</div>\n	<div class="forgot-terms-group">\n		<ul>\n			<li id="forgot-password"><span class="touch-box">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"ForgotPassword",a):f.call(t,"t","ForgotPassword",a)))+'</span></li>\n			<li id="terms-conds"><span class="touch-box">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"LegalNotices",a):f.call(t,"t","LegalNotices",a)))+"</span></li>\n		</ul>\n	</div>\n	",o=n.unless.call(t,t&&t.fullScreen,{hash:{},inverse:h.noop,fn:h.program(1,p,i),data:i});if(o||o===0)s+=o;return s+='\n</fieldset>\n</form>\n<!-- <div class="build"></div> -->\n',s}),this.Handlebars.templates["templates/simple_auto_complete_search.tmpl"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a="function",f=this.escapeExpression;return s+='<form class="standard-form-panel search display-box" action="#search" autocomplete="off" id="search-form">\n	<input type="search" autocomplete="off" class="flex-9" placeholder="',(u=n.placeholder_text)?o=u.call(t,{hash:{},data:i}):(u=t&&t.placeholder_text,o=typeof u===a?u.call(t,{hash:{},data:i}):u),s+=f(o)+'" id="query" autocorrect="off"/>\n	<div id="search" class="flex-1 general-icon icon_arrow_solid" autocomplete="off" />\n</form>\n',s}),this.Handlebars.templates["templates/trip_feed/carousel_header.tmpl"]=Handlebars.template(function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'	<p id="carousel-date" class="carousel-date"></p>\n	<p id="carousel-index" class="carousel-index"></p>'}),this.Handlebars.templates["templates/trip_feed/flight_card.tmpl"]=Handlebars.template(function(e,t,n,r,i){function p(e,t){var r="",i,s;return r+='\n				<span class="status-indicator '+l((i=n.statusIndicatorClass||e&&e.statusIndicatorClass,s={hash:{},data:t},i?i.call(e,e&&e.cancelled,e&&e.departure_status,s):f.call(e,"statusIndicatorClass",e&&e.cancelled,e&&e.departure_status,s)))+'">\n					'+l((i=n.statusIndicatorText||e&&e.statusIndicatorText,s={hash:{},data:t},i?i.call(e,e&&e.cancelled,e&&e.departure_status,s):f.call(e,"statusIndicatorText",e&&e.cancelled,e&&e.departure_status,s)))+"\n				</span>\n				",r}function d(e,t){var r="",i,s,o;return r+='\n		<div class="cell col-3">\n			<div class="label">\n				'+l((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"Seat",o):f.call(e,"t","Seat",o)))+'\n			</div>\n			<div class="value">\n				',(s=n.seat_number)?i=s.call(e,{hash:{},data:t}):(s=e&&e.seat_number,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+"\n			</div>\n		</div>\n		",r}function v(e,t){return'\n		<div class="cell col-3"></div>\n		'}function m(e,t){var r="",i,s,o;return r+='\n		<div class="cell right col-8">\n			<div class="label">\n				'+l((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"ConfirmNum",o):f.call(e,"t","ConfirmNum",o)))+'\n			</div>\n			<div class="value">\n				',(s=n.confirmation_number)?i=s.call(e,{hash:{},data:t}):(s=e&&e.confirmation_number,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+"\n			</div>\n		</div>\n		",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c="function",h=this;s+='<li class="card flight" data-trip-item-id="',(u=n.id)?o=u.call(t,{hash:{},data:i}):(u=t&&t.id,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+'" data-location="',(u=n.event_type)?o=u.call(t,{hash:{},data:i}):(u=t&&t.event_type,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+'" data-trip-item-type="'+l((u=n.lowercase||t&&t.lowercase,a={hash:{},data:i},u?u.call(t,t&&t.type,a):f.call(t,"lowercase",t&&t.type,a)))+'">\n	<header class="card-header event-detail">\n		<div class="cell col-26">\n			<div class="airline-icon airline-'+l((u=n.lowercase||t&&t.lowercase,a={hash:{},data:i},u?u.call(t,t&&t.airline_code,a):f.call(t,"lowercase",t&&t.airline_code,a)))+'"></div>\n			<h3>',(u=n.airline)?o=u.call(t,{hash:{},data:i}):(u=t&&t.airline,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+'</h3>\n			<p class="subtitle">\n				<span>',(u=n.airline_code)?o=u.call(t,{hash:{},data:i}):(u=t&&t.airline_code,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+" ",(u=n.flight_number)?o=u.call(t,{hash:{},data:i}):(u=t&&t.flight_number,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+"</span>\n\n				",o=(u=n.ifShowStatusIndicator||t&&t.ifShowStatusIndicator,a={hash:{},inverse:h.noop,fn:h.program(1,p,i),data:i},u?u.call(t,t&&t.scheduled_departure,a):f.call(t,"ifShowStatusIndicator",t&&t.scheduled_departure,a));if(o||o===0)s+=o;s+='\n			</p>\n		</div>\n	</header>\n\n	<section class="card-content event-detail">\n		<div class="cell first col-18">\n			<div class="label">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Departs",a):f.call(t,"t","Departs",a)))+'</div>\n			<div class="value">\n				',(u=n.departure_airport_code)?o=u.call(t,{hash:{},data:i}):(u=t&&t.departure_airport_code,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+' <span class="note">',(u=n.departure_airport_city)?o=u.call(t,{hash:{},data:i}):(u=t&&t.departure_airport_city,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+'</span>\n			</div>\n		</div>\n\n		<div class="cell right col-7">\n			<div class="label">\n				'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"TermGate",a):f.call(t,"t","TermGate",a)))+'\n			</div>\n			<div class="value '+l((u=n.alertClassIf||t&&t.alertClassIf,a={hash:{},data:i},u?u.call(t,t&&t.departure_terminal_or_gate_change,a):f.call(t,"alertClassIf",t&&t.departure_terminal_or_gate_change,a)))+'">\n				'+l((u=n.get_terminal_and_gate||t&&t.get_terminal_and_gate,a={hash:{},data:i},u?u.call(t,t&&t.departure_terminal,t&&t.departure_gate,a):f.call(t,"get_terminal_and_gate",t&&t.departure_terminal,t&&t.departure_gate,a)))+'\n			</div>\n		</div>\n\n		<div class="cell first col-13">\n			<div class="primary '+l((u=n.departureTimeClass||t&&t.departureTimeClass,a={hash:{},data:i},u?u.call(t,t&&t.cancelled,t&&t.scheduled_departure,t&&t.estimated_departure,a):f.call(t,"departureTimeClass",t&&t.cancelled,t&&t.scheduled_departure,t&&t.estimated_departure,a)))+'">\n				<span class="small-caps">'+l((u=n.timeFromDateTime||t&&t.timeFromDateTime,a={hash:{},data:i},u?u.call(t,t&&t.estimated_departure,a):f.call(t,"timeFromDateTime",t&&t.estimated_departure,a)))+"</span>\n			</div>\n		</div>\n\n		",o=n["if"].call(t,t&&t.seat_number,{hash:{},inverse:h.program(5,v,i),fn:h.program(3,d,i),data:i});if(o||o===0)s+=o;s+="\n\n		",o=n["if"].call(t,t&&t.confirmation_number,{hash:{},inverse:h.noop,fn:h.program(7,m,i),data:i});if(o||o===0)s+=o;return s+='\n\n	</section>\n\n	<section class="card-content event-detail">\n		<div class="cell first col-18">\n			<div class="label">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Arrives",a):f.call(t,"t","Arrives",a)))+'</div>\n			<div class="value">\n				',(u=n.arrival_airport_code)?o=u.call(t,{hash:{},data:i}):(u=t&&t.arrival_airport_code,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+' <span class="note">',(u=n.arrival_airport_city)?o=u.call(t,{hash:{},data:i}):(u=t&&t.arrival_airport_city,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+'</span>\n			</div>\n		</div>\n\n		<div class="cell right col-7">\n			<div class="label">\n				'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"TermGate",a):f.call(t,"t","TermGate",a)))+'\n			</div>\n			<div class="value '+l((u=n.alertClassIf||t&&t.alertClassIf,a={hash:{},data:i},u?u.call(t,t&&t.arrival_terminal_or_gate_change,a):f.call(t,"alertClassIf",t&&t.arrival_terminal_or_gate_change,a)))+'">\n				'+l((u=n.get_terminal_and_gate||t&&t.get_terminal_and_gate,a={hash:{},data:i},u?u.call(t,t&&t.arrival_terminal,t&&t.arrival_gate,a):f.call(t,"get_terminal_and_gate",t&&t.arrival_terminal,t&&t.arrival_gate,a)))+'\n			</div>\n		</div>\n\n		<div class="cell first col-13">\n			<div class="primary '+l((u=n.arrivalTimeClass||t&&t.arrivalTimeClass,a={hash:{},data:i},u?u.call(t,t&&t.cancelled,t&&t.scheduled_arrival,t&&t.estimated_arrival,a):f.call(t,"arrivalTimeClass",t&&t.cancelled,t&&t.scheduled_arrival,t&&t.estimated_arrival,a)))+'">\n				<span class="small-caps">'+l((u=n.timeFromDateTime||t&&t.timeFromDateTime,a={hash:{},data:i},u?u.call(t,t&&t.estimated_arrival,a):f.call(t,"timeFromDateTime",t&&t.estimated_arrival,a)))+'</span>\n			</div>\n		</div>\n\n		<div class="cell right col-12">\n			<div class="label">\n				'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Baggage",a):f.call(t,"t","Baggage",a)))+'\n			</div>\n			<div class="value '+l((u=n.alertClassIf||t&&t.alertClassIf,a={hash:{},data:i},u?u.call(t,t&&t.baggage_claim_change,a):f.call(t,"alertClassIf",t&&t.baggage_claim_change,a)))+'">\n				'+l((u=n.if_not_blank||t&&t.if_not_blank,a={hash:{},data:i},u?u.call(t,t&&t.baggage_claim,"TBD",a):f.call(t,"if_not_blank",t&&t.baggage_claim,"TBD",a)))+'\n			</div>\n		</div>\n	</section>\n\n	<ul class="card-toolbar clearfix">\n		<li class="call" data-trip-item-id="',(u=n.id)?o=u.call(t,{hash:{},data:i}):(u=t&&t.id,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+'">\n			<div class="button-icon btn_icon_call_blue_25px"></div>\n			'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Call",a):f.call(t,"t","Call",a)))+'\n		</li>\n		<li class="directions" data-trip-item-id="',(u=n.id)?o=u.call(t,{hash:{},data:i}):(u=t&&t.id,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+'">\n			<div class="button-icon btn_icon_directions_blue_25px"></div>\n			'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Directions",a):f.call(t,"t","Directions",a)))+'\n		</li>\n		<li class="weather" data-trip-item-id="',(u=n.id)?o=u.call(t,{hash:{},data:i}):(u=t&&t.id,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+'">\n			<div class="button-icon btn_icon_weather_blue_25px"></div>\n			'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Weather",a):f.call(t,"t","Weather",a)))+'\n		</li>\n		<li class="alternate-flights" data-trip-item-id="',(u=n.id)?o=u.call(t,{hash:{},data:i}):(u=t&&t.id,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+'">\n			<div class="button-icon btn_icon_alt_flights_blue_25px"></div>\n			'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"AltFlightsShort",a):f.call(t,"t","AltFlightsShort",a)))+"\n		</li>\n	</ul>\n</li>",s}),this.Handlebars.templates["templates/trip_feed/hotel_check_out_card.tmpl"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f="function",l=this.escapeExpression,c=n.helperMissing;return s+='<li class="card hotel-checkout event-detail" data-trip-item-id="',(u=n.id)?o=u.call(t,{hash:{},data:i}):(u=t&&t.id,o=typeof u===f?u.call(t,{hash:{},data:i}):u),s+=l(o)+'" data-location="',(u=n.event_type)?o=u.call(t,{hash:{},data:i}):(u=t&&t.event_type,o=typeof u===f?u.call(t,{hash:{},data:i}):u),s+=l(o)+'" data-trip-item-type="'+l((u=n.lowercase||t&&t.lowercase,a={hash:{},data:i},u?u.call(t,t&&t.type,a):c.call(t,"lowercase",t&&t.type,a)))+'">\n	<div class="hotel-checkout-image"></div>\n	<section class="card-content">\n		<div class="cell first col-8">\n			<div class="label">\n				<span class="upper-case">\n					'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"HotelCheckOut",a):c.call(t,"t","HotelCheckOut",a)))+'\n				</span>\n			</div>\n		</div>\n		<div class="cell first col-8">\n			<div class="value">\n				<span class="small-caps">\n					'+l((u=n.timeFromDateTime||t&&t.timeFromDateTime,a={hash:{},data:i},u?u.call(t,t&&t.end_date,a):c.call(t,"timeFromDateTime",t&&t.end_date,a)))+"\n				</span>\n			</div>\n		</div>\n	</section>\n</li>",s}),this.Handlebars.templates["templates/trip_feed/hotel_vehicle_generic_card.tmpl"]=Handlebars.template(function(e,t,n,r,i){function p(e,t){var r="",i,s,o;r+="\n					",i=(s=n.if_equal||e&&e.if_equal,o={hash:{},inverse:c.program(4,v,t),fn:c.program(2,d,t),data:t},s?s.call(e,e&&e.event_type,"start",o):h.call(e,"if_equal",e&&e.event_type,"start",o));if(i||i===0)r+=i;return r+="\n				",r}function d(e,t){var n="",r;return n+="\n						"+l((r=(r=e&&e.labels,r==null||r===!1?r:r.start),typeof r===f?r.apply(e):r))+"\n					",n}function v(e,t){var n="",r;return n+="\n						"+l((r=(r=e&&e.labels,r==null||r===!1?r:r.end),typeof r===f?r.apply(e):r))+"\n					",n}function m(e,t){var r="",i,s;return r+="\n					"+l((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"Starts",s):h.call(e,"t","Starts",s)))+"\n				",r}function g(e,t){var r="",i,s,o;r+="\n					",i=(s=n.if_equal||e&&e.if_equal,o={hash:{},inverse:c.program(11,b,t),fn:c.program(9,y,t),data:t},s?s.call(e,e&&e.event_type,"start",o):h.call(e,"if_equal",e&&e.event_type,"start",o));if(i||i===0)r+=i;return r+="\n				",r}function y(e,t){var r="",i,s;return r+="\n						"+l((i=n.locationAddress||e&&e.locationAddress,s={hash:{},data:t},i?i.call(e,e&&e.start_location,s):h.call(e,"locationAddress",e&&e.start_location,s)))+"\n					",r}function b(e,t){var r="",i;r+="\n						",i=n["if"].call(e,(i=e&&e.end_location,i==null||i===!1?i:i.general_location),{hash:{},inverse:c.program(14,E,t),fn:c.program(12,w,t),data:t});if(i||i===0)r+=i;return r+="\n					",r}function w(e,t){var r="",i,s;return r+="\n							"+l((i=n.locationAddress||e&&e.locationAddress,s={hash:{},data:t},i?i.call(e,e&&e.end_location,s):h.call(e,"locationAddress",e&&e.end_location,s)))+"\n						",r}function E(e,t){var r="",i,s;return r+="\n							"+l((i=n.locationAddress||e&&e.locationAddress,s={hash:{},data:t},i?i.call(e,e&&e.start_location,s):h.call(e,"locationAddress",e&&e.start_location,s)))+"\n						",r}function S(e,t){var r="",i,s;return r+="\n					"+l((i=n.locationAddress||e&&e.locationAddress,s={hash:{},data:t},i?i.call(e,e&&e.start_location,s):h.call(e,"locationAddress",e&&e.start_location,s)))+"\n				",r}function x(e,t){var r="",i,s,o;r+="\n					",i=(s=n.if_equal||e&&e.if_equal,o={hash:{},inverse:c.program(21,N,t),fn:c.program(19,T,t),data:t},s?s.call(e,e&&e.event_type,"start",o):h.call(e,"if_equal",e&&e.event_type,"start",o));if(i||i===0)r+=i;return r+="\n				",r}function T(e,t){var r="",i,s;return r+="\n						"+l((i=n.timeFromDateTime||e&&e.timeFromDateTime,s={hash:{},data:t},i?i.call(e,e&&e.start_date,s):h.call(e,"timeFromDateTime",e&&e.start_date,s)))+"\n					",r}function N(e,t){var r="",i,s;return r+="\n						"+l((i=n.timeFromDateTime||e&&e.timeFromDateTime,s={hash:{},data:t},i?i.call(e,e&&e.end_date,s):h.call(e,"timeFromDateTime",e&&e.end_date,s)))+"\n					",r}function C(e,t){var r="",i,s;return r+="\n					"+l((i=n.timeFromDateTime||e&&e.timeFromDateTime,s={hash:{},data:t},i?i.call(e,e&&e.start_date,s):h.call(e,"timeFromDateTime",e&&e.start_date,s)))+"\n				",r}function k(e,t){var r="",i,s,o;return r+='\n		<div class="cell col-8">\n			<div class="label">\n				'+l((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"ConfirmNum",o):h.call(e,"t","ConfirmNum",o)))+'\n			</div>\n			<div class="value">\n				',(s=n.confirmation_number)?i=s.call(e,{hash:{},data:t}):(s=e&&e.confirmation_number,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(i)+"\n			</div>\n		</div>\n		",r}function L(e,t){var r="",i,s,o;r+="\n			",i=(s=n.if_equal||e&&e.if_equal,o={hash:{},inverse:c.noop,fn:c.program(28,A,t),data:t},s?s.call(e,e&&e.event_type,"end",o):h.call(e,"if_equal",e&&e.event_type,"end",o));if(i||i===0)r+=i;return r+="\n		",r}function A(e,t){return'\n				data-segment="end"\n			'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f="function",l=this.escapeExpression,c=this,h=n.helperMissing;s+='<li class="card" data-trip-item-id="',(u=n.id)?o=u.call(t,{hash:{},data:i}):(u=t&&t.id,o=typeof u===f?u.call(t,{hash:{},data:i}):u),s+=l(o)+'" data-location="',(u=n.event_type)?o=u.call(t,{hash:{},data:i}):(u=t&&t.event_type,o=typeof u===f?u.call(t,{hash:{},data:i}):u),s+=l(o)+'" data-trip-item-type="'+l((u=n.lowercase||t&&t.lowercase,a={hash:{},data:i},u?u.call(t,t&&t.type,a):h.call(t,"lowercase",t&&t.type,a)))+'">\n	<header class="card-header event-detail">\n		<div class="cell col-26">\n			<div class="general-icon ',(u=n.icon)?o=u.call(t,{hash:{},data:i}):(u=t&&t.icon,o=typeof u===f?u.call(t,{hash:{},data:i}):u),s+=l(o)+'"></div>\n			<h3>'+l((u=n.if_not_blank||t&&t.if_not_blank,a={hash:{},data:i},u?u.call(t,t&&t.name,"Untitled",a):h.call(t,"if_not_blank",t&&t.name,"Untitled",a)))+'</h3>\n		</div>\n	</header>\n\n	<section class="card-content event-detail">\n		<div class="cell first col-26">\n			<div class="label">\n				',o=(u=n.isCarOrHotel||t&&t.isCarOrHotel,a={hash:{},inverse:c.program(6,m,i),fn:c.program(1,p,i),data:i},u?u.call(t,t&&t.className,a):h.call(t,"isCarOrHotel",t&&t.className,a));if(o||o===0)s+=o;s+='\n			</div>\n			<div class="value">\n				',o=(u=n.isCarOrHotel||t&&t.isCarOrHotel,a={hash:{},inverse:c.program(16,S,i),fn:c.program(8,g,i),data:i},u?u.call(t,t&&t.className,a):h.call(t,"isCarOrHotel",t&&t.className,a));if(o||o===0)s+=o;s+='\n			</div>\n		</div>\n\n		<div class="cell first col-13">\n			<div class="primary">\n				<span class="small-caps">\n				',o=(u=n.isCarOrHotel||t&&t.isCarOrHotel,a={hash:{},inverse:c.program(23,C,i),fn:c.program(18,x,i),data:i},u?u.call(t,t&&t.className,a):h.call(t,"isCarOrHotel",t&&t.className,a));if(o||o===0)s+=o;s+="\n				</span>\n			</div>\n		</div>\n\n		",o=n["if"].call(t,t&&t.confirmation_number,{hash:{},inverse:c.noop,fn:c.program(25,k,i),data:i});if(o||o===0)s+=o;s+='\n\n	</section>\n\n	<section class="card-content card-map" data-lat-lng="',(u=n.getStaticMapLatLng)?o=u.call(t,{hash:{},data:i}):(u=t&&t.getStaticMapLatLng,o=typeof u===f?u.call(t,{hash:{},data:i}):u),s+=l(o)+'"\n		',o=(u=n.if_equal||t&&t.if_equal,a={hash:{},inverse:c.noop,fn:c.program(27,L,i),data:i},u?u.call(t,t&&t.type,"Vehicle",a):h.call(t,"if_equal",t&&t.type,"Vehicle",a));if(o||o===0)s+=o;s+='\n	>\n		<div class="card-map-marker-shadow"></div>\n		<div class="card-map-marker"></div>\n	</section>\n\n	<ul class="card-toolbar clearfix">\n		<li class="call" data-trip-item-id="',(u=n.id)?o=u.call(t,{hash:{},data:i}):(u=t&&t.id,o=typeof u===f?u.call(t,{hash:{},data:i}):u),s+=l(o)+'">\n			<div class="button-icon btn_icon_call_blue_25px"></div>\n			'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Call",a):h.call(t,"t","Call",a)))+'\n		</li>\n		<li class="directions" data-trip-item-id="',(u=n.id)?o=u.call(t,{hash:{},data:i}):(u=t&&t.id,o=typeof u===f?u.call(t,{hash:{},data:i}):u),s+=l(o)+'"\n		',o=(u=n.if_equal||t&&t.if_equal,a={hash:{},inverse:c.noop,fn:c.program(27,L,i),data:i},u?u.call(t,t&&t.type,"Vehicle",a):h.call(t,"if_equal",t&&t.type,"Vehicle",a));if(o||o===0)s+=o;return s+='\n		>\n			<div class="button-icon btn_icon_directions_blue_25px"></div>\n			'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Directions",a):h.call(t,"t","Directions",a)))+"\n		</li>\n	</ul>\n</li>",s}),this.Handlebars.templates["templates/trip_feed/plan_event_card.tmpl"]=Handlebars.template(function(e,t,n,r,i){function p(e,t){var r="",i,s;return r+='\n			<div class="cell first col-14 right">\n				<div class="status-label">\n					',(s=n.labelText)?i=s.call(e,{hash:{},data:t}):(s=e&&e.labelText,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(i)+'\n				</div>\n			</div>\n			<div class="cell col-7 days-padding">\n				<div class="days-value-flipper">\n					<div class="days-value">',(s=n.timeValue)?i=s.call(e,{hash:{},data:t}):(s=e&&e.timeValue,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(i)+'</div>\n					<div class="days-label">',(s=n.timeLabel)?i=s.call(e,{hash:{},data:t}):(s=e&&e.timeLabel,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(i)+'</div>\n					<div class="days-line"></div>\n				</div>\n			</div>\n		',r}function d(e,t){var r="",i,s;return r+='\n			<div class="cell first col-26 center status-label">\n				',(s=n.labelText)?i=s.call(e,{hash:{},data:t}):(s=e&&e.labelText,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(i)+"\n			</div>\n		",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f="function",l=this.escapeExpression,c=n.helperMissing,h=this;s+='<li class="card plan-event" data-trip-item-type="'+l((u=n.lowercase||t&&t.lowercase,a={hash:{},data:i},u?u.call(t,t&&t.type,a):c.call(t,"lowercase",t&&t.type,a)))+'">\n	<section class="plan-event-header">\n		',o=n["if"].call(t,t&&t.hasClockTimer,{hash:{},inverse:h.program(3,d,i),fn:h.program(1,p,i),data:i});if(o||o===0)s+=o;return s+='\n	</section>\n\n	<section class="plan-event-destination">\n		<div class="destination-locale">\n			',(u=n.destination)?o=u.call(t,{hash:{},data:i}):(u=t&&t.destination,o=typeof u===f?u.call(t,{hash:{},data:i}):u),s+=l(o)+'\n		</div>\n	</section>\n\n	<nav>\n		<ul class="card-toolbar clearfix">\n			<li id="trip-itinerary" class="itinerary">\n				<div class="button-icon btn_icon_itinerary_blue_25px"></div>\n				'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Timeline",a):c.call(t,"t","Timeline",a)))+'\n			</li>\n			<li id="trip-add-item" class="add-item">\n				<div class="button-icon btn_icon_add_blue_25px"></div>\n				'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"AddItem",a):c.call(t,"t","AddItem",a)))+'\n			</li>\n			<li id="trip-weather" class="weather">\n				<div class="button-icon btn_icon_weather_blue_25px"></div>\n				'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Weather",a):c.call(t,"t","Weather",a)))+'\n			</li>\n			<li id="trip-share" class="share">\n				<div class="button-icon btn_icon_share_blue_25px"></div>\n				'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Share",a):c.call(t,"t","Share",a)))+"\n			</li>\n		</ul>\n	</nav>\n</li>\n",s}),this.Handlebars.templates["templates/trip_feed/trip_cards.tmpl"]=Handlebars.template(function(e,t,n,r,i){function f(e,t){var r="",i;r+="\n	",i=n.each.call(e,e&&e.events,{hash:{},inverse:u.noop,fn:u.program(2,l,t),data:t});if(i||i===0)r+=i;return r+="\n",r}function l(e,t){var r="",i;r+="\n		",i=n["if"].call(e,e&&e.isPlanEvent,{hash:{},inverse:u.program(5,h,t),fn:u.program(3,c,t),data:t});if(i||i===0)r+=i;return r+="\n	",r}function c(e,t){var i="",s;i+="\n			",s=u.invokePartial(r.planEventCard,"planEventCard",e,n,r,t);if(s||s===0)i+=s;return i+="\n		",i}function h(e,t){var r="",i;r+="\n			",i=n["if"].call(e,e&&e.airline,{hash:{},inverse:u.program(8,d,t),fn:u.program(6,p,t),data:t});if(i||i===0)r+=i;return r+="\n		",r}function p(e,t){var i="",s;i+="\n				",s=u.invokePartial(r.flightCard,"flightCard",e,n,r,t);if(s||s===0)i+=s;return i+="\n			",i}function d(e,t){var r="",i,s,o;r+="\n				",i=(s=n.isHotelCheckOut||e&&e.isHotelCheckOut,o={hash:{},inverse:u.program(11,m,t),fn:u.program(9,v,t),data:t},s?s.call(e,e&&e.type,e&&e.event_type,o):a.call(e,"isHotelCheckOut",e&&e.type,e&&e.event_type,o));if(i||i===0)r+=i;return r+="\n			",r}function v(e,t){var i="",s;i+="\n					",s=u.invokePartial(r.hotelCheckOutCard,"hotelCheckOutCard",e,n,r,t);if(s||s===0)i+=s;return i+="\n				",i}function m(e,t){var i="",s;i+="\n					",s=u.invokePartial(r.hotelVehicleGenericCard,"hotelVehicleGenericCard",e,n,r,t);if(s||s===0)i+=s;return i+="\n				",i}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=this.merge(r,e.partials),i=i||{};var s="",o,u=this,a=n.helperMissing;s+='<ul id="cards">\n',o=n.each.call(t,t&&t.days,{hash:{},inverse:u.noop,fn:u.program(1,f,i),data:i});if(o||o===0)s+=o;return s+="\n</ul>",s}),this.Handlebars.templates["templates/trip_feed/trip_messages.tmpl"]=Handlebars.template(function(e,t,n,r,i){function h(e,t){var r="",i,s,o;r+='\n	<ul class="trip-messages" data-timing-category="appload" data-timing-name="tripfeedmessages">\n		',i=(s=n.each_with_index||e&&e.each_with_index,o={hash:{},inverse:f.noop,fn:f.program(2,p,t),data:t},s?s.call(e,e&&e.messages,o):c.call(e,"each_with_index",e&&e.messages,o));if(i||i===0)r+=i;return r+="\n	</ul>\n",r}function p(e,t){var r="",i,s,o;r+='\n			<li class="trip-message" data-index="',(s=n.index)?i=s.call(e,{hash:{},data:t}):(s=e&&e.index,i=typeof s===u?s.call(e,{hash:{},data:t}):s),r+=a(i)+'">\n\n				<div class="trip-message__icon"><img src="',(s=n.icon_url)?i=s.call(e,{hash:{},data:t}):(s=e&&e.icon_url,i=typeof s===u?s.call(e,{hash:{},data:t}):s),r+=a(i)+'"/></div>\n				<p class="trip-message__text">',(s=n.text)?i=s.call(e,{hash:{},data:t}):(s=e&&e.text,i=typeof s===u?s.call(e,{hash:{},data:t}):s);if(i||i===0)r+=i;r+="</p>\n\n				",o={hash:{},inverse:f.noop,fn:f.program(3,d,t),data:t},(s=n.ifTripFeedMessageClickable)?i=s.call(e,o):(s=e&&e.ifTripFeedMessageClickable,i=typeof s===u?s.call(e,o):s),n.ifTripFeedMessageClickable||(i=l.call(e,i,{hash:{},inverse:f.noop,fn:f.program(3,d,t),data:t}));if(i||i===0)r+=i;return r+="\n\n			</li>\n		",r}function d(e,t){return'\n					<div class="trip-message__next btn_arrow button-icon"></div>\n				'}function v(e,t){return'\n	<ul class="trip-messages">\n		<li class="trip-message">\n			<div class="trip-message__icon trip-message__icon--skeleton"></div>\n			<p class="trip-message__text trip-message__text--skeleton"></p>\n			<p class="trip-message__text trip-message__text--skeleton"></p>\n		</li>\n		<li class="trip-message">\n			<div class="trip-message__icon trip-message__icon--skeleton"></div>\n			<p class="trip-message__text trip-message__text--skeleton"></p>\n			<p class="trip-message__text trip-message__text--skeleton"></p>\n		</li>\n		<li class="trip-message">\n			<div class="trip-message__icon trip-message__icon--skeleton"></div>\n			<p class="trip-message__text trip-message__text--skeleton"></p>\n			<p class="trip-message__text trip-message__text--skeleton"></p>\n		</li>\n	</ul>\n'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this,l=n.blockHelperMissing,c=n.helperMissing;o=n["if"].call(t,t&&t.messages,{hash:{},inverse:f.noop,fn:f.program(1,h,i),data:i});if(o||o===0)s+=o;s+="\n\n",o=n["if"].call(t,t&&t.isFetchingMessages,{hash:{},inverse:f.noop,fn:f.program(5,v,i),data:i});if(o||o===0)s+=o;return s+="\n",s}),this.Handlebars.templates["templates/trip_items/add/add_trip_item.tmpl"]=Handlebars.template(function(e,t,n,r,i){function p(e,t){var r="",i,s,o;r+='\n		<div class="input-group-checkbox ',i=n.unless.call(e,e&&e.userCorporation,{hash:{},inverse:h.noop,fn:h.program(2,d,t),data:t});if(i||i===0)r+=i;r+='">\n			<input class="input-group-checkbox__checkbox" type="checkbox"\n				id="selenium-for-business" name="for_business"\n				',i=n["if"].call(e,e&&e.for_business,{hash:{},inverse:h.noop,fn:h.program(4,v,t),data:t});if(i||i===0)r+=i;r+="\n				",i=n.unless.call(e,e&&e.userCorporation,{hash:{},inverse:h.noop,fn:h.program(6,m,t),data:t});if(i||i===0)r+=i;r+=" />\n			",i=n.unless.call(e,e&&e.userCorporation,{hash:{},inverse:h.noop,fn:h.program(8,g,t),data:t});if(i||i===0)r+=i;r+='\n			<div class="input-group-checkbox__main">\n				<div class="input-group-checkbox__label"><p>'+l((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"ForBusiness",o):f.call(e,"t","ForBusiness",o)))+'</p></div>\n				<div class="input-group-checkbox__sublabel"><p>\n					',i=n["if"].call(e,e&&e.for_business,{hash:{},inverse:h.program(12,b,t),fn:h.program(10,y,t),data:t});if(i||i===0)r+=i;r+="\n\n					",i=n["if"].call(e,e&&e.itemCorporation,{hash:{},inverse:h.program(16,E,t),fn:h.program(14,w,t),data:t});if(i||i===0)r+=i;return r+='\n				</p></div>\n			</div>\n			<div id="for-business-help" class="input-group-checkbox__right-button input-group-checkbox__nontoggle">\n				<div class="icon_info_20px general-icon"></div>\n			</div>\n		</div>\n	',r}function d(e,t){return"is-disabled"}function v(e,t){return"checked"}function m(e,t){return"disabled"}function g(e,t){return'\n				<input type="hidden" name="for_business" value="on">\n			'}function y(e,t){var r="",i,s;return r+="\n						"+l((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"ConnectedWith",s):f.call(e,"t","ConnectedWith",s)))+"\n					",r}function b(e,t){var r="",i,s;return r+="\n						"+l((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"ConnectTo",s):f.call(e,"t","ConnectTo",s)))+"\n					",r}function w(e,t){var r="",i,s;return r+="\n						",(s=n.itemCorporation)?i=s.call(e,{hash:{},data:t}):(s=e&&e.itemCorporation,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+"\n					",r}function E(e,t){var r="",i,s;return r+="\n						",(s=n.userCorporation)?i=s.call(e,{hash:{},data:t}):(s=e&&e.userCorporation,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+"\n					",r}function S(e,t){var r="",i,s;return r+='\n		<div class="input-group">\n			<div class="label"><p>'+l((i=(i=e&&e.labels,i==null||i===!1?i:i.name),typeof i===c?i.apply(e):i))+'</p></div>\n			<div class="input-container">\n				<input  id="name" name="name" type="text" value="',(s=n.name)?i=s.call(e,{hash:{},data:t}):(s=e&&e.name,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+'" autocomplete="off" autocapitalize="off" autocorrect="off" />\n			</div>\n		</div>\n	',r}function x(e,t){var r="",i,s,o;r+='\n	<div id="startLocationContainer" class="input-group ',i=n["if"].call(e,(i=e&&e.start_location,i==null||i===!1?i:i.name),{hash:{},inverse:h.noop,fn:h.program(21,T,t),data:t});if(i||i===0)r+=i;r+='">\n		<div class="label"><div>'+l((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"Location",o):f.call(e,"t","Location",o)))+'</div></div>\n		<div class="input-container thin actionable location">\n			<div class="input">\n				<div class="address">\n					',i=n["if"].call(e,(i=e&&e.start_location,i==null||i===!1?i:i.displayable_name),{hash:{},inverse:h.noop,fn:h.program(23,N,t),data:t});if(i||i===0)r+=i;r+="\n					",i=n.each.call(e,(i=e&&e.start_location,i==null||i===!1?i:i.address_lines),{hash:{},inverse:h.noop,fn:h.program(25,C,t),data:t});if(i||i===0)r+=i;r+='\n				</div>\n			</div>\n			<input type="hidden" id="startLocation" name="startLocation" value="',i=(i=(i=e&&e.start_location,i==null||i===!1?i:i.name),typeof i===c?i.apply(e):i);if(i||i===0)r+=i;return r+='" />\n		</div>\n		<div class="chevron-container"><div class="btn_arrow_dark button-icon"></div></div>\n	</div>\n	',r}function T(e,t){return" notes "}function N(e,t){var n="",r;return n+='\n						<p class="item-sub-title">'+l((r=(r=e&&e.start_location,r==null||r===!1?r:r.displayable_name),typeof r===c?r.apply(e):r))+"</p>\n					",n}function C(e,t){var n="";return n+='\n						<p class="item-sub-title">'+l(typeof e===c?e.apply(e):e)+"</p>\n					",n}function k(e,t){var r="",i,s;r+='\n\n		\n		<div class="input-group-checkbox">\n			',i=n["if"].call(e,e&&e.is_both_same_checked,{hash:{},inverse:h.program(30,A,t),fn:h.program(28,L,t),data:t});if(i||i===0)r+=i;r+='\n			<div class="input-group-checkbox__label"><p>'+l((i=(i=e&&e.labels,i==null||i===!1?i:i.same_as),typeof i===c?i.apply(e):i))+"</p></div>\n		</div>\n\n		\n		",i=n["if"].call(e,e&&e.is_both_same_checked,{hash:{},inverse:h.program(34,M,t),fn:h.program(32,O,t),data:t});if(i||i===0)r+=i;r+='\n\n			\n			<div class="label"><p>Location</p></div>\n			<div class="input-container thin actionable location">\n				<div class="input">\n					<div class="address">\n						',i=n["if"].call(e,(i=e&&e.end_location,i==null||i===!1?i:i.displayable_name),{hash:{},inverse:h.noop,fn:h.program(36,_,t),data:t});if(i||i===0)r+=i;r+="\n						",i=n.each.call(e,(i=e&&e.end_location,i==null||i===!1?i:i.address_lines),{hash:{},inverse:h.noop,fn:h.program(38,D,t),data:t});if(i||i===0)r+=i;r+='\n					</div>\n				</div>\n			<input type="hidden" id="endLocation" name="endLocation" value="',(s=n.name)?i=s.call(e,{hash:{},data:t}):(s=e&&e.name,i=typeof s===c?s.call(e,{hash:{},data:t}):s);if(i||i===0)r+=i;return r+='" />\n			</div>\n			<div class="chevron-container"><div class="btn_arrow_dark button-icon"></div></div>\n		</div>\n	',r}function L(e,t){return'\n				<input id="bothSame" class="input-group-checkbox__checkbox" type="checkbox" checked="checked" />\n			'}function A(e,t){return'\n				<input id="bothSame" class="input-group-checkbox__checkbox" type="checkbox" />\n			'}function O(e,t){var r="",i;r+='\n			<div style="display:none" id="endLocationContainer" class="input-group ',i=n["if"].call(e,(i=e&&e.end_location,i==null||i===!1?i:i.name),{hash:{},inverse:h.noop,fn:h.program(21,T,t),data:t});if(i||i===0)r+=i;return r+='">\n		',r}function M(e,t){var r="",i;r+='\n			<div id="endLocationContainer" class="input-group ',i=n["if"].call(e,(i=e&&e.end_location,i==null||i===!1?i:i.name),{hash:{},inverse:h.noop,fn:h.program(21,T,t),data:t});if(i||i===0)r+=i;return r+='">\n		',r}function _(e,t){var n="",r;return n+='\n							<p class="item-sub-title">'+l((r=(r=e&&e.end_location,r==null||r===!1?r:r.displayable_name),typeof r===c?r.apply(e):r))+"</p>\n						",n}function D(e,t){var n="";return n+='\n							<p class="item-sub-title">'+l(typeof e===c?e.apply(e):e)+"</p>\n						",n}function P(e,t){var r="",i;r+="\n		",i=n["if"].call(e,e&&e.phone_numbers,{hash:{},inverse:h.program(44,j,t),fn:h.program(41,H,t),data:t});if(i||i===0)r+=i;return r+="\n	",r}function H(e,t){var r="",i;r+="\n		",i=n.each.call(e,e&&e.phone_numbers,{hash:{},inverse:h.noop,fn:h.program(42,B,t),data:t});if(i||i===0)r+=i;return r+="\n		",r}function B(e,t){var r="",i,s,o;return r+='\n			<div class="input-group">\n				<div class="label"><p>'+l((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"Phone",o):f.call(e,"t","Phone",o)))+'</p></div>\n				<div class="input-container"><input id="phone_number" name="phone_number" type="text" placeholder="'+l((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"Optional",o):f.call(e,"t","Optional",o)))+'" value="',(s=n.number)?i=s.call(e,{hash:{},data:t}):(s=e&&e.number,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+'" autocomplete="off" autocapitalize="off" autocorrect="off" /></div>\n			</div>\n		',r}function j(e,t){var r="",i,s;return r+='\n			<div class="input-group">\n				<div class="label"><p>'+l((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"Phone",s):f.call(e,"t","Phone",s)))+'</p></div>\n				<div class="input-container"><input id="phone_number" name="phone_number" type="text" placeholder="'+l((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"Optional",s):f.call(e,"t","Optional",s)))+'" value="" autocomplete="off" autocapitalize="off" autocorrect="off" /></div>\n			</div>\n		',r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c="function",h=this;s+='<form class="add-trip-item standard-form-panel" action="#create-trip" id="create-trip-form" class="standard-form-panel">\n\n	\n	',o=n["if"].call(t,t&&t.showForBusinessField,{hash:{},inverse:h.noop,fn:h.program(1,p,i),data:i});if(o||o===0)s+=o;s+="\n\n	\n	",o=n["if"].call(t,t&&t.is_name_displayable,{hash:{},inverse:h.noop,fn:h.program(18,S,i),data:i});if(o||o===0)s+=o;s+='\n    <h2 class="component-subheader">'+l((o=(o=t&&t.labels,o==null||o===!1?o:o.start),typeof o===c?o.apply(t):o))+"</h2>\n\n    \n	",o=n["if"].call(t,t&&t.is_start_location_displayable,{hash:{},inverse:h.noop,fn:h.program(20,x,i),data:i});if(o||o===0)s+=o;s+='\n\n	\n	<div class="input-group">\n		<div class="label"><p>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Date",a):f.call(t,"t","Date",a)))+'</p></div>\n		<div class="input-container">\n			<input id="start_date" name="start_date" readonly="readonly" class="date" type="text" value="'+l((u=n.mediumLongDate||t&&t.mediumLongDate,a={hash:{},data:i},u?u.call(t,t&&t.start_date,a):f.call(t,"mediumLongDate",t&&t.start_date,a)))+'" autocomplete="off" autocapitalize="off" autocorrect="off" />\n		</div>\n	</div>\n\n	\n	<div class="input-group">\n		<div class="label"><p>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Time",a):f.call(t,"t","Time",a)))+'</p></div>\n		<div class="input-container"><input id="start_time" name="start_time" type="text" value="'+l((u=n.timeFromDateTime||t&&t.timeFromDateTime,a={hash:{},data:i},u?u.call(t,t&&t.start_time,a):f.call(t,"timeFromDateTime",t&&t.start_time,a)))+'" readonly autocomplete="off" autocapitalize="off" autocorrect="off" /></div>\n	</div>\n\n    <h2 class="component-subheader">'+l((o=(o=t&&t.labels,o==null||o===!1?o:o.end),typeof o===c?o.apply(t):o))+"</h2>\n	",o=n["if"].call(t,t&&t.is_end_location_displayable,{hash:{},inverse:h.noop,fn:h.program(27,k,i),data:i});if(o||o===0)s+=o;s+='\n\n	\n	<div class="input-group">\n		<div class="label"><p>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Date",a):f.call(t,"t","Date",a)))+'</p></div>\n		<div class="input-container">\n			<input id="end_date" name="end_date" readonly="readonly" type="text" value="'+l((u=n.mediumLongDate||t&&t.mediumLongDate,a={hash:{},data:i},u?u.call(t,t&&t.end_date,a):f.call(t,"mediumLongDate",t&&t.end_date,a)))+'" autocomplete="off" autocapitalize="off" autocorrect="off" />\n		</div>\n	</div>\n\n	\n	<div class="input-group">\n		<div class="label"><p>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Time",a):f.call(t,"t","Time",a)))+'</p></div>\n		<div class="input-container"><input id="end_time" name="end_time" type="text" value="'+l((u=n.timeFromDateTime||t&&t.timeFromDateTime,a={hash:{},data:i},u?u.call(t,t&&t.end_time,a):f.call(t,"timeFromDateTime",t&&t.end_time,a)))+'" readonly autocomplete="off" autocapitalize="off" autocorrect="off" /></div>\n	</div>\n\n	\n	<div class="input-group">\n		<div class="label"><p>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"ConfNum",a):f.call(t,"t","ConfNum",a)))+'</p></div>\n		<div class="input-container"><input id="confirmation_number" name="confirmation_number" type="text" placeholder="'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Optional",a):f.call(t,"t","Optional",a)))+'" value="',(u=n.confirmation_number)?o=u.call(t,{hash:{},data:i}):(u=t&&t.confirmation_number,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+'" autocomplete="off" autocapitalize="off" autocorrect="off" /></div>\n	</div>\n\n	\n	',o=n["if"].call(t,t&&t.is_phone_number_displayable,{hash:{},inverse:h.noop,fn:h.program(40,P,i),data:i});if(o||o===0)s+=o;return s+='\n\n	\n	<div class="input-group">\n		<div class="label"><p>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Notes",a):f.call(t,"t","Notes",a)))+'</p></div>\n		<div class="input-container"><input id="note" name="note" type="text" placeholder="'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Optional",a):f.call(t,"t","Optional",a)))+'" value="',(u=n.note)?o=u.call(t,{hash:{},data:i}):(u=t&&t.note,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+'" autocomplete="off" autocapitalize="off" autocorrect="off" /></div>\n	</div>\n\n	<div class="actions">\n		<button class="submit"><span>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Save",a):f.call(t,"t","Save",a)))+'</span><span class="loader light">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Loading",a):f.call(t,"t","Loading",a)))+"</span></button>\n	</div>\n</form>\n",s}),this.Handlebars.templates["templates/trip_items/add/pick_location.tmpl"]=Handlebars.template(function(e,t,n,r,i){function c(e,t){var r="",i,s,o;return r+='\n	<div id="searchLocation" class="list-item actionable">\n		<div class="details">\n			<a class="item-title action no-icon">\n				<h2>'+a((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"ChooseLocation",o):u.call(e,"t","ChooseLocation",o)))+'</h2>\n				<p class="item-sub-title">'+a((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"EnterStreetLocation",o):u.call(e,"t","EnterStreetLocation",o)))+'</p>\n			</a>\n			<div class="button-icon btn_arrow"></div>\n		</div>\n	</div>\n	<h2 class="component-subheader">',(s=n.listHeaderText)?i=s.call(e,{hash:{},data:t}):(s=e&&e.listHeaderText,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=a(i)+"</h2>\n",r}function h(e,t){var r="",i,s;return r+='\n<div id="searchByGpsCoordinates" class="list-item actionable">\n	<div class="details">\n		<a class="item-title action no-icon">\n			<h2>'+a((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"MyCurrentLocation",s):u.call(e,"t","MyCurrentLocation",s)))+'</h2>\n			<p class="item-sub-title">'+a((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"MyCurrentGPSLocation",s):u.call(e,"t","MyCurrentGPSLocation",s)))+'</p>\n		</a>\n		<div class="button-icon btn_arrow"></div>\n	</div>\n</div>\n',r}function p(e,t){var r="",i,s;return r+='\n		<div class="list-item">\n				<div class="details">\n						<a class="item-title action no-icon">\n								<h2>'+a((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"YouHaventAddedAnItem",s):u.call(e,"t","YouHaventAddedAnItem",s)))+"</h2>\n						</a>\n				</div>\n		</div>\n",r}function d(e,t){var r="",i,s,o;r+="\n\n	",i=(s=n.each_with_index||e&&e.each_with_index,o={hash:{},inverse:l.noop,fn:l.program(8,v,t),data:t},s?s.call(e,e&&e.myTripItemLocations,o):u.call(e,"each_with_index",e&&e.myTripItemLocations,o));if(i||i===0)r+=i;return r+="\n",r}function v(e,t){var r="",i,s,o;return r+='\n		<div data-index="',(s=n.index)?i=s.call(e,{hash:{},data:t}):(s=e&&e.index,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=a(i)+'" class="list-item add group actionable">\n			<div class="details">\n				<div class="item-title action add-'+a((s=n.lowercase||e&&e.lowercase,o={hash:{},data:t},s?s.call(e,e&&e.type,o):u.call(e,"lowercase",e&&e.type,o)))+' two-liner">\n					<div class="icon-type general-icon icon_'+a((s=n.lowercase||e&&e.lowercase,o={hash:{},data:t},s?s.call(e,e&&e.icon_type,o):u.call(e,"lowercase",e&&e.icon_type,o)))+'_45px"></div>\n					<p class="main-title">',(s=n.name)?i=s.call(e,{hash:{},data:t}):(s=e&&e.name,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=a(i)+'</p>\n					<p class="item-sub-title">',(s=n.general_location)?i=s.call(e,{hash:{},data:t}):(s=e&&e.general_location,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=a(i)+'</p>\n				</div>\n				<div class="next btn_arrow button-icon"></div>\n			</div>\n		</div>\n	',r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=n.helperMissing,a=this.escapeExpression,f="function",l=this;s+='\n<div class="standard-form-panel trip-item-location-picker">\n',o=n.unless.call(t,t&&t.showOnlyItems,{hash:{},inverse:l.noop,fn:l.program(1,c,i),data:i});if(o||o===0)s+=o;s+='\n<div id="myTripItemLocations">\n',o=n.unless.call(t,t&&t.showOnlyItems,{hash:{},inverse:l.noop,fn:l.program(3,h,i),data:i});if(o||o===0)s+=o;s+='\n<div class="list-loader">\n		<div class="list-item">\n			<div class="details">\n					<a class="item-title action no-icon"><span class="loader">\n					</span></a>\n			</div>\n		</div>\n</div>\n<div class="list">\n',o=n.unless.call(t,t&&t.myTripItemLocations,{hash:{},inverse:l.program(7,d,i),fn:l.program(5,p,i),data:i});if(o||o===0)s+=o;return s+="\n</div>\n</div>\n</div>\n",s}),this.Handlebars.templates["templates/trip_items/add/search_for_location.tmpl"]=Handlebars.template(function(e,t,n,r,i){function p(e,t){var r="",i,s,o;return r+='\n	<div class="input-group">\n		<div class="label"><p>'+l((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"Venue",o):f.call(e,"t","Venue",o)))+"<br />"+l((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"Name",o):f.call(e,"t","Name",o)))+'</p></div>\n		<div class="input-container">\n			<input type="text" autocomplete="off" id="name" name="name"  value="',(s=n.label)?i=s.call(e,{hash:{},data:t}):(s=e&&e.label,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+'" placeholder="'+l((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"Optional",o):f.call(e,"t","Optional",o)))+'" autocorrect="off" />\n		</div>\n	</div>\n	',r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c="function",h=this;s+='<form class="standard-form-panel add-trip-item" action="" >\n	',o=n["if"].call(t,t&&t.is_manual_add,{hash:{},inverse:h.noop,fn:h.program(1,p,i),data:i});if(o||o===0)s+=o;return s+='\n	<div class="input-group">\n		<div class="label"><p>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Street",a):f.call(t,"t","Street",a)))+'</p></div>\n		<div class="input-container">\n			<input type="text" placeholder="optional" autocomplete="off" id="street" name="street"  value="',(u=n.street)?o=u.call(t,{hash:{},data:i}):(u=t&&t.street,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+'" autocorrect="off" />\n		</div>\n	</div>\n	<div class="input-group">\n		<div class="label"><p>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"City",a):f.call(t,"t","City",a)))+'</p></div>\n		<div class="input-container">\n			<input type="text" placeholder="optional" autocomplete="off" id="city" name="city"  value="',(u=n.city)?o=u.call(t,{hash:{},data:i}):(u=t&&t.city,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+'" autocorrect="off" />\n		</div>\n	</div>\n	<div class="input-group">\n		<div class="label"><p>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"State",a):f.call(t,"t","State",a)))+'</p></div>\n		<div class="input-container">\n			<input type="text" placeholder="optional" autocomplete="off" id="state" name="state" value="',(u=n.state)?o=u.call(t,{hash:{},data:i}):(u=t&&t.state,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+'" autocorrect="off" />\n		</div>\n	</div>\n	<div class="input-group">\n		<div class="label"><p>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Postal",a):f.call(t,"t","Postal",a)))+"<br />"+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Code",a):f.call(t,"t","Code",a)))+'</p></div>\n		<div class="input-container">\n			<input placeholder="optional" type="text" autocomplete="off" id="postal" name="postal" value="',(u=n.postal)?o=u.call(t,{hash:{},data:i}):(u=t&&t.postal,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+'"  autocorrect="off"/>\n		</div>\n	</div>\n	<div class="input-group">\n		<div class="label"><p>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Country",a):f.call(t,"t","Country",a)))+'</p></div>\n		<div class="input-container list-item actionable">\n			<input type="text" autocomplete="off" id="country" name="country" value="',(u=n.countryName)?o=u.call(t,{hash:{},data:i}):(u=t&&t.countryName,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+'" autocorrect="off" />\n			<div class="button-icon btn_arrow"></div>\n		</div>\n	</div>\n	<div class="actions">\n		<button class="submit"><span>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Continue",a):f.call(t,"t","Continue",a)))+'</span><span class="loader light">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Loading",a):f.call(t,"t","Loading",a)))+"</span></button>\n	</div>\n</form>\n\n",s}),this.Handlebars.templates["templates/trip_items/confirm_delete_imported_trip_item.tmpl"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c="function";return s+='\n<div class="trip-items standard-form-panel error-popup">\n		<div class="error-title-group">\n		<div class="general-icon icon_alert_25px"></div>\n		<div class="message"><p>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"DeleteQuestion",a):f.call(t,"t","DeleteQuestion",a)))+'</p></div>\n	</div>\n\n	<div class="error-message-group">\n		<p>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"DeleteLinkedWarning",a):f.call(t,"t","DeleteLinkedWarning",a)))+' <span class="item-title">',(u=n.identifier)?o=u.call(t,{hash:{},data:i}):(u=t&&t.identifier,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+'</span></p>\n	</div>\n\n	<div class="button-group display-box">\n		<div class="flex-8">\n			<input id="continue" type="submit" value="'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Delete",a):f.call(t,"t","Delete",a)))+'" class="submit warning-button"></span><span class="loader light">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Loading",a):f.call(t,"t","Loading",a)))+'</span></input>\n		</div>\n		<div class="flex-1"></div>\n		<div class="flex-8">\n			<input id="cancel" type="submit" value="'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Cancel",a):f.call(t,"t","Cancel",a)))+'" class="submit cancel-button"><span class="loader light">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Loading",a):f.call(t,"t","Loading",a)))+'</span></input>\n		</div>\n	</div>\n</div>\n<div class="full-screen-underlay"></div>\n',s}),this.Handlebars.templates["templates/trip_items/confirm_delete_trip_item.tmpl"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c="function";return s+='<div class="trip-items standard-form-panel error-popup">\n		<div class="error-title-group">\n		<div class="general-icon icon_alert_25px"></div>\n		<div class="message"><p>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"DeleteQuestion",a):f.call(t,"t","DeleteQuestion",a)))+'</p></div>\n	</div>\n\n	<div class="error-message-group">\n		<p>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"DeleteAreYouSureYouWant",a):f.call(t,"t","DeleteAreYouSureYouWant",a)))+'</p>\n		<div class="info">\n			<p class="item-title">',(u=n.masthead)?o=u.call(t,{hash:{},data:i}):(u=t&&t.masthead,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+"</p>\n			<p>",(u=n.subhead)?o=u.call(t,{hash:{},data:i}):(u=t&&t.subhead,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+"</p>\n			<p>",(u=n.startAction)?o=u.call(t,{hash:{},data:i}):(u=t&&t.startAction,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+" "+l((u=n.timeFromDateTime||t&&t.timeFromDateTime,a={hash:{},data:i},u?u.call(t,t&&t.start_time,a):f.call(t,"timeFromDateTime",t&&t.start_time,a)))+" "+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"On",a):f.call(t,"t","On",a)))+" "+l((u=n.dateMonth||t&&t.dateMonth,a={hash:{},data:i},u?u.call(t,t&&t.start_date,a):f.call(t,"dateMonth",t&&t.start_date,a)))+'</p>\n		</div>\n	</div>\n\n	<div class="button-group display-box">\n		<div class="flex-8">\n			<input id="continue" type="submit" value="'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Delete",a):f.call(t,"t","Delete",a)))+'" class="submit warning-button"></span><span class="loader light">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Loading",a):f.call(t,"t","Loading",a)))+'</span></input>\n		</div>\n		<div class="flex-1"></div>\n		<div class="flex-8">\n			<input id="cancel" type="submit" value="'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Cancel",a):f.call(t,"t","Cancel",a)))+'" class="submit cancel-button"><span class="loader light">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Loading",a):f.call(t,"t","Loading",a)))+'</span></input>\n		</div>\n	</div>\n</div>\n<div class="full-screen-underlay"></div>\n',s}),this.Handlebars.templates["templates/trip_items/flight/add_flight.tmpl"]=Handlebars.template(function(e,t,n,r,i){function p(e,t){var r="",i,s,o;r+='\n		<div class="input-group-checkbox ',i=n.unless.call(e,e&&e.userCorporation,{hash:{},inverse:h.noop,fn:h.program(2,d,t),data:t});if(i||i===0)r+=i;r+='">\n			<input class="input-group-checkbox__checkbox" type="checkbox"\n				id="selenium-for-business" name="for_business"\n				',i=n["if"].call(e,e&&e.for_business,{hash:{},inverse:h.noop,fn:h.program(4,v,t),data:t});if(i||i===0)r+=i;r+="\n				",i=n.unless.call(e,e&&e.userCorporation,{hash:{},inverse:h.noop,fn:h.program(6,m,t),data:t});if(i||i===0)r+=i;r+=" />\n			",i=n.unless.call(e,e&&e.userCorporation,{hash:{},inverse:h.noop,fn:h.program(8,g,t),data:t});if(i||i===0)r+=i;r+='\n			<div class="input-group-checkbox__main">\n				<div class="input-group-checkbox__label"><p>'+l((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"ForBusiness",o):f.call(e,"t","ForBusiness",o)))+'</p></div>\n				<div class="input-group-checkbox__sublabel"><p>\n					',i=n["if"].call(e,e&&e.for_business,{hash:{},inverse:h.program(12,b,t),fn:h.program(10,y,t),data:t});if(i||i===0)r+=i;r+="\n\n					",i=n["if"].call(e,e&&e.itemCorporation,{hash:{},inverse:h.program(16,E,t),fn:h.program(14,w,t),data:t});if(i||i===0)r+=i;return r+='\n				</p></div>\n			</div>\n			<div id="for-business-help" class="input-group-checkbox__right-button input-group-checkbox__nontoggle">\n				<div class="icon_info_20px general-icon"></div>\n			</div>\n		</div>\n	',r}function d(e,t){return"is-disabled"}function v(e,t){return"checked"}function m(e,t){return"disabled"}function g(e,t){return'\n				<input type="hidden" name="for_business" value="on">\n			'}function y(e,t){var r="",i,s;return r+="\n						"+l((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"ConnectedWith",s):f.call(e,"t","ConnectedWith",s)))+"\n					",r}function b(e,t){var r="",i,s;return r+="\n						"+l((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"ConnectTo",s):f.call(e,"t","ConnectTo",s)))+"\n					",r}function w(e,t){var r="",i,s;return r+="\n						",(s=n.itemCorporation)?i=s.call(e,{hash:{},data:t}):(s=e&&e.itemCorporation,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+"\n					",r}function E(e,t){var r="",i,s;return r+="\n						",(s=n.userCorporation)?i=s.call(e,{hash:{},data:t}):(s=e&&e.userCorporation,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+"\n					",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c="function",h=this;s+='<form action="#create-trip" id="create-trip-form" class="standard-form-panel">\n\n	',o=n["if"].call(t,t&&t.showForBusinessField,{hash:{},inverse:h.noop,fn:h.program(1,p,i),data:i});if(o||o===0)s+=o;return s+='\n\n	<div class="input-group airlineCodeDisplay">\n		<div class="label"><p>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Airline",a):f.call(t,"t","Airline",a)))+'</p></div>\n		<div class="input-container actionable">\n			<div class="input">\n				<strong>',(u=n.airlineCode)?o=u.call(t,{hash:{},data:i}):(u=t&&t.airlineCode,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+"</strong>\n				",(u=n.airlineName)?o=u.call(t,{hash:{},data:i}):(u=t&&t.airlineName,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+'\n			</div>\n			<input id="airlineCode" name="airlineCode" type="hidden" value="',(u=n.airlineCode)?o=u.call(t,{hash:{},data:i}):(u=t&&t.airlineCode,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+'" autocomplete="off" autocapitalize="off" autocorrect="off" />\n		</div>\n	</div>\n\n	<div class="input-group">\n		<div class="label"><p>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"FlightNum",a):f.call(t,"t","FlightNum",a)))+'</p></div>\n		<div class="input-container"><input id="flightNumber" name="flightNumber" type="number" min="1" max="9999" pattern="[0-9]*" value="',(u=n.flightNumber)?o=u.call(t,{hash:{},data:i}):(u=t&&t.flightNumber,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+'" autocomplete="off" autocapitalize="off" autocorrect="off" /></div>\n	</div>\n\n	<div class="input-group" id="departureDateGroup">\n		<div class="label"><p>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Departs",a):f.call(t,"t","Departs",a)))+'</p></div>\n		<div class="input-container"><input id="departureDate" name="departureDate" type="text" value="'+l((u=n.mediumLongDate||t&&t.mediumLongDate,a={hash:{},data:i},u?u.call(t,t&&t.departureDate,a):f.call(t,"mediumLongDate",t&&t.departureDate,a)))+'" readonly="true" class="auto-ka"/></div>\n	</div>\n\n	<div class="input-group">\n		<div class="label"><p>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"ConfNum",a):f.call(t,"t","ConfNum",a)))+'</p></div>\n		<div class="input-container"><input id="confirmationNumber" name="confirmationNumber" type="text" placeholder="'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Optional",a):f.call(t,"t","Optional",a)))+'"  value="',(u=n.confirmationNumber)?o=u.call(t,{hash:{},data:i}):(u=t&&t.confirmationNumber,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+'" autocomplete="off" autocapitalize="off" autocorrect="off" /></div>\n	</div>\n\n	<div class="input-group">\n		<div class="label"><p>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Notes",a):f.call(t,"t","Notes",a)))+'</p></div>\n		<div class="input-container"><input id="note" name="note" type="text" placeholder="'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Optional",a):f.call(t,"t","Optional",a)))+'" value="',(u=n.note)?o=u.call(t,{hash:{},data:i}):(u=t&&t.note,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+'" autocomplete="off" autocapitalize="off" autocorrect="off" /></div>\n	</div>\n\n	<div class="actions">\n		<button class="submit"><span>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Continue",a):f.call(t,"t","Continue",a)))+'</span><span class="loader light">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Loading",a):f.call(t,"t","Loading",a)))+"</span></button>\n	</div>\n\n\n</form>\n",s}),this.Handlebars.templates["templates/trip_items/flight/alt_flight_details.tmpl"]=Handlebars.template(function(e,t,n,r,i){function p(e,t){var r,i;return l((r=n.pluralize||e&&e.pluralize,i={hash:{},data:t},r?r.call(e,e&&e.number_of_stops,"Stop",i):f.call(e,"pluralize",e&&e.number_of_stops,"Stop",i)))}function d(e,t){var r,i;return l((r=n.t||e&&e.t,i={hash:{},data:t},r?r.call(e,"Nonstop",i):f.call(e,"t","Nonstop",i)))}function v(e,t){var r="",i,s;return r+='\n				<span class="item-subtext-s">'+l((i=n.nextDayArrivalText||e&&e.nextDayArrivalText,s={hash:{},data:t},i?i.call(e,e&&e.start_date,e&&e.end_date,s):f.call(e,"nextDayArrivalText",e&&e.start_date,e&&e.end_date,s)))+"</span>\n			",r}function m(e,t){var r="",i,s,o;r+='\n		<li class="dynamic-action">\n			<div class="item-icon airline-icon airline-'+l((s=n.lowercase||e&&e.lowercase,o={hash:{},data:t},s?s.call(e,e&&e.airline_code,o):f.call(e,"lowercase",e&&e.airline_code,o)))+'"></div>\n			<div class="item-content">\n				<span class="item-header">',(s=n.airline_name)?i=s.call(e,{hash:{},data:t}):(s=e&&e.airline_name,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+"</span>\n				",(s=n.airline_code)?i=s.call(e,{hash:{},data:t}):(s=e&&e.airline_code,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+" ",(s=n.flight_number)?i=s.call(e,{hash:{},data:t}):(s=e&&e.flight_number,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+'\n				<span class="item-subtext-s flight-stops">',i=n["if"].call(e,e&&e.stops,{hash:{},inverse:h.program(3,d,t),fn:h.program(8,g,t),data:t});if(i||i===0)r+=i;r+='</span>\n			</div>\n			<button data-index="',(s=n.index)?i=s.call(e,{hash:{},data:t}):(s=e&&e.index,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+'" class="small call">\n				<div class="button-icon btn_icon_call_25px"></div>\n			</button>\n		</li>\n		<li>\n			<div class="item-content">\n				<table class="flight-schedule">\n					<tr class="item-header">\n						<th colspan="4">'+l((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"Depart",o):f.call(e,"t","Depart",o)))+"</th>\n					</tr>\n					<tr>\n						<td>"+l((s=n.mediumDate||e&&e.mediumDate,o={hash:{},data:t},s?s.call(e,e&&e.departure_date,o):f.call(e,"mediumDate",e&&e.departure_date,o)))+"</td>\n						<td>"+l((s=n.timeFromDateTime||e&&e.timeFromDateTime,o={hash:{},data:t},s?s.call(e,e&&e.departure_date,o):f.call(e,"timeFromDateTime",e&&e.departure_date,o)))+"</td>\n						<td>",(s=n.departure_airport)?i=s.call(e,{hash:{},data:t}):(s=e&&e.departure_airport,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+'</td>\n						<td><span class="item-subtext-l">',(s=n.departure_city)?i=s.call(e,{hash:{},data:t}):(s=e&&e.departure_city,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+'</span></td>\n					</tr>\n					<tr class="item-header">\n						<th colspan="4">'+l((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"Arrive",o):f.call(e,"t","Arrive",o)))+"</th>\n					</tr>\n					<tr>\n						<td>"+l((s=n.mediumDate||e&&e.mediumDate,o={hash:{},data:t},s?s.call(e,e&&e.arrival_date,o):f.call(e,"mediumDate",e&&e.arrival_date,o)))+"</td>\n						<td>"+l((s=n.timeFromDateTime||e&&e.timeFromDateTime,o={hash:{},data:t},s?s.call(e,e&&e.arrival_date,o):f.call(e,"timeFromDateTime",e&&e.arrival_date,o)))+"</td>\n						<td>",(s=n.arrival_airport)?i=s.call(e,{hash:{},data:t}):(s=e&&e.arrival_airport,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+'</td>\n						<td><span class="item-subtext-l">',(s=n.arrival_city)?i=s.call(e,{hash:{},data:t}):(s=e&&e.arrival_city,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+'</span></td>\n					</tr>\n				</table>\n			</div>\n		</li>\n		<li class="seats-available">\n			<div class="item-content">\n				<span class="item-header">'+l((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"SeatsAvailable",o):f.call(e,"t","SeatsAvailable",o)))+"</span>\n				",(s=n.seats_available)?i=s.call(e,{hash:{},data:t}):(s=e&&e.seats_available,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+"\n			</div>\n		</li>\n		",i=n.unless.call(e,e&&e.last_segment,{hash:{},inverse:h.noop,fn:h.program(10,y,t),data:t});if(i||i===0)r+=i;return r+="\n	",r}function g(e,t){var r,i;return l((r=n.pluralize||e&&e.pluralize,i={hash:{},data:t},r?r.call(e,e&&e.stops,"Stop",i):f.call(e,"pluralize",e&&e.stops,"Stop",i)))}function y(e,t){var r="",i,s,o;return r+='\n		<li class="item-divider">\n			<div class="item-content">\n				<table class="layover-stop">\n					<td><span class="item-header">'+l((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"Layover",o):f.call(e,"t","Layover",o)))+'</span></td>\n					<td class="empty-cell">&nbsp;</td>\n					<td>',(s=n.arrival_airport)?i=s.call(e,{hash:{},data:t}):(s=e&&e.arrival_airport,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+"</td>\n					<td>",(s=n.arrival_city)?i=s.call(e,{hash:{},data:t}):(s=e&&e.arrival_city,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+'</td>\n				</table>\n				<span class="item-subtext">'+l((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"ChangePlanes",o):f.call(e,"t","ChangePlanes",o)))+"</span>\n			</div>\n		</li>\n		",r}function b(e,t){var r="",i,s;return r+='\n		<div class="actions">\n			<button class="submit">\n				<span>'+l((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"AddToTrip",s):f.call(e,"t","AddToTrip",s)))+'</span>\n				<span class="loader light">'+l((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"Loading",s):f.call(e,"t","Loading",s)))+"</span>\n			</button>\n		</div>\n	",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c="function",h=this;s+='<div class="alt-flight-details">\n	<ul class="item-list">\n		<li>\n			<div class="item-content">\n				<div class="item-header">\n					<span>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Depart",a):f.call(t,"t","Depart",a)))+"</span>\n					<span>",o=n["if"].call(t,t&&t.number_of_stops,{hash:{},inverse:h.program(3,d,i),fn:h.program(1,p,i),data:i});if(o||o===0)s+=o;s+="</span>\n				</div>\n				"+l((u=n.mediumDate||t&&t.mediumDate,a={hash:{},data:i},u?u.call(t,t&&t.start_date,a):f.call(t,"mediumDate",t&&t.start_date,a)))+"\n			",o=(u=n.if_has_nextDayArrivalAlert||t&&t.if_has_nextDayArrivalAlert,a={hash:{},inverse:h.noop,fn:h.program(5,v,i),data:i},u?u.call(t,t&&t.start_date,t&&t.end_date,a):f.call(t,"if_has_nextDayArrivalAlert",t&&t.start_date,t&&t.end_date,a));if(o||o===0)s+=o;s+="\n			</div>\n		</li>\n	",o=(u=n.each_with_index||t&&t.each_with_index,a={hash:{},inverse:h.noop,fn:h.program(7,m,i),data:i},u?u.call(t,t&&t.flight_segments,a):f.call(t,"each_with_index",t&&t.flight_segments,a));if(o||o===0)s+=o;s+="\n	</ul>\n	",o=n.unless.call(t,t&&t.isFollowingTrip,{hash:{},inverse:h.noop,fn:h.program(12,b,i),data:i});if(o||o===0)s+=o;return s+="\n</div>\n",s}),this.Handlebars.templates["templates/trip_items/flight/alt_flight_original.tmpl"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f="function",l=this.escapeExpression,c=n.helperMissing;return s+='<div class="alt-flights">\n	<ul class="item-list">\n		<li>\n			<div class="item-content">\n				<span class="original-flight">'+l((o=(o=t&&t.original,o==null||o===!1?o:o.departure_city),typeof o===f?o.apply(t):o))+" ("+l((o=(o=t&&t.original,o==null||o===!1?o:o.departure_airport),typeof o===f?o.apply(t):o))+") - "+l((o=(o=t&&t.original,o==null||o===!1?o:o.arrival_city),typeof o===f?o.apply(t):o))+" ("+l((o=(o=t&&t.original,o==null||o===!1?o:o.arrival_airport),typeof o===f?o.apply(t):o))+')</span>\n				<p class="item-subtext">'+l((o=(o=t&&t.original,o==null||o===!1?o:o.airline_code),typeof o===f?o.apply(t):o))+" "+l((o=(o=t&&t.original,o==null||o===!1?o:o.flight_number),typeof o===f?o.apply(t):o))+", "+l((u=n.monDayYear||t&&t.monDayYear,a={hash:{},data:i},u?u.call(t,(o=t&&t.original,o==null||o===!1?o:o.scheduled_departure),a):c.call(t,"monDayYear",(o=t&&t.original,o==null||o===!1?o:o.scheduled_departure),a)))+'</p>\n			</div>\n		</li>\n	</ul>\n	<form id="airlineSelection" class="view-toggle">\n		<label>\n			<input type="radio" name="flightList" id="originalAirline" value="originalAirline" checked="checked" />\n			<span>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"OriginalAirline",a):c.call(t,"t","OriginalAirline",a)))+'</span>\n		</label>\n		<label>\n			<input type="radio" name="flightList" id="allAirlines" value="allAirlines" />\n			<span>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"AllAirlines",a):c.call(t,"t","AllAirlines",a)))+"</span>\n		</label>\n	</form>\n</div>",s}),this.Handlebars.templates["templates/trip_items/flight/alt_flights.tmpl"]=Handlebars.template(function(e,t,n,r,i){function p(e,t){var r="",i;r+='\n							<ul class="action-list" id="flightList">\n							',i=n.each.call(e,e&&e.flightInfo,{hash:{},inverse:h.noop,fn:h.program(2,d,t),data:t});if(i||i===0)r+=i;return r+="\n							</ul>\n						",r}function d(e,t){var r="",i,s,o;return r+='\n								<li data-id="',(s=n.id)?i=s.call(e,{hash:{},data:t}):(s=e&&e.id,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(i)+'">\n									<div class="item-icon airline-icon airline-'+l((s=n.lowercase||e&&e.lowercase,o={hash:{},data:t},s?s.call(e,e&&e.airline_code,o):c.call(e,"lowercase",e&&e.airline_code,o)))+'"></div>\n									<div class="item-content">\n										<!-- <span class="airline">',(s=n.airline)?i=s.call(e,{hash:{},data:t}):(s=e&&e.airline,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(i)+'</span> -->\n										<table class="flight-detail">\n											<thead>\n												<tr>\n													<th colspan="2" class="airline">',(s=n.airline)?i=s.call(e,{hash:{},data:t}):(s=e&&e.airline,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(i)+'</th>\n												</tr>\n											</thead>\n											<tbody>\n												<tr class="airport">\n													<td>',(s=n.departure_airport)?i=s.call(e,{hash:{},data:t}):(s=e&&e.departure_airport,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(i)+"</td>	<td>",(s=n.arrival_airport)?i=s.call(e,{hash:{},data:t}):(s=e&&e.arrival_airport,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(i)+'</td>\n												</tr>\n												<tr class="time">\n													<td>'+l((s=n.timeFromDateTime||e&&e.timeFromDateTime,o={hash:{},data:t},s?s.call(e,e&&e.scheduled_departure,o):c.call(e,"timeFromDateTime",e&&e.scheduled_departure,o)))+"</td>	<td>"+l((s=n.timeFromDateTime||e&&e.timeFromDateTime,o={hash:{},data:t},s?s.call(e,e&&e.scheduled_arrival,o):c.call(e,"timeFromDateTime",e&&e.scheduled_arrival,o)))+'</td>\n												</tr>\n											</tbody>\n											<tfoot>\n												<tr>\n													<td colspan="2" class="item-subtext-l">'+l((s=n.flightStops||e&&e.flightStops,o={hash:{},data:t},s?s.call(e,e&&e.number_of_stops,o):c.call(e,"flightStops",e&&e.number_of_stops,o)))+'</td>\n												</tr>\n											</tfoot>\n										</table>\n										<!-- <span class="item-subtext-l">'+l((s=n.flightStops||e&&e.flightStops,o={hash:{},data:t},s?s.call(e,e&&e.number_of_stops,o):c.call(e,"flightStops",e&&e.number_of_stops,o)))+"</span> -->\n									</div>\n								</li>\n							",r}function v(e,t){var r="",i,s;return r+='\n							<div id="empty-flights-message">\n								<ul class="item-list">\n									<li>\n										<div class="item-content">\n											<p class="item-help-text">'+l((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"NoAlternateFlights",s):c.call(e,"t","NoAlternateFlights",s)))+"</p>\n										</div>\n									</li>\n								</ul>\n							</div>\n						",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f="function",l=this.escapeExpression,c=n.helperMissing,h=this;s+='						<div class="alt-flights">\n							<ul class="item-list">\n								<li>\n									<div class="item-content">\n										<span class="original-flight">'+l((o=(o=t&&t.original,o==null||o===!1?o:o.departure_city),typeof o===f?o.apply(t):o))+" ("+l((o=(o=t&&t.original,o==null||o===!1?o:o.departure_airport),typeof o===f?o.apply(t):o))+") - "+l((o=(o=t&&t.original,o==null||o===!1?o:o.arrival_city),typeof o===f?o.apply(t):o))+" ("+l((o=(o=t&&t.original,o==null||o===!1?o:o.arrival_airport),typeof o===f?o.apply(t):o))+')</span>\n										<p class="item-subtext">'+l((o=(o=t&&t.original,o==null||o===!1?o:o.airline_code),typeof o===f?o.apply(t):o))+" "+l((o=(o=t&&t.original,o==null||o===!1?o:o.flight_number),typeof o===f?o.apply(t):o))+", "+l((u=n.monDayYear||t&&t.monDayYear,a={hash:{},data:i},u?u.call(t,(o=t&&t.original,o==null||o===!1?o:o.scheduled_departure),a):c.call(t,"monDayYear",(o=t&&t.original,o==null||o===!1?o:o.scheduled_departure),a)))+'</p>\n									</div>\n								</li>\n							</ul>\n							<form id="airlineSelection" class="view-toggle">\n								<label>\n									<input type="radio" name="flightList" id="originalAirline" value="originalAirline" checked="checked" />\n									<span>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"OriginalAirline",a):c.call(t,"t","OriginalAirline",a)))+'</span>\n								</label>\n								<label>\n									<input type="radio" name="flightList" id="allAirlines" value="allAirlines" />\n									<span>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"AllAirlines",a):c.call(t,"t","AllAirlines",a)))+"</span>\n								</label>\n							</form>\n						",o=n["if"].call(t,t&&t.flightInfo,{hash:{},inverse:h.program(4,v,i),fn:h.program(1,p,i),data:i});if(o||o===0)s+=o;return s+="\n						</div>",s}),this.Handlebars.templates["templates/trip_items/flight/confirm_flight.tmpl"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c="function";return s+='<div class="trip-component">\n	<div class="flight-information section">\n		<span class="airline-icon airline-'+l((u=n.lowercase||t&&t.lowercase,a={hash:{},data:i},u?u.call(t,t&&t.airlineCode,a):f.call(t,"lowercase",t&&t.airlineCode,a)))+'"></span>\n		<div class="airline">',(u=n.airlineName)?o=u.call(t,{hash:{},data:i}):(u=t&&t.airlineName,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+'</div>\n\n		<div class="flight">',(u=n.airlineCode)?o=u.call(t,{hash:{},data:i}):(u=t&&t.airlineCode,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+" ",(u=n.flightNumber)?o=u.call(t,{hash:{},data:i}):(u=t&&t.flightNumber,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+'</div>\n	</div>\n\n	<div class="departure section">\n		<div class="destination">\n			<div class="label">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Depart",a):f.call(t,"t","Depart",a)))+'</div>\n			<div class="airport">\n				<span class="value">',(u=n.departureAirport)?o=u.call(t,{hash:{},data:i}):(u=t&&t.departureAirport,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+'</span>\n				<span class="secondary">',(u=n.departureCityName)?o=u.call(t,{hash:{},data:i}):(u=t&&t.departureCityName,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+'</span>\n			</div>\n		</div>\n		<div class="date">\n			<div class="label">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Date",a):f.call(t,"t","Date",a)))+'</div>\n			<div class="value">'+l((u=n.year||t&&t.year,a={hash:{},data:i},u?u.call(t,t&&t.departureDateTime,a):f.call(t,"year",t&&t.departureDateTime,a)))+'</div>\n		</div>\n		<div class="time">\n			<div class="label">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"LocalTime",a):f.call(t,"t","LocalTime",a)))+'</div>\n			<div class="value">'+l((u=n.timeFromDateTime||t&&t.timeFromDateTime,a={hash:{},data:i},u?u.call(t,t&&t.departureDateTime,a):f.call(t,"timeFromDateTime",t&&t.departureDateTime,a)))+'</div>\n		</div>\n	</div>\n\n	<div class="arrival section">\n		<div class="destination">\n			<div class="label">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Arrive",a):f.call(t,"t","Arrive",a)))+'</div>\n			<div class="airport">\n				<span class="value">',(u=n.arrivalAirport)?o=u.call(t,{hash:{},data:i}):(u=t&&t.arrivalAirport,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+'</span>\n				<span class="secondary">',(u=n.arrivalCityName)?o=u.call(t,{hash:{},data:i}):(u=t&&t.arrivalCityName,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+'</span>\n			</div>\n		</div>\n		<div class="date">\n			<div class="label">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Date",a):f.call(t,"t","Date",a)))+'</div>\n			<div class="value">'+l((u=n.year||t&&t.year,a={hash:{},data:i},u?u.call(t,t&&t.arrivalDateTime,a):f.call(t,"year",t&&t.arrivalDateTime,a)))+'</div>\n		</div>\n		<div class="time">\n			<div class="label">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"LocalTime",a):f.call(t,"t","LocalTime",a)))+'</div>\n			<div class="value">'+l((u=n.timeFromDateTime||t&&t.timeFromDateTime,a={hash:{},data:i},u?u.call(t,t&&t.arrivalDateTime,a):f.call(t,"timeFromDateTime",t&&t.arrivalDateTime,a)))+'</div>\n		</div>\n	</div>\n\n	<div class="actions">\n		<button class="submit"><span>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Save",a):f.call(t,"t","Save",a)))+'</span><span class="loader light">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Loading",a):f.call(t,"t","Loading",a)))+"</span></button>\n	</div>\n</div>\n",s}),this.Handlebars.templates["templates/trip_items/flight/flight_detail.tmpl"]=Handlebars.template(function(e,t,n,r,i){function p(e,t){var r="",i,s,o;return r+='\n			<dt class="label">'+l((s=n.pluralize||e&&e.pluralize,o={hash:{},data:t},s?s.call(e,e&&e.number_of_stops,"Stop",o):f.call(e,"pluralize",e&&e.number_of_stops,"Stop",o)))+'</dt>\n			<dd class="value primary">'+l((i=(i=e&&e.stops,i==null||i===!1?i:i[0]),typeof i===c?i.apply(e):i))+'</dd>\n			<dd class="value">'+l((s=n.stopAirportCodes||e&&e.stopAirportCodes,o={hash:{},data:t},s?s.call(e,e&&e.stops,o):f.call(e,"stopAirportCodes",e&&e.stops,o)))+"</dd>\n		",r}function d(e,t){var r="",i,s;return r+='\n			<dt class="label">'+l((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"Nonstop",s):f.call(e,"t","Nonstop",s)))+"</dt>\n		",r}function v(e,t){var r="",i,s,o;r+="\n	",i=(s=n.showDateBlock||e&&e.showDateBlock,o={hash:{},inverse:h.noop,fn:h.program(6,m,t),data:t},s?s.call(e,e&&e.scheduled_departure,o):f.call(e,"showDateBlock",e&&e.scheduled_departure,o));if(i||i===0)r+=i;r+="\n\n	",i=n["if"].call(e,e&&e.layover_minutes,{hash:{},inverse:h.noop,fn:h.program(8,g,t),data:t});if(i||i===0)r+=i;r+='\n\n	<div class="flight-information section">\n		<div class="phone-actionable phone-drop-down-button" data-index="',(s=n.index)?i=s.call(e,{hash:{},data:t}):(s=e&&e.index,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+'">\n			<div class="button-icon btn_icon_call_25px"></div>\n		</div>\n		<span class="airline-icon airline-'+l((s=n.lowercase||e&&e.lowercase,o={hash:{},data:t},s?s.call(e,e&&e.airline_code,o):f.call(e,"lowercase",e&&e.airline_code,o)))+'"></span>\n		<div class="airline">',(s=n.airline)?i=s.call(e,{hash:{},data:t}):(s=e&&e.airline,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+'</div>\n		<div class="flight">',(s=n.airline_code)?i=s.call(e,{hash:{},data:t}):(s=e&&e.airline_code,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+" ",(s=n.flight_number)?i=s.call(e,{hash:{},data:t}):(s=e&&e.flight_number,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+'</div>\n	</div>\n\n	<section>\n		<dl>\n			<dt class="label">'+l((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"ConfirmationNumber",o):f.call(e,"t","ConfirmationNumber",o)))+'</dt>\n			<dd class="value word-wrap-text">'+l((s=n.if_not_blank||e&&e.if_not_blank,o={hash:{},data:t},s?s.call(e,e&&e.confirmation_number,"NotEntered",o):f.call(e,"if_not_blank",e&&e.confirmation_number,"NotEntered",o)))+"</dd>\n		</dl>\n		",i=n["if"].call(e,e&&e.for_business,{hash:{},inverse:h.noop,fn:h.program(10,y,t),data:t});if(i||i===0)r+=i;r+="\n	</section>\n\n	",i=n["if"].call(e,e&&e.cancelled,{hash:{},inverse:h.noop,fn:h.program(12,b,t),data:t});if(i||i===0)r+=i;r+="\n\n	",i=n["if"].call(e,e&&e.operated_by,{hash:{},inverse:h.noop,fn:h.program(14,w,t),data:t});if(i||i===0)r+=i;r+='\n\n	<section>\n		<div class="map map-drop-down-button" data-segment="depart" data-index="',(s=n.index)?i=s.call(e,{hash:{},data:t}):(s=e&&e.index,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+'">\n			<div class="button-icon btn_icon_map_25px"></div>\n		</div>\n\n		<dl class="arrive-depart">\n			<dt class="label">'+l((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"Depart",o):f.call(e,"t","Depart",o)))+'</dt>\n			<dd class="value">',(s=n.departure_airport_code)?i=s.call(e,{hash:{},data:t}):(s=e&&e.departure_airport_code,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+' <span class="airport-name">',(s=n.departure_airport)?i=s.call(e,{hash:{},data:t}):(s=e&&e.departure_airport,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+'</span></dd>\n		</dl>\n\n		<dl class="inline">\n			<dt class="label">'+l((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"Scheduled",o):f.call(e,"t","Scheduled",o)))+'</dt>\n			<dd class="value">'+l((s=n.timeFromDateTime||e&&e.timeFromDateTime,o={hash:{},data:t},s?s.call(e,e&&e.scheduled_departure,o):f.call(e,"timeFromDateTime",e&&e.scheduled_departure,o)))+'</dd>\n		</dl>\n\n		<dl class="inline">\n			<dt class="label">'+l((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"Actual",o):f.call(e,"t","Actual",o)))+'</dt>\n			<dd class="value\n				',i=(s=n.if_is_delayed||e&&e.if_is_delayed,o={hash:{},inverse:h.noop,fn:h.program(16,E,t),data:t},s?s.call(e,e&&e.scheduled_departure,e&&e.estimated_departure,o):f.call(e,"if_is_delayed",e&&e.scheduled_departure,e&&e.estimated_departure,o));if(i||i===0)r+=i;r+="\n				",i=n["if"].call(e,e&&e.cancelled,{hash:{},inverse:h.noop,fn:h.program(16,E,t),data:t});if(i||i===0)r+=i;r+='\n			">\n				',i=n["if"].call(e,e&&e.cancelled,{hash:{},inverse:h.program(20,x,t),fn:h.program(18,S,t),data:t});if(i||i===0)r+=i;r+='\n			</dd>\n		</dl>\n\n		<dl class="inline">\n			<dt class="label">'+l((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"TermGate",o):f.call(e,"t","TermGate",o)))+'</dt>\n			<dd class="value ',i=n["if"].call(e,e&&e.departure_terminal_or_gate_change,{hash:{},inverse:h.noop,fn:h.program(22,T,t),data:t});if(i||i===0)r+=i;r+='">\n				'+l((s=n.get_terminal_and_gate||e&&e.get_terminal_and_gate,o={hash:{},data:t},s?s.call(e,e&&e.departure_terminal,e&&e.departure_gate,o):f.call(e,"get_terminal_and_gate",e&&e.departure_terminal,e&&e.departure_gate,o)))+"\n			</dd>\n		</dl>\n	</section>\n\n	",i=(s=n.showDateBlock||e&&e.showDateBlock,o={hash:{},inverse:h.noop,fn:h.program(24,N,t),data:t},s?s.call(e,e&&e.scheduled_arrival,o):f.call(e,"showDateBlock",e&&e.scheduled_arrival,o));if(i||i===0)r+=i;r+='\n\n	<section>\n		<div class="map map-drop-down-button" data-segment="arrive" data-index="',(s=n.index)?i=s.call(e,{hash:{},data:t}):(s=e&&e.index,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+'">\n			<div class="button-icon btn_icon_map_25px"></div>\n		</div>\n\n		<dl class="arrive-depart">\n			<dt class="label">'+l((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"Arrive",o):f.call(e,"t","Arrive",o)))+'</dt>\n			<dd class="value">',(s=n.arrival_airport_code)?i=s.call(e,{hash:{},data:t}):(s=e&&e.arrival_airport_code,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+' <span class="airport-name">',(s=n.arrival_airport)?i=s.call(e,{hash:{},data:t}):(s=e&&e.arrival_airport,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+'</span></dd>\n		</dl>\n\n		<dl class="inline">\n			<dt class="label">'+l((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"Scheduled",o):f.call(e,"t","Scheduled",o)))+'</dt>\n			<dd class="value">'+l((s=n.timeFromDateTime||e&&e.timeFromDateTime,o={hash:{},data:t},s?s.call(e,e&&e.scheduled_arrival,o):f.call(e,"timeFromDateTime",e&&e.scheduled_arrival,o)))+'</dd>\n		</dl>\n\n		<dl class="inline">\n			<dt class="label">'+l((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"Actual",o):f.call(e,"t","Actual",o)))+'</dt>\n			<dd class="value\n				',i=(s=n.if_is_delayed||e&&e.if_is_delayed,o={hash:{},inverse:h.noop,fn:h.program(16,E,t),data:t},s?s.call(e,e&&e.scheduled_arrival,e&&e.estimated_arrival,o):f.call(e,"if_is_delayed",e&&e.scheduled_arrival,e&&e.estimated_arrival,o));if(i||i===0)r+=i;r+="\n				",i=n["if"].call(e,e&&e.cancelled,{hash:{},inverse:h.noop,fn:h.program(16,E,t),data:t});if(i||i===0)r+=i;r+='\n			">\n				',i=n["if"].call(e,e&&e.cancelled,{hash:{},inverse:h.program(26,C,t),fn:h.program(18,S,t),data:t});if(i||i===0)r+=i;r+='\n			</dd>\n		</dl>\n\n		<dl class="inline">\n			<dt class="label">'+l((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"TermGate",o):f.call(e,"t","TermGate",o)))+'</dt>\n			<dd class="value ',i=n["if"].call(e,e&&e.arrival_terminal_or_gate_change,{hash:{},inverse:h.noop,fn:h.program(28,k,t),data:t});if(i||i===0)r+=i;r+='">'+l((s=n.get_terminal_and_gate||e&&e.get_terminal_and_gate,o={hash:{},data:t},s?s.call(e,e&&e.arrival_terminal,e&&e.arrival_gate,o):f.call(e,"get_terminal_and_gate",e&&e.arrival_terminal,e&&e.arrival_gate,o)))+'</dd>\n		</dl>\n\n		<dl class="inline">\n			<dt class="label">'+l((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"Baggage",o):f.call(e,"t","Baggage",o)))+'</dt>\n			<dd class="value ',i=n["if"].call(e,e&&e.baggage_claim_change,{hash:{},inverse:h.noop,fn:h.program(28,k,t),data:t});if(i||i===0)r+=i;r+='">'+l((s=n.if_not_blank||e&&e.if_not_blank,o={hash:{},data:t},s?s.call(e,e&&e.baggage_claim,"TBD",o):f.call(e,"if_not_blank",e&&e.baggage_claim,"TBD",o)))+'</dd>\n		</dl>\n	</section>\n\n	<section class="aircraft">\n		',i=n["if"].call(e,e&&e.seat_map_url,{hash:{},inverse:h.noop,fn:h.program(30,L,t),data:t});if(i||i===0)r+=i;r+='\n\n		<dl class="inline">\n			<dt class="label">'+l((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"TravelTime",o):f.call(e,"t","TravelTime",o)))+'</dt>\n			<dd class="value">'+l((s=n.hoursMinutesFromMinutes||e&&e.hoursMinutesFromMinutes,o={hash:{},data:t},s?s.call(e,e&&e.travel_time_minutes,o):f.call(e,"hoursMinutesFromMinutes",e&&e.travel_time_minutes,o)))+'</dd>\n		</dl>\n\n		<dl class="inline">\n			<dt class="label">'+l((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"Aircraft",o):f.call(e,"t","Aircraft",o)))+'</dt>\n			<dd class="value">'+l((s=n.if_not_blank||e&&e.if_not_blank,o={hash:{},data:t},s?s.call(e,e&&e.aircraft_description,"TBD",o):f.call(e,"if_not_blank",e&&e.aircraft_description,"TBD",o)))+'</dd>\n		</dl>\n\n		<dl class="inline">\n			<dt class="label">'+l((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"Seats",o):f.call(e,"t","Seats",o)))+'</dt>\n			<dd class="value">',i=n.unless.call(e,e&&e.seats,{hash:{},inverse:h.program(34,O,t),fn:h.program(32,A,t),data:t});if(i||i===0)r+=i;return r+='</dd>\n		</dl>\n	</section>\n\n	<section>\n		<dl>\n			<dt class="label">'+l((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"Note",o):f.call(e,"t","Note",o)))+'</dt>\n			<dd class="word-wrap-text">'+l((s=n.if_not_blank||e&&e.if_not_blank,o={hash:{},data:t},s?s.call(e,e&&e.note,"NotEntered",o):f.call(e,"if_not_blank",e&&e.note,"NotEntered",o)))+"</dd>\n		</dl>\n	</section>\n",r}function m(e,t){var r="",i,s;return r+='\n		<h2 class="date-divider">'+l((i=n.mediumDate||e&&e.mediumDate,s={hash:{},data:t},i?i.call(e,e&&e.scheduled_departure,s):f.call(e,"mediumDate",e&&e.scheduled_departure,s)))+"</h2>\n	",r}function g(e,t){var r="",i,s,o;return r+='\n		<section class="layover">\n			<dl class="airport">\n				<dt class="label">'+l((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"Layover",o):f.call(e,"t","Layover",o)))+"</dt>\n				<dd>",(s=n.departure_airport_code)?i=s.call(e,{hash:{},data:t}):(s=e&&e.departure_airport_code,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+' <span class="airport-name">',(s=n.departure_airport)?i=s.call(e,{hash:{},data:t}):(s=e&&e.departure_airport,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+'</span></dd>\n				<!-- <dd class="special-note">{hasPlaneChange}</dd> -->\n			</dl>\n\n			<dl class="duration">\n				<dt class="label">'+l((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"Duration",o):f.call(e,"t","Duration",o)))+"</dt>\n				<dd>"+l((s=n.hoursMinutesFromMinutes||e&&e.hoursMinutesFromMinutes,o={hash:{},data:t},s?s.call(e,e&&e.layover_minutes,o):f.call(e,"hoursMinutesFromMinutes",e&&e.layover_minutes,o)))+"</dd>\n			</dl>\n		</section>\n	",r}function y(e,t){var r="",i,s;return r+='\n		<div class="tags">\n			<div class="tag--business">'+l((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"Business",s):f.call(e,"t","Business",s)))+"</div>\n		</div>\n		",r}function b(e,t){var r="",i,s,o;return r+="\n		<section id='canceled-alt-flight' data-index=\"",(s=n.index)?i=s.call(e,{hash:{},data:t}):(s=e&&e.index,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+'">\n			<div class="icon_alert_25px general-icon"></div>\n			<div class="next btn_arrow button-icon"></div>\n			<dl>\n				<dt class="value alert">'+l((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"FlightCanceled",o):f.call(e,"t","FlightCanceled",o)))+'</dt>\n				<dd class="value simple">'+l((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"FindAltFlight",o):f.call(e,"t","FindAltFlight",o)))+"</dd>\n			</dl>\n		</section>\n	",r}function w(e,t){var r="",i,s,o;return r+='\n		<section>\n			<dl>\n				<dt class="label">'+l((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"OperatedBy",o):f.call(e,"t","OperatedBy",o)))+'</dt>\n				<dd class="value">',(s=n.operated_by)?i=s.call(e,{hash:{},data:t}):(s=e&&e.operated_by,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+"</dd>\n			</dl>\n		</section>\n	",r}function E(e,t){return"\n					alert\n				"}function S(e,t){var r="",i,s;return r+="\n					"+l((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"Canceled",s):f.call(e,"t","Canceled",s)))+"\n				",r}function x(e,t){var r="",i,s;return r+="\n					"+l((i=n.timeFromDateTime||e&&e.timeFromDateTime,s={hash:{},data:t},i?i.call(e,e&&e.estimated_departure,s):f.call(e,"timeFromDateTime",e&&e.estimated_departure,s)))+"\n					"+l((i=n.delayed_by||e&&e.delayed_by,s={hash:{},data:t},i?i.call(e,e&&e.scheduled_departure,e&&e.estimated_departure,s):f.call(e,"delayed_by",e&&e.scheduled_departure,e&&e.estimated_departure,s)))+"\n				",r}function T(e,t){return" alert "}function N(e,t){var r="",i,s;return r+='\n		<h2 class="date-divider"> '+l((i=n.mediumDate||e&&e.mediumDate,s={hash:{},data:t},i?i.call(e,e&&e.scheduled_arrival,s):f.call(e,"mediumDate",e&&e.scheduled_arrival,s)))+" </h2>\n	",r}function C(e,t){var r="",i,s;return r+="\n					"+l((i=n.timeFromDateTime||e&&e.timeFromDateTime,s={hash:{},data:t},i?i.call(e,e&&e.estimated_arrival,s):f.call(e,"timeFromDateTime",e&&e.estimated_arrival,s)))+"\n					"+l((i=n.delayed_by||e&&e.delayed_by,s={hash:{},data:t},i?i.call(e,e&&e.scheduled_arrival,e&&e.estimated_arrival,s):f.call(e,"delayed_by",e&&e.scheduled_arrival,e&&e.estimated_arrival,s)))+"\n				",r}function k(e,t){return"alert"}function L(e,t){var r="",i,s;return r+='\n			<div id="seats" class="seats seats-button" data-item_id="',(s=n.id)?i=s.call(e,{hash:{},data:t}):(s=e&&e.id,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+'">\n				<div class="button-icon btn_icon_seatmaps_25px"></div>\n			</div>\n		',r}function A(e,t){var r,i;return l((r=n.t||e&&e.t,i={hash:{},data:t},r?r.call(e,"NA",i):f.call(e,"t","NA",i)))}function O(e,t){var r;return r=n.each.call(e,e&&e.seats,{hash:{},inverse:h.noop,fn:h.program(35,M,t),data:t}),r||r===0?r:""}function M(e,t){var r,i;return(i=n.number)?r=i.call(e,{hash:{},data:t}):(i=e&&e.number,r=typeof i===c?i.call(e,{hash:{},data:t}):i),l(r)}function _(e,t){var r="",i,s;return r+='\n	<div id="',(s=n.id)?i=s.call(e,{hash:{},data:t}):(s=e&&e.id,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+'" class="detail-menu-item">\n		',(s=n.label)?i=s.call(e,{hash:{},data:t}):(s=e&&e.label,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+'\n		<div class="',(s=n.icon)?i=s.call(e,{hash:{},data:t}):(s=e&&e.icon,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+' general-icon detail-menu-icon "></div>\n		<div class="detail-menu-next button-icon btn_arrow"></div>\n	</div>\n',r}function D(e,t){return'\n	<div id="worldmate" class="wm"></div>\n'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c="function",h=this;s+='<section class="flight-group-summary">\n	<dl class="depart-summary">\n		<dt class="label">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Depart",a):f.call(t,"t","Depart",a)))+'</dt>\n		<dd class="value primary">'+l((u=n.mediumDate||t&&t.mediumDate,a={hash:{},data:i},u?u.call(t,t&&t.start_date,a):f.call(t,"mediumDate",t&&t.start_date,a)))+"</dd>\n		",o=(u=n.nextDayArriveNotifier||t&&t.nextDayArriveNotifier,a={hash:{},data:i},u?u.call(t,t&&t.start_date,t&&t.end_date,a):f.call(t,"nextDayArriveNotifier",t&&t.start_date,t&&t.end_date,a));if(o||o===0)s+=o;s+='\n	</dl>\n\n	<dl class="stop-summary">\n		',o=n["if"].call(t,t&&t.number_of_stops,{hash:{},inverse:h.program(3,d,i),fn:h.program(1,p,i),data:i});if(o||o===0)s+=o;s+='\n	</dl>\n\n	<dl class="travel-time-summary">\n		<dt class="label">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"TravelTime",a):f.call(t,"t","TravelTime",a)))+'</dt>\n		<dd class="value primary">'+l((u=n.hoursMinutesFromMinutes||t&&t.hoursMinutesFromMinutes,a={hash:{},data:i},u?u.call(t,t&&t.travel_time_minutes,a):f.call(t,"hoursMinutesFromMinutes",t&&t.travel_time_minutes,a)))+"</dd>\n	</dl>\n</section>\n\n",(u=n.flightDetailShowDateBlockReset)?o=u.call(t,{hash:{},data:i}):(u=t&&t.flightDetailShowDateBlockReset,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+"\n\n",o=(u=n.each_with_index||t&&t.each_with_index,a={hash:{},inverse:h.noop,fn:h.program(5,v,i),data:i},u?u.call(t,t&&t.air_reservations,a):f.call(t,"each_with_index",t&&t.air_reservations,a));if(o||o===0)s+=o;s+="\n\n\n",o=n.each.call(t,t&&t.detailMenuItems,{hash:{},inverse:h.noop,fn:h.program(37,_,i),data:i});if(o||o===0)s+=o;s+="\n\n",o=n["if"].call(t,t&&t.isWorldMate,{hash:{},inverse:h.noop,fn:h.program(39,D,i),data:i});if(o||o===0)s+=o;return s}),this.Handlebars.templates["templates/trip_items/flight/flight_list.tmpl"]=Handlebars.template(function(e,t,n,r,i){function c(e,t,r){var i="",s,o,c;i+="\n",s=n["if"].call(e,r&&r.is_seat_maps,{hash:{},inverse:f.program(7,v,t),fn:f.program(2,h,t),data:t});if(s||s===0)i+=s;i+='\n	<div class="item-icon airline-icon airline-'+a((o=n.lowercase||e&&e.lowercase,c={hash:{},data:t},o?o.call(e,e&&e.airline_code,c):l.call(e,"lowercase",e&&e.airline_code,c)))+'"></div>\n	<div class="item-content title-group">\n		',(o=n.airline_code)?s=o.call(e,{hash:{},data:t}):(o=e&&e.airline_code,s=typeof o===u?o.call(e,{hash:{},data:t}):o),i+=a(s)+" "+a((o=n.t||e&&e.t,c={hash:{},data:t},o?o.call(e,"Flight",c):l.call(e,"t","Flight",c)))+" ",(o=n.flight_number)?s=o.call(e,{hash:{},data:t}):(o=e&&e.flight_number,s=typeof o===u?o.call(e,{hash:{},data:t}):o),i+=a(s)+" "+a((o=n.t||e&&e.t,c={hash:{},data:t},o?o.call(e,"From",c):l.call(e,"t","From",c)))+" ",(o=n.departure_airport_code)?s=o.call(e,{hash:{},data:t}):(o=e&&e.departure_airport_code,s=typeof o===u?o.call(e,{hash:{},data:t}):o),i+=a(s)+'\n		<span class="item-subtext">'+a((o=n.t||e&&e.t,c={hash:{},data:t},o?o.call(e,"Departs",c):l.call(e,"t","Departs",c)))+" "+a((o=n.timeFromDateTime||e&&e.timeFromDateTime,c={hash:{},data:t},o?o.call(e,e&&e.scheduled_departure,c):l.call(e,"timeFromDateTime",e&&e.scheduled_departure,c)))+" "+a((o=n.t||e&&e.t,c={hash:{},data:t},o?o.call(e,"On",c):l.call(e,"t","On",c)))+" "+a((o=n.dateMonth||e&&e.dateMonth,c={hash:{},data:t},o?o.call(e,e&&e.scheduled_departure,c):l.call(e,"dateMonth",e&&e.scheduled_departure,c)))+"</span>\n		",s=n["if"].call(e,r&&r.is_seat_maps,{hash:{},inverse:f.noop,fn:f.program(9,m,t),data:t});if(s||s===0)i+=s;return i+="\n	</div>\n</li>\n",i}function h(e,t){var r="",i,s;r+='\n<li class="flight-list-item-group ',i=n.unless.call(e,e&&e.seat_map_url,{hash:{},inverse:f.noop,fn:f.program(3,p,t),data:t});if(i||i===0)r+=i;r+='" data-id="',(s=n.id)?i=s.call(e,{hash:{},data:t}):(s=e&&e.id,i=typeof s===u?s.call(e,{hash:{},data:t}):s),r+=a(i)+'" ',i=n["if"].call(e,e&&e.seat_map_url,{hash:{},inverse:f.noop,fn:f.program(5,d,t),data:t});if(i||i===0)r+=i;return r+=">\n",r}function p(e,t){return"unavailable"}function d(e,t){var r="",i,s;return r+='data-seat_map_url="',(s=n.seat_map_url)?i=s.call(e,{hash:{},data:t}):(s=e&&e.seat_map_url,i=typeof s===u?s.call(e,{hash:{},data:t}):s),r+=a(i)+'"',r}function v(e,t){var r="",i,s;return r+='\n<li class="flight-list-item-group" data-id="',(s=n.id)?i=s.call(e,{hash:{},data:t}):(s=e&&e.id,i=typeof s===u?s.call(e,{hash:{},data:t}):s),r+=a(i)+'">\n',r}function m(e,t){var r="",i;r+="\n			",i=n.unless.call(e,e&&e.seat_map_url,{hash:{},inverse:f.noop,fn:f.program(10,g,t),data:t});if(i||i===0)r+=i;return r+="\n		",r}function g(e,t){var r="",i,s;return r+='\n				<span class="warning">'+a((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"SeatMapUnavailable",s):l.call(e,"t","SeatMapUnavailable",s)))+"</span>\n			",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this,l=n.helperMissing;o=n.each.call(t,t&&t.flights,{hash:{},inverse:f.noop,fn:f.programWithDepth(1,c,i,t),data:i});if(o||o===0)s+=o;return s+="\n",s}),this.Handlebars.templates["templates/trip_items/flight/flight_schedule_list.tmpl"]=Handlebars.template(function(e,t,n,r,i){function c(e,t){var r="",i;r+='\n	<ul class="action-list" id="flightList">\n	',i=n.each.call(e,e&&e.flightInfo,{hash:{},inverse:l.noop,fn:l.program(2,h,t),data:t});if(i||i===0)r+=i;return r+="\n	</ul>\n",r}function h(e,t){var r="",i,s,o;return r+='\n		<li data-id="',(s=n.id)?i=s.call(e,{hash:{},data:t}):(s=e&&e.id,i=typeof s===u?s.call(e,{hash:{},data:t}):s),r+=a(i)+'">\n			<div class="item-icon airline-icon airline-'+a((s=n.lowercase||e&&e.lowercase,o={hash:{},data:t},s?s.call(e,e&&e.airline_code,o):f.call(e,"lowercase",e&&e.airline_code,o)))+'"></div>\n			<div class="item-content">\n				<span class="airline">',(s=n.airline)?i=s.call(e,{hash:{},data:t}):(s=e&&e.airline,i=typeof s===u?s.call(e,{hash:{},data:t}):s),r+=a(i)+'</span>\n				<table class="flight-detail">\n					<tr class="airport">\n						<td>',(s=n.departure_airport)?i=s.call(e,{hash:{},data:t}):(s=e&&e.departure_airport,i=typeof s===u?s.call(e,{hash:{},data:t}):s),r+=a(i)+"</td>	<td>",(s=n.arrival_airport)?i=s.call(e,{hash:{},data:t}):(s=e&&e.arrival_airport,i=typeof s===u?s.call(e,{hash:{},data:t}):s),r+=a(i)+'</td>\n					</tr>\n					<tr class="time">\n						<td>'+a((s=n.timeFromDateTime||e&&e.timeFromDateTime,o={hash:{},data:t},s?s.call(e,e&&e.scheduled_departure,o):f.call(e,"timeFromDateTime",e&&e.scheduled_departure,o)))+"</td>	<td>"+a((s=n.timeFromDateTime||e&&e.timeFromDateTime,o={hash:{},data:t},s?s.call(e,e&&e.scheduled_arrival,o):f.call(e,"timeFromDateTime",e&&e.scheduled_arrival,o)))+'</td>\n					</tr>\n				</table>\n				<span class="item-subtext">'+a((s=n.flightStops||e&&e.flightStops,o={hash:{},data:t},s?s.call(e,e&&e.number_of_stops,o):f.call(e,"flightStops",e&&e.number_of_stops,o)))+"</span>\n			</div>\n		</li>\n	",r}function p(e,t){var r="",i;r+='\n	<div id="empty-flights-message">\n		<ul class="item-list">\n			<li>\n				<div class="item-content">\n					',i=n["if"].call(e,e&&e.allPastFlights,{hash:{},inverse:l.program(7,v,t),fn:l.program(5,d,t),data:t});if(i||i===0)r+=i;return r+="\n				</div>\n			</li>\n		</ul>\n	</div>\n",r}function d(e,t){var r="",i,s;return r+='\n					<p class="item-help-text">'+a((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"AlternateFlightsFutureOnly",s):f.call(e,"t","AlternateFlightsFutureOnly",s)))+"</p>\n					",r}function v(e,t){var r="",i;r+="\n						",i=n["if"].call(e,e&&e.noSeatMaps,{hash:{},inverse:l.program(10,g,t),fn:l.program(8,m,t),data:t});if(i||i===0)r+=i;return r+="\n					",r}function m(e,t){var r="",i,s;return r+='\n							<p class="item-help-text">'+a((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"NoSeatMaps",s):f.call(e,"t","NoSeatMaps",s)))+"</p>\n						",r}function g(e,t){var r="",i,s;return r+='\n							<p class="item-help-text">'+a((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"NoAlternateFlights",s):f.call(e,"t","NoAlternateFlights",s)))+"</p>\n						",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=n.helperMissing,l=this;s+='<div class="alt-flights">\n',o=n["if"].call(t,t&&t.flightInfo,{hash:{},inverse:l.program(4,p,i),fn:l.program(1,c,i),data:i});if(o||o===0)s+=o;return s+="\n</div>\n",s}),this.Handlebars.templates["templates/trip_items/flight/seat_map.tmpl"]=Handlebars.template(function(e,t,n,r,i){function c(e,t){var r="",i,s;r+='\n    <div class="u-text-center"><img ',(s=n.legendUrl)?i=s.call(e,{hash:{},data:t}):(s=e&&e.legendUrl,i=typeof s===u?s.call(e,{hash:{},data:t}):s);if(i||i===0)r+=i;r+=' /></div>\n	<div class="u-text-center"><img ',(s=n.seatMapUrl)?i=s.call(e,{hash:{},data:t}):(s=e&&e.seatMapUrl,i=typeof s===u?s.call(e,{hash:{},data:t}):s);if(i||i===0)r+=i;return r+=" /></div>\n	",r}function h(e,t){var r="",i,s;return r+="\n    "+f((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"NoSeatMap",s):a.call(e,"t","NoSeatMap",s)))+"\n	",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=n.helperMissing,f=this.escapeExpression,l=this;s+="<section>\n	",o=n["if"].call(t,t&&t.legendUrl,{hash:{},inverse:l.program(3,h,i),fn:l.program(1,c,i),data:i});if(o||o===0)s+=o;return s+="\n</section>\n",s}),this.Handlebars.templates["templates/trip_items/flight/select_airport.tmpl"]=Handlebars.template(function(e,t,n,r,i){function p(e,t){var r="",i;r+="\n		",i=n.each.call(e,e&&e.departure_airport,{hash:{},inverse:f.noop,fn:f.programWithDepth(2,d,t,e),data:t});if(i||i===0)r+=i;return r+="\n		",r}function d(e,t,r){var i="",s,o;i+='\n		<li class="',s=n["if"].call(e,e&&e.selected,{hash:{},inverse:f.noop,fn:f.program(3,v,t),data:t});if(s||s===0)i+=s;return i+=' selectable" data-airport-item-index="'+c((s=r&&r.index,typeof s===l?s.apply(e):s))+'">\n			<div class="details">\n				<div class="airport-code">',(o=n.iata_code)?s=o.call(e,{hash:{},data:t}):(o=e&&e.iata_code,s=typeof o===l?o.call(e,{hash:{},data:t}):o),i+=c(s)+'</div>\n				<div class="airport-city">',(o=n.name)?s=o.call(e,{hash:{},data:t}):(o=e&&e.name,s=typeof o===l?o.call(e,{hash:{},data:t}):o),i+=c(s)+"</div>\n			</div>\n		</li>\n		",i}function v(e,t){return"selected"}function m(e,t){var r="",i,s,o;r+="\n		",i=(s=n.each_with_index||e&&e.each_with_index,o={hash:{},inverse:f.noop,fn:f.program(6,g,t),data:t},s?s.call(e,e&&e.arrival_airports,o):h.call(e,"each_with_index",e&&e.arrival_airports,o));if(i||i===0)r+=i;return r+="\n		",r}function g(e,t){var r="",i;r+="\n		",i=n["if"].call(e,e&&e.relevant,{hash:{},inverse:f.noop,fn:f.program(7,y,t),data:t});if(i||i===0)r+=i;return r+="\n		",r}function y(e,t){var r="",i,s;r+='\n		<li class="',i=n["if"].call(e,e&&e.selected,{hash:{},inverse:f.noop,fn:f.program(3,v,t),data:t});if(i||i===0)r+=i;return r+=' selectable" data-airport-item-index="',(s=n.index)?i=s.call(e,{hash:{},data:t}):(s=e&&e.index,i=typeof s===l?s.call(e,{hash:{},data:t}):s),r+=c(i)+'">\n			<div class="details">\n				<div class="airport-code">',(s=n.iata_code)?i=s.call(e,{hash:{},data:t}):(s=e&&e.iata_code,i=typeof s===l?s.call(e,{hash:{},data:t}):s),r+=c(i)+'</div>\n				<div class="airport-city">',(s=n.name)?i=s.call(e,{hash:{},data:t}):(s=e&&e.name,i=typeof s===l?s.call(e,{hash:{},data:t}):s),r+=c(i)+"</div>\n			</div>\n		</li>\n		",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=this,l="function",c=this.escapeExpression,h=n.helperMissing;s+='<div class="select-airport">\n	<h2>Choose your origination airport</h2>\n	<ul class="departure-airports">\n		',o=(u=n.each_with_index||t&&t.each_with_index,a={hash:{},inverse:f.noop,fn:f.program(1,p,i),data:i},u?u.call(t,t&&t.flight_paths,a):h.call(t,"each_with_index",t&&t.flight_paths,a));if(o||o===0)s+=o;s+='\n	</ul>\n\n\n	<h2>Choose your destination airport</h2>\n	<ul class="arrival-airports">\n		',o=n.each.call(t,t&&t.flight_paths,{hash:{},inverse:f.noop,fn:f.program(5,m,i),data:i});if(o||o===0)s+=o;return s+='\n	</ul>\n	<div class="actions">\n		<button class="submit">'+c((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Continue",a):h.call(t,"t","Continue",a)))+"</button>\n	</div>\n</div>\n\n",s}),this.Handlebars.templates["templates/trip_items/hotel/add_hotel.tmpl"]=Handlebars.template(function(e,t,n,r,i){function p(e,t){var r="",i,s,o;r+='\n		<div class="input-group-checkbox ',i=n.unless.call(e,e&&e.userCorporation,{hash:{},inverse:h.noop,fn:h.program(2,d,t),data:t});if(i||i===0)r+=i;r+='">\n			<input class="input-group-checkbox__checkbox" type="checkbox"\n				id="selenium-for-business" name="for_business"\n				',i=n["if"].call(e,e&&e.for_business,{hash:{},inverse:h.noop,fn:h.program(4,v,t),data:t});if(i||i===0)r+=i;r+="\n				",i=n.unless.call(e,e&&e.userCorporation,{hash:{},inverse:h.noop,fn:h.program(6,m,t),data:t});if(i||i===0)r+=i;r+=" />\n			",i=n.unless.call(e,e&&e.userCorporation,{hash:{},inverse:h.noop,fn:h.program(8,g,t),data:t});if(i||i===0)r+=i;r+='\n			<div class="input-group-checkbox__main">\n				<div class="input-group-checkbox__label"><p>'+l((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"ForBusiness",o):f.call(e,"t","ForBusiness",o)))+'</p></div>\n				<div class="input-group-checkbox__sublabel"><p>\n					',i=n["if"].call(e,e&&e.for_business,{hash:{},inverse:h.program(12,b,t),fn:h.program(10,y,t),data:t});if(i||i===0)r+=i;r+="\n\n					",i=n["if"].call(e,e&&e.itemCorporation,{hash:{},inverse:h.program(16,E,t),fn:h.program(14,w,t),data:t});if(i||i===0)r+=i;return r+='\n				</p></div>\n			</div>\n			<div id="for-business-help" class="input-group-checkbox__right-button input-group-checkbox__nontoggle">\n				<div class="icon_info_20px general-icon"></div>\n			</div>\n		</div>\n	',r}function d(e,t){return"is-disabled"}function v(e,t){return"checked"}function m(e,t){return"disabled"}function g(e,t){return'\n				<input type="hidden" name="for_business" value="on">\n			'}function y(e,t){var r="",i,s;return r+="\n						"+l((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"ConnectedWith",s):f.call(e,"t","ConnectedWith",s)))+"\n					",r}function b(e,t){var r="",i,s;return r+="\n						"+l((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"ConnectTo",s):f.call(e,"t","ConnectTo",s)))+"\n					",r}function w(e,t){var r="",i,s;return r+="\n						",(s=n.itemCorporation)?i=s.call(e,{hash:{},data:t}):(s=e&&e.itemCorporation,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+"\n					",r}function E(e,t){var r="",i,s;return r+="\n						",(s=n.userCorporation)?i=s.call(e,{hash:{},data:t}):(s=e&&e.userCorporation,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+"\n					",r}function S(e,t){var r="",i,s,o;r+='\n	<div class="input-group ',i=n["if"].call(e,e&&e.name,{hash:{},inverse:h.noop,fn:h.program(19,x,t),data:t});if(i||i===0)r+=i;r+='">\n		<div class="label"><p>'+l((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"Location",o):f.call(e,"t","Location",o)))+'</p></div>\n		<div class="input-container thin actionable location">\n			<div class="input">\n				',(s=n.name)?i=s.call(e,{hash:{},data:t}):(s=e&&e.name,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+'\n				<div class="address">\n					',i=n.each.call(e,e&&e.address_lines,{hash:{},inverse:h.noop,fn:h.program(21,T,t),data:t});if(i||i===0)r+=i;return r+='\n				</div>\n			</div>\n\n			<input id="property_id" name="property_id" type="hidden" value="',(s=n.property_id)?i=s.call(e,{hash:{},data:t}):(s=e&&e.property_id,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+'" autocomplete="off" autocapitalize="off" autocorrect="off" />\n\n		</div>\n		<div class="chevron-container"><div class="btn_arrow_dark button-icon"></div></div>\n	</div>\n	',r}function x(e,t){return"notes"}function T(e,t){var n="";return n+='\n						<p class="item-sub-title">'+l(typeof e===c?e.apply(e):e)+"</p>\n					",n}function N(e,t){var r="",i,s,o;return r+='\n	<div class="input-group">\n		<div class="label"><p>'+l((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"Phone",o):f.call(e,"t","Phone",o)))+'</p></div>\n		<div class="input-container"><input id="phone_number" name="phone_number" type="text" placeholder="'+l((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"Optional",o):f.call(e,"t","Optional",o)))+'" value="',(s=n.phone_number)?i=s.call(e,{hash:{},data:t}):(s=e&&e.phone_number,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+'" autocomplete="off" autocapitalize="off" autocorrect="off" /></div>\n	</div>\n	',r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c="function",h=this;s+='<form action="#create-trip" id="create-trip-form" class="add-trip-item standard-form-panel">\n\n	',o=n["if"].call(t,t&&t.showForBusinessField,{hash:{},inverse:h.noop,fn:h.program(1,p,i),data:i});if(o||o===0)s+=o;s+='\n\n	<h2 class="component-subheader">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"CheckIn",a):f.call(t,"t","CheckIn",a)))+"</h2>\n\n	",o=n.unless.call(t,t&&t.isBeingEdited,{hash:{},inverse:h.noop,fn:h.program(18,S,i),data:i});if(o||o===0)s+=o;s+='\n\n	<div class="input-group" id="checkinDateGroup">\n		<div class="label"><p>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Date",a):f.call(t,"t","Date",a)))+'</p></div>\n		<div class="input-container"><input id="start_date" name="start_date" type="text" value="'+l((u=n.mediumLongDate||t&&t.mediumLongDate,a={hash:{},data:i},u?u.call(t,t&&t.start_date,a):f.call(t,"mediumLongDate",t&&t.start_date,a)))+'" readonly autocomplete="off" autocapitalize="off" autocorrect="off" /></div>\n	</div>\n\n	<div class="input-group">\n		<div class="label"><p>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Time",a):f.call(t,"t","Time",a)))+'</p></div>\n		<div class="input-container"><input id="start_time" name="start_time" type="text" value="'+l((u=n.timeFromDateTime||t&&t.timeFromDateTime,a={hash:{},data:i},u?u.call(t,t&&t.start_time,a):f.call(t,"timeFromDateTime",t&&t.start_time,a)))+'" readonly autocomplete="off" autocapitalize="off" autocorrect="off" /></div>\n	</div>\n\n	<h2 class="component-subheader">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"CheckOut",a):f.call(t,"t","CheckOut",a)))+'</h2>\n	<div class="input-group" id="checkoutDateGroup">\n		<div class="label"><p>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Date",a):f.call(t,"t","Date",a)))+'</p></div>\n		<div class="input-container"><input id="end_date" name="end_date" type="text" value="'+l((u=n.mediumLongDate||t&&t.mediumLongDate,a={hash:{},data:i},u?u.call(t,t&&t.end_date,a):f.call(t,"mediumLongDate",t&&t.end_date,a)))+'" readonly autocomplete="off" autocapitalize="off" autocorrect="off" /></div>\n	</div>\n\n	<div class="input-group">\n		<div class="label"><p>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Time",a):f.call(t,"t","Time",a)))+'</p></div>\n		<div class="input-container"><input id="end_time" name="end_time" type="text" value="'+l((u=n.timeFromDateTime||t&&t.timeFromDateTime,a={hash:{},data:i},u?u.call(t,t&&t.end_time,a):f.call(t,"timeFromDateTime",t&&t.end_time,a)))+'" readonly autocomplete="off" autocapitalize="off" autocorrect="off" /></div>\n	</div>\n\n	<div class="input-group">\n		<div class="label"><p>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"ConfNum",a):f.call(t,"t","ConfNum",a)))+'</p></div>\n		<div class="input-container"><input id="confirmation_number" name="confirmation_number" type="text" placeholder="'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Optional",a):f.call(t,"t","Optional",a)))+'" value="',(u=n.confirmation_number)?o=u.call(t,{hash:{},data:i}):(u=t&&t.confirmation_number,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+'" autocomplete="off" autocapitalize="off" autocorrect="off" /></div>\n	</div>\n\n	',o=n["if"].call(t,t&&t.isManualAdd,{hash:{},inverse:h.noop,fn:h.program(23,N,i),data:i});if(o||o===0)s+=o;return s+='\n\n	<div class="input-group">\n		<div class="label"><p>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Notes",a):f.call(t,"t","Notes",a)))+'</p></div>\n		<div class="input-container"><input id="note" name="note" type="text" placeholder="'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Optional",a):f.call(t,"t","Optional",a)))+'" value="',(u=n.note)?o=u.call(t,{hash:{},data:i}):(u=t&&t.note,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+'" autocomplete="off" autocapitalize="off" autocorrect="off" /></div>\n	</div>\n\n	<div class="actions">\n		<button class="submit"><span>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Save",a):f.call(t,"t","Save",a)))+'</span><span class="loader light">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Loading",a):f.call(t,"t","Loading",a)))+"</span></button>\n	</div>\n\n</form>\n",s}),this.Handlebars.templates["templates/trip_items/hotel/hotel_location_details.tmpl"]=Handlebars.template(function(e,t,n,r,i){function p(e,t){var r="",i,s,o;r+="\n	<div class='swipe'>\n		<div class=\"swipe-wrap\">\n			",i=n.each.call(e,e&&e.photos,{hash:{},inverse:h.noop,fn:h.program(2,d,t),data:t});if(i||i===0)r+=i;return r+='\n		</div>\n		<div class="previous button-icon btn_circle_arrow_left"></div>\n		<div class="next button-icon btn_circle_arrow_right"></div>\n		<span class="position"><span id="of">1</span> '+l((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"Of",o):c.call(e,"t","Of",o)))+' <span id="num">'+l((s=n.count||e&&e.count,o={hash:{},data:t},s?s.call(e,e&&e.photos,o):c.call(e,"count",e&&e.photos,o)))+"</span></span>\n	</div>\n	",r}function d(e,t){var r="",i,s,o;return r+='\n			<div><img src="',(s=n.url)?i=s.call(e,{hash:{},data:t}):(s=e&&e.url,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(i)+'" width="'+l((s=n.getCarouselImageWidth||e&&e.getCarouselImageWidth,o={hash:{},data:t},s?s.call(e,e&&e.width,e&&e.height,o):c.call(e,"getCarouselImageWidth",e&&e.width,e&&e.height,o)))+'" height="'+l((s=n.getCarouselImageHeight||e&&e.getCarouselImageHeight,o={hash:{},data:t},s?s.call(e,e&&e.width,e&&e.height,o):c.call(e,"getCarouselImageHeight",e&&e.width,e&&e.height,o)))+'" alt=""></div>\n			',r}function v(e,t){var r="",i,s;r+='\n			<h2 class="title">',(s=n.name)?i=s.call(e,{hash:{},data:t}):(s=e&&e.name,i=typeof s===f?s.call(e,{hash:{},data:t}):s);if(i||i===0)r+=i;r+="</h2>\n		",i=n["if"].call(e,e&&e.label,{hash:{},inverse:h.noop,fn:h.program(5,m,t),data:t});if(i||i===0)r+=i;r+="\n        ",i=n.each.call(e,e&&e.address_lines,{hash:{},inverse:h.noop,fn:h.program(7,g,t),data:t});if(i||i===0)r+=i;return r+="\n      ",r}function m(e,t){var r="",i,s;return r+='<p class="description">',(s=n.label)?i=s.call(e,{hash:{},data:t}):(s=e&&e.label,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(i)+"</p>",r}function g(e,t){var n="";return n+='\n            <p class="description">'+l(typeof e===f?e.apply(e):e)+"</p>\n        ",n}function y(e,t){var r="",i;r+='\n	<section class="phones">\n		',i=n.each.call(e,e&&e.phoneNumbers,{hash:{},inverse:h.noop,fn:h.program(10,b,t),data:t});if(i||i===0)r+=i;return r+="\n	</section>\n	",r}function b(e,t){var r="",i,s,o;return r+='\n			<dl class="inline phone">\n				<dd>\n					<div class="phone-actionable phone-drop-down-button ',(s=n.type)?i=s.call(e,{hash:{},data:t}):(s=e&&e.type,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(i)+'">\n						<a href="tel:',(s=n.number)?i=s.call(e,{hash:{},data:t}):(s=e&&e.number,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(i)+'" class="button-icon btn_icon_call_25px"></a>\n					</div>\n					<span class="phone-number description">'+l((s=n.phone||e&&e.phone,o={hash:{},data:t},s?s.call(e,e&&e.number,e&&e.type,o):c.call(e,"phone",e&&e.number,e&&e.type,o)))+"</span>\n				</dd>\n			</dl>\n		",r}function w(e,t){var r="",i,s,o;r+="\n				",(s=n.generalInformation)?i=s.call(e,{hash:{},data:t}):(s=e&&e.generalInformation,i=typeof s===f?s.call(e,{hash:{},data:t}):s);if(i||i===0)r+=i;return r+=' <a class="read-more">'+l((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"ReadMore",o):c.call(e,"t","ReadMore",o)))+"</a>\n			",r}function E(e,t){var r="",i,s;return r+="\n				"+l((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"NoDescriptionAvailable",s):c.call(e,"t","NoDescriptionAvailable",s)))+"\n			",r}function S(e,t){var r="",i;r+="\n		<ul>\n			",i=n.each.call(e,e&&e.property_amenities,{hash:{},inverse:h.noop,fn:h.program(17,x,t),data:t});if(i||i===0)r+=i;return r+="\n		</ul>\n		",r}function x(e,t){var n="";return n+="\n			<li>"+l(typeof e===f?e.apply(e):e)+"</li>\n			",n}function T(e,t){var r="",i,s;return r+='\n		<p class="description">'+l((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"NoDescriptionAvailable",s):c.call(e,"t","NoDescriptionAvailable",s)))+"</p>\n		",r}function N(e,t){var r="",i;r+="\n		<ul>\n			",i=n.each.call(e,e&&e.room_amenities,{hash:{},inverse:h.noop,fn:h.program(17,x,t),data:t});if(i||i===0)r+=i;return r+="\n		</ul>\n		",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f="function",l=this.escapeExpression,c=n.helperMissing,h=this;s+='<div class="trip-component trip-item-detail vehicle-detail">\n	',o=n["if"].call(t,t&&t.photos,{hash:{},inverse:h.noop,fn:h.program(1,p,i),data:i});if(o||o===0)s+=o;s+='\n	<section>\n		<div class="map map-drop-down-button" data-segment="start">\n			<div class="button-icon btn_icon_map_25px"></div>\n		</div>\n		<div>\n      ',o=n["with"].call(t,t&&t.start_location,{hash:{},inverse:h.noop,fn:h.program(4,v,i),data:i});if(o||o===0)s+=o;s+="\n		</div>\n	</section>\n	",o=n["if"].call(t,t&&t.phoneNumbers,{hash:{},inverse:h.noop,fn:h.program(9,y,i),data:i});if(o||o===0)s+=o;s+='\n	<h2 class="component-subheader">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"GeneralInformation",a):c.call(t,"t","GeneralInformation",a)))+'</h2>\n	<section>\n		<p class="description ellipsis">\n			',o=n["if"].call(t,t&&t.generalInformation,{hash:{},inverse:h.program(14,E,i),fn:h.program(12,w,i),data:i});if(o||o===0)s+=o;s+='\n		</p>\n	</section>\n	<h2 class="component-subheader">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"PropertyAmenities",a):c.call(t,"t","PropertyAmenities",a)))+"</h2>\n	<section>\n		",o=n["if"].call(t,t&&t.property_amenities,{hash:{},inverse:h.program(19,T,i),fn:h.program(16,S,i),data:i});if(o||o===0)s+=o;s+='\n	</section>\n	<h2 class="component-subheader">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"RoomAmenities",a):c.call(t,"t","RoomAmenities",a)))+"</h2>\n	<section>\n		",o=n["if"].call(t,t&&t.room_amenities,{hash:{},inverse:h.program(19,T,i),fn:h.program(21,N,i),data:i});if(o||o===0)s+=o;return s+="\n	</section>\n\n\n</div>\n\n\n\n\n",s}),this.Handlebars.templates["templates/trip_items/hotel/hotel_locations_index.tmpl"]=Handlebars.template(function(e,t,n,r,i){function c(e,t){return"\n	<!-- loading -->\n"}function h(e,t){var r="",i,s,o;r+="\n	",i=n.unless.call(e,e&&e.locations,{hash:{},inverse:l.program(6,d,t),fn:l.program(4,p,t),data:t});if(i||i===0)r+=i;return r+='\n	<div class="nudgeable list-item actionable" >\n		<div class="details">\n			<div class="item-title action">\n				<div class="general-icon icon_add_32px"></div>\n				 <h2>'+a((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"HotelManualPrompt",o):u.call(e,"t","HotelManualPrompt",o)))+'</h2>\n			</div>\n			<div class="button-icon btn_arrow"></div>\n		</div>\n	</div>\n',r}function p(e,t){var r="",i,s;return r+='\n			<div class="list-item">\n				<div class="details">\n					<div class="item-title action">\n						<p>'+a((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"SearchResultsZero",s):u.call(e,"t","SearchResultsZero",s)))+"</p>\n					</div>\n				</div>\n			</div>\n	",r}function d(e,t){var r="",i,s,o;r+="\n	",i=(s=n.each_with_index||e&&e.each_with_index,o={hash:{},inverse:l.noop,fn:l.programWithDepth(7,v,t,e),data:t},s?s.call(e,e&&e.locations,o):u.call(e,"each_with_index",e&&e.locations,o));if(i||i===0)r+=i;return r+="\n	",r}function v(e,t,r){var i="",s,o,c;i+='\n		<div data-index="',(o=n.index)?s=o.call(e,{hash:{},data:t}):(o=e&&e.index,s=typeof o===f?o.call(e,{hash:{},data:t}):o),i+=a(s)+'" data-property_id="',(o=n.property_id)?s=o.call(e,{hash:{},data:t}):(o=e&&e.property_id,s=typeof o===f?o.call(e,{hash:{},data:t}):o),i+=a(s)+'" class="list-item actionable clearfix">\n\n			<div class="preview-icon-group" style="background-image: url(\'',(o=n.hotelLocationPreviewUrl)?s=o.call(e,{hash:{},data:t}):(o=e&&e.hotelLocationPreviewUrl,s=typeof o===f?o.call(e,{hash:{},data:t}):o),i+=a(s)+'\');"></div>\n\n			<div class="address-group">\n				<p class="title">',(o=n.name)?s=o.call(e,{hash:{},data:t}):(o=e&&e.name,s=typeof o===f?o.call(e,{hash:{},data:t}):o),i+=a(s)+"</p>\n				",s=n.each.call(e,e&&e.address_lines,{hash:{},inverse:l.noop,fn:l.program(8,m,t),data:t});if(s||s===0)i+=s;i+='\n			</div>\n\n			<div class="next-group">\n				<div class="next btn_arrow button-icon"></div>\n				<p class="item-sub-title special-first">',(o=n.search_distance_mi)?s=o.call(e,{hash:{},data:t}):(o=e&&e.search_distance_mi,s=typeof o===f?o.call(e,{hash:{},data:t}):o),i+=a(s)+'</p>\n				<p class="item-sub-title">'+a((o=n.t||e&&e.t,c={hash:{},data:t},o?o.call(e,"MilesAway",c):u.call(e,"t","MilesAway",c)))+"</p>\n			</div>\n		</div>\n		",s=(o=n.if_is_nudgeable||r&&r.if_is_nudgeable,c={hash:{index:e&&e.index,length:(s=r&&r.locations,s==null||s===!1?s:s.length)},inverse:l.noop,fn:l.program(10,g,t),data:t},o?o.call(e,c):u.call(e,"if_is_nudgeable",c));if(s||s===0)i+=s;return i+="\n	",i}function m(e,t){var n="";return n+='\n					<p class="item-sub-title">'+a(typeof e===f?e.apply(e):e)+"</p>\n				",n}function g(e,t){var r="",i,s;return r+='\n		<div class="nudgeable list-item actionable" >\n			<div class="details">\n				<div class="item-title action">\n					<div class="general-icon icon_add_32px"></div>\n				   <h2>'+a((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"HotelManualPrompt",s):u.call(e,"t","HotelManualPrompt",s)))+'</h2>\n				</div>\n				<div class="button-icon btn_arrow"></div>\n			</div>\n		</div>\n		',r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=n.helperMissing,a=this.escapeExpression,f="function",l=this;s+='<div class="list-loader">\n		<div class="list-item">\n			<div class="details">\n					<a class="item-title action no-icon"><span class="loader">\n					</span></a>\n			</div>\n		</div>\n</div>\n<div class="list">\n',o=n["if"].call(t,(o=t&&t.locations,o==null||o===!1?o:o.unsynced),{hash:{},inverse:l.program(3,h,i),fn:l.program(1,c,i),data:i});if(o||o===0)s+=o;return s+="\n</div>\n",s}),this.Handlebars.templates["templates/trip_items/hotel/hotel_search.tmpl"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='<form>\n<div class="search-component">\n	<input class="search-query" id="search-term" name="search-term" size="16" type="text"  placeholder="'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"HotelNameContains",u):a.call(t,"t","HotelNameContains",u)))+'">\n	<button class="search-submit" type="button">\n		<span class="general-icon icon_arrow_solid">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"Search",u):a.call(t,"t","Search",u)))+"</span>\n	</button>\n</div>\n</form>",s}),this.Handlebars.templates["templates/trip_items/import/trip_import.tmpl"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='<form action="#import-trip" id="import-trip-form" class="standard-form-panel">\n\n	<div class="input-group">\n		<div class="label wide"><p>'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"RecordLocatorOrTripId",u):a.call(t,"t","RecordLocatorOrTripId",u)))+'</p></div>\n		<div class="input-container thin"><input id="tripid" name="tripid" type="text" autocomplete="off" autocapitalize="off" autocorrect="off" /></div>\n	</div>\n\n	<div class="input-group">\n		<div class="label wide"><p>'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"TravelerLastName",u):a.call(t,"t","TravelerLastName",u)))+'</p></div>\n		<div class="input-container thin"><input id="lastname" name="lastname" type="text" autocomplete="off" autocapitalize="off" autocorrect="off" /></div>\n	</div>\n\n	<div class="actions">\n		<button class="submit"><span>'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"Import",u):a.call(t,"t","Import",u)))+'</span><span class="loader light">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"Loading",u):a.call(t,"t","Loading",u)))+"</span></button>\n	</div>\n\n</form>\n\n",s}),this.Handlebars.templates["templates/trip_items/trip_item_detail.tmpl"]=Handlebars.template(function(e,t,n,r,i){function p(e,t){var r="",i,s;return r+='\n<div class="tags">\n	<div class="tag--business">'+l((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"Business",s):f.call(e,"t","Business",s)))+"</div>\n</div>\n",r}function d(e,t){return'\n		<div class="map map-drop-down-button" data-segment="start">\n			<div class="button-icon btn_icon_map_25px"></div>\n		</div>\n	'}function v(e,t){var r="",i;r+="\n				",i=n["if"].call(e,e&&e.label,{hash:{},inverse:h.noop,fn:h.program(6,m,t),data:t});if(i||i===0)r+=i;r+="\n				",i=n["if"].call(e,e&&e.address_lines,{hash:{},inverse:h.noop,fn:h.program(8,g,t),data:t});if(i||i===0)r+=i;return r+="\n			",r}function m(e,t){var r="",i,s;return r+='<p class="address-line"><span>',(s=n.label)?i=s.call(e,{hash:{},data:t}):(s=e&&e.label,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+"</span></p>",r}function g(e,t){var r="",i;r+="\n					",i=n.each.call(e,e&&e.address_lines,{hash:{},inverse:h.noop,fn:h.program(9,y,t),data:t});if(i||i===0)r+=i;return r+="\n				",r}function y(e,t){var n="";return n+='\n						<p class="address-line"><span>'+l(typeof e===c?e.apply(e):e)+"</span></p>\n					",n}function b(e,t){return'\n		<div class="map map-drop-down-button" data-segment="end">\n			<div class="button-icon btn_icon_map_25px"></div>\n		</div>\n	'}function w(e,t){var n="",r;return n+='<p class="address-line"><span>'+l((r=(r=e&&e.end_location,r==null||r===!1?r:r.label),typeof r===c?r.apply(e):r))+"</span></p>",n}function E(e,t){var r="",i;r+="\n				",i=n.each.call(e,(i=e&&e.end_location,i==null||i===!1?i:i.address_lines),{hash:{},inverse:h.noop,fn:h.program(16,S,t),data:t});if(i||i===0)r+=i;return r+="\n			",r}function S(e,t){var n="";return n+='\n					<p class="address-line"><span>'+l(typeof e===c?e.apply(e):e)+"</span></p>\n				",n}function x(e,t){var r="",i;r+='\n<section class="phones">\n	',i=n.each.call(e,e&&e.phone_numbers,{hash:{},inverse:h.noop,fn:h.program(19,T,t),data:t});if(i||i===0)r+=i;return r+="\n</section>\n",r}function T(e,t){var r="",i,s,o;return r+='\n		<dl class="inline phone">\n			<dd>\n				<div class="phone-actionable phone-drop-down-button ',(s=n.type)?i=s.call(e,{hash:{},data:t}):(s=e&&e.type,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+'">\n					<a href="tel:',(s=n.number)?i=s.call(e,{hash:{},data:t}):(s=e&&e.number,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+'" class="button-icon btn_icon_call_25px"></a>\n				</div>\n				<span class="phone-number">'+l((s=n.phone||e&&e.phone,o={hash:{},data:t},s?s.call(e,e&&e.number,e&&e.type,o):f.call(e,"phone",e&&e.number,e&&e.type,o)))+"</span>\n			</dd>\n		</dl>\n	",r}function N(e,t){var r="",i,s;return r+='\n	<div id="',(s=n.id)?i=s.call(e,{hash:{},data:t}):(s=e&&e.id,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+'" class="detail-menu-item">\n		',(s=n.label)?i=s.call(e,{hash:{},data:t}):(s=e&&e.label,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+'\n		<div class="',(s=n.icon)?i=s.call(e,{hash:{},data:t}):(s=e&&e.icon,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+' general-icon detail-menu-icon "></div>\n		<div class="detail-menu-next button-icon btn_arrow"></div>\n	</div>\n',r}function C(e,t){return'\n	<div id="worldmate" class="wm"></div>\n'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c="function",h=this;s+='<section class="confirmation">\n<dl>\n	<dt class="label">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"ConfirmationNumber",a):f.call(t,"t","ConfirmationNumber",a)))+'</dt>\n	<dd class="value word-wrap-text">'+l((u=n.if_not_blank||t&&t.if_not_blank,a={hash:{},data:i},u?u.call(t,t&&t.confirmation_number,"NotEntered",a):f.call(t,"if_not_blank",t&&t.confirmation_number,"NotEntered",a)))+"</dd>\n</dl>\n",o=n["if"].call(t,t&&t.for_business,{hash:{},inverse:h.noop,fn:h.program(1,p,i),data:i});if(o||o===0)s+=o;s+="\n</section>\n\n<section>\n	",o=n["if"].call(t,t&&t.is_map_viable_for_start_location,{hash:{},inverse:h.noop,fn:h.program(3,d,i),data:i});if(o||o===0)s+=o;s+='\n	<dl class="start-segment">\n		<dt class="label">'+l((o=(o=t&&t.labels,o==null||o===!1?o:o.start),typeof o===c?o.apply(t):o))+'</dt>\n		<dd class="value">\n			',o=n["with"].call(t,t&&t.start_location,{hash:{},inverse:h.noop,fn:h.program(5,v,i),data:i});if(o||o===0)s+=o;s+='\n		</dd>\n	</dl>\n	<dl class="date">\n		<dt class="label">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Date",a):f.call(t,"t","Date",a)))+'</dt>\n		<dd class="value">'+l((u=n.mediumDate||t&&t.mediumDate,a={hash:{},data:i},u?u.call(t,t&&t.start_date,a):f.call(t,"mediumDate",t&&t.start_date,a)))+'</dd>\n	</dl>\n	<dl class="time">\n		<dt class="label">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Time",a):f.call(t,"t","Time",a)))+'</dt>\n		<dd class="value">'+l((u=n.timeFromDateTime||t&&t.timeFromDateTime,a={hash:{},data:i},u?u.call(t,t&&t.start_date,a):f.call(t,"timeFromDateTime",t&&t.start_date,a)))+"</dd>\n	</dl>\n</section>\n<section>\n	",o=n["if"].call(t,t&&t.is_map_viable_for_end_location,{hash:{},inverse:h.noop,fn:h.program(11,b,i),data:i});if(o||o===0)s+=o;s+='\n	<dl class="end-segment">\n		<dt class="label">'+l((o=(o=t&&t.labels,o==null||o===!1?o:o.end),typeof o===c?o.apply(t):o))+'</dt>\n		<dd class="value">\n			',o=n["if"].call(t,(o=t&&t.end_location,o==null||o===!1?o:o.label),{hash:{},inverse:h.noop,fn:h.program(13,w,i),data:i});if(o||o===0)s+=o;s+="\n			",o=n["if"].call(t,(o=t&&t.end_location,o==null||o===!1?o:o.address_lines),{hash:{},inverse:h.noop,fn:h.program(15,E,i),data:i});if(o||o===0)s+=o;s+='\n		</dd>\n	</dl>\n	<dl class="date">\n		<dt class="label">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Date",a):f.call(t,"t","Date",a)))+'</dt>\n		<dd class="value">'+l((u=n.mediumDate||t&&t.mediumDate,a={hash:{},data:i},u?u.call(t,t&&t.end_date,a):f.call(t,"mediumDate",t&&t.end_date,a)))+'</dd>\n	</dl>\n	<dl class="time">\n		<dt class="label">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Time",a):f.call(t,"t","Time",a)))+'</dt>\n		<dd class="value">'+l((u=n.timeFromDateTime||t&&t.timeFromDateTime,a={hash:{},data:i},u?u.call(t,t&&t.end_date,a):f.call(t,"timeFromDateTime",t&&t.end_date,a)))+'</dd>\n	</dl>\n</section>\n\n<section>\n<dl>\n	<dt class="label">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Note",a):f.call(t,"t","Note",a)))+'</dt>\n	<dd class="word-wrap-text">'+l((u=n.if_not_blank||t&&t.if_not_blank,a={hash:{},data:i},u?u.call(t,t&&t.note,"NotEntered",a):f.call(t,"if_not_blank",t&&t.note,"NotEntered",a)))+"</dd>\n</dl>\n</section>\n\n",o=n["if"].call(t,t&&t.phone_numbers,{hash:{},inverse:h.noop,fn:h.program(18,x,i),data:i});if(o||o===0)s+=o;s+="\n\n",o=n.each.call(t,t&&t.detailMenuItems,{hash:{},inverse:h.noop,fn:h.program(21,N,i),data:i});if(o||o===0)s+=o;s+="\n\n",o=n["if"].call(t,t&&t.isWorldMate,{hash:{},inverse:h.noop,fn:h.program(23,C,i),data:i});if(o||o===0)s+=o;return s}),this.Handlebars.templates["templates/trip_items/trip_item_imported_edit.tmpl"]=Handlebars.template(function(e,t,n,r,i){function p(e,t){var r="",i,s,o;r+='\n		<div class="input-group-checkbox ',i=n.unless.call(e,e&&e.userCorporation,{hash:{},inverse:h.noop,fn:h.program(2,d,t),data:t});if(i||i===0)r+=i;r+='">\n			<input class="input-group-checkbox__checkbox" type="checkbox"\n				id="selenium-for-business" name="for_business"\n				',i=n["if"].call(e,e&&e.for_business,{hash:{},inverse:h.noop,fn:h.program(4,v,t),data:t});if(i||i===0)r+=i;r+="\n				",i=n.unless.call(e,e&&e.userCorporation,{hash:{},inverse:h.noop,fn:h.program(6,m,t),data:t});if(i||i===0)r+=i;r+=" />\n			",i=n.unless.call(e,e&&e.userCorporation,{hash:{},inverse:h.noop,fn:h.program(8,g,t),data:t});if(i||i===0)r+=i;r+='\n			<div class="input-group-checkbox__main">\n				<div class="input-group-checkbox__label"><p>'+l((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"ForBusiness",o):f.call(e,"t","ForBusiness",o)))+'</p></div>\n				<div class="input-group-checkbox__sublabel"><p>\n					',i=n["if"].call(e,e&&e.for_business,{hash:{},inverse:h.program(12,b,t),fn:h.program(10,y,t),data:t});if(i||i===0)r+=i;r+="\n\n					",i=n["if"].call(e,e&&e.itemCorporation,{hash:{},inverse:h.program(16,E,t),fn:h.program(14,w,t),data:t});if(i||i===0)r+=i;return r+='\n				</p></div>\n			</div>\n			<div id="for-business-help" class="input-group-checkbox__right-button input-group-checkbox__nontoggle">\n				<div class="icon_info_20px general-icon"></div>\n			</div>\n		</div>\n	',r}function d(e,t){return"is-disabled"}function v(e,t){return"checked"}function m(e,t){return"disabled"}function g(e,t){return'\n				<input type="hidden" name="for_business" value="on">\n			'}function y(e,t){var r="",i,s;return r+="\n						"+l((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"ConnectedWith",s):f.call(e,"t","ConnectedWith",s)))+"\n					",r}function b(e,t){var r="",i,s;return r+="\n						"+l((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"ConnectTo",s):f.call(e,"t","ConnectTo",s)))+"\n					",r}function w(e,t){var r="",i,s;return r+="\n						",(s=n.itemCorporation)?i=s.call(e,{hash:{},data:t}):(s=e&&e.itemCorporation,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+"\n					",r}function E(e,t){var r="",i,s;return r+="\n						",(s=n.userCorporation)?i=s.call(e,{hash:{},data:t}):(s=e&&e.userCorporation,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+"\n					",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c="function",h=this;s+='<form action="#edit-flight" id="edit-flight-form" class="standard-form-panel">\n\n	<div class="instruction">\n		<p class="instruction-info">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"EditLinkedBooking",a):f.call(t,"t","EditLinkedBooking",a)))+"</p>\n	</div>\n\n	",o=n["if"].call(t,t&&t.showForBusinessField,{hash:{},inverse:h.noop,fn:h.program(1,p,i),data:i});if(o||o===0)s+=o;return s+='\n\n	<div id="notes-group" class="input-group">\n		<div class="label"><p>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Notes",a):f.call(t,"t","Notes",a)))+'</p></div>\n		<div class="input-container"><input id="note" name="note" type="text" placeholder="'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Optional",a):f.call(t,"t","Optional",a)))+'" value="',(u=n.note)?o=u.call(t,{hash:{},data:i}):(u=t&&t.note,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+'"/></div>\n	</div>\n\n	<div class="actions">\n		<button class="submit"><span>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Continue",a):f.call(t,"t","Continue",a)))+'</span><span class="loader light">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Loading",a):f.call(t,"t","Loading",a)))+"</span></button>\n	</div>\n\n</form>\n",s}),this.Handlebars.templates["templates/trip_items/trip_items_index.tmpl"]=Handlebars.template(function(e,t,n,r,i){function c(e,t){var r="",i,s;return r+='\n<div id="empty-trip-message" class="standard-form-panel">\n	<div class="instruction-header-med">'+a((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"AddedNoItemsYet",s):u.call(e,"t","AddedNoItemsYet",s)))+'</div>\n	<div class="instruction">\n		<p class="instruction-info">'+a((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"GetStartedAddingAnItem",s):u.call(e,"t","GetStartedAddingAnItem",s)))+"</p>\n	</div>\n</div>\n",r}function h(e,t){var r="",i,s;r+='\n<div class="list-item add group">\n	<div class="details">\n		<div class="item-title action ',(s=n.className)?i=s.call(e,{hash:{},data:t}):(s=e&&e.className,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=a(i)+'">\n			<div class="icon-type general-icon ',(s=n.icon)?i=s.call(e,{hash:{},data:t}):(s=e&&e.icon,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=a(i)+'"></div>\n			',(s=n.text)?i=s.call(e,{hash:{},data:t}):(s=e&&e.text,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=a(i)+'\n			<div class="next btn_arrow button-icon"></div>\n			',i=n["if"].call(e,e&&e.hasHelp,{hash:{},inverse:l.noop,fn:l.program(4,p,t),data:t});if(i||i===0)r+=i;return r+="\n		</div>\n	</div>\n</div>\n",r}function p(e,t){var r="",i,s;return r+='\n				<div class="help-',(s=n.name)?i=s.call(e,{hash:{},data:t}):(s=e&&e.name,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=a(i)+' icon_info_20px general-icon"></div>\n			',r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=n.helperMissing,a=this.escapeExpression,f="function",l=this;o=n.unless.call(t,t&&t.hasItems,{hash:{},inverse:l.noop,fn:l.program(1,c,i),data:i});if(o||o===0)s+=o;s+="\n",o=n.each.call(t,t&&t.types,{hash:{},inverse:l.noop,fn:l.program(3,h,i),data:i});if(o||o===0)s+=o;return s}),this.Handlebars.templates["templates/trip_items/vehicle/vehicle_location_detail.tmpl"]=Handlebars.template(function(e,t,n,r,i){function c(e,t){var r="",i,s,o;r+="\n	<section>\n		<div>\n			<h2>",(s=n.vendor_name)?i=s.call(e,{hash:{},data:t}):(s=e&&e.vendor_name,i=typeof s===u?s.call(e,{hash:{},data:t}):s);if(i||i===0)r+=i;r+='</h2>\n			<a class="action-button map"><div class="btn_icon_map_25px button-icon"></div></a>\n			<p class="label">',(s=n.general_location)?i=s.call(e,{hash:{},data:t}):(s=e&&e.general_location,i=typeof s===u?s.call(e,{hash:{},data:t}):s);if(i||i===0)r+=i;r+='</p>\n			<p class="label">',(s=n.address)?i=s.call(e,{hash:{},data:t}):(s=e&&e.address,i=typeof s===u?s.call(e,{hash:{},data:t}):s);if(i||i===0)r+=i;r+="</p>\n		</div>\n	</section>\n	<section>\n		<div>\n			",i=n.each.call(e,e&&e.phoneNumbers,{hash:{},inverse:l.noop,fn:l.program(2,h,t),data:t});if(i||i===0)r+=i;r+='\n		</div>\n	</section>\n	<h2 class="component-subheader">'+a((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"HoursOfOperation",o):f.call(e,"t","HoursOfOperation",o)))+"</h2>\n	<section>\n		",i=n.each.call(e,e&&e.operation_times,{hash:{},inverse:l.noop,fn:l.program(7,v,t),data:t});if(i||i===0)r+=i;r+='\n	</section>\n	<h2 class="component-subheader">'+a((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"GeneralInformation",o):f.call(e,"t","GeneralInformation",o)))+'</h2>\n	<section>\n		<p class="label">',(s=n.generalInformation)?i=s.call(e,{hash:{},data:t}):(s=e&&e.generalInformation,i=typeof s===u?s.call(e,{hash:{},data:t}):s);if(i||i===0)r+=i;r+='</p>\n	</section>	\n	<h2 class="component-subheader">'+a((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"AirportShuttleInformation",o):f.call(e,"t","AirportShuttleInformation",o)))+'</h2>\n	<section>\n		<p class="label">',(s=n.shuttleDetails)?i=s.call(e,{hash:{},data:t}):(s=e&&e.shuttleDetails,i=typeof s===u?s.call(e,{hash:{},data:t}):s);if(i||i===0)r+=i;return r+="</p>\n	</section>\n	",r}function h(e,t){var r="",i,s;r+='\n				<div class="phone">\n				  <a class="action-button call" href="tel:+',(s=n.number)?i=s.call(e,{hash:{},data:t}):(s=e&&e.number,i=typeof s===u?s.call(e,{hash:{},data:t}):s),r+=a(i)+'"><div class="btn_icon_call_25px button-icon"></div></a>\n					',i=n["if"].call(e,e&&e.type,{hash:{},inverse:l.program(5,d,t),fn:l.program(3,p,t),data:t});if(i||i===0)r+=i;return r+="\n				</div>\n			",r}function p(e,t){var r="",i,s;return r+="\n						<div><label>",(s=n.number)?i=s.call(e,{hash:{},data:t}):(s=e&&e.number,i=typeof s===u?s.call(e,{hash:{},data:t}):s),r+=a(i)+"</label><label>&nbsp;(",(s=n.type)?i=s.call(e,{hash:{},data:t}):(s=e&&e.type,i=typeof s===u?s.call(e,{hash:{},data:t}):s),r+=a(i)+")</label></div>\n					",r}function d(e,t){var r="",i,s,o;return r+="\n						<div><label>",(s=n.number)?i=s.call(e,{hash:{},data:t}):(s=e&&e.number,i=typeof s===u?s.call(e,{hash:{},data:t}):s),r+=a(i)+"</label><label>&nbsp;("+a((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"Phone",o):f.call(e,"t","Phone",o)))+")</span></div>\n					",r}function v(e,t){var r="",i;r+="\n			",i=n["if"].call(e,e&&e.start_time,{hash:{},inverse:l.noop,fn:l.program(8,m,t),data:t});if(i||i===0)r+=i;return r+="\n		",r}function m(e,t){var r="",i,s,o;return r+="\n				<div><label>",(s=n.start_day)?i=s.call(e,{hash:{},data:t}):(s=e&&e.start_day,i=typeof s===u?s.call(e,{hash:{},data:t}):s),r+=a(i)+" - ",(s=n.end_day)?i=s.call(e,{hash:{},data:t}):(s=e&&e.end_day,i=typeof s===u?s.call(e,{hash:{},data:t}):s),r+=a(i)+": "+a((s=n.time||e&&e.time,o={hash:{},data:t},s?s.call(e,e&&e.start_time,o):f.call(e,"time",e&&e.start_time,o)))+" - "+a((s=n.time||e&&e.time,o={hash:{},data:t},s?s.call(e,e&&e.end_time,o):f.call(e,"time",e&&e.end_time,o)))+"</label></div>\n			",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=n.helperMissing,l=this;s+='<div class="trip-component trip-item-detail vehicle-detail">\n	',o=n["with"].call(t,t&&t.item,{hash:{},inverse:l.noop,fn:l.program(1,c,i),data:i});if(o||o===0)s+=o;return s+="\n</div>",s}),this.Handlebars.templates["templates/trip_items/vehicle/vehicle_locations_index.tmpl"]=Handlebars.template(function(e,t,n,r,i){function p(e,t){var r="",i,s;return r+='\n		<div class="list-item actionable">\n			<div class="details">\n				<div class="item-title action">\n					<p>'+l((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"SearchResultsZero",s):f.call(e,"t","SearchResultsZero",s)))+"</p>\n				</div>\n			</div>\n		</div>\n",r}function d(e,t){var r="",i,s,o;r+="\n",i=(s=n.each_with_index||e&&e.each_with_index,o={hash:{},inverse:h.noop,fn:h.programWithDepth(4,v,t,e),data:t},s?s.call(e,e&&e.locations,o):f.call(e,"each_with_index",e&&e.locations,o));if(i||i===0)r+=i;return r+="\n",r}function v(e,t,r){var i="",s,o,u;i+='\n	<div data-index="',(o=n.index)?s=o.call(e,{hash:{},data:t}):(o=e&&e.index,s=typeof o===c?o.call(e,{hash:{},data:t}):o),i+=l(s)+'" class="list-item actionable chevron-lift">\n		<div class="display-box">\n			<div class="flex-8 item-title action">\n				<h2>',(o=n.name)?s=o.call(e,{hash:{},data:t}):(o=e&&e.name,s=typeof o===c?o.call(e,{hash:{},data:t}):o),i+=l(s)+"</h2>\n				",s=n.each.call(e,e&&e.address_lines,{hash:{},inverse:h.noop,fn:h.program(5,m,t),data:t});if(s||s===0)i+=s;i+='\n			</div>\n			<div class="button-icon btn_arrow"></div>\n			<div class="flex-2 item-sub-title lower right-align"><p><b>',(o=n.search_distance_mi)?s=o.call(e,{hash:{},data:t}):(o=e&&e.search_distance_mi,s=typeof o===c?o.call(e,{hash:{},data:t}):o),i+=l(s)+"</b></p><p>"+l((o=n.t||e&&e.t,u={hash:{},data:t},o?o.call(e,"MilesAway",u):f.call(e,"t","MilesAway",u)))+"</p></div>\n		</div>\n	</div>\n	",s=(o=n.if_is_nudgeable||r&&r.if_is_nudgeable,u={hash:{index:e&&e.index,length:(s=r&&r.locations,s==null||s===!1?s:s.length)},inverse:h.noop,fn:h.program(7,g,t),data:t},o?o.call(e,u):f.call(e,"if_is_nudgeable",u));if(s||s===0)i+=s;return i+="\n",i}function m(e,t){var n="";return n+='\n					<p class="item-sub-title">'+l(typeof e===c?e.apply(e):e)+"</p>\n				",n}function g(e,t){var r="",i,s;return r+='\n	<div class="nudgeable list-item actionable" >\n		<div class="details">\n			<div class="item-title action">\n				<div class="icon_add_32px general-icon"></div>\n			   <h2>'+l((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"VehicleManualPrompt",s):f.call(e,"t","VehicleManualPrompt",s)))+'</h2>\n			</div>\n			<div class="button-icon btn_arrow"></div>\n		</div>\n	</div>\n	',r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c="function",h=this;s+='<div class="list-loader">\n		<div class="list-item">\n			<div class="details">\n					<a class="item-title action no-icon"><span class="loader">\n					</span></a>\n			</div>\n		</div>\n</div>\n<div class="list">\n',o=n.unless.call(t,t&&t.locations,{hash:{},inverse:h.program(3,d,i),fn:h.program(1,p,i),data:i});if(o||o===0)s+=o;return s+='\n	<div class="nudgeable list-item actionable" >\n		<div class="details">\n			<div class="item-title action">\n				<div class="icon_add_32px general-icon"></div>\n			   <h2>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"VehicleManualPrompt",a):f.call(t,"t","VehicleManualPrompt",a)))+'</h2>\n			</div>\n			<div class="button-icon btn_arrow"></div>\n		</div>\n	</div>\n</div>\n',s}),this.Handlebars.templates["templates/trip_items/vehicle/vehicle_search.tmpl"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='\n<form>\n<div class="search-component">\n	<input class="search-query" id="search-term" name="search-term" size="16" type="text"  placeholder="'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"RentalCompanyNameContains",u):a.call(t,"t","RentalCompanyNameContains",u)))+'" autocomplete="off" autocapitalize="off" autocorrect="off" />\n	<button class="search-submit" type="button">\n		<span class="general-icon icon_arrow_solid">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"Search",u):a.call(t,"t","Search",u)))+"</span>\n	</button>\n</div>\n</form>\n",s}),this.Handlebars.templates["templates/trips/combine_trip_name.tmpl"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c="function";return s+='<form action="#name-trip" id="name-trip-form" class="standard-form-panel">\n\n	<div class="instruction">\n		<p class="instruction-info">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"CombineAreYouSure",a):f.call(t,"t","CombineAreYouSure",a)))+'</p>\n	</div>\n\n	<div class="input-group">\n		<div class="label"><p>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"TripName",a):f.call(t,"t","TripName",a)))+'</p></div>\n		<div class="input-container"><input id="tripname" name="tripname" type="text" value="',(u=n.name)?o=u.call(t,{hash:{},data:i}):(u=t&&t.name,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+'"/></div>\n	</div>\n\n	<div class="actions">\n		<button class="submit"><span>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Save",a):f.call(t,"t","Save",a)))+'</span><span class="loader light">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Loading",a):f.call(t,"t","Loading",a)))+"</span></button>\n	</div>\n\n</form>\n",s}),this.Handlebars.templates["templates/trips/confirm_delete_trip.tmpl"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='<div class="trip-items standard-form-panel error-popup">\n		<div class="error-title-group">\n		<div class="general-icon icon_alert_25px"></div>\n		<div class="message"><p>'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"DeleteQuestion",u):a.call(t,"t","DeleteQuestion",u)))+'</p></div>\n	</div>\n\n	<div class="error-message-group">\n		<p>'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"DeleteTripWarning",u):a.call(t,"t","DeleteTripWarning",u)))+'</p>\n	</div>\n\n	<div class="button-group display-box">\n		<div class="flex-8">\n			<input id="continue" type="submit" value="'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"Delete",u):a.call(t,"t","Delete",u)))+'" class="submit warning-button"></span><span class="loader light">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"Loading",u):a.call(t,"t","Loading",u)))+'</span></input>\n		</div>\n		<div class="flex-1"></div>\n		<div class="flex-8">\n			<input id="cancel" type="submit" value="'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"Cancel",u):a.call(t,"t","Cancel",u)))+'" class="submit cancel-button"><span class="loader light">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"Loading",u):a.call(t,"t","Loading",u)))+'</span></input>\n		</div>\n	</div>\n</div>\n<div class="full-screen-underlay"></div>\n',s}),this.Handlebars.templates["templates/trips/confirm_delete_trips_list.tmpl"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='<form action="#confirm-delete-trips" id="confirm-trips-form"  class="standard-form-panel">\n\n	<div class="instruction">\n		<p class="instruction-info">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"DeleteInstruct",u):a.call(t,"t","DeleteInstruct",u)))+'</p>\n	</div>\n\n	<div class="mytrips-page">\n		<div class="list-panel"></div>\n	</div>\n\n	<div class="actions">\n		<button class="submit warning-button"><span>'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"Continue",u):a.call(t,"t","Continue",u)))+'</span><span class="loader light">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"Loading",u):a.call(t,"t","Loading",u)))+"</span></button>\n	</div>\n\n</form>\n\n",s}),this.Handlebars.templates["templates/trips/confirm_follow_trip_unfollow.tmpl"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c="function";return s+='<div class="trip-items standard-form-panel error-popup">\n  <div class="error-title-group">\n    <div class="general-icon icon_alert_25px"></div>\n    <div class="message"><p>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"UnfollowTripConfirmTitle",a):f.call(t,"t","UnfollowTripConfirmTitle",a)))+'</p></div>\n  </div>\n\n  <div class="error-message-group">\n    <p>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"UnfollowTripConfirmDescription1",a):f.call(t,"t","UnfollowTripConfirmDescription1",a))),(u=n.traveler_name)?o=u.call(t,{hash:{},data:i}):(u=t&&t.traveler_name,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"UnfollowTripConfirmDescription2",a):f.call(t,"t","UnfollowTripConfirmDescription2",a)))+' "',(u=n.name)?o=u.call(t,{hash:{},data:i}):(u=t&&t.name,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+'"?</p>\n  </div>\n\n  <div class="button-group display-box">\n    <div class="flex-8">\n      <input id="continue" type="submit" value="'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Unfollow",a):f.call(t,"t","Unfollow",a)))+'" class="submit warning-button"></span><span class="loader light">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Loading",a):f.call(t,"t","Loading",a)))+'</span></input>\n    </div>\n    <div class="flex-1"></div>\n    <div class="flex-8">\n      <input id="cancel" type="submit" value="'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Cancel",a):f.call(t,"t","Cancel",a)))+'" class="submit cancel-button"><span class="loader light">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Loading",a):f.call(t,"t","Loading",a)))+'</span></input>\n    </div>\n  </div>\n</div>\n<div class="full-screen-underlay"></div>\n',s}),this.Handlebars.templates["templates/trips/confirm_item.tmpl"]=Handlebars.template(function(e,t,n,r,i){function c(e,t){var r="",i,s;return r+='\n			<div class="sub-title">',(s=n.item_sub_title_mytrips)?i=s.call(e,{hash:{},data:t}):(s=e&&e.item_sub_title_mytrips,i=typeof s===a?s.call(e,{hash:{},data:t}):s),r+=f(i)+"</div>\n		",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=this;s+='<div class="mytrips-trip-item-group">\n	<div class="general-icon ',(u=n.icon)?o=u.call(t,{hash:{},data:i}):(u=t&&t.icon,o=typeof u===a?u.call(t,{hash:{},data:i}):u),s+=f(o)+'"></div>\n	<div class="title-group">\n		<div class="title">',(u=n.item_title_mytrips)?o=u.call(t,{hash:{},data:i}):(u=t&&t.item_title_mytrips,o=typeof u===a?u.call(t,{hash:{},data:i}):u),s+=f(o)+"</div>\n		",o=n["if"].call(t,t&&t.item_sub_title_mytrips,{hash:{},inverse:l.noop,fn:l.program(1,c,i),data:i});if(o||o===0)s+=o;return s+="\n	</div>\n</div>",s}),this.Handlebars.templates["templates/trips/confirm_items_list.tmpl"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='<form action="#confirm-items" id="confirm-items-form" class="standard-form-panel">\n	<div class="mytrips-page">\n		<div class="list-panel"></div>\n	</div>\n\n	<div class="actions">\n		<button id="confirm-items-form-submit" class="submit"><span>'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"Continue",u):a.call(t,"t","Continue",u)))+'</span><span class="loader light">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"Loading",u):a.call(t,"t","Loading",u)))+"</span></button>\n	</div>\n</form>\n\n",s}),this.Handlebars.templates["templates/trips/confirm_trip.tmpl"]=Handlebars.template(function(e,t,n,r,i){function p(e,t){var r="",i,s;return r+='<div class="city-state">',(s=n.destination)?i=s.call(e,{hash:{},data:t}):(s=e&&e.destination,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(i)+"</div>",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f="function",l=this.escapeExpression,c=this,h=n.helperMissing;s+='<div class="preview">\n	<img src="',(u=n.previewUrl)?o=u.call(t,{hash:{},data:i}):(u=t&&t.previewUrl,o=typeof u===f?u.call(t,{hash:{},data:i}):u),s+=l(o)+'" height="65" width="65" :/>\n</div>\n<div class="destination-group">\n	<div class="title">',(u=n.name)?o=u.call(t,{hash:{},data:i}):(u=t&&t.name,o=typeof u===f?u.call(t,{hash:{},data:i}):u),s+=l(o)+"</div>\n	",o=n["if"].call(t,t&&t.destination,{hash:{},inverse:c.noop,fn:c.program(1,p,i),data:i});if(o||o===0)s+=o;return s+='\n	<div class="date">'+l((u=n.startEndDate||t&&t.startEndDate,a={hash:{},data:i},u?u.call(t,t&&t.start_time,t&&t.end_time,a):h.call(t,"startEndDate",t&&t.start_time,t&&t.end_time,a)))+"</div>\n</div>\n",s}),this.Handlebars.templates["templates/trips/create_new_trip_nav.tmpl"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+="<div class='mytrips-create-bar-panel group'>\n	<div id='create-trip'>\n		<div class='add icon_add_32px general-icon'></div>\n		<div class='title'>\n			"+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"CreateANewTrip",u):a.call(t,"t","CreateANewTrip",u)))+"\n		</div>\n		<div class='next btn_arrow button-icon'></div>\n	</div>\n	<div id='manage-trips'>\n		<div class='add icon_edit_32px general-icon'></div>\n		<div class='title'>\n			"+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"ManageTrips",u):a.call(t,"t","ManageTrips",u)))+"\n		</div>\n		<div class='next btn_arrow button-icon'></div>\n	</div>\n</div>",s}),this.Handlebars.templates["templates/trips/create_trip.tmpl"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='<form action="#create-trip" id="create-trip-form" class="standard-form-panel">\n\n	<div id="trip-name-group" class="input-group">\n		<div class="label"><p>'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"TripName",u):a.call(t,"t","TripName",u)))+'</p></div>\n		<div class="input-container"><input id="tripname" name="tripname" type="text"/></div>\n	</div>\n\n	<div class="actions">\n		<button class="submit"><span>'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"Continue",u):a.call(t,"t","Continue",u)))+'</span><span class="loader light">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"Loading",u):a.call(t,"t","Loading",u)))+'</span></button>\n	</div>\n\n	<div class="instruction-centered">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"CreateTripInstruct1",u):a.call(t,"t","CreateTripInstruct1",u)))+'<span class="instruction-emphasis">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"CreateTripInstruct2",u):a.call(t,"t","CreateTripInstruct2",u)))+"</span></div>\n\n</form>\n\n",s}),this.Handlebars.templates["templates/trips/create_trip_empty.tmpl"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='<form action="#create-trip" id="create-trip-form" class="standard-form-panel">\n\n	<div id="empty-list-note-group">\n		<div class="instruction-header-med">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"CreateTripBlankInstruct1",u):a.call(t,"t","CreateTripBlankInstruct1",u)))+'</div>\n		<div class="instruction">\n			<p class="instruction-info">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"CreateTripBlankInstruct2",u):a.call(t,"t","CreateTripBlankInstruct2",u)))+'</p>\n		</div>\n	</div>\n\n	<div id="trip-name-group" class="input-group">\n		<div class="label"><p>'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"TripName",u):a.call(t,"t","TripName",u)))+'</p></div>\n		<div class="input-container"><input id="tripname" name="tripname" type="text"/></div>\n	</div>\n\n	<div class="actions">\n		<button class="submit"><span>'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"Continue",u):a.call(t,"t","Continue",u)))+'</span><span class="loader light">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"Loading",u):a.call(t,"t","Loading",u)))+'</span></button>\n	</div>\n\n	<div class="instruction-centered">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"CreateTripInstruct1",u):a.call(t,"t","CreateTripInstruct1",u)))+'<span class="instruction-emphasis">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"CreateTripInstruct2",u):a.call(t,"t","CreateTripInstruct2",u)))+"</span></div>\n\n</form>\n\n",s}),this.Handlebars.templates["templates/trips/edit_trip.tmpl"]=Handlebars.template(function(e,t,n,r,i){function p(e,t){var r="",i,s,o;return r+='\n	<li><div class="general-icon ',(s=n.icon)?i=s.call(e,{hash:{},data:t}):(s=e&&e.icon,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(i)+'"></div>\n		<div class="item">',(s=n.masthead)?i=s.call(e,{hash:{},data:t}):(s=e&&e.masthead,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(i)+"\n			<p>",(s=n.subhead)?i=s.call(e,{hash:{},data:t}):(s=e&&e.subhead,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(i)+"</p>\n			<p>",(s=n.startAction)?i=s.call(e,{hash:{},data:t}):(s=e&&e.startAction,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(i)+" "+l((s=n.timeFromDateTime||e&&e.timeFromDateTime,o={hash:{},data:t},s?s.call(e,e&&e.start_time,o):c.call(e,"timeFromDateTime",e&&e.start_time,o)))+" "+l((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"On",o):c.call(e,"t","On",o)))+" "+l((s=n.dateMonth||e&&e.dateMonth,o={hash:{},data:t},s?s.call(e,e&&e.start_date,o):c.call(e,"dateMonth",e&&e.start_date,o)))+'</p>\n		</div>\n		<div class="small btn warning delete-trip-item" data-trip-item-id="',(s=n.id)?i=s.call(e,{hash:{},data:t}):(s=e&&e.id,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(i)+'">\n			<div class="button-icon btn_icon_delete_25px"></div>\n		</div>\n	</li>\n	',r}function d(e,t){var r="",i,s;return r+='\n	<li class="no-items">'+l((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"ManualTripListEmpty",s):c.call(e,"t","ManualTripListEmpty",s)))+"</li>\n	",r}function v(e,t){var r="",i,s,o;r+='\n	<li><div class="expandable-item">\n			<div class="general-icon icon_arrow_solid"></div>\n			<div class="item"><span class="item-label">'+l((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"ConfirmationNumber",o):c.call(e,"t","ConfirmationNumber",o)))+"</span>",(s=n.identifier)?i=s.call(e,{hash:{},data:t}):(s=e&&e.identifier,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(i)+'\n				<p class="link-text">'+l((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"ViewItems",o):c.call(e,"t","ViewItems",o)))+'</p>\n			</div>\n			<div class="small btn warning delete-link" data-link-id="',(s=n.id)?i=s.call(e,{hash:{},data:t}):(s=e&&e.id,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(i)+'">\n				<div class="button-icon btn_icon_delete_25px"></div>\n			</div>\n		</div>\n		<ul class="subitem-list">\n			',i=n.each.call(e,e&&e.items,{hash:{},inverse:h.program(8,g,t),fn:h.program(6,m,t),data:t});if(i||i===0)r+=i;return r+="\n		</ul>\n	</li>\n	",r}function m(e,t){var r="",i,s,o;return r+='\n			<li><div class="general-icon ',(s=n.icon)?i=s.call(e,{hash:{},data:t}):(s=e&&e.icon,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(i)+'"></div>\n				<div class="item">',(s=n.masthead)?i=s.call(e,{hash:{},data:t}):(s=e&&e.masthead,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(i)+"\n					<p>",(s=n.subhead)?i=s.call(e,{hash:{},data:t}):(s=e&&e.subhead,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(i)+"</p>\n					<p>",(s=n.startAction)?i=s.call(e,{hash:{},data:t}):(s=e&&e.startAction,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(i)+" "+l((s=n.timeFromDateTime||e&&e.timeFromDateTime,o={hash:{},data:t},s?s.call(e,e&&e.start_time,o):c.call(e,"timeFromDateTime",e&&e.start_time,o)))+" "+l((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"On",o):c.call(e,"t","On",o)))+" "+l((s=n.dateMonth||e&&e.dateMonth,o={hash:{},data:t},s?s.call(e,e&&e.start_date,o):c.call(e,"dateMonth",e&&e.start_date,o)))+"</p>\n				</div>\n			</li>\n			",r}function g(e,t){var r="",i,s;return r+='\n			<li class="no-items">'+l((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"EmptyLinkedBooking",s):c.call(e,"t","EmptyLinkedBooking",s)))+"</li>\n			",r}function y(e,t){var r="",i,s;return r+='\n	<li class="no-items">'+l((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"LinkedItemListEmpty",s):c.call(e,"t","LinkedItemListEmpty",s)))+"</li>\n	",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f="function",l=this.escapeExpression,c=n.helperMissing,h=this;s+='<ul class="icon-action-list">\n	<li id="id-trip-option">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"RenameTrip",a):c.call(t,"t","RenameTrip",a)))+'\n		<div class="icon_edit_32px general-icon"></div>\n		<div class="icon-action button-icon btn_arrow"></div>\n	</li>\n</ul>\n\n<h2 class="component-subheader">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"ManuallyAddedTripItems",a):c.call(t,"t","ManuallyAddedTripItems",a)))+'</h2>\n<ul class="trip-item-list">\n	',o=n.each.call(t,t&&t.manualTripItems,{hash:{},inverse:h.program(3,d,i),fn:h.program(1,p,i),data:i});if(o||o===0)s+=o;s+='\n</ul>\n\n<h2 class="component-subheader">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"ImportedTripItems",a):c.call(t,"t","ImportedTripItems",a)))+'</h2>\n<ul class="trip-item-list imported">\n	',o=n.each.call(t,t&&t.sources,{hash:{},inverse:h.program(10,y,i),fn:h.program(5,v,i),data:i});if(o||o===0)s+=o;return s+='\n</ul>\n\n<div class="actions delete-trip-panel">\n	<button class="warning-button delete-trip submit"><span>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"DeleteTrip",a):c.call(t,"t","DeleteTrip",a)))+'</span><span class="loader light">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Loading",a):c.call(t,"t","Loading",a)))+"</span></button>\n</div>\n",s}),this.Handlebars.templates["templates/trips/edit_trip_item.tmpl"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a="function",f=this.escapeExpression;return s+='<input type="checkbox" id="trip-',(u=n.id)?o=u.call(t,{hash:{},data:i}):(u=t&&t.id,o=typeof u===a?u.call(t,{hash:{},data:i}):u),s+=f(o)+'" value="',(u=n.id)?o=u.call(t,{hash:{},data:i}):(u=t&&t.id,o=typeof u===a?u.call(t,{hash:{},data:i}):u),s+=f(o)+'"/>\n<div class="destination-group">\n	<div class="title">',(u=n.name)?o=u.call(t,{hash:{},data:i}):(u=t&&t.name,o=typeof u===a?u.call(t,{hash:{},data:i}):u),s+=f(o)+'</div>\n	<div class="date">',(u=n.startStopDate)?o=u.call(t,{hash:{},data:i}):(u=t&&t.startStopDate,o=typeof u===a?u.call(t,{hash:{},data:i}):u),s+=f(o)+"</div>\n</div>",s}),this.Handlebars.templates["templates/trips/share_autosuggest_result.tmpl"]=Handlebars.template(function(e,t,n,r,i){function l(e,t){var r="",i;r+='\n<ul class="autosuggest-list">\n',i=n["if"].call(e,e&&e.tripcaseContacts,{hash:{},inverse:f.noop,fn:f.program(2,c,t),data:t});if(i||i===0)r+=i;r+="\n",i=n["if"].call(e,e&&e.phoneContacts,{hash:{},inverse:f.noop,fn:f.program(8,v,t),data:t});if(i||i===0)r+=i;return r+="\n</ul>\n",r}function c(e,t){var r="",i;r+="\n	",i=n.each.call(e,e&&e.tripcaseContacts,{hash:{},inverse:f.noop,fn:f.program(3,h,t),data:t});if(i||i===0)r+=i;return r+="\n",r}function h(e,t){var r="",i,s;r+='\n	<li class="autosuggest-suggestion suggested-contact" data-email="',(s=n.email)?i=s.call(e,{hash:{},data:t}):(s=e&&e.email,i=typeof s===a?s.call(e,{hash:{},data:t}):s),r+=u(i)+'" data-gaaction="AutoFillContact">\n		',i=n["if"].call(e,e&&e.fullName,{hash:{},inverse:f.program(6,d,t),fn:f.program(4,p,t),data:t});if(i||i===0)r+=i;return r+="\n	</li>\n	",r}function p(e,t){var r="",i,s,f;return r+='\n		<p class="tc-label-medium text-ellipsis">'+u((s=n.capitalize||e&&e.capitalize,f={hash:{},data:t},s?s.call(e,e&&e.fullName,f):o.call(e,"capitalize",e&&e.fullName,f)))+'</p>\n		<p class="text-ellipsis">',(s=n.email)?i=s.call(e,{hash:{},data:t}):(s=e&&e.email,i=typeof s===a?s.call(e,{hash:{},data:t}):s),r+=u(i)+"</p>\n		",r}function d(e,t){var r="",i,s;return r+='\n		<p class="tc-label-medium text-ellipsis">',(s=n.email)?i=s.call(e,{hash:{},data:t}):(s=e&&e.email,i=typeof s===a?s.call(e,{hash:{},data:t}):s),r+=u(i)+"</p>\n		",r}function v(e,t){var r="",i,s,a;r+='\n	<li class="autosuggest-header">'+u((s=n.t||e&&e.t,a={hash:{},data:t},s?s.call(e,"PhoneContacts",a):o.call(e,"t","PhoneContacts",a)))+"</li>\n	",i=n.each.call(e,e&&e.phoneContacts,{hash:{},inverse:f.noop,fn:f.program(9,m,t),data:t});if(i||i===0)r+=i;return r+="\n",r}function m(e,t){var r="",i,s;r+='\n	<li class="autosuggest-suggestion suggested-contact" data-email="',(s=n.email)?i=s.call(e,{hash:{},data:t}):(s=e&&e.email,i=typeof s===a?s.call(e,{hash:{},data:t}):s),r+=u(i)+'" data-gaaction="AutoFillPhone">\n		',i=n["if"].call(e,e&&e.fullName,{hash:{},inverse:f.program(6,d,t),fn:f.program(4,p,t),data:t});if(i||i===0)r+=i;return r+="\n	</li>\n	",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,o=n.helperMissing,u=this.escapeExpression,a="function",f=this;return s=n["if"].call(t,t&&t.hasContext,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i}),s||s===0?s:""}),this.Handlebars.templates["templates/trips/share_delete_confirm.tmpl"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c="function";return s+='<div class="trip-items standard-form-panel error-popup">\n		<div class="error-title-group">\n		<div class="general-icon icon_alert_25px"></div>\n		<div class="message"><p>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"DeleteEmailAddr",a):f.call(t,"t","DeleteEmailAddr",a)))+'</p></div>\n	</div>\n\n	<div class="error-message-group">\n		<p>'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"DeleteEmailAddrWarning",a):f.call(t,"t","DeleteEmailAddrWarning",a)))+' <span class="item-title">',(u=n.email)?o=u.call(t,{hash:{},data:i}):(u=t&&t.email,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+'</span></p>\n	</div>\n\n	<div class="button-group display-box">\n		<div class="flex-8">\n			<input id="continue" type="submit" value="'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Delete",a):f.call(t,"t","Delete",a)))+'" class="submit warning-button"></span><span class="loader light">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Loading",a):f.call(t,"t","Loading",a)))+'</span></input>\n		</div>\n		<div class="flex-1"></div>\n		<div class="flex-8">\n			<input id="cancel" type="submit" value="'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Cancel",a):f.call(t,"t","Cancel",a)))+'" class="submit cancel-button"><span class="loader light">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Loading",a):f.call(t,"t","Loading",a)))+'</span></input>\n		</div>\n	</div>\n</div>\n<div class="full-screen-underlay"></div>',s}),this.Handlebars.templates["templates/trips/share_email_details.tmpl"]=Handlebars.template(function(e,t,n,r,i){function p(e,t){return"checked "}function d(e,t){var r="",i,s;return r+='\n				<p class="help-text">'+l((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"ShareUpdates",s):f.call(e,"t","ShareUpdates",s)))+"</p>\n			",r}function v(e,t){var r="",i,s;return r+='\n				<p class="help-text">'+l((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"OnlyAvailableForFutureFlights",s):f.call(e,"t","OnlyAvailableForFutureFlights",s)))+"</p>\n			",r}function m(e,t){var r="",i,s,o;r+='\n			<li class="checkable">\n				<input type="checkbox" name="arrival-item" data-id="',(s=n.id)?i=s.call(e,{hash:{},data:t}):(s=e&&e.id,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+'" ',i=n["if"].call(e,e&&e.shared,{hash:{},inverse:h.noop,fn:h.program(1,p,t),data:t});if(i||i===0)r+=i;return r+='/>\n				<div class="item-content">\n					<span class="airport-name">',(s=n.arrival_airport_code)?i=s.call(e,{hash:{},data:t}):(s=e&&e.arrival_airport_code,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+" - ",(s=n.arrival_city)?i=s.call(e,{hash:{},data:t}):(s=e&&e.arrival_city,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+'</span>\n					<p class="airport-details">',(s=n.airline_code)?i=s.call(e,{hash:{},data:t}):(s=e&&e.airline_code,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+" ",(s=n.flight_number)?i=s.call(e,{hash:{},data:t}):(s=e&&e.flight_number,i=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(i)+", "+l((s=n.dateMonth||e&&e.dateMonth,o={hash:{},data:t},s?s.call(e,e&&e.scheduled_arrival,o):f.call(e,"dateMonth",e&&e.scheduled_arrival,o)))+", "+l((s=n.yearFull||e&&e.yearFull,o={hash:{},data:t},s?s.call(e,e&&e.scheduled_arrival,o):f.call(e,"yearFull",e&&e.scheduled_arrival,o)))+"</p>\n				</div>\n			</li>\n			",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c="function",h=this;s+='<div class="share-preferences share-panel">\n	<form action="#save-share" id="save-share-form">\n		<ul class="item-list">\n			<li class="deletable">\n				<div class="item-content">',(u=n.email)?o=u.call(t,{hash:{},data:i}):(u=t&&t.email,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+'</div>\n				<div class="small btn warning delete-link" id="delete">\n					<div class="button-icon btn_icon_delete_25px"></div>\n				</div>\n			</li>\n			<li class="checkable">\n				<input type="checkbox" name="itinerary_shared" data-id="itinerary" ',o=n["if"].call(t,t&&t.itinerary_shared,{hash:{},inverse:h.noop,fn:h.program(1,p,i),data:i});if(o||o===0)s+=o;s+='/>\n				<div class="item-content">\n					'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"ShareItinerary",a):f.call(t,"t","ShareItinerary",a)))+'\n					<p class="subtext">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"ShareItineraryDetails",a):f.call(t,"t","ShareItineraryDetails",a)))+'</p>\n				</div>\n			</li>\n		</ul>\n		<h2 class="component-subheader">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"ArrivalUpdates",a):f.call(t,"t","ArrivalUpdates",a)))+'</h2>\n		<ul class="item-list">\n			<li>\n			',o=n["if"].call(t,t&&t.shareItems,{hash:{},inverse:h.program(5,v,i),fn:h.program(3,d,i),data:i});if(o||o===0)s+=o;s+="\n			</li>\n			",o=n.each.call(t,t&&t.shareItems,{hash:{},inverse:h.noop,fn:h.program(7,m,i),data:i});if(o||o===0)s+=o;return s+="\n		</ul>\n	</form>\n</div>",s}),this.Handlebars.templates["templates/trips/share_item.tmpl"]=Handlebars.template(function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},"share_item"}),this.Handlebars.templates["templates/trips/share_list.tmpl"]=Handlebars.template(function(e,t,n,r,i){function p(e,t){var r="",i,s,o;r+='\n	<ul class="item-list list">\n		<li>\n			<div class="item-content">\n				<p class="help-text">'+l((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"EditShare",o):c.call(e,"t","EditShare",o)))+"</p>\n			</div>\n		</li>\n	",i=n.each.call(e,e,{hash:{},inverse:h.noop,fn:h.program(2,d,t),data:t});if(i||i===0)r+=i;return r+="\n	</ul>\n",r}function d(e,t){var r="",i,s;return r+='\n		<li>\n			<div class="item-content" id=',(s=n.id)?i=s.call(e,{hash:{},data:t}):(s=e&&e.id,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(i)+">",(s=n.email)?i=s.call(e,{hash:{},data:t}):(s=e&&e.email,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(i)+"</div>\n		</li>\n	",r}function v(e,t){var r="",i,s;return r+='\n	<ul class="item-list list">\n		<li>\n			<div class="item-content">\n				<p class="help-text">'+l((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"NoContacts",s):c.call(e,"t","NoContacts",s)))+"</p>\n			</div>\n		</li>\n	</ul>\n",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f="function",l=this.escapeExpression,c=n.helperMissing,h=this;s+='<div class="share-list">\n	<form class="standard-form-panel">\n		<ul class="item-list">\n			<li>\n				<label for="email">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"AddEmail",a):c.call(t,"t","AddEmail",a)))+'</label>\n				<input id="email" name="email" type="email" placeholder="'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"ShareContactSearch",a):c.call(t,"t","ShareContactSearch",a)))+'" autocomplete="off" autocapitalize="off" autocorrect="off" />\n				<button class="button-sm compact-submit">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Add",a):c.call(t,"t","Add",a)))+'</button>\n			</li>\n		</ul>\n	</form>\n	<div id="suggested-contacts"></div>\n\n	<h2 class="component-subheader">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"CurrentlyNotifying",a):c.call(t,"t","CurrentlyNotifying",a)))+'</h2>\n	<div class="list-loader">\n			<div class="list-item">\n				<div class="details">\n						<a class="item-title action no-icon"><span class="loader">\n						</span></a>\n				</div>\n			</div>\n	</div>\n',o=n["if"].call(t,t,{hash:{},inverse:h.program(4,v,i),fn:h.program(1,p,i),data:i});if(o||o===0)s+=o;return s+="\n\n</div>",s}),this.Handlebars.templates["templates/trips/trip.tmpl"]=Handlebars.template(function(e,t,n,r,i){function p(e,t){var r="",i,s;return r+='\n			<div class="destination-group__traveler">',(s=n.traveler_name)?i=s.call(e,{hash:{},data:t}):(s=e&&e.traveler_name,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(i)+"</div>\n		",r}function d(e,t){var r="",i;r+="\n			",i=n["if"].call(e,e&&e.for_business,{hash:{},inverse:h.noop,fn:h.program(4,v,t),data:t});if(i||i===0)r+=i;return r+="\n		",r}function v(e,t){var r="",i,s;return r+='\n				<div class="destination-group__tags">\n					<div class="destination-group__tags__tag--business">'+l((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"Business",s):c.call(e,"t","Business",s)))+"</div>\n				</div>\n			",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f="function",l=this.escapeExpression,c=n.helperMissing,h=this;s+='<div class="preview">\n	<img src="',(u=n.previewUrl)?o=u.call(t,{hash:{},data:i}):(u=t&&t.previewUrl,o=typeof u===f?u.call(t,{hash:{},data:i}):u),s+=l(o)+'" height="65" width="65" alt="',(u=n.destination)?o=u.call(t,{hash:{},data:i}):(u=t&&t.destination,o=typeof u===f?u.call(t,{hash:{},data:i}):u),s+=l(o)+'"/>\n</div>\n<div class="destination-group">\n	<div class="destination-group__panel">\n		',o=n["if"].call(t,t&&t.isFollowing,{hash:{},inverse:h.program(3,d,i),fn:h.program(1,p,i),data:i});if(o||o===0)s+=o;return s+='\n		<div class="destination-group__date">'+l((u=n.tripStart||t&&t.tripStart,a={hash:{},data:i},u?u.call(t,t&&t.start_time,a):c.call(t,"tripStart",t&&t.start_time,a)))+'</div>\n	</div>\n	<div class="title">',(u=n.name)?o=u.call(t,{hash:{},data:i}):(u=t&&t.name,o=typeof u===f?u.call(t,{hash:{},data:i}):u),s+=l(o)+'</div>\n	<div class="city-state">',(u=n.destination)?o=u.call(t,{hash:{},data:i}):(u=t&&t.destination,o=typeof u===f?u.call(t,{hash:{},data:i}):u),s+=l(o)+"</div>\n</div>\n",s}),this.Handlebars.templates["templates/trips/trip_list.tmpl"]=Handlebars.template(function(e,t,n,r,i){function c(e,t){var r="",i,s;r+='\n	<li class="empty">\n		<div class="title">',(s=n.emptyMessage)?i=s.call(e,{hash:{},data:t}):(s=e&&e.emptyMessage,i=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=a(i)+"</div>\n		",i=n["if"].call(e,e&&e.isFollowingTrips,{hash:{},inverse:l.program(4,p,t),fn:l.program(2,h,t),data:t});if(i||i===0)r+=i;return r+="\n	</li>\n	",r}function h(e,t){var r="",i,s;return r+="\n			<p>"+a((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"EncourageFriendsToShare",s):u.call(e,"t","EncourageFriendsToShare",s)))+"</p>\n		",r}function p(e,t){var r="",i,s;return r+="\n			<p>"+a((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"NoTripsInstruct",s):u.call(e,"t","NoTripsInstruct",s)))+' <a href="mailto:'+a((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"TripsEmail",s):u.call(e,"t","TripsEmail",s)))+'">'+a((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"TripsEmail",s):u.call(e,"t","TripsEmail",s)))+"</a></p>\n		",r}function d(e,t){var r="",i,s;return r+='\n<ul class="js-load-past-following-trips">\n	<li class="past-following-button">\n		<span>'+a((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"ShowPastFollowingTrips",s):u.call(e,"t","ShowPastFollowingTrips",s)))+'</span>\n		<div class="loader loader--inline"></div>\n	</li>\n</ul>\n',r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=n.helperMissing,a=this.escapeExpression,f="function",l=this;s+='<ul class="list-panel">\n	',o=n["if"].call(t,t&&t.isEmpty,{hash:{},inverse:l.noop,fn:l.program(1,c,i),data:i});if(o||o===0)s+=o;s+="\n</ul>\n",o=n["if"].call(t,t&&t.showPastFollowingTripsLoadButton,{hash:{},inverse:l.noop,fn:l.program(6,d,i),data:i});if(o||o===0)s+=o;return s+="\n",s}),this.Handlebars.templates["templates/user/forgot_password.tmpl"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='<form action="#forgot-password-user" id="forgot-password-form" class="standard-form-panel">\n\n	<div class="instruction">\n		<p class="instruction-info">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"ResetPrompt",u):a.call(t,"t","ResetPrompt",u)))+'</p>\n	</div>\n\n	<div id="email-group" class="input-group">\n		<div class="label"><p>'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"Email",u):a.call(t,"t","Email",u)))+'</p></div>\n		<div class="input-container"><input id="email" name="email" type="email"/></div>\n	</div>\n\n	<div class="actions">\n		<button class="submit"><span>'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"ResetPassword",u):a.call(t,"t","ResetPassword",u)))+'</span><span class="loader light">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"Loading",u):a.call(t,"t","Loading",u)))+"</span></button>\n	</div>\n\n</form>\n\n",s}),this.Handlebars.templates["templates/user/forgot_password_confirm.tmpl"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c="function";return s+='<form action="#forgot-password-confirm" id="forgot-password-confirm-form" class="standard-form-panel">\n\n	<div class="instruction-header">\n		'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"ResetSent",a):f.call(t,"t","ResetSent",a)))+" ",(u=n.emailaddr)?o=u.call(t,{hash:{},data:i}):(u=t&&t.emailaddr,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+'\n	</div>\n\n	<div class="instruction">\n		<p class="instruction-info">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"ResetInstruction",a):f.call(t,"t","ResetInstruction",a)))+'</p>\n	</div>\n\n	<div class="actions">\n		<button class="submit">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"Continue",a):f.call(t,"t","Continue",a)))+"</button>\n	</div>\n\n</form>\n",s}),this.Handlebars.templates["templates/user/sign_up.tmpl"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='<form action="#sign-up-user" id="sign-up-form" class="standard-form-panel">\n	<div class="form-group-top">\n		<button type="button" id="facebook">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"SignUpWithFacebook",u):a.call(t,"t","SignUpWithFacebook",u)))+'</button>\n		<div class="horizontal-divider-dark-gray">\n			<span class="horizontal-divider-text">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"or",u):a.call(t,"t","or",u)))+'</span>\n			<hr class="horizontal-divider-dividers">\n		</div>\n	</div>\n	<div id="first-name-group" class="input-group">\n		<div class="label"><p>'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"FirstName",u):a.call(t,"t","FirstName",u)))+'</p></div>\n		<div class="input-container"><input id="firstname" name="firstname" type="text" autocomplete="off" autocapitalize="off" autocorrect="off" /></div>\n	</div>\n\n	<div id="last-name-group" class="input-group">\n		<div class="label"><p>'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"LastName",u):a.call(t,"t","LastName",u)))+'</p></div>\n		<div class="input-container"><input id="lastname" name="lastname" type="text" autocomplete="off" autocapitalize="off" autocorrect="off" /></div>\n	</div>\n\n	<div id="email-group" class="input-group">\n		<div class="label"><p>'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"Email",u):a.call(t,"t","Email",u)))+'</p></div>\n		<div class="input-container"><input id="email" name="email" type="text" autocomplete="off" autocapitalize="off" autocorrect="off" /></div>\n	</div>\n\n	<div id="password-group" class="input-group">\n		<div class="label"><p>'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"Password",u):a.call(t,"t","Password",u)))+'</p></div>\n		<div class="input-container"><input id="password" name="password" type="password" autocomplete="off" autocapitalize="off" autocorrect="off" /></div>\n	</div>\n\n	<div id="password-confirm-group" class="input-group">\n		<div class="label"><p>'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"ConfirmPassword",u):a.call(t,"t","ConfirmPassword",u)))+'</p></div>\n		<div class="input-container"><input id="passwordconfirm" name="passwordconfirm" type="password" autocomplete="off" autocapitalize="off" autocorrect="off" /></div>\n	</div>\n\n	<div class="actions">\n		<button class="submit"><span>'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"Continue",u):a.call(t,"t","Continue",u)))+'</span><span class="loader light">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"Loading",u):a.call(t,"t","Loading",u)))+'</span></button>\n		<p class="return-to-sign-in">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"AlreadyHaveAccount",u):a.call(t,"t","AlreadyHaveAccount",u)))+' <a href="" id="return-to-sign-in-link">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"SignIn",u):a.call(t,"t","SignIn",u)))+'</a></p>\n	</div>\n</form>\n\n<p id="terms-page" class="background-floating-link"><a href="#">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"LegalNotices",u):a.call(t,"t","LegalNotices",u)))+"</a></p>\n\n",s}),this.Handlebars.templates["templates/user/sign_up_confirm.tmpl"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='<form action="#sign-up-confirm" id="sign-up-confirm-form" class="standard-form-panel">\n	<div class="instruction">\n		<p class="instruction-info">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"SignUpCompleteConfirmation",u):a.call(t,"t","SignUpCompleteConfirmation",u)))+'</p>\n	</div>\n\n	<div class="actions">\n		<button class="submit">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"OK",u):a.call(t,"t","OK",u)))+"</button>\n	</div>\n</form>\n",s}),this.Handlebars.templates["templates/user/terms.tmpl"]=Handlebars.template(function(e,t,n,r,i){function l(e,t){var r="",i,s;return r+='\n	<form id="termsNav" name="termsNav" class="view-toggle three">\n		<label>\n			<input type="radio" name="termsPage" value="termsConditions" checked="checked">\n			<span>'+a((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"TermsConditions",s):u.call(e,"t","TermsConditions",s)))+'</span>\n		</label>\n		<label>\n			<input type="radio" name="termsPage" value="privacy">\n			<span>'+a((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"PrivacyPolicy",s):u.call(e,"t","PrivacyPolicy",s)))+'</span>\n		</label>\n		<label>\n			<input type="radio" name="termsPage" value="cookies">\n			<span>'+a((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"CookiesPolicy",s):u.call(e,"t","CookiesPolicy",s)))+"</span>\n		</label>\n	</form>\n",r}function c(e,t){return" accept"}function h(e,t){var i="",s;i+='\n	<div class="terms-page" id="privacy" >\n		',s=f.invokePartial(r.PrivacyPolicy,"PrivacyPolicy",e,n,r,t);if(s||s===0)i+=s;i+='\n	</div>\n	<div class="terms-page" id="cookies">\n		',s=f.invokePartial(r.CookiesPolicy,"CookiesPolicy",e,n,r,t);if(s||s===0)i+=s;return i+="\n	</div>\n",i}function p(e,t){var r="",i,s;return r+='\n	<div class="button-group standard-form-panel display-box">\n		<div class="accept flex-9">\n			<input id="accept-terms" type="submit" value="'+a((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"Accept",s):u.call(e,"t","Accept",s)))+'" class="submit submit-button" />\n		</div>\n		<div class="deny flex-7">\n			<input id="deny-terms" type="submit" value="'+a((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"Deny",s):u.call(e,"t","Deny",s)))+'" class="submit cancel-button" />\n		</div>\n	</div>\n',r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=this.merge(r,e.partials),i=i||{};var s="",o,u=n.helperMissing,a=this.escapeExpression,f=this;s+='<div class="legal-terms">\n',o=n.unless.call(t,t&&t.prompt,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;s+='\n	<div class="terms-page',o=n["if"].call(t,t&&t.prompt,{hash:{},inverse:f.noop,fn:f.program(3,c,i),data:i});if(o||o===0)s+=o;s+='" id="termsConditions" >\n		',o=f.invokePartial(r.TermsConditions,"TermsConditions",t,n,r,i);if(o||o===0)s+=o;s+="\n	</div>\n",o=n.unless.call(t,t&&t.prompt,{hash:{},inverse:f.noop,fn:f.program(5,h,i),data:i});if(o||o===0)s+=o;s+="\n</div>\n",o=n["if"].call(t,t&&t.prompt,{hash:{},inverse:f.noop,fn:f.program(7,p,i),data:i});if(o||o===0)s+=o;return s}),this.Handlebars.templates["templates/util/external_url_viewer.tmpl"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c="function";return s+='<div class="app-header">\n	<button class="button single-header-action">'+l((u=n.t||t&&t.t,a={hash:{},data:i},u?u.call(t,"BackToYourTrip",a):f.call(t,"t","BackToYourTrip",a)))+'</button>\n</div>\n<div style="position: absolute; top:43px; bottom: 0; right: 0; left: 0">\n	<iframe src="',(u=n.url)?o=u.call(t,{hash:{},data:i}):(u=t&&t.url,o=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(o)+'" seamless="seamless" height="100%" width="100%"></iframe>\n</div>\n',s}),this.Handlebars.templates["templates/vehicles/vehicle_location_detail.tmpl"]=Handlebars.template(function(e,t,n,r,i){function c(e,t){var r="",i,s,o;r+="\n",i=n["if"].call(e,e&&e.end_info,{hash:{},inverse:u.noop,fn:u.program(2,h,t),data:t});if(i||i===0)r+=i;r+='\n<div class="trip-component trip-item-detail vehicle-detail">\n	<div class="vehicle-location">\n		<div class="vehicle-location-info">\n		',i=n["if"].call(e,e&&e.label,{hash:{},inverse:u.noop,fn:u.program(5,d,t),data:t});if(i||i===0)r+=i;r+="\n		",i=n.each.call(e,e&&e.address_lines,{hash:{},inverse:u.noop,fn:u.program(7,v,t),data:t});if(i||i===0)r+=i;r+='\n		</div>\n		<div class="map map-drop-down-button" data-segment="',(s=n.location)?i=s.call(e,{hash:{},data:t}):(s=e&&e.location,i=typeof s===l?s.call(e,{hash:{},data:t}):s),r+=f(i)+'">\n			<div class="button-icon btn_icon_map_25px"></div>\n		</div>\n	</div>\n	<ul class="vehicle-location-numbers">\n	',i=n.each.call(e,e&&e.phoneNumbers,{hash:{},inverse:u.noop,fn:u.program(9,m,t),data:t});if(i||i===0)r+=i;r+='\n	</ul>\n	<h2 class="component-subheader">'+f((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"HoursOfOperation",o):a.call(e,"t","HoursOfOperation",o)))+"</h2>\n	<section>\n		",i=n.each.call(e,e&&e.operation_times,{hash:{},inverse:u.program(14,b,t),fn:u.program(11,g,t),data:t});if(i||i===0)r+=i;r+='\n	</section>\n	<h2 class="component-subheader">'+f((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"GeneralInformation",o):a.call(e,"t","GeneralInformation",o)))+'</h2>\n	<section>\n		<p class="description ellipsis">\n			',i=n["if"].call(e,e&&e.generalInformation,{hash:{},inverse:u.program(18,E,t),fn:u.program(16,w,t),data:t});if(i||i===0)r+=i;r+='\n		</p>\n	</section>\n	<h2 class="component-subheader">'+f((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"AirportShuttleInformation",o):a.call(e,"t","AirportShuttleInformation",o)))+"</h2>\n	<section>\n		",i=n.each.call(e,e&&e.shuttle_details,{hash:{},inverse:u.program(14,b,t),fn:u.program(20,S,t),data:t});if(i||i===0)r+=i;return r+="\n	</section>\n</div>\n",r}function h(e,t){var r="",i,s,o;r+='\n<div id="nav" class="nav"><div class="segmented-button-bar">\n	<ul class=".vehicle-location-segmented-bar">\n		<li class="vehicle-location-segmented-button active ',i=(s=n.if_equal||e&&e.if_equal,o={hash:{},inverse:u.noop,fn:u.program(3,p,t),data:t},s?s.call(e,e&&e.location,"start",o):a.call(e,"if_equal",e&&e.location,"start",o));if(i||i===0)r+=i;r+='" id="pickup">\n			<p>'+f((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"PickUp",o):a.call(e,"t","PickUp",o)))+'</p>\n		</li>\n		<li class="vehicle-location-segmented-button active ',i=(s=n.if_equal||e&&e.if_equal,o={hash:{},inverse:u.noop,fn:u.program(3,p,t),data:t},s?s.call(e,e&&e.location,"end",o):a.call(e,"if_equal",e&&e.location,"end",o));if(i||i===0)r+=i;return r+='" id="dropoff">\n			<p>'+f((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"DropOff",o):a.call(e,"t","DropOff",o)))+"</p>\n		</li>\n	</ul>\n</div></div>\n",r}function p(e,t){return"selected"}function d(e,t){var r="",i,s;return r+="<p>",(s=n.label)?i=s.call(e,{hash:{},data:t}):(s=e&&e.label,i=typeof s===l?s.call(e,{hash:{},data:t}):s),r+=f(i)+"</p>",r}function v(e,t){var n="";return n+="\n			<p>"+f(typeof e===l?e.apply(e):e)+"</p>\n		",n}function m(e,t){var r="",i,s,o;return r+='\n		<li>\n			<span class="location-number">'+f((s=n.phone||e&&e.phone,o={hash:{},data:t},s?s.call(e,e&&e.number,e&&e.type,o):a.call(e,"phone",e&&e.number,e&&e.type,o)))+'</span>\n			<div class="phone-actionable phone-drop-down-button ',(s=n.type)?i=s.call(e,{hash:{},data:t}):(s=e&&e.type,i=typeof s===l?s.call(e,{hash:{},data:t}):s),r+=f(i)+'">\n				<a href="tel:',(s=n.number)?i=s.call(e,{hash:{},data:t}):(s=e&&e.number,i=typeof s===l?s.call(e,{hash:{},data:t}):s),r+=f(i)+'" class="button-icon btn_icon_call_25px"></a>\n			</div>\n		</li>\n	',r}function g(e,t){var r="",i;r+="\n			",i=n["if"].call(e,e&&e.start_time,{hash:{},inverse:u.noop,fn:u.program(12,y,t),data:t});if(i||i===0)r+=i;return r+="\n		",r}function y(e,t){var r="",i,s;return r+='\n				<p class="description">'+f((i=n.hours||e&&e.hours,s={hash:{},data:t},i?i.call(e,e&&e.start_day,e&&e.end_day,e&&e.start_time,e&&e.end_time,s):a.call(e,"hours",e&&e.start_day,e&&e.end_day,e&&e.start_time,e&&e.end_time,s)))+"</p>\n			",r}function b(e,t){var r="",i,s;return r+='\n			<p class="description">'+f((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"NoDescriptionAvailable",s):a.call(e,"t","NoDescriptionAvailable",s)))+"</p>\n		",r}function w(e,t){var r="",i,s,o;r+="\n				",(s=n.generalInformation)?i=s.call(e,{hash:{},data:t}):(s=e&&e.generalInformation,i=typeof s===l?s.call(e,{hash:{},data:t}):s);if(i||i===0)r+=i;return r+=' <a class="read-more">'+f((s=n.t||e&&e.t,o={hash:{},data:t},s?s.call(e,"ReadMore",o):a.call(e,"t","ReadMore",o)))+"</a>\n			",r}function E(e,t){var r="",i,s;return r+="\n				"+f((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"NoDescriptionAvailable",s):a.call(e,"t","NoDescriptionAvailable",s)))+"\n			",r}function S(e,t){var n="",r;n+='\n			<p class="description">',r=typeof e===l?e.apply(e):e;if(r||r===0)n+=r;return n+="</p>\n		",n}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this,a=n.helperMissing,f=this.escapeExpression,l="function";o=n["with"].call(t,t&&t.item,{hash:{},inverse:u.noop,fn:u.program(1,c,i),data:i});if(o||o===0)s+=o;return s+="\n\n\n\n\n\n\n\n",s}),this.Handlebars.templates["templates/vehicles/vehicle_locations_index.tmpl"]=Handlebars.template(function(e,t,n,r,i){function c(e,t){return'\n		<div class="list-item actionable">\n			<div class="details">\n				<div class="item-title action">\n					<p>Your search returned 0 results</p>\n				</div>\n			</div>\n		</div>\n'}function h(e,t){var r="",i,s,o;r+="\n",i=(s=n.each_with_index||e&&e.each_with_index,o={hash:{},inverse:f.noop,fn:f.programWithDepth(4,p,t,e),data:t},s?s.call(e,e&&e.locations,o):l.call(e,"each_with_index",e&&e.locations,o));if(i||i===0)r+=i;return r+="\n",r}function p(e,t,r){var i="",s,o,c;i+='\n	<div data-index="',(o=n.index)?s=o.call(e,{hash:{},data:t}):(o=e&&e.index,s=typeof o===u?o.call(e,{hash:{},data:t}):o),i+=a(s)+'" class="list-item actionable chevron-lift">\n		<div class="display-box">\n			<div class="flex-8 item-title action">\n				<h2>',(o=n.name)?s=o.call(e,{hash:{},data:t}):(o=e&&e.name,s=typeof o===u?o.call(e,{hash:{},data:t}):o),i+=a(s)+"</h2>\n				",s=n.each.call(e,e&&e.address_lines,{hash:{},inverse:f.noop,fn:f.program(5,d,t),data:t});if(s||s===0)i+=s;i+='\n			</div>\n			<div class="button-icon btn_arrow"></div>\n			<div class="flex-2 item-sub-title lower right-align"><p><b>',(o=n.search_distance_mi)?s=o.call(e,{hash:{},data:t}):(o=e&&e.search_distance_mi,s=typeof o===u?o.call(e,{hash:{},data:t}):o),i+=a(s)+"</b></p><p>mi away</p></div>\n		</div>\n	</div>\n	",s=(o=n.if_is_nudgeable||r&&r.if_is_nudgeable,c={hash:{index:e&&e.index,length:(s=r&&r.locations,s==null||s===!1?s:s.length)},inverse:f.noop,fn:f.program(7,v,t),data:t},o?o.call(e,c):l.call(e,"if_is_nudgeable",c));if(s||s===0)i+=s;return i+="\n",i}function d(e,t){var n="";return n+='\n					<p class="item-sub-title">'+a(typeof e===u?e.apply(e):e)+"</p>\n				",n}function v(e,t){return'\n	<div class="nudgeable list-item actionable" >\n		<div class="details">\n			<div class="item-title action">\n				<div class="icon_add_32px general-icon"></div>\n			   <h2>Don\'t see the ground transportation you want? Add it manually.</h2>\n			</div>\n			<div class="button-icon btn_arrow"></div>\n		</div>\n	</div>\n	'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this,l=n.helperMissing;o=n.unless.call(t,t&&t.locations,{hash:{},inverse:f.program(3,h,i),fn:f.program(1,c,i),data:i});if(o||o===0)s+=o;return s+='\n	<div class="nudgeable list-item actionable" >\n		<div class="details">\n			<div class="item-title action">\n				<div class="icon_add_32px general-icon"></div>\n			   <h2>Don\'t see the ground transportation you want? Add it manually.</h2>\n			</div>\n			<div class="button-icon btn_arrow"></div>\n		</div>\n	</div>\n',s}),this.Handlebars.templates["templates/walk_through/walk_through_page.tmpl"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='<li class="walk-through-page page-0">\n	<div class="walk-through-page-image walk-through-tc-logo"></div>\n	<h2 class="walk-through-page-header">\n		<p class="walk-through-page-header-line">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"Congrats",u):a.call(t,"t","Congrats",u)))+'!</p>\n		<p class="walk-through-page-header-line">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"WalkThroughPage0Caption1",u):a.call(t,"t","WalkThroughPage0Caption1",u)))+'</p>\n		<p class="walk-through-page-header-line">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"WalkThroughPage0Caption2",u):a.call(t,"t","WalkThroughPage0Caption2",u)))+'</p>\n	</h2>\n	<p class="walk-through-page-caption">\n		'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"SwipeToLearnMore",u):a.call(t,"t","SwipeToLearnMore",u)))+' <span class=\'walk-through-page-image walk-through-arrow\'></span>\n	</p>\n</li>\n<li class="walk-through-page page-1">\n	<h2 class="walk-through-page-header">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"MovingIn",u):a.call(t,"t","MovingIn",u)))+'</h2>\n	<p class="walk-through-page-caption">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"WalkThroughPage1Caption1",u):a.call(t,"t","WalkThroughPage1Caption1",u)))+'</p>\n	<p class="walk-through-page-caption">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"WalkThroughPage1Caption2",u):a.call(t,"t","WalkThroughPage1Caption2",u)))+'</p>\n	<div class="walk-through-page-image"></div>\n</li>\n<li class="walk-through-page page-2">\n	<h2 class="walk-through-page-header">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"GettingAround",u):a.call(t,"t","GettingAround",u)))+'</h2>\n	<p class="walk-through-page-caption">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"WalkThroughPage2Caption1",u):a.call(t,"t","WalkThroughPage2Caption1",u)))+'</p>\n	<p class="walk-through-page-caption">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"WalkThroughPage2Caption2",u):a.call(t,"t","WalkThroughPage2Caption2",u)))+'</p>\n	<div class="walk-through-page-image"></div>\n</li>\n<li class="walk-through-page page-3">\n	<h2 class="walk-through-page-header">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"StayingConnected",u):a.call(t,"t","StayingConnected",u)))+'</h2>\n	<p class="walk-through-page-caption">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"WalkThroughPage3Caption1",u):a.call(t,"t","WalkThroughPage3Caption1",u)))+'</p>\n	<p class="walk-through-page-caption">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"WalkThroughPage3Caption2",u):a.call(t,"t","WalkThroughPage3Caption2",u)))+'</p>\n	<div class="walk-through-page-image"></div>\n</li>\n',s}),this.Handlebars.templates["templates/walk_through/walk_through_page_indicator.tmpl"]=Handlebars.template(function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<ul class="page-indicators">\n	<li class="page-indicator indicator-0"></li>\n	<li class="page-indicator indicator-1"></li>\n	<li class="page-indicator indicator-2"></li>\n	<li class="page-indicator indicator-3"></li>\n</ul>'}),this.Handlebars.templates["templates/walk_through/walk_through_toolbar.tmpl"]=Handlebars.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='<button class="tc-button-grey tc-button-on-dark-bg tc-button-rect-long"  id="sign-in">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"SignIn",u):a.call(t,"t","SignIn",u)))+'</button>\n<button class="tc-button-green tc-button-on-dark-bg tc-button-rect-long" id="sign-up">'+f((o=n.t||t&&t.t,u={hash:{},data:i},o?o.call(t,"SignUp",u):a.call(t,"t","SignUp",u)))+"</button>",s}),this.Handlebars.templates["templates/weather/weather.tmpl"]=Handlebars.template(function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},"<div id='weather-now'></div>\n<div id='weather-forecast'></div>"}),this.Handlebars.templates["templates/weather/weather_forecast_list.tmpl"]=Handlebars.template(function(e,t,n,r,i){function c(e,t){var r="",i,s,o;r+="\n    <div class=\"forecast-group\">\n      <div class='date-group'>\n        <div class='day'>"+f((s=n.dayAbbreviated||e&&e.dayAbbreviated,o={hash:{},data:t},s?s.call(e,e&&e.day,o):a.call(e,"dayAbbreviated",e&&e.day,o)))+"</div><div class='w-clear'></div>\n        <div class='date'>",(s=n.monthAndDay)?i=s.call(e,{hash:{},data:t}):(s=e&&e.monthAndDay,i=typeof s===u?s.call(e,{hash:{},data:t}):s);if(i||i===0)r+=i;r+="</div><div class='w-clear'></div>\n      </div>\n\n      <div class='weather-icon ",(s=n.icon_style)?i=s.call(e,{hash:{},data:t}):(s=e&&e.icon_style,i=typeof s===u?s.call(e,{hash:{},data:t}):s),r+=f(i)+"'></div>\n\n      <div class='temp-group'>\n        <div class='high-temp'>\n          ",i=n["if"].call(e,e&&e.isFahrenheit,{hash:{},inverse:l.program(4,p,t),fn:l.program(2,h,t),data:t});if(i||i===0)r+=i;r+="\n        </div>\n        <div class='low-temp'>\n          ",i=n["if"].call(e,e&&e.isFahrenheit,{hash:{},inverse:l.program(8,v,t),fn:l.program(6,d,t),data:t});if(i||i===0)r+=i;return r+="\n        </div><div class='w-clear'></div>\n        <div class='condition'>",(s=n.condition)?i=s.call(e,{hash:{},data:t}):(s=e&&e.condition,i=typeof s===u?s.call(e,{hash:{},data:t}):s),r+=f(i)+"</div><div class='w-clear'></div>\n      </div>\n\n      <div class='precip-chance'>",(s=n.precipitation_chance)?i=s.call(e,{hash:{},data:t}):(s=e&&e.precipitation_chance,i=typeof s===u?s.call(e,{hash:{},data:t}):s),r+=f(i)+"</div>\n    </div>\n  ",r}function h(e,t){var r="",i,s;r+="\n            ",(s=n.high_fahrenheit)?i=s.call(e,{hash:{},data:t}):(s=e&&e.high_fahrenheit,i=typeof s===u?s.call(e,{hash:{},data:t}):s);if(i||i===0)r+=i;return r+="\n          ",r}function p(e,t){var r="",i,s;r+="\n            ",(s=n.high_celsius)?i=s.call(e,{hash:{},data:t}):(s=e&&e.high_celsius,i=typeof s===u?s.call(e,{hash:{},data:t}):s);if(i||i===0)r+=i;return r+="\n          ",r}function d(e,t){var r="",i,s;r+="\n            ",(s=n.low_fahrenheit)?i=s.call(e,{hash:{},data:t}):(s=e&&e.low_fahrenheit,i=typeof s===u?s.call(e,{hash:{},data:t}):s);if(i||i===0)r+=i;return r+="\n          ",r}function v(e,t){var r="",i,s;r+="\n            ",(s=n.low_celsius)?i=s.call(e,{hash:{},data:t}):(s=e&&e.low_celsius,i=typeof s===u?s.call(e,{hash:{},data:t}):s);if(i||i===0)r+=i;return r+="\n          ",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=n.helperMissing,f=this.escapeExpression,l=this;s+="<div class='forecast-title-pane'>\n	<div class='date-label'>Date</div>\n	<div class='forecast-label'>Forecast</div>\n	<div class='precip-chance-label'>Precip</div>\n</div>\n<div id='weather-forecast-list'>\n  ",o=n.each.call(t,t,{hash:{},inverse:l.noop,fn:l.program(1,c,i),data:i});if(o||o===0)s+=o;return s+="\n</div>",s}),this.Handlebars.templates["templates/weather/weather_now.tmpl"]=Handlebars.template(function(e,t,n,r,i){function l(e,t){var r="",i,s,l;r+="\n	<div class='location-container'>\n		<div class='location'>",(s=n.generalLocation)?i=s.call(e,{hash:{},data:t}):(s=e&&e.generalLocation,i=typeof s===o?s.call(e,{hash:{},data:t}):s),r+=u(i)+'</div>\n\n		<input class="checkbox-slider weather-units"\n    ',i=n["if"].call(e,e&&e.isFahrenheit,{hash:{},inverse:a.noop,fn:a.program(2,c,t),data:t});if(i||i===0)r+=i;r+='\n    id="weather-units" name="weather-units" type="checkbox" value="">\n\n	</div>\n\n	<div class=\'stats-container\'>\n		<div class=\'now\'>'+u((s=n.t||e&&e.t,l={hash:{},data:t},s?s.call(e,"Now",l):f.call(e,"t","Now",l)))+" </div><div class='stat-label'>("+u((s=n.t||e&&e.t,l={hash:{},data:t},s?s.call(e,"Updated",l):f.call(e,"t","Updated",l)))+" ",(s=n.updated_at)?i=s.call(e,{hash:{},data:t}):(s=e&&e.updated_at,i=typeof s===o?s.call(e,{hash:{},data:t}):s),r+=u(i)+")</div><div class='w-clear'></div>\n\n		<div class='temp' id='current-temp'>\n      ",i=n["if"].call(e,e&&e.isFahrenheit,{hash:{},inverse:a.program(6,p,t),fn:a.program(4,h,t),data:t});if(i||i===0)r+=i;r+="\n    </div><div class='w-clear'></div>\n\n		<div class='condition'>"+u((i=(i=e&&e.current_conditions,i==null||i===!1?i:i.condition),typeof i===o?i.apply(e):i))+"</div><div class='w-clear'></div>\n\n		<div class='stat-label stat-fixed-width'>"+u((s=n.t||e&&e.t,l={hash:{},data:t},s?s.call(e,"Humidity",l):f.call(e,"t","Humidity",l)))+":</div> <div class='stat-value'>"+u((i=(i=e&&e.current_conditions,i==null||i===!1?i:i.humidity),typeof i===o?i.apply(e):i))+"</div><div class='w-clear'></div>\n		<div class='stat-label stat-fixed-width'>"+u((s=n.t||e&&e.t,l={hash:{},data:t},s?s.call(e,"Visibility",l):f.call(e,"t","Visibility",l)))+":</div> <div class='stat-value' id='current-visibility'>\n      ",i=n["if"].call(e,e&&e.isFahrenheit,{hash:{},inverse:a.program(10,v,t),fn:a.program(8,d,t),data:t});if(i||i===0)r+=i;r+="\n    </div><div class='w-clear'></div>\n		<div class='stat-label stat-fixed-width'>"+u((s=n.t||e&&e.t,l={hash:{},data:t},s?s.call(e,"Wind",l):f.call(e,"t","Wind",l)))+":</div> <div class='stat-value' id='current-wind'>"+u((i=(i=e&&e.current_conditions,i==null||i===!1?i:i.wind_direction),typeof i===o?i.apply(e):i))+" "+u((s=n.t||e&&e.t,l={hash:{},data:t},s?s.call(e,"At",l):f.call(e,"t","At",l)))+'\n      <span id="current-wind-value">\n        ',i=n["if"].call(e,e&&e.isFahrenheit,{hash:{},inverse:a.program(14,g,t),fn:a.program(12,m,t),data:t});if(i||i===0)r+=i;return r+="\n      </span>\n    </div><div class='w-clear'></div>\n	</div>\n\n	<div class='weather-icon ",(s=n.weatherCurrentIconUrl)?i=s.call(e,{hash:{},data:t}):(s=e&&e.weatherCurrentIconUrl,i=typeof s===o?s.call(e,{hash:{},data:t}):s),r+=u(i)+"'></div>\n",r}function c(e,t){return'\n      checked="checked"\n    '}function h(e,t){var n="",r;n+="\n        ",r=(r=(r=e&&e.current_conditions,r==null||r===!1?r:r.fahrenheit),typeof r===o?r.apply(e):r);if(r||r===0)n+=r;return n+="\n      ",n}function p(e,t){var n="",r;n+="\n        ",r=(r=(r=e&&e.current_conditions,r==null||r===!1?r:r.celsius),typeof r===o?r.apply(e):r);if(r||r===0)n+=r;return n+="\n      ",n}function d(e,t){var n="",r;n+="\n        ",r=(r=(r=e&&e.current_conditions,r==null||r===!1?r:r.visibility_sm),typeof r===o?r.apply(e):r);if(r||r===0)n+=r;return n+="\n      ",n}function v(e,t){var n="",r;n+="\n        ",r=(r=(r=e&&e.current_conditions,r==null||r===!1?r:r.visibility_km),typeof r===o?r.apply(e):r);if(r||r===0)n+=r;return n+="\n      ",n}function m(e,t){var n="",r;n+="\n          ",r=(r=(r=e&&e.current_conditions,r==null||r===!1?r:r.wind_mph),typeof r===o?r.apply(e):r);if(r||r===0)n+=r;return n+="\n        ",n}function g(e,t){var n="",r;n+="\n          ",r=(r=(r=e&&e.current_conditions,r==null||r===!1?r:r.wind_kph),typeof r===o?r.apply(e):r);if(r||r===0)n+=r;return n+="\n        ",n}function y(e,t){var r="",i,s;return r+='\n	<div class="instruction">\n		<p class="instruction-info">'+u((i=n.t||e&&e.t,s={hash:{},data:t},i?i.call(e,"WeatherNotAvail",s):f.call(e,"t","WeatherNotAvail",s)))+"</p>\n	</div>\n",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,o="function",u=this.escapeExpression,a=this,f=n.helperMissing;return s=n["if"].call(t,t&&t.current_conditions,{hash:{},inverse:a.program(16,y,i),fn:a.program(1,l,i),data:i}),s||s===0?s:""}),define("precompiled_templates",["handlebars"],function(){}),define("overrides",["jquery","underscore","backbone","handlebars","config","layoutmanager","precompiled_templates"],function(e,t,n,r,i){var s=!0;if(typeof console=="undefined"||typeof console.log=="undefined")console={},s?console.log=function(e){alert(e)}:console.log=function(){};e.support.cors=!0,e.ajaxSetup({xhrFields:{withCredentials:!0},crossDomain:!0}),n.sync=t.wrap(n.sync,function(e,t,n,r){r.url||(r.url=i.apiURL+o(n,"url")),e(t,n,r)}),n.LayoutManager.configure({paths:{layout:"templates/layouts/",template:"templates/"},fetch:function(e){e+=".tmpl";if(!!r.templates)return r.templates[e];var t=this.async();require(["text!"+e],function(e){t(r.compile(e))})},render:function(e,t){var n=e(t);return n}});var o=function(e,n){return!e||!e[n]?null:t.isFunction(e[n])?e[n]():e[n]};String.prototype.supplant=function(e){return this.replace(/\{([^{}]*)\}/g,function(t,n){var r=e[n];return typeof r=="string"||typeof r=="number"?r:t})}}),define("../libs/bower_components/jquery-mobile/js/jquery.mobile.vmouse",["jquery"],function(e){(function(e,t,n,r){function T(e){while(e&&typeof e.originalEvent!="undefined")e=e.originalEvent;return e}function N(t,n){var i=t.type,s,o,a,l,c,h,p,d,v;t=e.Event(t),t.type=n,s=t.originalEvent,o=e.event.props,i.search(/^(mouse|click)/)>-1&&(o=f);if(s)for(p=o.length,l;p;)l=o[--p],t[l]=s[l];i.search(/mouse(down|up)|click/)>-1&&!t.which&&(t.which=1);if(i.search(/^touch/)!==-1){a=T(s),i=a.touches,c=a.changedTouches,h=i&&i.length?i[0]:c&&c.length?c[0]:r;if(h)for(d=0,v=u.length;d<v;d++)l=u[d],t[l]=h[l]}return t}function C(t){var n={},r,s;while(t){r=e.data(t,i);for(s in r)r[s]&&(n[s]=n.hasVirtualBinding=!0);t=t.parentNode}return n}function k(t,n){var r;while(t){r=e.data(t,i);if(r&&(!n||r[n]))return t;t=t.parentNode}return null}function L(){g=!1}function A(){g=!0}function O(){E=0,v.length=0,m=!1,A()}function M(){L()}function _(){D(),c=setTimeout(function(){c=0,O()},e.vmouse.resetTimerDuration)}function D(){c&&(clearTimeout(c),c=0)}function P(t,n,r){var i;if(r&&r[t]||!r&&k(n.target,t))i=N(n,t),e(n.target).trigger(i);return i}function H(t){var n=e.data(t.target,s),r;!m&&(!E||E!==n)&&(r=P("v"+t.type,t),r&&(r.isDefaultPrevented()&&t.preventDefault(),r.isPropagationStopped()&&t.stopPropagation(),r.isImmediatePropagationStopped()&&t.stopImmediatePropagation()))}function B(t){var n=T(t).touches,r,i,o;n&&n.length===1&&(r=t.target,i=C(r),i.hasVirtualBinding&&(E=w++,e.data(r,s,E),D(),M(),d=!1,o=T(t).touches[0],h=o.pageX,p=o.pageY,P("vmouseover",t,i),P("vmousedown",t,i)))}function j(e){if(g)return;d||P("vmousecancel",e,C(e.target)),d=!0,_()}function F(t){if(g)return;var n=T(t).touches[0],r=d,i=e.vmouse.moveDistanceThreshold,s=C(t.target);d=d||Math.abs(n.pageX-h)>i||Math.abs(n.pageY-p)>i,d&&!r&&P("vmousecancel",t,s),P("vmousemove",t,s),_()}function I(e){if(g)return;A();var t=C(e.target),n,r;P("vmouseup",e,t),d||(n=P("vclick",e,t),n&&n.isDefaultPrevented()&&(r=T(e).changedTouches[0],v.push({touchID:E,x:r.clientX,y:r.clientY}),m=!0)),P("vmouseout",e,t),d=!1,_()}function q(t){var n=e.data(t,i),r;if(n)for(r in n)if(n[r])return!0;return!1}function R(){}function U(t){var n=t.substr(1);return{setup:function(){q(this)||e.data(this,i,{});var r=e.data(this,i);r[t]=!0,l[t]=(l[t]||0)+1,l[t]===1&&b.bind(n,H),e(this).bind(n,R),y&&(l.touchstart=(l.touchstart||0)+1,l.touchstart===1&&b.bind("touchstart",B).bind("touchend",I).bind("touchmove",F).bind("scroll",j))},teardown:function(){--l[t],l[t]||b.unbind(n,H),y&&(--l.touchstart,l.touchstart||b.unbind("touchstart",B).unbind("touchmove",F).unbind("touchend",I).unbind("scroll",j));var r=e(this),s=e.data(this,i);s&&(s[t]=!1),r.unbind(n,R),q(this)||r.removeData(i)}}}var i="virtualMouseBindings",s="virtualTouchID",o="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),u="clientX clientY pageX pageY screenX screenY".split(" "),a=e.event.mouseHooks?e.event.mouseHooks.props:[],f=e.event.props.concat(a),l={},c=0,h=0,p=0,d=!1,v=[],m=!1,g=!1,y="addEventListener"in n,b=e(n),w=1,E=0,S,x;e.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500};for(x=0;x<o.length;x++)e.event.special[o[x]]=U(o[x]);y&&n.addEventListener("click",function(t){var n=v.length,r=t.target,i,o,u,a,f,l;if(n){i=t.clientX,o=t.clientY,S=e.vmouse.clickDistanceThreshold,u=r;while(u){for(a=0;a<n;a++){f=v[a],l=0;if(u===r&&Math.abs(f.x-i)<S&&Math.abs(f.y-o)<S||e.data(u,s)===f.touchID){t.preventDefault(),t.stopPropagation();return}}u=u.parentNode}}},!0)})(e,window,document)}),typeof require_config!="undefined"&&require.config(require_config),require(["domReady","app","helpers/device","helpers/error_catcher","timing","overrides","../libs/bower_components/jquery-mobile/js/jquery.mobile.vmouse"],function(e,t,n){e(function(){n.isWrapped()?document.addEventListener("deviceready",function(){t.initialize()},!1):t.initialize()})}),define("main",function(){});